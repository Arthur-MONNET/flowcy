/*! For license information please see main.bb0f93.js.LICENSE.txt */
!function(){"use strict";var e,t,n,r={7577:function(e,t,n){n.d(t,{$C:function(){return _},A1:function(){return Z},CI:function(){return P},DP:function(){return $},Dl:function(){return y},EV:function(){return Y},Ex:function(){return q},F$:function(){return U},Gt:function(){return C},I1:function(){return c},J9:function(){return i},JI:function(){return B},J_:function(){return F},Kg:function(){return T},Kv:function(){return V},Lc:function(){return k},Lo:function(){return z},NH:function(){return E},PH:function(){return O},QZ:function(){return b},SA:function(){return o},Wm:function(){return H},Xv:function(){return N},Y_:function(){return I},_Z:function(){return a},a8:function(){return R},b_:function(){return u},d6:function(){return v},ep:function(){return p},f4:function(){return G},ff:function(){return w},iA:function(){return X},iB:function(){return M},l$:function(){return J},n8:function(){return A},nj:function(){return l},oZ:function(){return L},ow:function(){return f},qr:function(){return D},rG:function(){return s},rc:function(){return d},tP:function(){return h},uS:function(){return g},uk:function(){return m},v$:function(){return W},vA:function(){return r},vh:function(){return S},w1:function(){return Q},xI:function(){return j},xi:function(){return x},zW:function(){return K}});var r=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:"BATCH",actions:t}},i=function(e){return{type:"INIT_CONFIG",config:e}},o=function(e){return{type:"INIT_APP",data:e}},a=function(e){return{type:"UPDATE_MEDIA_QUERIES",isMobile:e}},l=function(e){return{type:"SET_MAP",map:e}},c=function(e){return{type:"SET_COMPONENT",component:e}},s=function(e){return{type:"SCROLL_END",top:e}},u=function(e){return{type:"SET_USER_TOKEN",token:e}},d=function(e){return{type:"SET_USER_ID",client_id:e}},p=function(e){return{type:"SET_FAVORITES_DATA",data:e}},f=function(e){return{type:"SET_APP_LANGUAGE",language:e}},m=function(e){return{type:"SET_APP_LOCKER",lock:e}},h=function(e){return{type:"SET_APP_PANEL_SIZE",size:e}},v=function(e){return{type:"SET_APP_TRACKING",tracking:e,configApp:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}}},_=function(e){return{type:"INIT_MODES",modes:e}},y=function(e){return{type:"HANDLE_MODES_CHANGED",mode:e}},g=function(e){return{type:"INIT_WALKING_SPEEDS",walkingSpeeds:e}},b=function(e){return{type:"INIT_BIKE_SPEEDS",bikeSpeeds:e}},A=function(e){return{type:"INIT_BIKE_PROFILES",bikeProfiles:e}},E=function(e){return{type:"INIT_TRAVEL_SOLUTIONS",travelSolutions:e}},T=function(e){return{type:"HANDLE_WALKING_SPEEDS_CHANGED",walkingSpeedType:e}},P=function(e){return{type:"HANDLE_BIKE_SPEEDS_CHANGED",bikeSpeedType:e}},x=function(e){return{type:"HANDLE_BIKE_PROFILES_CHANGED",bikeProfilType:e}},S=function(e){return{type:"HANDLE_TRAVEL_SOLUTIONS_CHANGED",travelSolutionType:e}},j=function(e,t,n){return{type:"INIT_DATEPICKER_MINMAX_DATE",minDate:e,maxDate:t,defaultDateTime:n}},O=function(e){return{type:"INIT_DATE",date:e}},R=function(e){return{type:"HANDLE_REPRESENTS_CHANGED",represent:e}},w=function(e){return{type:"SET_APP_HASH",hash:e}},L=function(e){return{type:"SET_APP_HEADER",header:e}},C=function(e){return{type:"SET_CONFIG",config:e}},N=function(e){return{type:"SET_PROJECTS_MENU_ID",menuID:e}},k=function(e){return{type:"SET_CALENDAR_DATE",date:e}},I=function(e,t){return{type:"SET_CALENDAR_DATETIME",hour:e,minute:t}},D=function(e){return{type:"SET_CALENDAR_SHOW",show:e}},M=function(e){return{type:"SET_EXPANDED_MAP",isExpandedMap:e}},U=function(e){return{type:"ADD_STOPS",stops:e}},G=function(e){return{type:"ADD_STOPAREA",area:e}},H=function(e){return{type:"ADD_LINE",line:e}},Y=function(e){return{type:"SET_PRINT",print:e}},F=function(e){return{type:"SET_PlACES",places:e}},B=function(e){return{type:"ADD_PLACE",place:e}},V=function(e){return{type:"ADD_STATION",station:e}},z=function(e){return{type:"SET_RADIUS",radius:e}},X=function(e){return{type:"SET_STREETVIEW_POSITION",coords:e}},K=function(e){return{type:"SET_DONT_SHOW",list:e}},q=function(e){return{type:"SET_WINDOW_PRINTING",printing:e}},W=function(e){return{type:"SET_PERIODS",periods:e}},J=function(e){return{type:"SET_PERIOD_MODE",mode:e}},Q=function(e){return{type:"SET_LINES",lines:e}},Z=function(e){return{type:"HANDLE_ALLOW_DISRUPTIONS_CHANGED",allowDisruptions:e}},$=function(e){return{type:"SET_ORIENTATION_CHANGE",orientation:e}}},1290:function(e,t,n){n.d(t,{$T:function(){return p},AK:function(){return H},Bt:function(){return I},Js:function(){return g},KM:function(){return R},KY:function(){return G},NA:function(){return j},OM:function(){return w},Oe:function(){return O},PR:function(){return U},PU:function(){return o},Pl:function(){return h},TX:function(){return M},UQ:function(){return f},XW:function(){return b},Xh:function(){return c},_S:function(){return T},_f:function(){return r},bm:function(){return a},e1:function(){return N},ev:function(){return A},f4:function(){return v},gQ:function(){return E},gT:function(){return P},hK:function(){return S},i9:function(){return u},iO:function(){return d},jj:function(){return m},o8:function(){return x},oi:function(){return s},pA:function(){return C},qE:function(){return i},rP:function(){return D},sJ:function(){return k},x6:function(){return y},zf:function(){return l},zj:function(){return _},zy:function(){return L}});var r=function(e){return{type:"ON_INPUT_VALUE_CHANGE",value:e}},i=function(e){return{type:"ON_START_INPUT_VALUE_CHANGE",value:e}},o=function(e){return{type:"ON_END_INPUT_VALUE_CHANGE",value:e}},a=function(e){return{type:"ON_INPUT_ITEMS_CHANGE",items:e}},l=function(e,t){return{type:"ON_INPUTS_SWAP",from:e,to:t}},c=function(e){return{type:"ON_START_INPUT_ITEMS_CHANGE",items:e}},s=function(e){return{type:"ON_END_INPUT_ITEMS_CHANGE",items:e}},u=function(e){return{type:"SET_THEMATIC_PLACES",thematicPlaces:e}},d=function(e){return{type:"SET_THEMATIC_LIB_MARKERS",libraryThematicMarkers:e}},p=function(e){return{type:"SET_THEMATIC_LIB_DISPLAY",libraryThematicDisplay:e}},f=function(e){return{type:"SET_THEMATIC_LIB_PREDICT",libraryThematicPredict:e}},m=function(e){return{type:"SET_PLACE_CLICKED",place:e}},h=function(e){return{type:"SET_PLACE_AVAILIBILITY_LOADING",isLoading:e}},v=function(e){return{type:"SET_OPENED_COLLAPSE",collapse:e}},_=function(e){return{type:"SET_DISRUPTIONS",disruptions:e}},y=function(e){return{type:"SET_DISRUPTION_IN_LINE",disruptionsInLine:e}},g=function(e){return{type:"SET_GEOLOCATION_ERROR",error:e}},b=function(e){return{type:"SET_LINE_INFORMATION",info:e}},A=function(e){return{type:"SET_GO_TO_ROUTE_CALC",valid:e}},E=function(){return{type:"RESET_STATION_INDEX"}},T=function(e){return{type:"INCREMENT_STATION_INDEX",direction:e}},P=function(e){return{type:"DECREMENT_STATION_INDEX",direction:e}},x=function(e){return{type:"SET_ROUTE_CALC_DATES_PANEL",datesPanel:e}},S=function(e){return{type:"SET_ROUTE_CALC_MODES_PANEL",modesPanel:e}},j=function(e){return{type:"SET_ROUTE_CALC_TRAVEL_SOLUTIONS_PANEL",travelSolutionsPanel:e}},O=function(e){return{type:"SET_AROUND_RADIUS_PANEL",radiusPanel:e}},R=function(e){return{type:"SET_ROUTE_CALC_WALKINGSPEEDS_PANEL",walkingSpeedsPanel:e}},w=function(e){return{type:"SET_ROUTE_CALC_BIKE_PANEL",bikePanel:e}},L=function(e){return{type:"SET_MOBILITY_OBJECT",mobilityObject:e}},C=function(e,t){return{type:"SET_LINESREGIONS_PANEL",code:e,open:t}},N=function(e,t){return{type:"SET_DDLS_PANEL",code:e,open:t}},k=function(){return{type:"CLEAN_LINESREGIONS"}},I=function(e){return{type:"SET_FAVORITE_LINE",line:e}},D=function(e){return{type:"SET_FAVORITE_STOP",stop:e}},M=function(e,t,n){return{type:"SET_DISPLAY_ERROR",id:e,typeError:t,message:n}},U=function(e){return{type:"SET_HIDE_DISPLAY_ERROR",id:e}},G=function(e){return{type:"SET_DISPLAY_TIMETABLE_DATA",data:e}},H=function(e){return{type:"SET_LINES_SCHEDULES",schedules:e}}},1576:function(e,t,n){n.d(t,{$Y:function(){return c},AU:function(){return v},Dp:function(){return h},FG:function(){return A},Fm:function(){return g},GG:function(){return a},I0:function(){return C},If:function(){return w},KK:function(){return O},Kv:function(){return b},Os:function(){return l},Pv:function(){return T},QQ:function(){return j},Rr:function(){return R},SA:function(){return i},Tv:function(){return y},UJ:function(){return _},Xf:function(){return p},ZH:function(){return N},_P:function(){return k},ak:function(){return E},ci:function(){return x},en:function(){return m},gm:function(){return L},hL:function(){return f},hh:function(){return P},l2:function(){return S},lM:function(){return o},lO:function(){return s},oN:function(){return d},wv:function(){return I},xF:function(){return u},zl:function(){return r}});var r=function(e){return{type:"BUILD_TERRITORY_OUTLINE",geojson:e}},i=function(e){return{type:"SET_REDUX_MARKERS",markers:e}},o=function(e){return{type:"SET_CUSTOM_MARKERS",markers:e}},a=function(e){return{type:"ADD_CUSTOM_MARKERS",markers:e}},l=function(e,t){return{type:"SET_CUSTOM_MARKERS_EVENT",id:e,event:t}},c=function(e){return{type:"SET_HEAVY_LINES",lines:e}},s=function(e){return{type:"HIDE_HEAVY_LINES",hide:e}},u=function(e){return{type:"SET_COMPLEMENTARY_LINE",line:e}},d=function(e){return{type:"SET_COMPLEMENTARY_LINES",lines:e}},p=function(e){return{type:"SET_CUSTOM_LINES",lines:e}},f=function(e){return{type:"ON_MARKER_CLICK",marker:e}},m=function(e){return{type:"SET_LINE_SELECTED",line:e}},h=function(e){return{type:"SET_LINE_SELECTED_PATH",path:e}},v=function(e){return{type:"SET_TRANSPORT_PLACES",places:e}},_=function(e){return{type:"SET_PUBLIC_PLACES",places:e}},y=function(e){return{type:"SET_MAP_PLACES",places:e}},g=function(e){return{type:"SET_CLUSTER",cluster:e}},b=function(e){return{type:"SET_ENTRANCE_MAP_MARKERS",markers:e}},A=function(e){return{type:"HANDLE_LEGEND_STATE",isLegendOpen:e}},E=function(e){return{type:"SET_BIKE_PATHS",paths:e}},T=function(e){return{type:"SET_MAP_BIKES",bikes:e}},P=function(e){return{type:"SET_ENTRANCE_POPUP",popup:e}},x=function(e){return{type:"SET_TOURISM_PARTNERS_STOPS",stops:e}},S=function(e){return{type:"SET_LINES_TO_DISPLAY",polylines:e}},j=function(e){return{type:"SET_ZOOM",zoom:e}},O=function(e){return{type:"SET_CENTER",center:e}},R=function(e){return{type:"SET_AROUND_PIN",aroundPin:e.pin,aroundCircles:e.circles}},w=function(e){return{type:"SET_DISPLAY_MARKER_MODE",mode:e}},L=function(e){return{type:"SET_ALL_LINES_GEOJSON",geojson:e}},C=function(e){return{type:"SET_ALL_LINES_SELECTED",selected:e}},N=function(e){return{type:"SET_ALL_LINESINTERSEC_GEOJSON",geojson:e}},k=function(e){return{type:"SET_ALL_LINES_COLOR_TYPE",colorType:e}},I=function(e){return{type:"SET_TERRITORIES_GEOJSON",territories:e}}},6035:function(e,t,n){n.d(t,{Q:function(){return r},Y:function(){return i}});var r=function(e){return{type:"INIT_MODAL",input:e}},i=function(){return{type:"TOGGLE_MODAL"}}},8370:function(e,t,n){n.d(t,{d:function(){return r}});var r=function(e){return{type:"TOGGLE_MODAL_GENERIC",name:e}}},2752:function(e,t,n){n.d(t,{$V:function(){return d},HV:function(){return o},KW:function(){return p},Ok:function(){return a},W8:function(){return s},YW:function(){return r},kz:function(){return u},lR:function(){return i},m_:function(){return l},oX:function(){return c}});var r=function(e){return{type:"SET_NETWORK_MAP_REF",mapRef:e}},i=function(e){return{type:"SET_NETWORK_MAP_HEAVY_LINES",lines:e}},o=function(e){return{type:"SET_NETWORK_TOWNS_LINES",lines:e}},a=function(e){return{type:"SET_NETWORK_SELECTED_LINE",line:e}},l=function(e){return{type:"SET_NETWORK_SELECTED_TOWN",town:e}},c=function(e){return{type:"SET_NETWORK_DISPLAY_SLIDER",slider:e}},s=function(e,t){return{type:"SET_MODES_GROUP_PANEL",mode:e,open:t}},u=function(e){return{type:"SET_SLIDER_URL_LEFT",url:e}},d=function(e){return{type:"SET_SLIDER_URL_RIGHT",url:e}},p=function(e){return{type:"SET_NETWORK_SELECTED_STOP",stop:e}}},7180:function(e,t,n){n.d(t,{V:function(){return r},v:function(){return i}});var r=function(e){return{type:"SET_TOURISM_PARTNER_SELECTED_TYPE",typePartner:e}},i=function(e){return{type:"SET_TOURISM_PARTNER_SELECTED_PARTNER",partner:e}}},3052:function(e,t,n){n.d(t,{$q:function(){return y},BU:function(){return f},D1:function(){return h},H7:function(){return u},Kk:function(){return v},Lc:function(){return d},M7:function(){return p},Sn:function(){return g},T3:function(){return A},V5:function(){return o},aD:function(){return m},b2:function(){return l},bu:function(){return c},dg:function(){return E},hK:function(){return r},j1:function(){return _},jk:function(){return b},qP:function(){return i},wP:function(){return a},xY:function(){return s}});var r=function(e){return{type:"SET_AREAS",areas:e}},i=function(e){return{type:"SET_STOPS",stops:e}},o=function(e,t){return{type:"BUILD_MARKER",data:e,options:t}},a=function(e,t){return{type:"BUILD_CUSTOM_MARKER",data:e,options:t}},l=function(e){return{type:"OVER_MARKER",data:e,target:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},c=function(e){return{type:"OUT_MARKER",data:e,target:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},s=function(e){return{type:"OPEN_MARKER",data:e}},u=function(e,t){return{type:"ON_LINE_SELECTED",line:e,data:t}},d=function(e,t){return{type:"BUILD_HEAVY_LINES",zoom:e,zoomLvl:t}},p=function(){return{type:"BUILD_COMPLEMENTARY_LINES",line:arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},f=function(e){return{type:"BUILD_CUSTOM_LINES",lines:e}},m=function(e){return{type:"BUILD_TRANSPORT_PLACES",places:e,isLib:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},h=function(e){return{type:"BUILD_MAP_PLACES",places:e}},v=function(e){return{type:"BUILD_PUBLIC_PLACES",places:e}},_=function(e,t){return{type:"BUILD_AUTOCOMPLETE",inputProps:e,isModal:t}},y=function(e){return{type:"BUILD_PLACES_BY_CAT_IN_LIST",places:e}},g=function(){return{type:"BUILD_AROUND_PREFERENCES"}},b=function(){return{type:"BUILD_ROUTE_CALC_PREFERENCES"}},A=function(){return{type:"BUILD_TABS_PANEL"}},E=function(e){return{type:"BUILD_MAP_BIKES",bikes:e}}},7935:function(e,t,n){n.d(t,{P4:function(){return f},_j:function(){return m},ln:function(){return p}});var r=n(3050),i=n(6734),o=n(5471),a=n(9736),l=n(7293),c=n(4848);function s(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var d=l.A.primarycolor;r.t1.register(r.PP,r.kc,r.Bs,r.FN,r.No,r.hE,r.m_,r.s$);var p=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=s(new Set((t=[]).concat.apply(t,s(e.sections.map((function(e){return e.elevation})))))),o=function(e){var t=[],n=[],r=[],i=[],o={min:0,max:Math.round(50*Math.round(e[e.length-1].distanceFromStart/50))};e.forEach((function(e){t.push(e.distanceFromStart),r.push(e.elevation)}));var a=[].concat(r).sort(),l=Math.ceil(r.length/2),c=r.length%2==0?(a[l]+a[l-1])/2:a[l-1],s={min:a[0],max:a[a.len-1],median:c};return t.forEach((function(e,o){(0===o||o===t.length-1||e-n[n.length-1]>50||Math.abs(r[o]-i[i.length-1])>10)&&(n.push(50*Math.round(e/50)),i.push(r[o]))})),{data:i,labels:n,x:o,y:s}}(r);return(0,c.jsx)(i.N1,{onMouseLeave:function(){(0,a.Gi)()},options:{responsive:!0,interaction:{mode:"index",intersect:!1,axis:"x"},onHover:function(t,i){var o;(0,a.Gi)();var l=null===(o=i[0].element)||void 0===o||null===(o=o.$context)||void 0===o||null===(o=o.parsed)||void 0===o?void 0:o.x;if(l){var c,s=r.reduce((function(e,t){return Math.abs(t.distanceFromStart-l)<Math.abs(e.distanceFromStart-l)?t:e})),u=null==e||null===(c=e.sections[e.sections.length>1?null==s?void 0:s.section:0])||void 0===c||null===(c=c.geojson)||void 0===c?void 0:c.coordinates[null==s?void 0:s.geometryIndex];n&&u&&(0,a.G0)({lon:u[0],lat:u[1]},"elevation")}},onClick:function(t,i){var o,l=null===(o=i[0].element)||void 0===o||null===(o=o.$context)||void 0===o||null===(o=o.parsed)||void 0===o?void 0:o.x;if(l){var c,s=r.reduce((function(e,t){return Math.abs(t.distanceFromStart-l)<Math.abs(e.distanceFromStart-l)?t:e})),u=null==e||null===(c=e.sections[null==s?void 0:s.section])||void 0===c||null===(c=c.geojson)||void 0===c?void 0:c.coordinates[null==s?void 0:s.geometryIndex];n&&(0,a.$D)(n,[u[1],u[0]])}},animation:!1,elements:{point:{radius:0,hoverRadius:0}},plugins:{title:{display:!1},legend:{display:!1},tooltip:{displayColors:!1,callbacks:{title:function(e){return"".concat((0,a.Tl)("elevation-tooltip-distance")," ").concat((0,a.HO)(parseFloat(e[0].label.replace(",",""))))},label:function(e){return"".concat((0,a.Tl)("elevation-tooltip-elevation")," ").concat((0,a.HO)(e.raw))}}}},scales:{x:{type:"linear",min:o.x.min,max:o.x.max,ticks:{callback:function(e){return(0,a.HO)(e)}}},y:{type:"linear",suggestedMin:o.y.median-20,suggestedMax:o.y.median+20,ticks:{stepSize:10,callback:function(e){return(0,a.HO)(e)}}}}},data:{labels:o.labels,datasets:[{data:o.data,borderColor:d,backgroundColor:d,lineTension:.5}]}})},f=function(e){var t=e.normalRoads+e.recommendedRoads+e.discouragedRoads,n=100;return["recommendedRoads","normalRoads","discouragedRoads"].map((function(r,i){var o=Math.round(e[[r]]/t*100);return 2!==i?n-=o:o=n,"".concat(o,"% ").concat((0,a.Tl)("route-calculation-stat-".concat(r)))}))},m=function(e){var t=e.normalRoads+e.recommendedRoads+e.discouragedRoads,n=100;return["recommendedRoads","normalRoads","discouragedRoads"].sort((function(n,r){var i=Math.round(e[[n]]/t*100);return Math.round(e[[r]]/t*100)-i})).map((function(r,i){var l=Math.round(e[[r]]/t*100);return 2!==i?n-=l:l=n,(0,c.jsxs)("div",{className:"lc-route-calculation-stat",children:[(0,c.jsx)("div",{className:"lc-route-calculation-stat-bar",children:(0,c.jsx)(o.Ay,{theme:r,touch:["hold",500],placement:"top",boundary:"window",content:"".concat((0,a.Tl)("route-calculation-stat-".concat(r))," : ").concat((0,a.HO)(e[r])),children:(0,c.jsx)("div",{className:"lc-bike-road-facility ".concat(r),style:{width:"".concat(2!==i?e[[r]]/t*100:l,"%")}},r)},r)}),(0,c.jsxs)("div",{className:"lc-route-calculation-stat-percent ".concat(r),children:[l,"%"]}),(0,c.jsx)("div",{className:"lc-route-calculation-stat-name",children:(0,a.Tl)("route-calculation-stat-".concat(r))})]},r)}))}},8705:function(e,t,n){var r=n(9736),i=n(4848);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(e,t,n,o){if(n){var a="modes/pmr"===n?(0,r.Tl)("aria-pmr",!1):"modes/walking-speed-slow"===n?(0,r.Tl)("route-calculation-walking-speed-slow",!1):"modes/walking-speed-normal"===n?(0,r.Tl)("route-calculation-walking-speed-normal",!1):"modes/walking-speed-fast"===n?(0,r.Tl)("route-calculation-walking-speed-fast",!1):"modes/walk"===n?(0,r.Tl)("modes-walk",!1):"leaf"===n?(0,r.Tl)("route-calculation-co2-emission-alt",!1):"leaf-not"===n?(0,r.Tl)("route-calculation-co2-not-emitted",!1):"calories"===n?(0,r.Tl)("route-calculation-calories",!1):"elevation-gain"===n?(0,r.Tl)("route-calculation-elevation-gain",!1):" elevation-loss"===n?(0,r.Tl)("route-calculation-elevation-loss",!1):"";return(0,i.jsx)("img",{className:o,src:(0,r.tx)("/assets/images/"+(n.includes("leaf-not")?"leaf":n)+".svg"),alt:a,"aria-hidden":""===a?"true":"false"})}switch(e){case"walk":return(0,i.jsx)("svg",{className:"lc-icon",alt:"",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512","aria-hidden":"true",children:(0,i.jsx)("path",{d:"M208 96c26.5 0 48-21.5 48-48S234.5 0 208 0s-48 21.5-48 48 21.5 48 48 48zm94.5 149.1l-23.3-11.8-9.7-29.4c-14.7-44.6-55.7-75.8-102.2-75.9-36-.1-55.9 10.1-93.3 25.2-21.6 8.7-39.3 25.2-49.7 46.2L17.6 213c-7.8 15.8-1.5 35 14.2 42.9 15.6 7.9 34.6 1.5 42.5-14.3L81 228c3.5-7 9.3-12.5 16.5-15.4l26.8-10.8-15.2 60.7c-5.2 20.8.4 42.9 14.9 58.8l59.9 65.4c7.2 7.9 12.3 17.4 14.9 27.7l18.3 73.3c4.3 17.1 21.7 27.6 38.8 23.3 17.1-4.3 27.6-21.7 23.3-38.8l-22.2-89c-2.6-10.3-7.7-19.9-14.9-27.7l-45.5-49.7 17.2-68.7 5.5 16.5c5.3 16.1 16.7 29.4 31.7 37l23.3 11.8c15.6 7.9 34.6 1.5 42.5-14.3 7.7-15.7 1.4-35.1-14.3-43zM73.6 385.8c-3.2 8.1-8 15.4-14.2 21.5l-50 50.1c-12.5 12.5-12.5 32.8 0 45.3s32.7 12.5 45.2 0l59.4-59.4c6.1-6.1 10.9-13.4 14.2-21.5l13.5-33.8c-55.3-60.3-38.7-41.8-47.4-53.7l-20.7 51.5z"})});case"wait":return(0,i.jsx)("svg",{className:"lc-icon",alt:"",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512","aria-hidden":"true",children:(0,i.jsx)("path",{d:"M496 224c-79.6 0-144 64.4-144 144s64.4 144 144 144 144-64.4 144-144-64.4-144-144-144zm64 150.3c0 5.3-4.4 9.7-9.7 9.7h-60.6c-5.3 0-9.7-4.4-9.7-9.7v-76.6c0-5.3 4.4-9.7 9.7-9.7h12.6c5.3 0 9.7 4.4 9.7 9.7V352h38.3c5.3 0 9.7 4.4 9.7 9.7v12.6zM320 368c0-27.8 6.7-54.1 18.2-77.5-8-1.5-16.2-2.5-24.6-2.5h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h347.1c-45.3-31.9-75.1-84.5-75.1-144zm-96-112c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128z"})});case"bike":return(0,i.jsx)("svg",{className:"lc-icon",alt:"",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512","aria-hidden":"true",children:(0,i.jsx)("path",{d:"M512.509 192.001c-16.373-.064-32.03 2.955-46.436 8.495l-77.68-125.153A24 24 0 0 0 368.001 64h-64c-8.837 0-16 7.163-16 16v16c0 8.837 7.163 16 16 16h50.649l14.896 24H256.002v-16c0-8.837-7.163-16-16-16h-87.459c-13.441 0-24.777 10.999-24.536 24.437.232 13.044 10.876 23.563 23.995 23.563h48.726l-29.417 47.52c-13.433-4.83-27.904-7.483-42.992-7.52C58.094 191.83.412 249.012.002 319.236-.413 390.279 57.055 448 128.002 448c59.642 0 109.758-40.793 123.967-96h52.033a24 24 0 0 0 20.406-11.367L410.37 201.77l14.938 24.067c-25.455 23.448-41.385 57.081-41.307 94.437.145 68.833 57.899 127.051 126.729 127.719 70.606.685 128.181-55.803 129.255-125.996 1.086-70.941-56.526-129.72-127.476-129.996zM186.75 265.772c9.727 10.529 16.673 23.661 19.642 38.228h-43.306l23.664-38.228zM128.002 400c-44.112 0-80-35.888-80-80s35.888-80 80-80c5.869 0 11.586.653 17.099 1.859l-45.505 73.509C89.715 331.327 101.213 352 120.002 352h81.3c-12.37 28.225-40.562 48-73.3 48zm162.63-96h-35.624c-3.96-31.756-19.556-59.894-42.383-80.026L237.371 184h127.547l-74.286 120zm217.057 95.886c-41.036-2.165-74.049-35.692-75.627-76.755-.812-21.121 6.633-40.518 19.335-55.263l44.433 71.586c4.66 7.508 14.524 9.816 22.032 5.156l13.594-8.437c7.508-4.66 9.817-14.524 5.156-22.032l-44.468-71.643a79.901 79.901 0 0 1 19.858-2.497c44.112 0 80 35.888 80 80-.001 45.54-38.252 82.316-84.313 79.885z"})});case"leaf":case"leaf-not":return(0,i.jsx)("svg",{className:"lc-icon",alt:"",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512","aria-hidden":"true",children:(0,i.jsx)("path",{d:"M546.2 9.7c-5.6-12.5-21.6-13-28.3-1.2C486.9 62.4 431.4 96 368 96h-80C182 96 96 182 96 288c0 7 .8 13.7 1.5 20.5C161.3 262.8 253.4 224 384 224c8.8 0 16 7.2 16 16s-7.2 16-16 16C132.6 256 26 410.1 2.4 468c-6.6 16.3 1.2 34.9 17.5 41.6 16.4 6.8 35-1.1 41.8-17.3 1.5-3.6 20.9-47.9 71.9-90.6 32.4 43.9 94 85.8 174.9 77.2C465.5 467.5 576 326.7 576 154.3c0-50.2-10.8-102.2-29.8-144.6z"})});case"calories":return(0,i.jsxs)("svg",{className:"lc-icon",alt:"",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100","aria-hidden":"true",children:[(0,i.jsx)("path",{d:"M60.05 72.81v.06a1.81 1.81 0 0 0 2 1.79A2.64 2.64 0 0 0 64.94 72v-.8a5.93 5.93 0 0 0-2.25-.43c-1.69 0-2.64.82-2.64 2.04Z"}),(0,i.jsx)("path",{d:"M91.31 54.43c-5.62-25.75-21.1-28.3-22.19-27.23-1.24 1.22-2.05 3.27-1.75 8.5a77.24 77.24 0 0 0 1.75 11.62c-10.65-.59-9.47-15.38-9.47-15.38s0-10.36-2.37-16.28S36.42-3.62 31.94.93c-2.66 2.7 4.33 5.85 4 11.77a11.75 11.75 0 0 1-5 8.88S7.86 33.42 7.57 56.2s10.35 43.8 42 43.8 47.37-19.83 41.74-45.57ZM31.16 77.91l-3.31-5.59-1.49 1.73v3.86h-5.77V55.73h5.77V67l4.47-5.5h6.53l-5.71 6.6 5.86 9.84Zm14.78.4a8.48 8.48 0 0 1-8.6-8.54v-.06a8.54 8.54 0 0 1 8.81-8.57 7.78 7.78 0 0 1 7 3.68l-3.92 2.91A3.55 3.55 0 0 0 46.18 66 3.41 3.41 0 0 0 43 69.65v.06c0 2.12 1.34 3.73 3.28 3.73a3.92 3.92 0 0 0 3.16-1.7l3.86 2.8a8.16 8.16 0 0 1-7.36 3.77Zm24.62-.4h-5.71v-1.7A6.2 6.2 0 0 1 60 78.28c-3.13 0-5.53-1.8-5.53-5.08v-.06c0-3.4 2.58-5.16 6.44-5.16a12.74 12.74 0 0 1 3.95.63v-.27c0-1.7-1.06-2.67-3.28-2.67a11.52 11.52 0 0 0-4.53.91l-1.19-4.07a16.54 16.54 0 0 1 6.66-1.28c2.95 0 4.95.7 6.26 2s1.76 2.92 1.76 5.23Zm8.85 0h-5.77V55.73h5.77Z"})]});case"vehicle":return(0,i.jsx)("div",{children:t.code});default:return(0,i.jsx)("div",{children:"NULL"})}},u=function(e,t,n){switch(e){case"walk":return l({color:"#333",height:18,zIndex:1},n);case"wait":return l({color:"#333",height:15,zIndex:1},n);case"bike":case"leaf":case"leaf-not":case"calories":case"elevation-gain":case"elevation-loss":return l({color:"#333",height:20,zIndex:1},n);case"vehicle":return l({background:"#"+t.color},n);default:return{}}};t.A=function(e){var t=e.type,n=e.infos,r=e.options,o=e.image,a=e.className;return(0,i.jsx)("div",{className:"lc-root-icon",style:u(t,n,r),children:s(t,n,o,a)})}},4432:function(e,t,n){n.d(t,{W:function(){return d}});var r,i,o=n(1912),a=n(9736),l=n(4848);function c(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var s=o.Ay.div(r||(r=c(["\n  width: 20px;\n  height: 20px;\n  background: url(",") no-repeat center center;\n\n  transition: all 0.15s ease-in;\n\n  &.is-open {\n    transform: rotate(90deg);\n  }\n"])),(function(){return(0,a.tx)("/assets/images/menu-item-arrow.svg")})),u=o.Ay.div(i||(i=c(["\n  width: 20px;\n  height: 20px;\n  background: url(",") no-repeat center center;\n\n  transition: all 0.15s ease-in;\n\n  transform: rotate(90deg);\n\n  &.is-open {\n    transform: rotate(-90deg);\n  }\n"])),(function(){return(0,a.tx)("/assets/images/menu-item-arrow.svg")})),d=function(e){return e.topToBottom?(0,l.jsx)(u,{className:e.isOpen?"is-open":""}):(0,l.jsx)(s,{className:e.isOpen?"is-open":""})}},2537:function(e,t,n){n.d(t,{A:function(){return A}});var r=n(6540),i=n(1225),o=n(1912),a=n(9736),l=n(7577),c=n(6009),s=n(2951);var u,d,p=n(8407),f=n(4212),m=n(9742),h=n(4848);function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var g=o.Ay.div(u||(u=y(["\n  display: inline-block;\n"]))),b=o.Ay.div(d||(d=y(["\n  border: 2px solid rgba(0, 0, 0, 0.08);\n  cursor: pointer;\n  display: flex;\n  margin: ",";\n  font-size: ",";\n  padding: ",";\n  align-items: center;\n  border-radius: 5px;\n  border: ",";\n  img {\n    width: 25px;\n    padding-right: 10px;\n  }\n"])),(function(e){return(e.margin||0)+"px"}),(function(e){return e.margin?"0.875em":"1em"}),(function(e){return e.margin?"8px":"0 8px"}),(function(e){return e.border?"2px solid rgba(0, 0, 0, 0.08)":"none"})),A=function(e){var t,n,o=v((0,r.useState)(!1),2),u=o[0],d=o[1],_=v((0,r.useState)(new Date),2),y=_[0],A=_[1],E=e.minDate,T=e.maxDate,P=e.defaultDateTime,x=e.onChangeDate,S=e.button,j=e.buttonBorder,O=e.followInput,R=e.margin,w=(0,i.d4)((function(e){return e.app.calendar})),L=(0,i.d4)((function(e){return e.app.language})),C=(0,i.wA)(),N=(0,r.useRef)(),k=(0,p.l)(),I=(0,f.Q)();t=N,n=function(){w.show&&C((0,l.qr)(!1))},(0,r.useEffect)((function(){var e=function(e){t.current&&!t.current.contains(e.target)&&n(e)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),function(){document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[t,n]);var D=function(e){if(C((0,l.Lc)(e)),(0,a.x$)("route-calculation")){var t=m.A.location.pathname,n=(0,a._V)(m.A.location);delete n.date;var r=(0,a.vf)(n,{});m.A.push({pathname:t,search:r})}void 0!==x&&x(e)},M=function(){var e=document.querySelector(".lc-board").getBoundingClientRect(),t=document.querySelector(".lc-calendar-button").getBoundingClientRect(),n=N.current.getBoundingClientRect(),r=t.y;t.y+n.height>k.height?r=k.height-n.height-20:r+=20,r-=e.top-20,N.current.style.top=r+"px"};(0,r.useEffect)((function(){O&&I&&(document.querySelector(".lc-calendar").style.top="-9999px")}),[]),(0,r.useEffect)((function(){if(d(w.show),O){var e=document.querySelector(".lc-scroll");w.show?S&&e&&(setTimeout(M),e.addEventListener("scroll",M)):e&&e.removeEventListener("scroll",M)}}),[w.show,k]),(0,r.useEffect)((function(){A(P)}),[P]),(0,r.useEffect)((function(){A(w.date),C((0,l.qr)(!1))}),[w.date]),(0,r.useEffect)((function(){var e=(0,s.Yq)(new Date,"ymd"),t=!0;if(void 0!==E&&e<(0,s.Yq)(E,"ymd")&&(t=!1),void 0!==T&&(0,s.Yq)(T,"ymd")>e&&(t=!1),N&&N.current&&t){var n=document.createElement("div");n.classList.add("lc-calendar-today-button"),n.addEventListener("click",(function(){D(new Date)})),n.addEventListener("keypress",(function(e){return(0,a.zQ)(e,(function(){D(new Date)}))})),n.innerHTML=(0,a.Tl)("calendar-today-word"),n.setAttribute("tabIndex","0"),n.setAttribute("role","button"),N.current.appendChild(n)}}),[N]);var U=function(e){return(0,h.jsx)(g,{children:(0,h.jsxs)(b,{className:"lc-calendar-button ".concat(e.className?e.className:""),border:e.border,margin:R,onClick:function(){C((0,l.qr)(!u))},onKeyUp:function(e){return(0,a.zQ)(e,(function(){return C((0,l.qr)(!u))}))},tabIndex:"0",role:"button","aria-label":(0,a.Tl)("aria-route-calculation-date",!1,{key:"date",value:(0,s.Je)(w.date,L,"full-with-year")}),children:[(0,h.jsx)("img",{src:(0,a.tx)("/assets/images/calendar.svg"),alt:(0,a.Tl)("calendar-alt",!1)}),e.dateLabel?(0,h.jsxs)(h.Fragment,{children:[(0,a.Tl)("timetable-date-label",!1)," ",(0,h.jsx)("b",{children:(0,s.Je)(w.date,L,"full-with-year")})]}):(0,s.Je)(w.date,L,"full-with-year")]})})};return(0,h.jsxs)(h.Fragment,{children:[S?(0,h.jsx)(U,{border:j,className:e.buttonClassName,dateLabel:e.dateLabel}):null,(0,h.jsx)(c.Ay,{value:y,onChange:D,inputRef:N,className:"lc-calendar"+(!1===u?" lc-hidden":" active"),tileClassName:"lc-calendar-tile",locale:L,minDate:E,maxDate:T,navigationAriaLabel:(0,a.Tl)("aria-calendar-go-up",!1),nextAriaLabel:(0,a.Tl)("aria-calendar-next",!1),next2AriaLabel:(0,a.Tl)("aria-calendar-jump-forwards",!1),prevAriaLabel:(0,a.Tl)("aria-calendar-previous",!1),prev2AriaLabel:(0,a.Tl)("aria-calendar-jump-backwards",!1)})]})}},2391:function(e,t,n){var r,i,o=n(6540),a=n(1225),l=n(1912),c=n(8413),s=n(7293),u=n(4848);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var m={REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"}.REACT_APP_DISRUPTION,h=s.A.lineImageHeight,v=s.A.errorcolor,_=s.A.warningcolor,y=l.Ay.div(r||(r=f(["\n  position: relative;\n  ","\n  &.active #lc-line-overlay-content {\n    opacity: 1;\n  }\n\n  .lc-blocking-icon,\n  .lc-delays-icon,\n  .lc-infos-icon {\n    position: absolute;\n    min-width: 16px !important;\n    height: 16px !important;\n    margin-top: -8px !important;\n    margin-left: "," !important;\n    z-index: 998;\n  }\n\n  .lc-blocking-point,\n  .lc-delays-point {\n    position: absolute;\n    margin-top: 0px !important;\n    margin-left: "," !important;\n    &.lc-blocking-point {\n      background: ",";\n    }\n    &.lc-delays-point {\n      background: ",";\n    }\n    border: solid white 1px;\n    height: 7px;\n    width: 7px;\n    border-radius: 50%;\n    z-index: 998;\n  }\n"])),(function(e){return e.inpopup?"display:flex;":"margin-bottom:-5px;"}),(function(e){return e.inpopup?"20px":"26px"}),(function(e){return e.inpopup?"16px":"21px"}),(function(){return v}),(function(){return _})),g=l.Ay.div(i||(i=f(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: #",";\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  height: ",";\n  width: 100%;\n  opacity: 0;\n  transition: ",";\n  color: ",";\n  font-size: 1.2em;\n  font-weight: bold;\n  border-radius: 2px;\n"])),(function(e){return e.color}),(function(e){return e.styleLine.includes("image")?h:"100%"}),(function(e){return"all ".concat(e.transitionAnimTime,"ms ease-in-out 0s")}),(function(e){return(0,c.N)(e.color)>.5?"#333":"#fff"}));t.A=function(e){var t=e.line,n=e.styleLine,r=e.startAnimFadeAt,i=void 0===r?3e3:r,l=e.transitionAnimTime,c=void 0===l?1500:l,s=e.intervalAnim,p=void 0===s?5500:s,f=e.inpopup,h=void 0!==f&&f,v=(0,o.useRef)(),_=(0,a.d4)((function(e){return e.board})),b=_.disruptions,A=_.disruptionsInLine,E=(0,a.d4)((function(e){return e.app})),T=E.stops,P=E.areas,x=d((0,o.useState)(!1),2),S=x[0],j=x[1],O=m?JSON.parse(m).overlay:null,R=m&&JSON.parse(m).overlaySeverity||["blocking"];return(0,o.useEffect)((function(){var e=void 0,t=function(){setTimeout((function(){v.current&&v.current.classList.add("active"),setTimeout((function(){v.current&&v.current.classList.remove("active")}),c)}),i)};return S&&!e&&(t(),e=setInterval((function(){t()}),p)),function(){return clearInterval(e)}}),[S]),(0,o.useEffect)((function(){if(b&&b.length>0||A&&A.length>0){for(var e=b&&b.length>0?b:A,n=[],r=0;r<e.length;r++){var i=e[r];if(R.includes(i.severity))for(var o=function(){var e=i.impacted_objects[a];switch(e.type){case"line":if(e.line===t.id)return n.push(i),0;break;case"stop_point":var r=T.find((function(t){return t.id===e.id}));if(r&&r.lines.map((function(e){return e.id})).includes(t.id))return n.push(i),0;break;case"stop_area":var o=P.find((function(t){return t.id===e.id}));if(o&&o.lines.map((function(e){return e.id})).includes(t.id))return n.push(i),0;break;case"section":var l=e.from,c=e.to;if(e.line===t.id)return n.push(i),0;if(!e.line){if(l.includes("stop_point")){var s=T.find((function(e){return e.id===l}));if(s&&s.lines.map((function(e){return e.id})).includes(t.id))return n.push(i),0}else if(l.includes("stop_area")){var u=P.find((function(e){return e.id===l}));if(u&&u.lines.map((function(e){return e.id})).includes(t.id))return n.push(i),0}if(c.includes("stop_point")){var d=T.find((function(e){return e.id===c}));if(d&&d.lines.map((function(e){return e.id})).includes(t.id))return n.push(i),0}else if(c.includes("stop_area")){var p=P.find((function(e){return e.id===c}));if(p&&p.lines.map((function(e){return e.id})).includes(t.id))return n.push(i),0}}}},a=0;a<i.impacted_objects.length;a++)o()}n.find((function(e){return"blocking"===e.severity}))&&R.includes("blocking")?j("blocking"):n.find((function(e){return"delays"===e.severity}))&&R.includes("delays")?j("delays"):n.find((function(e){return"informations"===e.severity}))&&R.includes("informations")&&j("infos")}}),[b,A]),S?(0,u.jsxs)(y,{ref:v,inpopup:h,children:[O&&"fade"===O&&S&&(0,u.jsx)(g,{color:t.color,styleLine:n,transitionAnimTime:c,id:"lc-line-overlay-content",children:"!"}),O&&"picto"===O&&S&&(0,u.jsx)("div",{className:"lc-".concat(S,"-icon")}),O&&"point"===O&&S&&(0,u.jsx)("div",{className:"lc-".concat(S,"-point")}),e.children]}):e.children}},707:function(e,t,n){n.d(t,{D:function(){return y}});var r,i,o=n(1912),a=n(4212),l=n(9736),c=n(8413),s=n(1225),u=n(4848);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var v=o.Ay.div(r||(r=h(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 5px;\n  border: none;\n  background: ",";\n  color: ",";\n  font-size: 1.4em;\n  font-weight: bold;\n  flex: 1;\n  justify-self: ",";\n  border-radius: ",";\n  width: ",";\n  max-width: ",";\n  margin-right: ",";\n\n  &:hover {\n    opacity: 0.8;\n  }\n\n  &.lc-in-around {\n    border-radius: 2px !important;\n    padding: 2px 5px !important;\n    min-width: 35px !important;\n    font-size: 1em !important;\n  }\n"])),(function(e){return"#"+(e.line.color||"888")}),(function(e){return e.line.text?"#"+e.line.text:(0,c.N)("#"+e.line.color)>.5?"#333":"#fff"}),(function(e){return e.mode.includes("tramway")&&"center"}),(function(e){return e.mode.includes("tramway")&&"50%"}),(function(e){return e.mode.includes("tramway")&&"25px"}),(function(e){return e.mode.includes("tramway")&&"25px"}),(function(e){return e.mode.includes("tramway")&&"10px"})),_=o.Ay.div.attrs((function(e){var t;return{style:{backgroundImage:"url("+(0,l.tx)("/assets/images/lines/".concat("before"===e.line.network?"before/":"").concat(encodeURI(null!==(t=e.linePictoIsNetworkPicto)&&void 0!==t&&t.includes(e.line.network)?e.line.network:e.line.code),".svg"))+")",backgroundRepeat:"no-repeat",backgroundPosition:"center center",width:e.width?e.width:!e.mode.includes("bus")&&e.line.cat&&(e.isDesktop?"42px":"34px"),height:e.height?e.height:e.isDesktop?"42px":"34px",marginRight:e.mode.includes("tramway")&&e.grid&&"10px",flex:!e.mode.includes("tramway")&&1}}}))(i||(i=h(["\n  &:hover {\n    opacity: 0.8;\n  }\n"]))),y=function(e){var t,n,r=(0,a.Q)(),i=(0,s.d4)((function(e){return e.app})).component;return e.image?(0,u.jsx)(_,f(f({},e),{},{linePictoIsNetworkPicto:null==i||null===(t=i.props)||void 0===t||null===(t=t.moduleData)||void 0===t?void 0:t.linePictoIsNetworkPicto,isDesktop:r,className:"lc-uiline lc-uiline-image "+e.mode+" lc-"+(null===(n=e.line.code)||void 0===n?void 0:n.replace(/\s/g,""))})):(0,u.jsx)(v,f(f({},e),{},{isDesktop:r,className:"lc-uiline",children:e.line.code}))};y.defaultProps={line:null,mode:""}},35:function(e,t,n){n.d(t,{A:function(){return bt}});var r,i,o,a,l,c,s,u,d,p,f,m,h,v,_,y,g,b,A,E,T,P,x,S,j,O,R,w,L,C,N,k,I,D,M,U,G,H=n(6540),Y=n(1225),F=n(9742),B=n(9736),V=n(1290),z=n(5471),X=n(6293),K=n(2951),q=n(8203),W=n(1912);function J(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Q=n(7293).A.primarycolor,Z=W.Ay.div(r||(r=J(["\n  flex-direction: column;\n  margin: 0;\n  font-weight: 300;\n  border-bottom: ",";\n  padding: ",";\n\n  .lc-go-to-around {\n    display: flex;\n    align-items: center;\n    margin-top: 15px;\n\n    .lc-tool-around {\n      border: none !important;\n      padding: 0 !important;\n      margin: 0 10px 0 0 !important;\n\n      &:hover {\n        background-color: transparent !important;\n      }\n    }\n  }\n"])),(function(e){return"board"===e.displayon?"1px solid ".concat(Q):"none"}),(function(e){return"board"===e.displayon?"10px 0":"0"})),$=W.Ay.div(i||(i=J(["\n  margin: 0 0 5px 0;\n  display: flex;\n  flex-direction: column;\n\n  &:last-child {\n    margin-bottom: 0px;\n  }\n"]))),ee=W.Ay.div(o||(o=J(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  flex-wrap: wrap;\n  ","\n"])),(function(e){return e.marginTop?"margin-top: ".concat(e.marginTop,"px"):""})),te=W.Ay.div(a||(a=J(["\n  display: block;\n  & > div {\n    display: inline;\n    white-space: nowrap;\n  }\n  ","\n"])),(function(e){return e.marginTop?"margin-top: ".concat(e.marginTop,"px"):""})),ne=W.Ay.div(l||(l=J(["\n  margin: 5px 0px;\n  .lc-opening-hours {\n    .lc-opening-hours-title {\n      font-weight: 500;\n    }\n\n    .lc-opening-hours-list {\n      white-space: nowrap;\n\n      span {\n        display: block;\n      }\n    }\n  }\n  &:last-child {\n    margin-bottom: 0px;\n  }\n"]))),re=W.Ay.div(c||(c=J(["\n  font-weight: 500;\n"]))),ie=W.Ay.div(s||(s=J(["\n  font-weight: 300;\n  display: flex;\n  align-items: center;\n\n  a {\n    text-decoration: none;\n  }\n"]))),oe=W.Ay.div(u||(u=J(["\n  background: #e0e0e0;\n  border-radius: 5px;\n  padding: 3px;\n  align-self: flex-start;\n  margin: 5px 0px;\n"]))),ae=W.Ay.img(d||(d=J(["\n  width: 12px;\n  height: 12px;\n  margin-left: 3px;\n  ","\n  ","\n  ","\n"])),(function(e){return e.marginLeft&&(0,W.AH)(p||(p=J(["\n      margin-left: 5px;\n    "])))}),(function(e){return e.width&&(0,W.AH)(f||(f=J(["\n      width: ",";\n    "])),e.width)}),(function(e){return e.height&&(0,W.AH)(m||(m=J(["\n      height: ",";\n    "])),e.height)})),le=W.Ay.div(h||(h=J(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  .lc-pr-address {\n    padding-bottom: 5px;\n  }\n  .lc-pr-time {\n    white-space: nowrap;\n    font-size: ",";\n  }\n  .lc-pr-slots-container {\n    display: flex;\n    justify-content: space-between;\n    gap: 20px;\n  }\n  .lc-pr-realtime-seats {\n    padding-bottom: 5px;\n    display: flex;\n    align-items: center;\n    white-space: nowrap;\n    font-weight: bold;\n    font-size: 1.5em;\n\n    &:not(.lc-no-available-places):before {\n      content: '';\n      background: url(",") no-repeat center;\n      background-size: contain;\n      width: 22px;\n      height: 22px;\n      margin-right: 5px;\n    }\n\n    &.lc-no-available-places {\n      font-size: unset;\n      font-weight: initial;\n      padding: 3px 0 10px;\n      white-space: initial;\n    }\n\n    .lc-slots {\n      margin-left: 5px;\n      font-size: 0.8em;\n    }\n  }\n  .lc-pr-realtime-elec-slots {\n    padding-bottom: 5px;\n    display: flex;\n    align-items: center;\n    white-space: nowrap;\n    font-weight: bold;\n    font-size: 1.5em;\n\n    &:before {\n      content: '';\n      background: url(",") no-repeat center;\n      background-size: contain;\n      width: 22px;\n      height: 22px;\n      margin-right: 5px;\n    }\n  }\n  .lc-pr-realtime-pmr-slots {\n    padding-bottom: 5px;\n    display: flex;\n    align-items: center;\n    white-space: nowrap;\n    font-weight: bold;\n    font-size: 1.5em;\n\n    &:before {\n      content: '';\n      background: url(",") no-repeat center;\n      background-size: contain;\n      width: 22px;\n      height: 22px;\n      margin-right: 5px;\n    }\n  }\n  .lc-pr-more-infos {\n    text-decoration: underline;\n    cursor: pointer;\n    font-weight: 500;\n    padding: 5px 0 0;\n    font-size: 0.9em;\n  }\n\n  /* border-bottom: none !important; */\n  padding: 0px !important;\n  margin: 0px !important;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  ","\n"])),(function(e){return"board"===e.displayon?"0.875em":"inherit"}),(function(){return(0,B.tx)("/assets/images/places/p+r_slots.svg")}),(function(){return(0,B.tx)("/assets/images/places/electric_slots.svg")}),(function(){return(0,B.tx)("/assets/images/places/pmr_slots.svg")}),(function(e){return"board"===e.displayon&&(0,W.AH)(v||(v=J(["\n      align-items: flex-start !important;\n      gap: 5px;\n    "])))})),ce=W.Ay.div(_||(_=J(["\n  border-bottom: none !important;\n  padding: 0;\n  margin: 0;\n  text-align: center;\n  padding: 2px 5px 5px;\n\n  .lc-bss {\n    display: flex;\n    align-items: center;\n    white-space: nowrap;\n    height: inherit;\n    padding: 5px 0 10px;\n    font-weight: bold;\n    font-size: ",";\n\n    .lc-bikes,\n    .lc-electric-bikes,\n    .lc-seats {\n      display: flex;\n      align-items: flex-end;\n\n      &:not(:first-child) {\n        padding-left: 35px !important;\n      }\n    }\n    .lc-bikes {\n      &:before {\n        content: '';\n        background: url('","') no-repeat center;\n        width: 34px;\n        height: 30px;\n        margin-right: 6px;\n      }\n    }\n    .lc-electric-bikes {\n      &:before {\n        content: '';\n        background: url('","') no-repeat center;\n        width: 34px;\n        height: 30px;\n        margin-right: 6px;\n      }\n    }\n    .lc-seats {\n      &:before {\n        content: '';\n        background: url('","') no-repeat center;\n        width: 12px;\n        height: 30px;\n        margin-right: 6px;\n        margin-bottom: -2px;\n      }\n    }\n  }\n  .lc-bss-time {\n    white-space: nowrap;\n    font-size: ",";\n  }\n  .lc-vcub-more-infos {\n    text-decoration: underline;\n    cursor: pointer;\n    font-weight: 500;\n    padding: 5px 0 0;\n    font-size: 0.9em;\n  }\n\n  ","\n"])),(function(e){return"board"===e.displayon?"1.3125em":"1.5em"}),(function(){return(0,B.tx)("/assets/images/places/vcub_bikes.svg")}),(function(){return(0,B.tx)("/assets/images/places/vcub_electric_bikes.svg")}),(function(){return(0,B.tx)("/assets/images/places/vcub_slots.svg")}),(function(e){return"board"===e.displayon?"0.875em":"inherit"}),(function(e){return"board"===e.displayon&&(0,W.AH)(y||(y=J(["\n      padding: 0;\n      margin-top: -10px;\n      text-align: left;\n    "])))})),se=W.Ay.ul(g||(g=J(["\n  padding-inline-start: 0px;\n  list-style-type: none;\n"]))),ue=(W.Ay.div(b||(b=J(["\n  display: flex;\n  align-items: center;\n  padding: 5px 0px;\n"]))),W.Ay.div(A||(A=J(["\n  display: flex;\n  align-items: center;\n  margin-right: 10px;\n\n  img {\n    height: 15px;\n    padding-left: 5px;\n  }\n"]))),W.Ay.img(E||(E=J(["\n  height: 15px;\n  padding-right: 5px;\n"])))),de=W.Ay.div(T||(T=J(["\n  margin-left: 0;\n  display: flex;\n  align-items: baseline;\n  margin-top: 5px;\n  .lc-realtime-gif {\n    width: 15px;\n  }\n"]))),pe=W.Ay.div(P||(P=J(["\n  margin-right: 10px;\n  img {\n    margin-left: 5px;\n    width: 30px;\n  }\n"]))),fe=W.Ay.div(x||(x=J(["\n  font-size: 0.875em;\n  display: flex;\n  margin-top: 8px;\n  img {\n    width: 15px;\n    height: 15px;\n    margin-right: 5px;\n  }\n"]))),me=W.Ay.div(S||(S=J(["\n  padding: 5px 0;\n  font-weight: 400;\n  color: ",";\n  font-weight: bold;\n  font-size: 0.9em;\n\n  display: flex;\n  div:nth-child(1) {\n    flex: 2;\n  }\n\n  div:nth-child(2) {\n    flex: 3;\n    display: flex;\n    flex-direction: column;\n  }\n\n  del {\n    font-size: 0.9em;\n    color: #999;\n  }\n"])),(function(){return Q})),he=W.Ay.div(j||(j=J(["\n  font-style: italic;\n  color: #555;\n  font-size: 0.8em;\n  margin-top: -5px;\n"]))),ve=W.Ay.div(O||(O=J(["\n  display: flex;\n  flex-direction: column;\n  padding: 5px 0;\n  font-weight: 500;\n  min-height: 20px;\n\n  &.lc-not-empty {\n    min-height: 100px;\n  }\n"]))),_e=W.Ay.div(R||(R=J(["\n  margin: 5px 0px;\n  display: flex;\n  div:nth-child(1) {\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 3px;\n    width: 45px;\n    div:first-child {\n      border-radius: 5px;\n      font-size: 0.9em;\n    }\n  }\n\n  div:nth-child(2) {\n    display: flex;\n    flex-direction: column;\n  }\n\n  del {\n    font-size: 0.9em;\n    color: #999;\n  }\n"]))),ye=W.Ay.span(w||(w=J(["\n  font-size: 0.9em;\n  color: #aaa;\n  font-weight: 400;\n"]))),ge=W.Ay.div(L||(L=J(["\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  display: flex;\n"]))),be=W.Ay.div(C||(C=J(["\n  padding: 2px 0px;\n  border: 1px solid rgba(0, 0, 0, 0.15);\n  border-radius: 3px;\n  margin: 0 2px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: white;\n  img {\n    width: 15px;\n    height: 15px;\n    transform: rotate(-90deg);\n  }\n"]))),Ae=W.Ay.div(N||(N=J(["\n  padding: 2px 0px;\n  border: 1px solid rgba(0, 0, 0, 0.15);\n  border-radius: 3px;\n  margin: 0 2px;\n  margin-right: 5px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: white;\n  img {\n    width: 15px;\n    height: 15px;\n    transform: rotate(90deg);\n  }\n"]))),Ee=W.Ay.div(k||(k=J(["\n  display: flex;\n  flex-direction: column;\n  position: relative;\n\n  background-color: #f1f5f5;\n  border-radius: 5px;\n  padding: 5px 10px;\n\n  margin: ",";\n\n  & > div {\n    flex: initial;\n    margin-left: initial;\n    justify-content: initial;\n  }\n"])),(function(e){return e.departure?"5px 0px 10px":"0"})),Te=W.Ay.div(I||(I=J(["\n  display: flex;\n  gap: 2px;\n  margin-top: 0px;\n  margin-bottom: 0px;\n\n  .lc-uiline-image {\n    flex: 0 0 auto !important;\n  }\n  .lc-entrance-mode {\n    width: 20px;\n    margin-left: 5px;\n  }\n\n  .lc-delays-icon {\n    background: url(",") center center no-repeat;\n  }\n\n  .lc-blocking-icon {\n    background: url(",") center center no-repeat;\n  }\n\n  .lc-lc-infos-icon {\n    background: url(",") center center no-repeat;\n  }\n"])),(function(){return(0,B.tx)("/assets/images/disruptions/delays.svg")}),(function(){return(0,B.tx)("/assets/images/disruptions/blocking.svg")}),(function(){return(0,B.tx)("/assets/images/disruptions/informations.svg")})),Pe=W.Ay.div(D||(D=J(["\n  display: flex;\n  gap: 15px;\n  align-items: center;\n  margin-top: 10px;\n  margin-bottom: 0px;\n  margin-left: 5px;\n  img {\n    height: 28px;\n    width: 28px;\n  }\n"]))),xe=W.Ay.div(M||(M=J(["\n  padding-top: 5px;\n  padding-bottom: 5px;\n  border-bottom: solid #888 1px;\n"]))),Se=W.Ay.div(U||(U=J(["\n  display: flex !important;\n  flex-wrap: wrap;\n  align-items: center;\n  gap: 7.5px;\n  img {\n    width: 22px;\n  }\n"]))),je=W.Ay.ul(G||(G=J(["\n  list-style: none;\n  margin-block: 0px;\n  padding-inline-start: 20px;\n"]))),Oe=n(707),Re=n(2391),we=n(4457),Le=n(4848),Ce="annecy-mobilites",Ne="image",ke=function(e){var t,n,r=e.place;return r.capacity||void 0!==(null===(t=r.stand)||void 0===t?void 0:t.occupancy_rate)?(0,Le.jsxs)($,{children:[r.capacity?(0,Le.jsxs)(ee,{children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("total-places")})," ",(0,Le.jsx)(ie,{className:"lc-place-info-content",children:r.capacity})]}):null,r.capacity_PRM&&(0,Le.jsxs)(ee,{children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("total-places-prm")})," ",(0,Le.jsx)(ie,{children:r.capacity_PRM})]}),r.guarded&&(0,Le.jsxs)(ee,{children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("parking-guarded")})," ",(0,Le.jsx)(ie,{children:r.guarded?(0,B.Tl)("yes"):(0,B.Tl)("no")})]}),void 0!==(null==r||null===(n=r.stand)||void 0===n?void 0:n.occupancy_rate)?(0,Le.jsxs)(oe,{"data-realtime-seats":!0,children:[(0,Le.jsxs)("b",{children:[(0,B.Tl)("title-occupancy-rate")," "]}),(0,Le.jsxs)("span",{children:[r.stand.occupancy_rate,"%",(0,Le.jsx)(z.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,B.Tl)("realtime-gif-title"),children:(0,Le.jsx)(ae,{src:(0,B.tx)("/assets/images/realtime.gif"),alt:(0,B.Tl)("realtime-gif-alt"),"aria-hidden":"true"})})]})]}):null]}):null},Ie=function(e){var t,n,r,i,o,a,l,c,s,u,d=e.place,p=e.displayon,f=(0,Y.wA)(),m=(0,Y.d4)((function(e){return e.board})),h=m.currentStationDepartureIndex,v=m.currentStationArrivalIndex;return d&&"map"!==p?(0,Le.jsxs)($,{children:[(0,Le.jsx)(he,{children:(0,B.Tl)("sncf-stations-date",!1,{key:"date",value:(0,K.Yq)(new Date,"d/mY")})}),(0,Le.jsxs)(Ee,{className:"lc-station-departures",departure:"".concat(null!==(t=null===(n=d.stand)||void 0===n||null===(n=n.departures)||void 0===n?void 0:n.length)&&void 0!==t&&t),children:[(0,Le.jsx)(me,{children:(0,Le.jsx)("div",{children:(0,B.Tl)("sncf-stations-departure")})}),(0,Le.jsx)(ve,{className:d.stand&&null!==(r=d.stand)&&void 0!==r&&null!==(r=r.departures)&&void 0!==r&&r.length?"lc-not-empty":"",children:d.stand&&null!==(i=d.stand)&&void 0!==i&&null!==(i=i.departures)&&void 0!==i&&i.length?d.stand.departures.filter((function(e,t){return t>3*h-1&&t<=3*h+2})).map((function(e,t){return(0,Le.jsxs)(_e,{className:"lc-station-schedules-entry",tabIndex:"0","aria-label":(0,B.Tl)("aria-station-label",!1,{key:"type",value:(0,B.Tl)("sncf-stations-departure",!1)},{key:"mode",value:e.mode},{key:"time",value:e.basetime},{key:"direction",value:e.direction}),children:[(0,Le.jsxs)("div",{children:[(0,Le.jsx)("div",{children:e.realtime?e.time:e.basetime}),e.realtime&&(0,Le.jsx)("del",{children:e.basetime})]}),(0,Le.jsxs)("div",{className:"lc-station-schedules-entryDirection",children:[e.direction,(0,Le.jsx)(ye,{className:"lc-station-schedules-entry-mode",children:e.mode})]})]},t)})):(0,B.Tl)("no-stations-departures")}),d.stand&&(null===(o=d.stand)||void 0===o||null===(o=o.departures)||void 0===o?void 0:o.length)>3&&(0,Le.jsxs)(ge,{children:[h>0&&(0,Le.jsx)(Ae,{onClick:function(e){e.stopPropagation(),h>0&&f((0,V.gT)("departure"))},onKeyUp:function(e){return(0,B.zQ)(e,(function(){h>0&&f((0,V.gT)("departure"))}))},role:"button",tabIndex:"0","aria-label":(0,B.Tl)("aria-station-previous-departure",!1),children:(0,Le.jsx)("img",{src:(0,B.tx)("/assets/images/v.svg"),alt:(0,B.Tl)("collapse-arrow"),"aria-hidden":"true"})}),3*(h+1)<(null===(a=d.stand)||void 0===a||null===(a=a.departures)||void 0===a?void 0:a.length)&&(0,Le.jsx)(be,{onClick:function(e){e.stopPropagation(),h<6&&f((0,V._S)("departure"))},onKeyUp:function(e){return(0,B.zQ)(e,(function(){h<6&&f((0,V._S)("departure"))}))},role:"button",tabIndex:"0","aria-label":(0,B.Tl)("aria-station-next-departure",!1),children:(0,Le.jsx)("img",{src:(0,B.tx)("/assets/images/v.svg"),alt:(0,B.Tl)("collapse-arrow"),"aria-hidden":"true"})})]})]}),(0,Le.jsxs)(Ee,{className:"lc-station-arrivals",children:[(0,Le.jsx)(me,{children:(0,Le.jsx)("div",{children:(0,B.Tl)("sncf-stations-arrival")})}),(0,Le.jsx)(ve,{className:d.stand&&null!==(l=d.stand)&&void 0!==l&&null!==(l=l.arrivals)&&void 0!==l&&l.length?" lc-not-empty":"",children:d.stand&&null!==(c=d.stand)&&void 0!==c&&null!==(c=c.arrivals)&&void 0!==c&&c.length?d.stand.arrivals.filter((function(e,t){return t>3*v-1&&t<=3*v+2})).map((function(e,t){return(0,Le.jsxs)(_e,{tabIndex:"0","aria-label":(0,B.Tl)("aria-station-label",!1,{key:"type",value:(0,B.Tl)("sncf-stations-arrival",!1)},{key:"mode",value:e.mode},{key:"time",value:e.basetime},{key:"direction",value:e.direction}),children:[(0,Le.jsxs)("div",{children:[(0,Le.jsx)("div",{children:e.realtime?e.time:e.basetime}),e.realtime&&(0,Le.jsx)("div",{children:(0,Le.jsx)("del",{children:e.basetime})})]}),(0,Le.jsxs)("div",{className:"lc-station-schedules-entryDirection",children:[e.direction,(0,Le.jsx)("br",{}),(0,Le.jsx)(ye,{className:"lc-station-schedules-entry-mode",children:e.mode})]})]},t)})):(0,B.Tl)("no-stations-arrivals")}),d.stand&&(null===(s=d.stand)||void 0===s||null===(s=s.arrivals)||void 0===s?void 0:s.length)>3&&(0,Le.jsxs)(ge,{children:[v>0&&(0,Le.jsx)(Ae,{onClick:function(e){e.stopPropagation(),v>0&&f((0,V.gT)("arrival"))},onKeyUp:function(e){return(0,B.zQ)(e,(function(){v>0&&f((0,V.gT)("arrival"))}))},role:"button",tabIndex:"0","aria-label":(0,B.Tl)("aria-station-previous-arrival",!1),children:(0,Le.jsx)("img",{src:(0,B.tx)("/assets/images/v.svg"),alt:(0,B.Tl)("collapse-arrow"),"aria-hidden":"true"})}),3*(v+1)<(null===(u=d.stand)||void 0===u||null===(u=u.departures)||void 0===u?void 0:u.length)&&(0,Le.jsx)(be,{onClick:function(e){e.stopPropagation(),v<6&&f((0,V._S)("arrival"))},onKeyUp:function(e){return(0,B.zQ)(e,(function(){v<6&&f((0,V._S)("arrival"))}))},role:"button",tabIndex:"0","aria-label":(0,B.Tl)("aria-station-next-arrival",!1),children:(0,Le.jsx)("img",{src:(0,B.tx)("/assets/images/v.svg"),alt:(0,B.Tl)("collapse-arrow"),"aria-hidden":"true"})})]})]})]}):null},De=function(e){var t,n=e.place,r=""!==(0,B.Tl)("capacity",!1)&&"capacity"!==(0,B.Tl)("capacity",!1)?"capacity":"total-places";return(0,Le.jsxs)(Le.Fragment,{children:[void 0!==n.capacity&&n.capacity>=0?(0,Le.jsxs)(ee,{className:"lc-place-bicycle-parking-capacity",tabIndex:"0","aria-label":(0,B.Tl)(r,!1)+" "+n.capacity,children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)(r)})," ",(0,Le.jsx)(ie,{className:"lc-place-info-content",children:n.capacity})]}):null,void 0!==n.status&&"string"==typeof n.status?(0,Le.jsxs)(ee,{className:"lc-place-bicycle-parking-status",tabIndex:"0","aria-label":(0,B.Tl)("place-status",!1)+" "+(0,B.Tl)(n.status,!1),children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("place-status")})," ",(0,Le.jsx)(ie,{className:"lc-place-info-content",children:(0,B.Tl)(n.status)})]}):null,n.type?(0,Le.jsxs)(ee,{tabIndex:"0","aria-label":(0,B.Tl)("place-type",!1)+" "+(0,B.Tl)(n.type,!1),children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("place-type")})," ",(0,Le.jsx)(ie,{className:"lc-place-info-content",children:(0,B.Tl)(n.type)})]}):null,null!=n&&null!==(t=n.stand)&&void 0!==t&&t.available_places?(0,Le.jsxs)(ee,{tabIndex:"0","aria-label":(0,B.Tl)("aria-bikes-places-available",!1,{key:"seats",value:n.stand.available_places}),className:"lc-place-bss-availability",children:[(0,Le.jsxs)(re,{className:"lc-place-info-title",children:[(0,B.Tl)("nb-bikes-places-available")," "]}),(0,Le.jsxs)(ie,{className:"lc-place-info-content",children:[n.stand.available_places,(0,Le.jsx)(ue,{src:(0,B.tx)("/assets/images/bss-seat.svg"),alt:"","aria-hidden":"true"}),(0,Le.jsx)(z.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,B.Tl)("realtime-gif-title"),children:(0,Le.jsx)(ae,{src:(0,B.tx)("/assets/images/realtime.gif"),alt:(0,B.Tl)("realtime-gif-alt"),"aria-hidden":"true",width:"12px",height:"12px"})})]})]}):null]})},Me=function(e){var t,n=e.place,r=e.options;switch(Ce){case"montelimar-montelibus":var i,o,a;n.is_available||"open"!==(null==n||null===(i=n.stand)||void 0===i?void 0:i.status)||(n.is_available=!0);var l=(null===(o=n.stand)||void 0===o?void 0:o.availableBikes)>=0?n.stand.availableBikes:n.availableBikes,c=(null===(a=n.stand)||void 0===a?void 0:a.availablePlaces)>=0?n.stand.availablePlaces:n.availablePlaces;return(0,Le.jsxs)(Le.Fragment,{children:[void 0!==n.is_available&&!1===n.is_available&&(0,Le.jsx)($,{children:(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("bike-station-unavailable")})}),void 0!==l||void 0!==c?(0,Le.jsxs)("div",{className:"popupContainer",children:[void 0!==l&&(0,Le.jsxs)("div",{"data-realtime-seats":!0,className:"placeInfoContainer",children:[(0,Le.jsx)("img",{src:(0,B.tx)("/assets/images/modes/bss.svg"),alt:(0,B.Tl)("bss-bikes-available"),className:"bikePicto"}),(0,Le.jsxs)("div",{className:"availableBikesAndRealtimeGif",children:[(0,Le.jsx)("div",{className:"availableBikes",children:l>=0?l:(0,B.Tl)("no-data")}),(0,Le.jsx)(z.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,B.Tl)("realtime-gif-title"),children:(0,Le.jsx)("img",{src:(0,B.tx)("/assets/images/realtime.gif"),alt:(0,B.Tl)("realtime-gif-alt"),"aria-hidden":"true",className:"realtimeGif"})})]})]}),void 0!==c&&(0,Le.jsxs)("div",{"data-realtime-seats":!0,className:"placeInfoContainer",children:[(0,Le.jsx)("img",{src:(0,B.tx)("/assets/images/bss-seat.svg"),alt:(0,B.Tl)("bss-bikes-places-available"),className:"bikePicto"}),(0,Le.jsxs)("div",{className:"availableBikesAndRealtimeGif",children:[(0,Le.jsxs)("div",{className:"availableBikes",children:[" ",c>=0?c:(0,B.Tl)("no-data")]}),(0,Le.jsx)(z.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,B.Tl)("realtime-gif-title"),children:(0,Le.jsx)(ae,{src:(0,B.tx)("/assets/images/realtime.gif"),alt:(0,B.Tl)("realtime-gif-alt"),"aria-hidden":"true",marginLeft:!0,width:"15px",height:"15px"})})]})]})]}):null]});case"toulouse-tisseo":return(0,Le.jsxs)(Le.Fragment,{children:[void 0!==n.availableMechanicalBikes&&(0,Le.jsx)($,{children:(0,Le.jsxs)(ee,{"data-realtime-seats":!0,children:[(0,Le.jsx)(ue,{src:(0,B.tx)("/assets/images/modes/bss.svg"),alt:(0,B.Tl)("bss-bikes-available")}),(0,Le.jsxs)(re,{className:"lc-place-info-title",children:[(0,B.Tl)("nb-bikes-available")," "]}),(0,Le.jsxs)(ie,{className:"lc-place-info-content lc-bike-interface",children:[" ",n.availableMechanicalBikes>=0?n.availableMechanicalBikes:(0,B.Tl)("no-data"),(0,Le.jsx)(z.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,B.Tl)("realtime-gif-title"),children:(0,Le.jsx)(ae,{src:(0,B.tx)("/assets/images/realtime.gif"),alt:(0,B.Tl)("realtime-gif-alt"),"aria-hidden":"true",marginLeft:!0,width:"15px",height:"15px"})})]})]})}),void 0!==n.availableElectricalBikes&&(0,Le.jsx)($,{children:(0,Le.jsxs)(ee,{"data-realtime-seats":!0,children:[(0,Le.jsx)(ue,{src:(0,B.tx)("/assets/images/modes/bss-electric.svg"),alt:(0,B.Tl)("bss-electric-bikes-available")}),(0,Le.jsxs)(re,{className:"lc-place-info-title",children:[(0,B.Tl)("nb-electric-bikes-available")," "]}),(0,Le.jsxs)(ie,{className:"lc-place-info-content lc-bike-interface",children:[" ",n.availableElectricalBikes>=0?n.availableElectricalBikes:(0,B.Tl)("no-data"),(0,Le.jsx)(z.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,B.Tl)("realtime-gif-title"),children:(0,Le.jsx)(ae,{src:(0,B.tx)("/assets/images/realtime.gif"),alt:(0,B.Tl)("realtime-gif-alt"),"aria-hidden":"true",marginLeft:!0,width:"15px",height:"15px"})})]})]})}),void 0!==n.availablePlaces&&(0,Le.jsx)($,{children:(0,Le.jsxs)(ee,{"data-realtime-seats":!0,children:[(0,Le.jsx)(ue,{src:(0,B.tx)("/assets/images/bss-seat.svg"),alt:(0,B.Tl)("bss-bikes-places-available")}),(0,Le.jsxs)(re,{className:"lc-place-info-title",children:[(0,B.Tl)("nb-bikes-places-available")," "]}),(0,Le.jsxs)(ie,{className:"lc-place-info-content lc-bike-interface",children:[" ",n.availablePlaces>=0?n.availablePlaces:(0,B.Tl)("no-data"),(0,Le.jsx)(z.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,B.Tl)("realtime-gif-title"),children:(0,Le.jsx)(ae,{src:(0,B.tx)("/assets/images/realtime.gif"),alt:(0,B.Tl)("realtime-gif-alt"),"aria-hidden":"true",marginLeft:!0,width:"15px",height:"15px"})})]})]})})]});default:if(n.stand&&!0!==n.stand.forceUseBikeInterface){var s,u=n.stand&&Object.keys(n.stand).length>0?n.stand.available_bikes:n.availablePlaces?n.availablePlaces:n.availableBikes||(0,B.Tl)("no-data"),d=n.stand&&Object.keys(n.stand).length>0?n.stand.available_places:(0,B.Tl)("no-data");return n.is_available||"open"!==(null==n||null===(s=n.stand)||void 0===s?void 0:s.status)||(n.is_available=!0),(0,Le.jsx)(Le.Fragment,{children:!0===n.is_available?(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsxs)($,{tabIndex:"0","aria-label":(0,B.Tl)("aria-bikes-available",!1,{key:"bikes",value:u})+". "+(0,B.Tl)("aria-bikes-available",!1,{key:"seats",value:u}),className:"lc-place-bss-availability",children:[(0,Le.jsxs)(re,{className:"lc-place-info-title",children:[(0,B.Tl)("nb-bikes-available")," "]}),(0,Le.jsxs)(ie,{className:"lc-place-info-content",children:[parseInt(u),(0,Le.jsx)(ue,{src:(0,B.tx)("/assets/images/modes/bss.svg"),alt:(0,B.Tl)("bss-bikes-available"),"aria-hidden":"true"}),(0,Le.jsx)(z.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,B.Tl)("realtime-gif-title"),children:(0,Le.jsx)(ae,{src:(0,B.tx)("/assets/images/realtime.gif"),alt:(0,B.Tl)("realtime-gif-alt"),"aria-hidden":"true",width:"12px",height:"12px"})})]})]}),d>=0?(0,Le.jsxs)($,{tabIndex:"0","aria-label":(0,B.Tl)("aria-bikes-places-available",!1,{key:"bikes",value:d})+". "+(0,B.Tl)("aria-bikes-places-available",!1,{key:"seats",value:d}),className:"lc-place-bss-availability",children:[(0,Le.jsxs)(re,{className:"lc-place-info-title",children:[(0,B.Tl)("nb-bikes-places-available")," "]}),(0,Le.jsxs)(ie,{className:"lc-place-info-content",children:[d,(0,Le.jsx)(ue,{src:(0,B.tx)("/assets/images/bss-seat.svg"),alt:(0,B.Tl)("bss-bikes-places-available"),"aria-hidden":"true"}),(0,Le.jsx)(z.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,B.Tl)("realtime-gif-title"),children:(0,Le.jsx)(ae,{src:(0,B.tx)("/assets/images/realtime.gif"),alt:(0,B.Tl)("realtime-gif-alt"),"aria-hidden":"true",width:"12px",height:"12px"})})]})]}):null]}):(0,Le.jsx)($,{children:(0,Le.jsx)(re,{className:"lc-place-info-title",tabIndex:"0","aria-label":(0,B.Tl)("bss-closed",!1),children:(0,B.Tl)("bss-closed")})})})}return n instanceof q.A||!0===(null===(t=n.stand)||void 0===t?void 0:t.forceUseBikeInterface)?(0,Le.jsxs)(Le.Fragment,{children:[void 0!==n.is_available&&!1===n.is_available&&(0,Le.jsx)($,{children:(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("bike-station-unavailable")})}),void 0!==n.availableBikes&&(0,Le.jsx)($,{children:(0,Le.jsxs)(ee,{"data-realtime-seats":!0,children:[(0,Le.jsx)(ue,{src:(0,B.tx)("/assets/images/modes/bss.svg"),alt:(0,B.Tl)("bss-bikes-available")}),(0,Le.jsxs)(re,{className:"lc-place-info-title",children:[(0,B.Tl)("nb-bikes-available")," "]}),(0,Le.jsxs)(ie,{className:"lc-place-info-content lc-bike-interface",children:[" ",n.availableBikes>=0?n.availableBikes:(0,B.Tl)("no-data"),(0,Le.jsx)(z.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,B.Tl)("realtime-gif-title"),children:(0,Le.jsx)(ae,{src:(0,B.tx)("/assets/images/realtime.gif"),alt:(0,B.Tl)("realtime-gif-alt"),"aria-hidden":"true",marginLeft:!0,width:"15px",height:"15px"})})]})]})}),void 0!==n.availablePlaces&&(0,Le.jsx)($,{children:(0,Le.jsxs)(ee,{"data-realtime-seats":!0,children:[(0,Le.jsx)(ue,{src:(0,B.tx)("/assets/images/bss-seat.svg"),alt:(0,B.Tl)("bss-bikes-places-available")}),(0,Le.jsxs)(re,{className:"lc-place-info-title",children:[(0,B.Tl)("nb-bikes-places-available")," "]}),(0,Le.jsxs)(ie,{className:"lc-place-info-content lc-bike-interface",children:[" ",n.availablePlaces>=0?n.availablePlaces:(0,B.Tl)("no-data"),(0,Le.jsx)(z.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,B.Tl)("realtime-gif-title"),children:(0,Le.jsx)(ae,{src:(0,B.tx)("/assets/images/realtime.gif"),alt:(0,B.Tl)("realtime-gif-alt"),"aria-hidden":"true",marginLeft:!0,width:"15px",height:"15px"})})]})]})}),!0!==(null==r?void 0:r.dontShowCapacity)&&void 0!==n.capacity&&"board"===e.displayon&&(0,Le.jsx)($,{children:(0,Le.jsxs)(ee,{children:[(0,Le.jsxs)(re,{className:"lc-place-info-title",children:[(0,B.Tl)("nb-seats-available")," "]}),(0,Le.jsxs)(ie,{className:"lc-place-info-content",children:[n.capacity||(0,B.Tl)("no-data"),(0,Le.jsx)(ue,{src:(0,B.tx)("/assets/images/bss-seat.svg"),alt:(0,B.Tl)("available-places")})]})]})}),void 0!==n.prices&&(0,Le.jsxs)($,{children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("prices")}),(0,Le.jsx)(ie,{className:"lc-place-info-content",children:(0,Le.jsx)(se,{children:Object.keys(n.prices).map((function(e){var t=parseInt(e),r=0;return e>59&&(r=parseInt(Math.floor(t/60)),t%=60),t<10&&(t="0"+t),(0,Le.jsxs)("li",{children:[r>0?"".concat(r,"h").concat(t):"".concat(t,"min")," : ",n.prices[e],"€"]},"price-"+e)}))})})]}),void 0!==n.price_url&&(0,Le.jsxs)($,{children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("see-prices")}),(0,Le.jsx)(ie,{className:"lc-place-info-content",children:(0,Le.jsx)("a",{href:n.price_url,target:"_blank",rel:"noopener noreferrer",children:n.price_url})})]})]}):null}},Ue=function(e){var t,n,r,i=e.place;return i.stand?(0,Le.jsxs)($,{children:[null!==(t=i.stand)&&void 0!==t&&t.total_places||null!==(n=i.stand)&&void 0!==n&&n.occupied_PRM?(0,Le.jsxs)(ee,{children:[(0,Le.jsxs)(re,{className:"lc-place-info-title",children:[(0,B.Tl)("total-places")," "]}),(0,Le.jsxs)(ie,{className:"lc-place-info-content",children:[i.stand.total_places,"  ",i.stand.occupied_PRM?"- "+i.stand.occupied_PRM+" "+(0,B.Tl)("disabled-spaces"):""]})]}):null,void 0!==(null==i||null===(r=i.stand)||void 0===r?void 0:r.occupancy_rate)?(0,Le.jsxs)(oe,{"data-realtime-seats":!0,children:[(0,Le.jsxs)("b",{children:[(0,B.Tl)("title-occupancy-rate")," "]}),(0,Le.jsxs)("span",{children:[i.stand.occupancy_rate,"%",(0,Le.jsx)(z.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,B.Tl)("realtime-gif-title"),children:(0,Le.jsx)(ae,{src:(0,B.tx)("/assets/images/realtime.gif"),alt:(0,B.Tl)("realtime-gif-alt"),"aria-hidden":"true"})})]})]}):null]}):null},Ge=function(e){var t,n,r,i,o,a,l,c,s,u,d,p,f,m,h=e.place;return we.j.getState().app.configApp.hide_parking_capacity&&!h.capacity?null:"rennes-star"===Ce?"FERME"===(null===(t=h.stand)||void 0===t?void 0:t.state)?(0,Le.jsx)("div",{className:"lc-pr-realtime-seats lc-no-available-places","data-realtime-seats":!0,children:(0,B.Tl)("closed-pr")}):h.stand?(0,Le.jsxs)("div",{className:"lc-poi-content-parking-availability",children:[(0,Le.jsx)("img",{src:(0,B.tx)("/assets/images/realtime.gif"),alt:(0,B.Tl)("realtime-gif-alt"),title:(0,B.Tl)("realtime-gif-title")})," ",(0,B.Tl)("realtime-available-places",!1,{key:"time",value:(new Date).toLocaleTimeString("fr",{hour:"2-digit",minute:"2-digit"})}),(0,Le.jsxs)("div",{className:"lc-poi-content-parking-car-park-places",children:[(null===(n=h.stand)||void 0===n?void 0:n.available)>=0&&(0,Le.jsxs)("div",{children:[null===(r=h.stand)||void 0===r?void 0:r.available," ",(0,B.Tl)("realtime-available-places-places",!1)]}),(null===(i=h.stand)||void 0===i?void 0:i.available_ridesharing)>=0&&(0,Le.jsxs)("div",{children:[null===(o=h.stand)||void 0===o?void 0:o.available_ridesharing," ",(0,B.Tl)("realtime-available-places-ridesharing",!1)]}),(null===(a=h.stand)||void 0===a?void 0:a.available_PRM)>=0&&(0,Le.jsxs)("div",{children:[null===(l=h.stand)||void 0===l?void 0:l.available_PRM," ",(0,B.Tl)("realtime-available-places-pmr",!1)]}),(null===(c=h.stand)||void 0===c?void 0:c.available_electric_vehicle)>=0&&(0,Le.jsxs)("div",{children:[null===(s=h.stand)||void 0===s?void 0:s.available_electric_vehicle," ",(0,B.Tl)("realtime-available-places-electric",!1)]})]})]}):null:(0,Le.jsxs)($,{className:"lc-place-info",tabIndex:"0","aria-label":h.capacity+" "+(0,B.Tl)("total-places",!1)+". "+(h.stand&&h.stand.occupied_PRM?h.stand.occupied_PRM+" "+(0,B.Tl)("disabled-spaces",!1)+". ":"")+(h.stand&&h.stand.available&&0!==h.stand.available?(0,B.Tl)("aria-available-places",!1,{key:"count",value:h.stand.available}):h.stand&&0===h.stand.available?(0,B.Tl)("no-available-places",!1):(0,B.Tl)("no-informations-for-available-places",!1)),children:[h.stand&&!1===h.stand.has_realtime||!h.stand&&!1===h.has_realtime?(0,Le.jsx)(oe,{"data-realtime-seats":!0,children:(0,B.Tl)("no-pr-no-realtime-data")}):h.stand&&h.stand.available&&0!==h.stand.available||h.stand&&h.stand.available_PRM&&0!==h.stand.available_PRM?(0,Le.jsx)(Le.Fragment,{children:(0,Le.jsxs)(oe,{"data-realtime-seats":!0,children:[(0,Le.jsxs)("b",{children:[(0,B.Tl)("realtime-availability")," "]}),h.stand.available&&0!==h.stand.available?(0,Le.jsxs)("span",{children:[h.stand.available," ",(0,B.Tl)("available-places")," ",(0,Le.jsx)(z.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,B.Tl)("realtime-gif-title"),children:(0,Le.jsx)(ae,{src:(0,B.tx)("/assets/images/realtime.gif"),alt:(0,B.Tl)("realtime-gif-alt"),"aria-hidden":"true"})})]}):null,h.stand.available_PRM&&0!==h.stand.available_PRM?(0,Le.jsxs)("span",{children:[0!==h.stand.available?" / ":"",h.stand.available_PRM," ",(0,B.Tl)("realtime-disabled-spaces")," ",(0,Le.jsx)(z.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,B.Tl)("realtime-gif-title"),children:(0,Le.jsx)(ae,{src:(0,B.tx)("/assets/images/realtime.gif"),alt:(0,B.Tl)("realtime-gif-alt"),"aria-hidden":"true"})})]}):null]})}):h.stand&&0===h.stand.available?(0,Le.jsx)(oe,{"data-realtime-seats":!0,children:(0,B.Tl)("no-available-places")}):(0,Le.jsx)(oe,{"data-realtime-seats":!0,className:"lc-no-informations-for-available-places",children:(0,B.Tl)("no-informations-for-available-places")}),(null===(u=h.stand)||void 0===u?void 0:u.available_electric_vehicle)>=0?(0,Le.jsxs)(te,{marginTop:"5",children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("available-electric-car")})," ",(0,Le.jsxs)(ie,{className:"lc-place-info-content",children:[null===(d=h.stand)||void 0===d?void 0:d.available_electric_vehicle," ",(0,Le.jsx)(z.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,B.Tl)("realtime-gif-title"),children:(0,Le.jsx)(ae,{src:(0,B.tx)("/assets/images/realtime.gif"),alt:(0,B.Tl)("realtime-gif-alt"),"aria-hidden":"true",marginLeft:!0})})]})]}):null,(null===(p=h.stand)||void 0===p?void 0:p.available_ridesharing)>=0?(0,Le.jsxs)(te,{marginTop:"5",children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("available-cosharing-car")})," ",(0,Le.jsxs)(ie,{className:"lc-place-info-content",children:[null===(f=h.stand)||void 0===f?void 0:f.available_ridesharing," ",(0,Le.jsx)(z.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,B.Tl)("realtime-gif-title"),children:(0,Le.jsx)(ae,{src:(0,B.tx)("/assets/images/realtime.gif"),alt:(0,B.Tl)("realtime-gif-alt"),"aria-hidden":"true",marginLeft:!0})})]})]}):null,h.capacity&&(0,Le.jsxs)(ee,{marginTop:"5",children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("total-places")})," ",(0,Le.jsx)(ie,{className:"lc-place-info-content",children:h.capacity})]}),null!==(m=h.stand)&&void 0!==m&&m.occupied_PRM?(0,Le.jsxs)(ee,{marginTop:"5",className:"lc-place-content-parking-occipied-prm",children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("disabled-spaces")})," ",(0,Le.jsx)(ie,{children:h.stand.occupied_PRM})]}):null,h.available_bikes?(0,Le.jsxs)(ee,{marginTop:"5",className:"lc-place-content-parking-available-bikes",children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("nb-bikes-available")})," ",(0,Le.jsx)(ie,{children:h.available_bikes})]}):null,h.available_secured_bikes?(0,Le.jsxs)(ee,{marginTop:"5",className:"lc-place-content-parking-available-secured-bikes",children:[(0,Le.jsx)(re,{children:(0,B.Tl)("nb-bikes-secured-available")})," ",(0,Le.jsx)(ie,{children:h.available_secured_bikes})]}):null,h.capacity_PRM?(0,Le.jsxs)(ee,{marginTop:"5",children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("disabled-spaces",!1)})," ",(0,Le.jsx)(ie,{className:"lc-place-info-content",children:h.capacity_PRM})]}):null]})},He=function(e){var t,n,r=e.place,i=e.options,o=e.language,a=e.displayon,l=(0,Y.d4)((function(e){return e.app})).component.props.moduleData,c=(null==i||null===(t=i.thematics)||void 0===t||null===(t=t.find((function(e){return"p+r"===e.name})))||void 0===t?void 0:t.details)||l.forcePRDetails,s=function(){return(0,X.i)({clicked:"p+r-more-infos",id:r.id})},u=r.updatedAt?new Date(r.updatedAt.replace(" ","T")):null,d=new Date,p=u?(null==u?void 0:u.getDate())===d.getDate()&&(null==u?void 0:u.getMonth())===d.getMonth()&&(null==u?void 0:u.getFullYear())===d.getFullYear()?"".concat((0,B.Tl)("data-updated-at")," ").concat((0,K.Yq)(u,"h:m",o)):"".concat((0,B.Tl)("data-updated-on")," ").concat((0,K.Yq)(u,"d/m/y h:m",o)):null;return(0,Le.jsxs)(le,{displayon:a,children:[(0,Le.jsx)("address",{className:"lc-pr-address",children:r.info}),"map"===a&&r.predictFilter&&(null!==(n=r.stand)&&void 0!==n&&n.time||r.predictions)?(0,Le.jsx)("strong",{children:(0,B.Tl)("pr-temporary-predict-filter")}):(0,Le.jsx)(Le.Fragment,{children:"map"===a&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsxs)("div",{className:"lc-pr-slots-container",children:["closed"===r.color?(0,Le.jsx)("div",{className:"lc-pr-realtime-seats lc-no-available-places","data-realtime-seats":!0,children:(0,B.Tl)("closed-pr")}):r.stand.available&&0!==r.stand.available?(0,Le.jsx)(Le.Fragment,{children:(0,Le.jsxs)("div",{className:"lc-pr-realtime-seats","data-realtime-seats":!0,children:[r.stand.available,null===r.stand.available_electric_cars&&null===r.stand.available_prm&&(0,Le.jsx)("span",{className:"lc-slots",children:r.stand.available<=1?(0,B.Tl)("slot"):(0,B.Tl)("slots")})]})}):0===r.stand.available?(0,Le.jsx)("div",{className:"lc-pr-realtime-seats lc-no-available-places","data-realtime-seats":!0,children:(0,B.Tl)("no-available-places")}):(0,Le.jsx)("div",{className:"lc-pr-realtime-seats lc-no-available-places","data-realtime-seats":!0,children:(0,B.Tl)("no-informations-for-available-places")}),"closed"!==r.color&&null!==r.stand.available_electric_cars&&(0,Le.jsx)(Le.Fragment,{children:(0,Le.jsx)("div",{className:"lc-pr-realtime-elec-slots",children:r.stand.available_electric_cars})}),"closed"!==r.color&&null!==r.stand.available_prm&&(0,Le.jsx)(Le.Fragment,{children:(0,Le.jsx)("div",{className:"lc-pr-realtime-pmr-slots",children:r.stand.available_prm})})]}),r.stand.available>0&&(0,Le.jsx)("div",{className:"lc-pr-time",children:r.stand.time?(0,B.Tl)("predict-".concat(r.stand.time)):p}),c&&(0,Le.jsx)("div",{className:"lc-pr-more-infos",role:"button",tabIndex:"0",onClick:function(e){e.stopPropagation(),s()},onKeyDown:function(e){return(0,B.zQ)(s,e)},children:(0,B.Tl)("more-informations")})]})})]})},Ye=function(e){var t,n,r=e.place,i=e.options,o=e.displayon,a=null==i||null===(t=i.thematics)||void 0===t||null===(t=t.find((function(e){return"vcub"===e.name})))||void 0===t?void 0:t.details,l=function(){return(0,X.i)({clicked:"vcub-more-infos",id:r.id})};return r.stand?(0,Le.jsx)(ce,{displayon:o,children:"map"===o&&r.predictFilter&&(null!==(n=r.stand)&&void 0!==n&&n.time||r.predictions)?(0,Le.jsx)("strong",{children:(0,B.Tl)("vcub-temporary-predict-filter")}):"map"===o&&(0,Le.jsxs)(Le.Fragment,{children:["unavailable"===r.color?(0,Le.jsx)("div",{className:"lc-vcub-unavailable",children:(0,B.Tl)("vcub-unavailable")}):"maintenance"===r.color?(0,Le.jsx)("div",{className:"lc-vcub-maintenance",children:(0,B.Tl)("vcub-maintenance")}):(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsxs)("div",{className:"lc-bss","data-realtime-seats":!0,children:[(0,Le.jsx)("span",{className:"lc-bikes",children:r.stand.available_bikes}),!r.stand.time&&(0,Le.jsx)("span",{className:"lc-electric-bikes",children:r.stand.available_electric_bikes}),(0,Le.jsx)("span",{className:"lc-seats",children:r.stand.available_places})]}),(0,Le.jsx)("div",{className:"lc-bss-time",children:r.stand.time?(0,B.Tl)("predict-".concat(r.stand.time)):(0,B.Tl)("data-update-time")})]}),a&&(0,Le.jsx)("div",{className:"lc-vcub-more-infos",role:"button",tabIndex:"0",onClick:function(e){e.stopPropagation(),l()},onKeyDown:function(e){return(0,B.zQ)(l,e)},children:(0,B.Tl)("more-informations")})]})}):null},Fe=function(e){var t=e.place;return t?(0,Le.jsx)(Le.Fragment,{children:(0,Le.jsxs)($,{children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("services-title")}),(0,Le.jsxs)(ie,{className:"lc-place-info-content",children:[void 0!==t.bicycle_rental&&(0,Le.jsxs)("div",{children:[(0,B.Tl)("bicycle-rental",!1)," :"," ",!0===t.bicycle_rental?(0,B.Tl)("yes",!1):(0,B.Tl)("no",!1)]}),void 0!==t.pump&&(0,Le.jsxs)("div",{children:[(0,B.Tl)("pump",!1)," : ",!0===t.pump?(0,B.Tl)("yes",!1):(0,B.Tl)("no",!1)]}),void 0!==t.repair&&(0,Le.jsxs)("div",{children:[(0,B.Tl)("repair-station",!1)," :"," ",!0===t.repair?(0,B.Tl)("yes",!1):(0,B.Tl)("no",!1)]})]})]})}):null},Be=function(e){var t=e.place;return!!t&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)($,{children:(0,Le.jsxs)(ee,{children:[(0,Le.jsxs)(re,{className:"lc-place-info-title",tabIndex:"0","aria-label":t.capacity+" "+(0,B.Tl)("total-places",!1),children:[(0,B.Tl)("nb-places")," "]}),(0,Le.jsx)(ie,{className:"lc-place-info-content",children:t.capacity})]})}),t.prices&&(0,Le.jsx)($,{children:(0,Le.jsxs)(ee,{children:[(0,Le.jsxs)(re,{className:"lc-place-info-title",tabIndex:"0","aria-label":(0,B.Tl)("prices",!1)+" "+t.prices.split(";").map((function(e){return e.replace("month",(0,B.Tl)("month",!1)).replace("year",(0,B.Tl)("year",!1))})).join(", "),children:[(0,B.Tl)("prices")," "]}),(0,Le.jsx)(ie,{className:"lc-place-info-content",children:t.prices.split(";").map((function(e){return e.replace("month",(0,B.Tl)("month",!1)).replace("year",(0,B.Tl)("year",!1))})).join(", ")})]})})]})},Ve=function(e){var t=e.place;return t?(0,Le.jsxs)(ee,{tabIndex:"0","aria-label":t.capacity+" "+(0,B.Tl)("total-places",!1),children:[(0,Le.jsxs)(re,{className:"lc-place-info-title",children:[(0,B.Tl)("nb-places")," "]}),(0,Le.jsx)(ie,{className:"lc-place-info-content",children:t.capacity})]}):null},ze=function(e){var t=e.place;return t?(0,Le.jsxs)($,{children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("services-title")}),(0,Le.jsxs)(ie,{className:"lc-place-info-content",children:[(0,Le.jsxs)("span",{children:[(0,B.Tl)("pump",!1)," : ",!0===t.pump?(0,B.Tl)("yes",!1):(0,B.Tl)("no",!1)]}),(0,Le.jsx)("br",{}),(0,Le.jsxs)("span",{children:[(0,B.Tl)("repair-station",!1)," :"," ",!0===t.repair?(0,B.Tl)("yes",!1):(0,B.Tl)("no",!1)]})]})]}):null},Xe=function(e){var t=e.place;return t?(0,Le.jsxs)($,{children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("services-title")}),(0,Le.jsx)(ie,{className:"lc-place-info-content",children:(0,Le.jsxs)("span",{children:[(0,B.Tl)("repair-station",!1)," :"," ",!0===t.repair?(0,B.Tl)("yes",!1):(0,B.Tl)("no",!1)]})})]}):null},Ke=function(e){var t=e.place;return t?(0,Le.jsxs)($,{children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("services-title")}),(0,Le.jsxs)(ie,{className:"lc-place-info-content",children:[void 0!==t.fee&&(0,Le.jsxs)("div",{children:[(0,B.Tl)("beach-fee",!1)," :"," ","no"===t.fee?(0,B.Tl)("no",!1):"yes"===t.fee?(0,B.Tl)("yes",!1):t.fee]}),void 0!==t.supervised&&(0,Le.jsxs)("div",{children:[(0,B.Tl)("beach-supervised",!1)," :"," ","no"===t.supervised?(0,B.Tl)("no",!1):"yes"===t.supervised?(0,B.Tl)("yes",!1):t.supervised]}),void 0!==t.bike_ride&&(0,Le.jsxs)("div",{children:[(0,B.Tl)("bike-ride",!1)," :"," ","yes"===t.bike_ride?(0,B.Tl)("yes",!1):(0,B.Tl)("no",!1)]}),void 0!==t.parking&&(0,Le.jsxs)("div",{children:[(0,B.Tl)("parking",!1)," : ","yes"===t.parking?(0,B.Tl)("yes",!1):(0,B.Tl)("no",!1)]}),void 0!==t.services&&(0,Le.jsxs)("div",{children:[(0,B.Tl)("other-services",!1)," : ",t.services.split(";").map((function(e){return(0,B.Tl)(e,!1)})).join(", ")]})]})]}):null},qe=function(e){var t,n,r,i,o,a,l,c,s,u,d,p,f,m,h,v,_,y,g,b,A,E=e.place,T=e.displayon;if(!E||!E.stand&&"map"===T)return null;if(["arras-artis"].includes(Ce))return(0,Le.jsx)(Le.Fragment,{children:null!==(d=E.stand)&&void 0!==d&&d.available_cars&&0!==(null===(p=E.stand)||void 0===p?void 0:p.available_cars)||null!==(f=E.stand)&&void 0!==f&&f.available_electric_cars&&0!==(null===(m=E.stand)||void 0===m?void 0:m.available_electric_cars)?(0,Le.jsxs)(Le.Fragment,{children:[0!==(null===(h=E.stand)||void 0===h?void 0:h.available_cars)&&(0,Le.jsx)($,{tabIndex:"0","aria-label":"".concat(null===(v=E.stand)||void 0===v?void 0:v.available_cars," ").concat((0,B.Tl)("cars-available",!1)),children:(0,Le.jsxs)(ee,{children:[(0,Le.jsxs)(re,{className:"lc-place-info-title",children:[(0,B.Tl)("nb-car-available")," "]}),(0,Le.jsxs)(ie,{"data-realtime-seats":!0,children:[null===(_=E.stand)||void 0===_?void 0:_.available_cars,(0,Le.jsx)(ue,{src:(0,B.tx)("/assets/images/modes/citiz-car.svg"),alt:(0,B.Tl)("cars-available",!1),"aria-hidden":"true"})]})]})}),0!==(null===(y=E.stand)||void 0===y?void 0:y.available_electric_cars)&&(0,Le.jsx)($,{tabIndex:"0","aria-label":"".concat(null===(g=E.stand)||void 0===g?void 0:g.available_electric_cars," ").concat((0,B.Tl)("electrics-cars-available",!1)),children:(0,Le.jsxs)(ee,{children:[(0,Le.jsxs)(re,{className:"lc-place-info-title",children:[(0,B.Tl)("nb-electric-car-available")," "]}),(0,Le.jsxs)(ie,{"data-realtime-seats":!0,children:[null===(b=E.stand)||void 0===b?void 0:b.available_electric_cars,(0,Le.jsx)(ue,{src:(0,B.tx)("/assets/images/modes/citiz-electric-car.svg"),alt:(0,B.Tl)("electrics-cars-available",!1),"aria-hidden":"true"})]})]})})]}):0===(null===(A=E.stand)||void 0===A?void 0:A.available_cars)?(0,Le.jsx)($,{children:(0,Le.jsx)(ie,{className:"lc-place-info-content",children:(0,Le.jsx)(oe,{"data-realtime-seats":!0,children:(0,B.Tl)("no-available-car")})})}):(0,Le.jsx)($,{children:(0,Le.jsx)(ie,{className:"lc-place-info-content",children:(0,Le.jsx)(oe,{children:(0,B.Tl)("no-informations-for-available-cars")})})})});if(!0===(null===(t=E.stand)||void 0===t?void 0:t.merge_all_available_cars)){var P,x,S,j,O,R=(isNaN(parseInt(null===(P=E.stand)||void 0===P?void 0:P.available_cars))?0:null===(x=E.stand)||void 0===x?void 0:x.available_cars)+(isNaN(parseInt(null===(S=E.stand)||void 0===S?void 0:S.available_electric_cars))?0:null===(j=E.stand)||void 0===j?void 0:j.available_electric_cars);return(0,Le.jsxs)($,{tabIndex:"0","aria-label":"".concat(R," ").concat((0,B.Tl)("cars-available",!1)),children:[(0,Le.jsx)(ee,{children:(0,Le.jsxs)(ie,{"data-realtime-seats":!0,children:[(0,Le.jsx)(ue,{className:"lc-citiz-car-picto",src:(0,B.tx)("/assets/images/modes/citiz-car.svg"),alt:(0,B.Tl)("cars-available",!1),"aria-hidden":"true"}),(0,B.Tl)("nb-car-available")," ",R]})}),(null===(O=E.stand)||void 0===O||null===(O=O.vehicles)||void 0===O?void 0:O.length)>0?(0,Le.jsx)(je,{style:{listStyle:"none",marginBlockStart:"0px",marginBlockEnd:"0px",paddingInlineStart:"25px"},children:E.stand.vehicles.map((function(e,t){return(0,Le.jsxs)("li",{children:["- ",e]},t)}))}):null]})}return(0,Le.jsxs)($,{tabIndex:"0","aria-label":E.stand?"".concat(null!==(n=E.stand)&&void 0!==n&&n.available_cars?null===(r=E.stand)||void 0===r?void 0:r.available_cars:0," ").concat((0,B.Tl)("cars-available",!1),". ").concat(E.stand.available_electric_cars?E.stand.available_electric_cars:0," ").concat((0,B.Tl)("electrics-cars-available",!1)):(0,B.Tl)("no-informations-for-available-cars",!1),children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("nb-car-available")}),(0,Le.jsx)(ie,{className:"lc-place-info-content",children:null!==(i=E.stand)&&void 0!==i&&i.available_cars&&0!==(null===(o=E.stand)||void 0===o?void 0:o.available_cars)||null!==(a=E.stand)&&void 0!==a&&a.available_electric_cars&&0!==(null===(l=E.stand)||void 0===l?void 0:l.available_electric_cars)?(0,Le.jsxs)(de,{"data-realtime-seats":!0,children:[(0,Le.jsxs)(pe,{children:[null===(c=E.stand)||void 0===c?void 0:c.available_cars,(0,Le.jsx)(z.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,B.Tl)("car"),children:(0,Le.jsx)("img",{src:(0,B.tx)("/assets/images/modes/citiz-car.svg"),alt:(0,B.Tl)("cars-available",!1),"aria-hidden":"true"})})]}),(0,Le.jsxs)(pe,{children:[null===(s=E.stand)||void 0===s?void 0:s.available_electric_cars,(0,Le.jsx)(z.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,B.Tl)("electric-car"),children:(0,Le.jsx)("img",{src:(0,B.tx)("/assets/images/modes/citiz-electric-car.svg"),alt:(0,B.Tl)("electrics-cars-available",!1),"aria-hidden":"true"})})]}),(0,Le.jsx)(z.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,B.Tl)("realtime-gif-title"),children:(0,Le.jsx)("img",{src:(0,B.tx)("/assets/images/realtime.gif"),alt:(0,B.Tl)("realtime-gif-alt",!1),"aria-hidden":"true",className:"lc-realtime-gif"})})]}):0===(null===(u=E.stand)||void 0===u?void 0:u.available_cars)?(0,Le.jsx)(oe,{"data-realtime-seats":!0,children:(0,B.Tl)("no-available-car")}):(0,Le.jsx)(oe,{children:(0,B.Tl)("no-informations-for-available-cars")})})]})},We=function(e){var t=e.place;return"map"===e.displayon||t.stand||!["poi_type:amenity:park_ride","poi_type:amenity:parking"].includes(t.cat_id)||t instanceof q.A?null:(0,Le.jsx)("div",{className:"lc-loading","data-lc-loading":!0,children:(0,Le.jsx)("img",{src:(0,B.tx)("/assets/images/loading.gif"),width:20,alt:(0,B.Tl)("back"),"aria-hidden":"true"})})},Je=function(e){var t=e.place,n=e.language;return t.opening_hours||t.opening_hours_txt?t.opening_hours_txt?(0,Le.jsx)(ne,{children:(0,Le.jsxs)("div",{className:"lc-opening-hours","aria-label":(0,B.Tl)("open-hour-title",!1)+t.opening_hours_tx,children:[(0,Le.jsx)("div",{className:"lc-opening-hours-title",children:(0,B.Tl)("open-hour-title")}),(0,Le.jsx)("div",{className:"lc-opening-hours-list",children:t.opening_hours_txt})]})}):(0,Le.jsx)(ne,{children:(0,B.J)(t.opening_hours,n)}):null},Qe=function(e){var t=e.place,n=e.displayon;return!t.address&&!t.city||["poi_type:p+r","poi_type:p+r-reduced","poi_type:alpin_skiing","poi_type:cross_country_skiing","poi_type:sled","poi_type:snowshoeing","poi_type:stations"].includes(t.cat_id)||"poi_type:vcub"===t.cat_id&&"map"===n?null:("poi_type:vcub"===t.cat_id&&(t.cp=null,t.city=null),(0,Le.jsxs)($,{className:"lc-place-info-adress lc-displayon-".concat(n),tabIndex:"0","aria-label":(0,B.Tl)("address-title",!1)+" "+t.address+" "+t.cp+" "+t.city,children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("address-title")}),(0,Le.jsxs)(ie,{className:"lc-place-info-content",children:[t.address,(t.cp||t.city)&&(0,Le.jsxs)(Le.Fragment,{children:[t.address&&(0,Le.jsx)("br",{})," ",t.cp," ",t.city]})]})]}))},Ze=function(e){var t=e.place;return t.email?(0,Le.jsxs)($,{tabIndex:"0","aria-label":(0,B.Tl)("mail-title")+" "+t.email,children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("mail-title")}),(0,Le.jsx)(ie,{className:"lc-place-info-content",children:(0,Le.jsx)("a",{href:"mailto:".concat(t.email),onClick:function(e){e.stopPropagation()},children:t.email})})]}):null},$e=function(e){var t=e.place;return t.phone?(0,Le.jsxs)($,{tabIndex:"0","aria-label":(0,B.Tl)("phone-title",!1)+" "+t.phone,children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("phone-title")}),(0,Le.jsx)(ie,{className:"lc-place-info-content",children:(0,Le.jsx)("a",{href:"tel:".concat(t.phone),onClick:function(e){return e.stopPropagation(),e.preventDefault(),!1},children:t.phone})})]}):null},et=function(e){var t=e.place,n=e.displayon,r=e.language;if(!t.website)return null;if(!0===t.dontDisplayWebsiteOnMap&&"map"===n)return null;var i=function(){return void 0!==t["website_".concat(r)]?t["website_".concat(r)]:t.website};return(0,Le.jsxs)($,{className:"lc-poi-content-website",tabIndex:"0","aria-label":(0,B.Tl)("website-title",!1)+" "+i(),children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("website-title")}),(0,Le.jsx)(ie,{className:"lc-place-info-content",children:(0,Le.jsx)("a",{href:i(),target:"_blank",rel:"noopener noreferrer",children:t.websiteText?(0,B.Tl)(t.websiteText):i()})})]})},tt=function(e){var t=e.place;return t.wheelchair?(0,Le.jsx)($,{tabIndex:"0","aria-label":(0,B.Tl)("wheelchair-title",!1)+" "+("yes"===t.wheelchair?(0,B.Tl)("wheelchair-yes",!1):"no"===t.place?(0,B.Tl)("wheelchair-no",!1):(0,B.Tl)("wheelchair-limited",!1)),children:(0,Le.jsxs)(ee,{children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("wheelchair-title")}),(0,Le.jsxs)(ie,{className:"lc-place-info-content",children:[" ","yes"===t.wheelchair?(0,B.Tl)("wheelchair-yes"):"no"===t.wheelchair?(0,B.Tl)("wheelchair-no"):(0,B.Tl)("wheelchair-limited")]})]})}):null},nt=function(e){var t=e.place;return!t.info||["poi_type:p+r","poi_type:p+r-reduced","poi_type:company"].includes(t.cat_id)?null:(0,Le.jsx)(ie,{className:"lc-info",children:t.info})},rt=function(e){var t=e.place;return t&&t.displayCustomText?"poi_type:amenity:bicycle_rental"===t.cat_id&&t.stand?null:(0,Le.jsx)($,{children:(0,Le.jsx)(ie,{className:"lc-place-info-content",children:"html"===t.displayCustomTextFormat?(0,Le.jsx)(fe,{className:"lc-display-custom-text",dangerouslySetInnerHTML:{__html:(0,B.Tl)(t.displayCustomText,!1)}}):(0,Le.jsxs)(fe,{className:"lc-display-custom-text",children:[(0,Le.jsx)("img",{src:(0,B.tx)("/assets/images/information.svg"),alt:"information"}),(0,B.Tl)(t.displayCustomText)]})})}):null},it=function(e){var t=e.place;return(t||t.buy_tickets||t.reload_card||t.solidarity_pricing)&&null!=Ce&&Ce.startsWith("bordeaux-tbm")?(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)($,{tabIndex:"0","aria-label":(0,B.Tl)("title-buy-tickets",!1)+" "+(t.buy_tickets?(0,B.Tl)("yes",!1):(0,B.Tl)("no",!1)),children:(0,Le.jsxs)(te,{children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("title-buy-tickets")}),(0,Le.jsxs)(ie,{className:"lc-place-info-content",children:[" ",t.buy_tickets?(0,B.Tl)("yes"):(0,B.Tl)("no")]})]})}),(0,Le.jsx)($,{tabIndex:"0","aria-label":(0,B.Tl)("title-reload-card",!1)+" "+(t.reload_card?(0,B.Tl)("yes",!1):(0,B.Tl)("no",!1)),children:(0,Le.jsxs)(te,{children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("title-reload-card")}),(0,Le.jsxs)(ie,{className:"lc-place-info-content",children:[" ",t.reload_card?(0,B.Tl)("yes"):(0,B.Tl)("no")]})]})}),(0,Le.jsx)($,{tabIndex:"0","aria-label":(0,B.Tl)("title-solidarity-pricing",!1)+" "+(t.solidarity_pricing?(0,B.Tl)("yes",!1):(0,B.Tl)("no",!1)),children:(0,Le.jsxs)(te,{children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("title-solidarity-pricing")}),(0,Le.jsxs)(ie,{className:"lc-place-info-content",children:[" ",t.solidarity_pricing?(0,B.Tl)("yes"):(0,B.Tl)("no")]})]})})]}):null},ot=function(e){var t=e.place;return t?(0,Le.jsx)($,{children:t.pmr&&(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("aria-lines-stop-pmr")})}):null},at=function(e){return e.place?(0,Le.jsx)(Le.Fragment,{}):null},lt=function(e){var t=e.place;return t?(0,Le.jsx)($,{children:(0,Le.jsxs)(ee,{children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("total-places")})," ",(0,Le.jsx)(ie,{className:"lc-place-info-content",children:t.capacity})]})}):null},ct=function(e){return e.place?(0,Le.jsx)(Le.Fragment,{}):null},st=function(e){var t=e.place;return null!=t&&t.description?(0,Le.jsx)($,{className:"lc-place-description",children:(0,Le.jsxs)(ee,{children:[(0,Le.jsx)(re,{children:(0,B.Tl)("place-description")}),(0,Le.jsx)(ie,{className:"lc-place-info-content",dangerouslySetInnerHTML:{__html:t.description}})]})}):null},ut=function(e){var t=e.place;return null!=t&&t.cond_acc_spec?(0,Le.jsx)($,{className:"lc-place-cond-acc-spe",children:(0,Le.jsxs)(ee,{children:[(0,Le.jsx)(re,{children:(0,B.Tl)("place-cond_acc_spec")}),(0,Le.jsx)(ie,{className:"lc-place-info-content",dangerouslySetInnerHTML:{__html:t.cond_acc_spec}})]})}):null},dt=function(e){var t=e.place;return t?(0,Le.jsxs)($,{tabIndex:"0","aria-label":(0,B.Tl)("bav-title",!1)+" "+t.flow1+" "+t.flow2,children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("bav-title")}),(0,Le.jsxs)(ie,{className:"lc-place-info-content",children:[t.flow1,(0,Le.jsx)("br",{}),t.flow2]})]}):null},pt=function(e){var t=e.place,n=e.displayon;return t?(0,Le.jsxs)(Le.Fragment,{children:["map"!==n&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsxs)($,{tabIndex:"0","aria-label":(0,B.Tl)("hiking-desc",!1)+" "+t.desc.replace(/(<([^>]+)>)/gi,"").replace("&lt;",/</g).replace("&gt;",/>/g).replace("&#39;",/'/g).replace("&#34;",/"/g).replace("&#96;",/`/g).replace("&#61;",/=/g).replace("&amp;",/&/g),children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("hiking-desc")}),(0,Le.jsx)(ie,{dangerouslySetInnerHTML:{__html:t.desc}})]}),(0,Le.jsx)("br",{})]}),(0,Le.jsxs)($,{children:[(0,Le.jsxs)(te,{tabIndex:"0","aria-label":(0,B.Tl)("hiking-distance",!1)+" "+t.distance,children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("hiking-distance")}),(0,Le.jsxs)(ie,{className:"lc-place-info-content",children:[" ",t.distance]})]}),(0,Le.jsxs)(te,{tabIndex:"0","aria-label":(0,B.Tl)("hiking-duration",!1)+" "+t.duration,children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("hiking-duration")}),(0,Le.jsxs)(ie,{className:"lc-place-info-content",children:[" ",t.duration]})]}),(0,Le.jsxs)(te,{tabIndex:"0","aria-label":(0,B.Tl)("hiking-difficulty",!1)+" "+t.difficulty,children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("hiking-difficulty")}),(0,Le.jsxs)(ie,{className:"lc-place-info-content",children:[" ",t.difficulty]})]})]})]}):null},ft=function(e){var t,n=e.place,r=e.lines,i=e.stops,o=e.displayon;if(!n)return null;var a=r.find((function(e){return e.id===n.lines[0]}));return(0,Le.jsxs)($,{children:[(0,Le.jsxs)(Te,{displayon:o,children:[a&&(0,Le.jsx)("img",{className:"lc-entrance-mode",src:(0,B.tx)("/assets/images/route-calculation/modes/".concat(a.cat,".svg")),alt:a.cat,"aria-hidden":"true"}),null===(t=n.lines)||void 0===t?void 0:t.map((function(e){var t=r.find((function(t){return t.id===e})),o=i.find((function(e){return e.stop_area===n.stop_area&&e.lines.map((function(e){return e.id})).includes(t.id)}));if(t&&o){var a=o.lines.find((function(e){return e.id===t.id}));return(0,Le.jsx)(Re.A,{line:t,styleLine:Ne,inpopup:!1,children:(0,Le.jsx)(Oe.D,{line:t,image:"image".includes("image"),onClick:function(){return F.A.push({pathname:"/lines",search:"?current=".concat(null!=a&&a.route_id?a.route_id:t.id,"&stop=").concat(o.id)}),!1},onKeyUp:function(e){return(0,B.zQ)(e,(function(){F.A.push({pathname:"/lines",search:"?current=".concat(null!=a&&a.route_id?a.route_id:t.id,"&stop=").concat(o.id)})}))}})},"entrance-line-".concat(t.code))}return(0,Le.jsx)(Le.Fragment,{})}))]}),(!0===n.staircase||!0===n.escalator||!0===n.elevator)&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)(xe,{}),(0,Le.jsxs)(Pe,{displayon:o,children:[!0===n.staircase&&(0,Le.jsx)("img",{className:"lc-access-staircase",alt:"staircase",src:(0,B.tx)("assets/images/access/access_staircase.svg")}),!0===n.escalator&&(0,Le.jsx)("img",{className:"lc-access-escalator",alt:"escalator",src:(0,B.tx)("assets/images/access/access_escalator.svg")}),!0===n.elevator&&(0,Le.jsx)("img",{className:"lc-access-elevator",alt:"elevator ok",src:(0,B.tx)("assets/images/access/access_elevator.svg")})]})]})]})},mt=function(e){var t=e.place;return t?(0,Le.jsx)($,{children:(0,Le.jsxs)(ee,{children:[(0,Le.jsx)(ie,{className:"lc-place-info-content",children:(0,Le.jsx)("img",{src:(0,B.tx)("/assets/images/places/"+t.product+".svg"),alt:"",height:"25"})})," ",(0,Le.jsx)(re,{className:"lc-place-info-title lc-place-info-title-commercant-partenaire",children:(0,B.Tl)(t.product)})]})}):null},ht=function(e){var t=e.place;return t?(0,Le.jsxs)($,{children:[t.type&&(0,Le.jsxs)(te,{tabIndex:"0","aria-label":(0,B.Tl)("place-type",!1)+" : "+t.type,children:[(0,Le.jsx)(re,{children:(0,B.Tl)("place-type")}),(0,Le.jsxs)(ie,{children:[" ",t.type]})]}),t.offer&&(0,Le.jsxs)(te,{tabIndex:"0","aria-label":(0,B.Tl)("place-offer",!1)+t.offer,style:{marginTop:"10px"},children:[(0,Le.jsx)(re,{children:(0,B.Tl)("place-offer")}),(0,Le.jsxs)(ie,{children:[" ",t.offer]})]}),t.zones_sold&&(0,Le.jsxs)(te,{tabIndex:"0","aria-label":(0,B.Tl)("place-zones-sold",!1)+t.zones_sold,style:{marginTop:"10px"},children:[(0,Le.jsx)(re,{children:(0,B.Tl)("place-zones-sold")}),(0,Le.jsxs)(ie,{children:[" ",t.zones_sold]})]}),t.networks_sold&&(0,Le.jsxs)(te,{tabIndex:"0","aria-label":(0,B.Tl)("place-networks-sold",!1)+t.zones_sold,style:{marginTop:"10px"},children:[(0,Le.jsx)(re,{children:(0,B.Tl)("place-networks-sold")}),(0,Le.jsxs)(ie,{children:[" ",t.networks_sold.join(", ")]})]})]}):null},vt=function(e){var t=e.place;return t?(0,Le.jsxs)($,{children:[(0,Le.jsxs)(te,{tabIndex:"0","aria-label":(0,B.Tl)("place-type",!1)+" : "+t.type,children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:"Borne(s) présente(s) :"}),(0,Le.jsxs)(ie,{children:[" ",t.nb_bornes]})]}),t.prise_types.length>0?(0,Le.jsxs)(Se,{tabIndex:"0","aria-label":(0,B.Tl)("place-type",!1)+" : "+t.type,children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:"Type de prise(s) :"}),t.prise_types.map((function(e){return(0,Le.jsx)(z.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,B.Tl)("charging_station_".concat(e),!1),children:(0,Le.jsx)("img",{src:(0,B.tx)("/assets/images/places/charging_station_".concat(e,".svg")),alt:e,"aria-hidden":"true"})},e)}))]}):null]}):null},_t=function(e){var t,n,r,i,o,a,l=e.place,c=e.displayon;return l?"map"===c?null:(0,Le.jsxs)($,{children:[(null===(t=l.provided_services)||void 0===t?void 0:t.length)>0?(0,Le.jsxs)(ee,{tabIndex:"0","aria-label":(0,B.Tl)("provided-services",!1)+" : "+l.provided_services.map((function(e){return(0,B.Tl)(e)})).join(", "),children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("provided-services")}),(0,Le.jsx)(ie,{children:l.provided_services.map((function(e){return(0,B.Tl)(e)})).join(", ")})]}):null,(null===(n=l.sales_products)||void 0===n?void 0:n.length)>0?(0,Le.jsxs)(ee,{tabIndex:"0","aria-label":(0,B.Tl)("sales-products",!1)+" : "+l.sales_products.map((function(e){return(0,B.Tl)(e)})).join(", "),marginTop:(null===(r=l.provided_services)||void 0===r?void 0:r.length)>0&&"10",children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("sales-products")}),(0,Le.jsx)(ie,{children:l.sales_products.map((function(e){return(0,B.Tl)(e)})).join(", ")})]}):null,(null===(i=l.paiements)||void 0===i?void 0:i.length)>0?(0,Le.jsxs)(ee,{tabIndex:"0","aria-label":(0,B.Tl)("payements",!1)+" : "+l.paiements.map((function(e){return(0,B.Tl)(e)})).join(", "),marginTop:((null===(o=l.provided_services)||void 0===o?void 0:o.length)>0||(null===(a=l.sales_products)||void 0===a?void 0:a.length)>0)&&"10",children:[(0,Le.jsx)(re,{className:"lc-place-info-title",children:(0,B.Tl)("payements")}),(0,Le.jsx)(ie,{children:l.paiements.map((function(e){return(0,B.Tl)(e)})).join(", ")})]}):null]}):null};function yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return gt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var bt=function(e){var t=e.place,n=e.displayon,r=e.options,i=(0,Y.d4)((function(e){return e.board})).placeClicked,o=(0,Y.d4)((function(e){return e.app})),a=o.language,l=o.lines,c=o.stops,s=yt((0,H.useState)(null),2),u=s[0],d=s[1];var p=function(e){switch(e.cat_id){case"poi_type:amenity:parcs_relais":case"poi_type:amenity:parcs_relais_cusy":d((0,Le.jsx)(ke,{place:e}));break;case"poi_type:stations":d((0,Le.jsx)(Ie,{place:e,displayon:n}));break;case"poi_type:amenity:bicycle_parking":case"poi_type:PVLO":case"poi_type:EquipementVelo":case"poi_type:2":case"poi_type:16":case"poi_type:17":d((0,Le.jsx)(De,{place:e}));break;case"poi_type:amenity:bicycle_rental":d((0,Le.jsx)(Me,{place:e,options:r}));break;case"poi_type:amenity:park_ride":d((0,Le.jsx)(Ue,{place:e}));break;case"poi_type:amenity:parking":d((0,Le.jsx)(Ge,{place:e,displayon:n}));break;case"poi_type:vcub":d((0,Le.jsx)(Ye,{place:e,options:r,displayon:n}));break;case"poi_type:p+r":case"poi_type:p+r-reduced":d((0,Le.jsx)(He,{place:e,options:r,language:a,displayon:n}));break;case"poi_type:amenity:velonecy":d((0,Le.jsx)(Fe,{place:e,displayon:n}));break;case"poi_type:amenity:bicycle_secure_parking":d((0,Le.jsx)(Be,{place:e,displayon:n}));break;case"poi_type:amenity:bicycle_bollard":d((0,Le.jsx)(Ve,{place:e,displayon:n}));break;case"poi_type:amenity:bicycle_repair_station":d((0,Le.jsx)(ze,{place:e,displayon:n}));break;case"poi_type:amenity:private_bicycle_rental":d((0,Le.jsx)(Xe,{place:e,displayon:n}));break;case"poi_type:leisure:swimming_area":d((0,Le.jsx)(Ke,{place:e,displayon:n}));break;case"poi_type:amenity:car_rental":case"poi_type:amenity:citiz":d((0,Le.jsx)(qe,{place:e,displayon:n}));break;case"poi_type:amenity:motorcycle_parking":d((0,Le.jsx)(lt,{place:e,displayon:n}));break;case"poi_type:101":case"poi_type:102":case"poi_type:103":case"poi_type:104":d((0,Le.jsx)(it,{place:e,displayon:n}));break;case"poi_type:amenity:toilets":d((0,Le.jsx)(ot,{place:e,displayon:n}));break;case"poi_type:amenity:locker":d((0,Le.jsx)(at,{place:e,displayon:n}));break;case"poi_type:amenity:water_point":d((0,Le.jsx)(ct,{place:e,displayon:n}));break;case"poi_type:amenity:borne_apport_volontaire":d((0,Le.jsx)(dt,{place:e,displayon:n}));break;case"poi_type:amenity:lieux_touristiques":d((0,Le.jsx)(pt,{place:e,displayon:n}));break;case"poi_type:Pointsdevente":d((0,Le.jsx)(ht,{place:e,displayon:n}));break;case"poi_type:entrance":case"poi_type:unavailable_entrance":d((0,Le.jsx)(ft,{place:e,lines:l,stops:c,displayon:n}));break;case"poi_type:9253":d((0,Le.jsx)(mt,{place:e}));break;case"poi_type:amenity:charging_station":d((0,Le.jsx)(vt,{place:e,displayon:n}));break;case"poi_type:agencescommerciales":d((0,Le.jsx)(_t,{place:e,displayon:n}))}};return(0,H.useEffect)((function(){t&&p(t)}),[t]),(0,H.useEffect)((function(){i&&i.id===t.id&&p(i)}),[i,null==i?void 0:i.stand]),t?(0,Le.jsxs)(Z,{displayon:n,"data-lc-place-infos":!0,className:"lc-place-".concat(t.code," lc-place-cat-").concat(t.cat_id.replace("poi_type:","").replace(/:/g,"_")).concat((0,B.x$)("thematic")?" lc-place-in-thematic":(0,B.x$)("thematic-around")?" lc-place-in-thematic-around":""),children:[(0,Le.jsx)(We,{place:t,displayon:n}),u,(0,Le.jsx)(st,{place:t}),(0,Le.jsx)(ut,{place:t}),(0,Le.jsx)(Je,{place:t,language:a}),(0,Le.jsx)(Qe,{place:t,displayon:n}),(0,Le.jsx)(Ze,{place:t}),(0,Le.jsx)($e,{place:t}),(0,Le.jsx)(et,{place:t,displayon:n,language:a}),(0,Le.jsx)(tt,{place:t}),(0,Le.jsx)(nt,{place:t}),(0,Le.jsx)(rt,{place:t,displayon:n}),"board"===n&&"/around"!==F.A.location.pathname&&!0!==t.dontDisplayGotoAround&&function(e){return(0,Le.jsxs)("div",{className:"lc-go-to-around",onClick:function(t){t.stopPropagation(),(0,B.zu)(e)},onKeyUp:function(t){return(0,B.zQ)(t,(function(){(0,B.zu)(e)}))},role:"button",tabIndex:"0",children:[(0,Le.jsx)("div",{className:"lc-tool-around"}),(0,B.Tl)("title-go-to-around")]})}(t)]}):null}},1198:function(e,t,n){var r=n(9736),i=n(4848),o={REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"},a=o.REACT_APP_SHOW_PMR,l=o.REACT_APP_SHOW_PMR_TRANSLATION;t.A=function(e){var t=e.pmr,n=e.displayon,o=e.whitePicto,c=!0===e.noAria?void 0:"".concat((0,r.Tl)("stop",!1)," ").concat((0,r.Tl)("aria-lines-stop-pmr",!1));return["pmr","both"].includes(a)&&!0===t?"popup"===n&&(0,r.UP)(l)?(0,i.jsxs)("div",{className:"lc-pmr-text",children:[(0,i.jsx)("div",{className:"lc-is-pmr".concat(o?" lc-white":""),"aria-label":c}),(0,i.jsx)("div",{children:(0,r.Tl)("stop-pmr")})]}):(0,i.jsx)("p",{className:"lc-is-pmr".concat(o?" lc-white":""," sr-only"),"aria-label":c}):["no-pmr","both"].includes(a)&&!1===t?"popup"===n&&(0,r.UP)(l)?(0,i.jsxs)("div",{className:"lc-pmr-text",children:[(0,i.jsx)("div",{className:"lc-is-no-pmr"}),(0,i.jsx)("div",{children:(0,r.Tl)("stop-no-pmr")})]}):(0,i.jsx)("div",{className:"lc-is-no-pmr"}):(0,i.jsx)(i.Fragment,{})}},5885:function(e,t,n){var r=n(5471),i=n(9736),o=n(2951),a=n(4848),l="true";t.A=function(e){var t=e.configApp,n=e.schedule,c=e.language;return(0,a.jsxs)("div",{className:"lc-schedule".concat(n.realtime?" lc-schedule-realtime":""),children:[(0,o.nk)(new Date((0,o._k)(n.time))).days<1&&(0,o.nk)(new Date((0,o._k)(n.time))).hours<1&&(0,o.nk)(new Date((0,o._k)(n.time))).seconds>0&&(!1===(0,i.UP)(l)||!0===(0,i.UP)(l)&&n.realtime)&&(null==t||!t.theorical_time_classic_format||null!=t&&t.theorical_time_classic_format&&n.realtime)?(0,a.jsx)("time",{style:{whiteSpace:"nowrap"},children:(0,o.Tc)(new Date((0,o._k)(n.time)),!0)}):(0,i.TF)(n.time,c,n.extend),n.realtime&&(0,a.jsx)(r.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,i.Tl)("realtime-gif-title"),children:(0,a.jsx)("img",{src:(0,i.tx)("/assets/images/realtime.gif"),alt:(0,i.Tl)("realtime-gif-alt")})}),n.equipments.includes("has_wheelchair_accessibility")&&(0,a.jsx)(r.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,i.Tl)("aria-lines-stop-pmr"),children:(0,a.jsx)("img",{src:(0,i.tx)("/assets/images/pmr.svg"),alt:(0,i.Tl)("aria-lines-stop-pmr")})})]})}},4827:function(e,t,n){var r=n(4848);t.A=function(e){var t=e.line;return(0,r.jsx)("svg",{className:"lc-annecy-terminus-shape",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22.68 22.68",width:"20px",height:"20px",children:(0,r.jsx)("path",{fill:"#"+t.color,d:"m12.34,0h-2c0,4.98-5.36,10.55-10.34,10.55v1.58c4.98,0,10.34,5.57,10.34,10.55h2c0-4.98,5.36-10.55,10.34-10.55v-1.58C17.7,10.55,12.34,4.98,12.34,0"})})}},9742:function(e,t,n){var r=n(339),i={REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"}.REACT_APP_FORCE_BROWSER_HISTORY?r.zR:{REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"}.REACT_APP_LIBRARY_URL?r.sC:r.zR;t.A=i({keyLength:10})},4212:function(e,t,n){n.d(t,{Q:function(){return a}});var r=n(6540);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"(min-width: 600px)",t=i((0,r.useState)((function(){return window.matchMedia(e).matches})),2),n=t[0],o=t[1];return(0,r.useEffect)((function(){var t=!0,n=window.matchMedia(e),r=function(){t&&o(!!n.matches)};return n.addListener(r),o(n.matches),function(){t=!1,n.removeListener(r)}}),[e]),n}},9239:function(e,t,n){n.d(t,{P:function(){return a}});var r=n(6540);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-150px 0px 0px 0px",t=(0,r.useRef)(),n=i((0,r.useState)(!1),2),o=n[0],a=n[1];return(0,r.useEffect)((function(){var n=t.current,r=new IntersectionObserver((function(e){var t=i(e,1)[0];a(t.isIntersecting)}),{rootMargin:e});return n&&r.observe(n),function(){r.unobserve(n)}}),[]),[t,o]}},1399:function(e,t,n){n.d(t,{r:function(){return u}});var r=n(6663),i=n(6540),o=n(6347);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(){var e=(0,o.g)(),t=(0,o.zy)(),n=(0,o.W6)(),a=(0,o.W5)();return(0,i.useMemo)((function(){return{push:n.push,replace:n.replace,pathname:t.pathname,query:c(c({},r.parse(t.search)),e),match:a,location:t,history:n}}),[e,a,t,n])}},8407:function(e,t,n){n.d(t,{l:function(){return l}});var r=n(6540);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(){var e="object"===("undefined"==typeof window?"undefined":a(window));function t(){return{width:e?window.innerWidth:void 0,height:e?window.innerHeight:void 0}}var n=i((0,r.useState)(t),2),o=n[0],l=n[1];return(0,r.useEffect)((function(){if(!e)return!1;function n(){l(t())}return window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}),[]),o}},7955:function(e,t,n){var r=n(2923),i=n(961),o=n(1225),a=n(3042);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(){c=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),l=new C(r||[]);return i(a,"_invoke",{value:O(e,n,l)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var m="suspendedStart",h="suspendedYield",v="executing",_="completed",y={};function g(){}function b(){}function A(){}var E={};d(E,a,(function(){return this}));var T=Object.getPrototypeOf,P=T&&T(T(N([])));P&&P!==n&&r.call(P,a)&&(E=P);var x=A.prototype=g.prototype=Object.create(E);function S(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function n(i,o,a,c){var s=f(e[i],e,o);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==l(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function O(t,n,r){var i=m;return function(o,a){if(i===v)throw Error("Generator is already running");if(i===_){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var l=r.delegate;if(l){var c=R(l,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===m)throw i=_,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var s=f(t,n,r);if("normal"===s.type){if(i=r.done?_:h,s.arg===y)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(i=_,r.method="throw",r.arg=s.arg)}}}function R(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,R(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=f(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(l(t)+" is not iterable")}return b.prototype=A,i(x,"constructor",{value:A,configurable:!0}),i(A,"constructor",{value:b,configurable:!0}),b.displayName=d(A,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,A):(e.__proto__=A,d(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(j.prototype),d(j.prototype,s,(function(){return this})),t.AsyncIterator=j,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new j(p(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(x),d(x,u,"Generator"),d(x,a,(function(){return this})),d(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return l.type="throw",l.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],l=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;L(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t,n,r,i,o,a){try{var l=e[o](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,i)}var p=function(){var e,t=(e=c().mark((function e(t,n){var r,i,o,l,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.A.get("/api/file?name=browsers");case 3:if(!((null==(i=e.sent)||null===(r=i.data)||void 0===r||null===(r=r.browsers)||void 0===r?void 0:r.length)>0)){e.next=23;break}o=s(i.data.browsers),e.prev=6,u=c().mark((function e(){var r,i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.value,t&&(t.name!==r.name||r.supported&&!(r.supported&&parseInt(t.version.split(".").shift(),10)<r.version))){e.next=25;break}if(i="",!t){e.next=18;break}e.t0=t.name,e.next="ie"===e.t0?7:"firefox"===e.t0?9:"android"===e.t0||"chrome"===e.t0||"crios"===e.t0?11:"safari"===e.t0||"ios"===e.t0?13:"opera-mini"===e.t0?15:17;break;case 7:return i="Internet Explorer",e.abrupt("break",18);case 9:return i="Firefox",e.abrupt("break",18);case 11:return i="Google Chrome",e.abrupt("break",18);case 13:return i="Safari",e.abrupt("break",18);case 15:return i="Opera Mini",e.abrupt("break",18);case 17:i="";case 18:return(o=document.createElement("div")).classList.add("lc-unsupported-warning"),o.onclick=function(){return o.remove()},o.innerHTML='<div class="lc-unsuported-message">La carte interactive est incompatible avec votre navigateur'.concat(i?" "+i+" version "+t.version:"",'. Veuillez mettre à jour ou télécharger un navigateur compatible <a href="http://outdatedbrowser.com/fr" target="_blank">à cette adresse</a></div><div>&#10005;</div></div>'),(a=document.querySelector(n)).insertBefore(o,a.firstChild),e.abrupt("return",1);case 25:case"end":return e.stop()}}),e)})),o.s();case 9:if((l=o.n()).done){e.next=15;break}return e.delegateYield(u(),"t0",11);case 11:if(!e.t0){e.next=13;break}return e.abrupt("break",15);case 13:e.next=9;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(6),o.e(e.t1);case 20:return e.prev=20,o.f(),e.finish(20);case 23:e.next=28;break;case 25:e.prev=25,e.t2=e.catch(0),console.log("Can't get browsers list",e.t2);case 28:case"end":return e.stop()}}),e,null,[[0,25],[6,17,20,23]])})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){d(o,r,i,a,l,"next",e)}function l(e){d(o,r,i,a,l,"throw",e)}a(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),f=p,m=n(4457),h=n(9736),v=n(6540),_=function(e){return{type:"LOGIN_SET_TOKEN",token:e}},y=function(e){return{type:"LOGIN_SET_DATA",data:e}},g=n(7577),b=n(6347),A=n(9742),E=n(7293),T=(n(3687),n(3481)),P=n.n(T),x=n(3052),S=n(1576),j=n(9239),O=n(4848);function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function L(e){var t=e.children,n=R((0,j.P)(),2),r=n[0],i=n[1];return(0,O.jsx)("div",{className:"lc-map","aria-hidden":"true",tabIndex:"-1",ref:r,"data-lc-map":!0,children:t(i)})}function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D={REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"}.REACT_APP_MODULES;function M(e,t){return!D||D.includes(e)?(0,v.lazy)(t):function(){return(0,O.jsxs)(O.Fragment,{children:["Module ",e," not compiled in"]})}}function U(e,t){var n=M(e,t),r=function(){return(0,O.jsx)("div",{className:"lc-fallback",children:(0,h.Tl)("loading")})};return function(e){return(0,O.jsx)(v.Suspense,{fallback:(0,O.jsx)(r,{}),children:(0,O.jsx)(n,k({},e))})}}n(9494),n(3140);var G=n(2951);function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e,t,n){return(t=X(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return V(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,X(r.key),r)}}function X(e){var t=function(e,t){if("object"!=H(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==H(t)?t:t+""}function K(e,t){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},K(e,t)}function q(e){var t=W();return function(){var n,r=J(e);if(t){var i=J(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==H(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function W(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(W=function(){return!!e})()}function J(e){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},J(e)}var Q=U("Leaflet",(function(){return Promise.all([n.e(159),n.e(576),n.e(824)]).then(n.bind(n,6824))})),Z=U("LeafletNetwork",(function(){return Promise.all([n.e(159),n.e(576),n.e(813),n.e(981),n.e(17),n.e(943)]).then(n.bind(n,9943))})),$=U("LeafletNewNetwork",(function(){return Promise.all([n.e(159),n.e(576),n.e(813),n.e(17),n.e(455)]).then(n.bind(n,1455))})),ee=U("LeafletProjects",(function(){return Promise.all([n.e(159),n.e(576),n.e(421)]).then(n.bind(n,5421))})),te=U("LeafletTerritories",(function(){return Promise.all([n.e(159),n.e(576),n.e(398)]).then(n.bind(n,3398))})),ne={REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"},re=ne.REACT_APP_START_POINT,ie=ne.REACT_APP_ZOOM,oe=ne.REACT_APP_TYPE,ae=ne.REACT_APP_DISABLED_STOP_AREA_MARKER_MODE,le=ne.REACT_APP_MARKER_SELECTED_PICTO,ce=ne.REACT_APP_LEGEND_LINK,se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K(e,t)}(o,e);var t,n,r,i=q(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.apply(this,arguments)}return t=o,n=[{key:"componentDidMount",value:function(){var e=this.props.startOnMobile?JSON.parse(re).mobile:JSON.parse(re).desktop,t=this.props.startOnMobile?JSON.parse(ie).mobile:JSON.parse(ie).desktop;m.j.dispatch((0,S.QQ)(t)),m.j.dispatch((0,S.KK)(e))}},{key:"componentDidUpdate",value:function(e){var t=this;if("network"!==oe&&"projects"!==oe){var n=this.props,r=n.areas,i=n.stops,o=this.props,a=o.lines,l=o.reactAreas,c=o.openedMarker;if(r=r.filter((function(e){return e.lines.length})),i=i.filter((function(e){return e.lines.length})),!l&&r.length>0){var s,u=[],d=[],p=B(r);try{var f=function(){var e,n,r=s.value,o=(0,h.UP)(ae)?"area":ue(a,r);if(null!==(e=t.props.configApp)&&void 0!==e&&e.filter_stops_in_only_mode){var l=(0,G.il)(r);if(1===l.length&&t.props.configApp.filter_stops_in_only_mode===l[0])return 1}u.push(m.j.dispatch((0,x.V5)(r,{icon:null!==(n=t.props.configApp)&&void 0!==n&&n.stop_area_marker_with_stop_points_number?P().divIcon({className:"lc-stop-marker lc-stop-marker-area with-sp-number lc-stop-marker-area-".concat(o),html:'<div className="nb-stops">'.concat(String(i.filter((function(e){return e.stop_area===r.id})).length),"</div>")}):P().icon({className:"lc-stop-marker lc-stop-marker-area lc-stop-marker-area-".concat(o),iconUrl:(0,h.tx)("/assets/images/stops/".concat(o,".svg"))}),area:r,zIndexOffset:50})))};for(p.s();!(s=p.n()).done;)f()}catch(e){p.e(e)}finally{p.f()}var v,_=B(i);try{for(_.s();!(v=_.n()).done;){var y,g=v.value,b=ue(a,g);if(null!==(y=this.props.configApp)&&void 0!==y&&y.filter_stops_in_only_mode){var A=(0,G.il)(g);if(1===A.length&&this.props.configApp.filter_stops_in_only_mode===A[0])continue}d.push(m.j.dispatch((0,x.V5)(g,{icon:P().icon({className:"lc-stop-marker"+(g.terminus?" lc-stop-marker-terminus":"")+" lc-stop-marker-"+b,iconUrl:(0,h.tx)("/assets/images/stops/".concat(b,".svg"))}),stop:g,zIndexOffset:50})))}}catch(e){_.e(e)}finally{_.f()}m.j.dispatch((0,x.hK)(u)),m.j.dispatch((0,x.qP)(d))}if(le&&(c&&c.ref||e.openedMarker&&!c)){var E,T,S=!(e.openedMarker&&!c),j=S?c:e.openedMarker;if(JSON.parse(le).includes("stops")&&j&&j.id.startsWith("stop_")&&j.ref&&(null===(E=j.ref)||void 0===E||null===(E=E.leafletElement)||void 0===E||null===(E=E._icon)||void 0===E||null===(E=E.classList)||void 0===E||!E.contains("lc-circle-icon-marker"))){var O=j.id.startsWith("stop_area")&&(0,h.UP)(ae)?"area":ue(a,j);j.ref.leafletElement.setIcon(P().icon({className:"lc-stop-marker"+(j.terminus?" lc-stop-marker-terminus":"")+" lc-stop-marker-"+O+(j.id.startsWith("stop_area")?" lc-stop-marker-area":""),iconUrl:(0,h.tx)("/assets/images/stops/".concat(O).concat(S?"_selected":"",".svg"))}))}else j.cat_id&&null!==(T=j.ref)&&void 0!==T&&null!==(T=T.leafletElement)&&void 0!==T&&T._icon&&JSON.parse(le).includes(j.cat_id)&&(j.ref.leafletElement._icon.classList.remove("moseover"),j.ref.leafletElement._icon.classList.add("opened"),j.ref.leafletElement._icon.src=j.ref.leafletElement._icon.src.replace("_selected","").replace(".svg","_selected.svg"))}}}},{key:"render",value:function(){var e,t,n=this,r=this.props,i=r.showBoard,o=r.startOnMobile,a=r.isLegendOpen,l=r.component,c=null==l||null===(e=l.props)||void 0===e||null===(e=e.moduleData)||void 0===e?void 0:e.legend,s=["/route-calculation","/lines"];if(ce||a&&null!=l&&null!==(t=l.props)&&void 0!==t&&t.moduleData&&!c&&m.j.dispatch((0,S.FG)(a)),"network"!==oe||s.includes(A.A.location.pathname)){if("new-network"!==oe||s.includes(A.A.location.pathname))return"projects"===oe?(0,O.jsx)(ee,{showBoard:i,startOnMobile:o}):"territories"===oe?(0,O.jsx)(te,{showBoard:i,startOnMobile:o}):(0,O.jsxs)(O.Fragment,{children:[a&&(0,O.jsxs)("div",{className:"lc-legend-panel",onClick:function(){ce?window.open(ce,"_blank","noopener noreferrer"):m.j.dispatch((0,S.FG)(a))},onKeyUp:function(e){return(0,h.zQ)(e,(function(){ce?window.open(ce,"_blank","noopener noreferrer"):m.j.dispatch((0,S.FG)(a))}))},role:"button",tabIndex:"0",children:[(0,O.jsx)("span",{role:"button",tabIndex:"0",className:"lc-legend-close",onClick:function(e){m.j.dispatch((0,S.FG)(a)),e.stopPropagation(),e.preventDefault()},onKeyUp:function(e){return(0,h.zQ)(e,(function(){m.j.dispatch((0,S.FG)(a)),e.stopPropagation(),e.preventDefault()}))},children:"X"}),(0,O.jsx)("div",{className:"lc-legend-img",style:{backgroundImage:"url(".concat((0,h.tx)("/assets/images/".concat(null!=c?c:"legend-img.svg")),")")},alt:"legend"})]}),(0,O.jsx)(L,{children:function(e){return(0,O.jsx)(Q,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({onScreen:e},n.props))}})]});var u=(0,h._V)(A.A.location);return(0,O.jsxs)(O.Fragment,{children:[a&&!u.line&&!u.stop_point&&!u.stop_area&&!u.town&&(0,O.jsxs)("div",{className:"lc-legend-panel",onClick:function(){ce?window.open(ce,"_blank","noopener noreferrer"):m.j.dispatch((0,S.FG)(a))},onKeyUp:function(e){return(0,h.zQ)(e,(function(){ce?window.open(ce,"_blank","noopener noreferrer"):m.j.dispatch((0,S.FG)(a))}))},role:"button",tabIndex:"0",children:[(0,O.jsx)("span",{role:"button",tabIndex:"0",className:"lc-legend-close",onClick:function(e){m.j.dispatch((0,S.FG)(a)),e.stopPropagation(),e.preventDefault()},onKeyUp:function(e){return(0,h.zQ)(e,(function(){m.j.dispatch((0,S.FG)(a)),e.stopPropagation(),e.preventDefault()}))},children:"X"}),(0,O.jsx)("div",{className:"lc-legend-img",style:{backgroundImage:"url(/assets/images/legend-img.svg)"},alt:"legend"})]}),(0,O.jsx)($,{showBoard:i,startOnMobile:o,isLegendOpen:a})]})}var d=(0,h._V)(A.A.location);return(0,O.jsxs)(O.Fragment,{children:[a&&!d.line&&!d.stop_point&&!d.stop_area&&!d.town&&(0,O.jsxs)("div",{className:"lc-legend-panel",onClick:function(){ce?window.open(ce,"_blank","noopener noreferrer"):m.j.dispatch((0,S.FG)(a))},onKeyUp:function(e){return(0,h.zQ)(e,(function(){ce?window.open(ce,"_blank","noopener noreferrer"):m.j.dispatch((0,S.FG)(a))}))},role:"button",tabIndex:"0",children:[(0,O.jsx)("span",{role:"button",tabIndex:"0",className:"lc-legend-close",onClick:function(e){m.j.dispatch((0,S.FG)(a)),e.stopPropagation(),e.preventDefault()},onKeyUp:function(e){return(0,h.zQ)(e,(function(){m.j.dispatch((0,S.FG)(a)),e.stopPropagation(),e.preventDefault()}))},children:"X"}),(0,O.jsx)("div",{className:"lc-legend-img",style:{backgroundImage:"url(/assets/images/legend-img.svg)"},alt:"legend"})]}),(0,O.jsx)(Z,{showBoard:i,startOnMobile:o,isLegendOpen:a})]})}}],n&&z(t.prototype,n),r&&z(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(v.Component),ue=function(e,t){t.lines=t.lines.sort((0,h.ck)("cat","desc"));var n,r=99,i=["commercial_mode:train","commercial_mode:ter","commercial_mode:metro","commercial_mode:funiculaire","commercial_mode:telepherique","commercial_mode:tramway","commercial_mode:busc","commercial_mode:ferry","commercial_mode:bus","commercial_mode:autocar","commercial_mode:tad","commercial_mode:busscolaire"],o=B(t.lines);try{for(o.s();!(n=o.n()).done;){var a=n.value,l=(0,h.fV)(e,a),c=null!=l&&l.mode?(0,G.Oo)(l.mode).toLowerCase():"";c&&-1!==i.indexOf((0,G.Oo)(c))&&i.indexOf((0,G.Oo)(c))<=r&&(r=i.indexOf((0,G.Oo)(c)))}}catch(e){o.e(e)}finally{o.f()}return 99!==r?["train","ter","subway","funicular","cablecar","tramway","c-lines","ferry","bus","autocar","odt","school"][r]:"bus"},de=(0,o.Ng)((function(e){return{config:e.app.config,modules:e.app.modules,isMobile:e.app.isMobile,component:e.app.component,configApp:e.app.configApp,areas:e.app.areas,stops:e.app.stops,lines:e.app.lines,isLegendOpen:e.map.isLegendOpen,reactAreas:e.map.reactAreas,reactStops:e.map.reactStops,reduxMarkers:e.map.reduxMarkers,selectedLine:e.map.selectedLine,heavyLines:e.map.heavyLines,hideHeavyLines:e.map.hideHeavyLines,complementaryLine:e.map.complementaryLine,complementaryLines:e.map.complementaryLines,customLines:e.map.customLines,customMarkers:e.map.customMarkers,transportPlaces:e.map.transportPlaces,mapPlaces:e.map.mapPlaces,places:e.map.places,territoryOutline:e.map.territoryOutline,entranceMapMarkers:e.map.entranceMapMarkers,entrancePopup:e.map.entrancePopup,bikePaths:e.map.bikePaths,bikes:e.map.bikes,reactTourismPartnersStops:e.map.reactTourismPartnersStops,reactLines:e.map.reactLines,zoom:e.map.zoom,center:e.map.center,aroundPin:e.map.aroundPin,aroundCircles:e.map.aroundCircles,markerMode:e.map.markerMode,languageFile:e.app.languageFile,openedMarker:e.map.openedMarker,isExpandedMap:e.app.isExpandedMap}}))(se),pe=n(8413),fe=n(4625),me=n(1290),he=n(8370),ve=n(2677);function _e(e){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function be(){be=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,a=Object.create(o.prototype),l=new w(r||[]);return i(a,"_invoke",{value:S(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",f="suspendedYield",m="executing",h="completed",v={};function _(){}function y(){}function g(){}var b={};s(b,a,(function(){return this}));var A=Object.getPrototypeOf,E=A&&A(A(L([])));E&&E!==n&&r.call(E,a)&&(b=E);var T=g.prototype=_.prototype=Object.create(b);function P(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,o,a,l){var c=d(e[i],e,o);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==_e(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(u).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,l)}))}l(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function S(t,n,r){var i=p;return function(o,a){if(i===m)throw Error("Generator is already running");if(i===h){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var l=r.delegate;if(l){var c=j(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var s=d(t,n,r);if("normal"===s.type){if(i=r.done?h:f,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(i=h,r.method="throw",r.arg=s.arg)}}}function j(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(_e(t)+" is not iterable")}return y.prototype=g,i(T,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:y,configurable:!0}),y.displayName=s(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,c,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},P(x.prototype),s(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new x(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},P(T),s(T,c,"Generator"),s(T,a,(function(){return this})),s(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return l.type="throw",l.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],l=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Ae(e,t,n,r,i,o,a){try{var l=e[o](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,i)}function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Re(r.key),r)}}function Te(e,t){return Te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Te(e,t)}function Pe(e){var t=Se();return function(){var n,r=je(e);if(t){var i=je(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==_e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xe(e)}(this,n)}}function xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Se(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Se=function(){return!!e})()}function je(e){return je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},je(e)}function Oe(e,t,n){return(t=Re(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Re(e){var t=function(e,t){if("object"!=_e(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_e(t)?t:t+""}var we=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Te(e,t)}(s,e);var t,n,r,o,l,c=Pe(s);function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Oe(xe(e=c.call.apply(c,[this].concat(n))),"scrollingElement",null),Oe(xe(e),"modal",null),Oe(xe(e),"state",{content:null}),Oe(xe(e),"hide",(function(t){var n=e.props.modalFile;t&&"lc-modal"!==t.target.classList[0]&&"lc-close"!==t.target.classList[0]||(e.modal.classList.remove("lc-active"),"launch-modal"===n&&(window.document.cookie="launchModal=true;path=/"),setTimeout((function(){m.j.dispatch((0,he.d)(n))}),250))})),e}return t=s,n=[{key:"updateModalContent",value:(o=be().mark((function e(){var t,n,r,i,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.language,r=t.modalFile,i=t.hasAuthorizedCookies,"route-calculation-print"===r){e.next=13;break}return e.prev=2,e.next=5,a.A.get("/api/file?folder=modals&ext=html&name=".concat(r,"_").concat(n));case 5:o=e.sent,"legal-notice"===r?this.setState({content:o.data.replace("VALUE_COOKIE",(0,h.Tl)("legal-notice-".concat(i?"cookies-refuse":"cookies-accept")))}):this.setState({content:o.data}),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(2),console.warn("Can't load : ".concat(r,"_").concat(n),e.t0),e.abrupt("return");case 13:case"end":return e.stop()}}),e,this,[[2,9]])})),l=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=o.apply(e,t);function a(e){Ae(i,n,r,a,l,"next",e)}function l(e){Ae(i,n,r,a,l,"throw",e)}a(void 0)}))},function(){return l.apply(this,arguments)})},{key:"componentDidMount",value:function(){this.modal=document.querySelector("[data-lc-modal]"),this.modal.classList.add("lc-active"),this.modal.addEventListener("click",this.hide),this.updateModalContent()}},{key:"componentDidUpdate",value:function(e){var t=this.props.hasAuthorizedCookies;e.hasAuthorizedCookies!==t&&this.updateModalContent()}},{key:"componentWillUnmount",value:function(){this.modal.removeEventListener("click",this.hide)}},{key:"render",value:function(){var e=this,t=this.props.modalFile;return{REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"}.REACT_APP_LIBRARY_URL||document.getElementById("portal")&&document.getElementById("portal").setAttribute("id","lcmap-modal"),i.createPortal((0,O.jsx)("div",{className:"lc-modal ".concat(t),"data-lc-modal":!0,children:(0,O.jsxs)("div",{className:"lc-head",children:[(0,O.jsx)("div",{className:"lc-close ".concat(t),onKeyUp:function(t){return(0,h.zQ)(t,e.hide)},role:"button",tabIndex:"0"}),"route-calculation-print"===t&&(0,O.jsx)("div",{className:"lc-modal-content lc-scroll","data-lc-scroll":"scroll",children:(0,O.jsx)(ve.A,{})}),"route-calculation-print"!==t&&(0,O.jsx)("div",{className:"lc-modal-content lc-scroll","data-lc-scroll":"scroll",dangerouslySetInnerHTML:{__html:this.state.content}})]})}),document.getElementById("lcmap-modal"))}}],n&&Ee(t.prototype,n),r&&Ee(t,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(v.Component),Le=(0,o.Ng)((function(e){return ge(ge({},e.modalGeneric),{},{language:e.app.language,hasAuthorizedCookies:e.app.hasAuthorizedCookies})}))(we),Ce=n(8089),Ne=n(4305),ke=n(4877),Ie=n(3727),De=n(6293);function Me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ue(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ue(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ge=function(e){var t=e.module,n=e.index,r=e.isMobile,i=Me((0,v.useState)((0,h.Tl)(t.submodule?t.text:t.title)),2),o=i[0],l=i[1];return(0,v.useEffect)((function(){t.data&&t.data.name&&t.data.ext&&t.data.field&&a.A.get("/api/file?name=".concat(t.data.name,"&ext=").concat(t.data.ext)).then((function(e){e&&e.data&&l((0,h.Tl)("text-board-title",!1,{key:"date",value:e.data[0][t.data.field]}))}))}),[]),(0,O.jsxs)("div",{className:"lc-menu-item lc-menu-item-title",children:[t.image&&(0,O.jsx)("img",{className:"lc-images",src:(0,h.tx)(t.image),alt:"","aria-hidden":"true"}),(0,O.jsxs)("div",{className:t.submodule?"":"lc-menu-item-content",children:[(0,O.jsx)("div",{className:"lc-menu-title",dangerouslySetInnerHTML:{__html:o}}),!r&&!t.submodule&&t.description&&(0,O.jsx)("div",{className:"lc-menu-item-description",dangerouslySetInnerHTML:{__html:(0,h.Tl)(t.description)}})]})]},"".concat(t.id,"_").concat(n))},He=n(8063),Ye=n.n(He),Fe=n(4432);function Be(e){return Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Be(e)}function Ve(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Xe(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function ze(e){return function(e){if(Array.isArray(e))return Ke(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Xe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(e,t){if(e){if("string"==typeof e)return Ke(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ke(e,t):void 0}}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function qe(){qe=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,a=Object.create(o.prototype),l=new w(r||[]);return i(a,"_invoke",{value:S(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",f="suspendedYield",m="executing",h="completed",v={};function _(){}function y(){}function g(){}var b={};s(b,a,(function(){return this}));var A=Object.getPrototypeOf,E=A&&A(A(L([])));E&&E!==n&&r.call(E,a)&&(b=E);var T=g.prototype=_.prototype=Object.create(b);function P(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,o,a,l){var c=d(e[i],e,o);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==Be(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(u).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,l)}))}l(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function S(t,n,r){var i=p;return function(o,a){if(i===m)throw Error("Generator is already running");if(i===h){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var l=r.delegate;if(l){var c=j(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var s=d(t,n,r);if("normal"===s.type){if(i=r.done?h:f,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(i=h,r.method="throw",r.arg=s.arg)}}}function j(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Be(t)+" is not iterable")}return y.prototype=g,i(T,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:y,configurable:!0}),y.displayName=s(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,c,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},P(x.prototype),s(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new x(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},P(T),s(T,c,"Generator"),s(T,a,(function(){return this})),s(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return l.type="throw",l.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],l=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function We(e,t,n,r,i,o,a){try{var l=e[o](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,i)}function Je(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){We(o,r,i,a,l,"next",e)}function l(e){We(o,r,i,a,l,"throw",e)}a(void 0)}))}}function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach((function(t){ot(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,at(r.key),r)}}function et(e,t){return et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},et(e,t)}function tt(e){var t=rt();return function(){var n,r=it(e);if(t){var i=it(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nt(e)}(this,n)}}function nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rt=function(){return!!e})()}function it(e){return it=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},it(e)}function ot(e,t,n){return(t=at(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function at(e){var t=function(e,t){if("object"!=Be(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Be(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Be(t)?t:t+""}var lt={REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"},ct=lt.REACT_APP_ZOOM,st=lt.REACT_APP_HEAVY_LINES,ut=lt.REACT_APP_AREAS_ZOOM_LEVEL,dt=lt.REACT_APP_POLES,pt=lt.REACT_APP_TERRITORY_OUTLINE,ft=lt.REACT_APP_TYPE,mt=lt.REACT_APP_EXPANDED_MAP,ht=lt.REACT_APP_HEADER,vt=lt.REACT_APP_HIDE_BOARD_NO_BACK_BUTTON,_t=lt.REACT_APP_INIT_MAP_ON_BACK,yt=lt.REACT_APP_HEAVY_MODES,gt=M("TourismPartners",(function(){return n.e(113).then(n.bind(n,6113))})),bt=M("NetworkMap",(function(){return Promise.all([n.e(813),n.e(778),n.e(981),n.e(377)]).then(n.bind(n,6377))})),At=M("NetworkTowns",(function(){return Promise.all([n.e(813),n.e(778),n.e(981),n.e(94)]).then(n.bind(n,6094))})),Et=M("Around",(function(){return n.e(972).then(n.bind(n,4972))})),Tt=M("Lines",(function(){return Promise.all([n.e(848),n.e(472)]).then(n.bind(n,7472))})),Pt=M("RouteCalculation",(function(){return Promise.all([n.e(91),n.e(4),n.e(990)]).then(n.bind(n,5990))})),xt=M("Thematic",(function(){return n.e(273).then(n.bind(n,8273))})),St=M("TextBoard",(function(){return n.e(271).then(n.bind(n,652))})),jt=M("Bike",(function(){return n.e(975).then(n.bind(n,3356))})),Ot=M("NetworkLines",(function(){return Promise.all([n.e(813),n.e(778),n.e(981),n.e(280)]).then(n.bind(n,2280))})),Rt=M("Projects",(function(){return n.e(44).then(n.bind(n,6044))})),wt=M("MultiMobilites",(function(){return n.e(802).then(n.bind(n,7802))})),Lt=M("LinesRegions",(function(){return Promise.all([n.e(321),n.e(154)]).then(n.bind(n,1154))})),Ct=M("Analyzes",(function(){return Promise.all([n.e(321),n.e(201)]).then(n.bind(n,8201))})),Nt=M("Territories",(function(){return n.e(755).then(n.bind(n,6755))})),kt=M("NewNetworkTabs",(function(){return Promise.all([n.e(813),n.e(778),n.e(801)]).then(n.bind(n,6801))})),It=M("NewNetworkLines",(function(){return Promise.all([n.e(778),n.e(770)]).then(n.bind(n,5770))})),Dt=M("NewNetworkTowns",(function(){return Promise.all([n.e(813),n.e(778),n.e(248)]).then(n.bind(n,1248))})),Mt=U("AroundInBoard",(function(){return n.e(475).then(n.bind(n,5475))})),Ut=M("ThematicAround",(function(){return n.e(47).then(n.bind(n,47))})),Gt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&et(e,t)}(l,e);var t,n,r,i,o=tt(l);function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ot(nt(e=o.call.apply(o,[this].concat(n))),"state",{textModuleOpened:{}}),ot(nt(e),"isScrolling",null),ot(nt(e),"renderModule",(function(){var t=e.props,n=t.module,r=t.map,i=t.lines,o=t.linesModes,a=t.placesRef,l=t.stops,c=t.areas,s=t.places,u=t.towns,d=t.touchscreenSelected,p=t.hash,f=t.stations,m=t.servicesStations,_=t.domElement,y=t.options;if(n){var g={lines:i,linesModes:o,placesRef:a,map:r,stops:l,areas:c,places:s,towns:u,stations:f,servicesStations:m,touchscreenSelected:d,hash:p,domElement:_,options:y};document.querySelector(".lc-popup-clickthrough")&&document.querySelector(".lc-popup-clickthrough").remove();var b=function(){return(0,O.jsx)("div",{className:"lc-fallback",children:(0,h.Tl)("loading")})};switch(n.id){case"partners":case"tourism-partners":return(0,O.jsx)(v.Suspense,{fallback:(0,O.jsx)(b,{}),children:(0,O.jsx)(gt,Ze({moduleData:n},g))});case"network-map":return(0,O.jsx)(v.Suspense,{fallback:(0,O.jsx)(b,{}),children:(0,O.jsx)(bt,Ze({moduleData:n},g))});case"network-towns":return(0,O.jsx)(v.Suspense,{fallback:(0,O.jsx)(b,{}),children:(0,O.jsx)(At,Ze({moduleData:n},g))});case"around":return(0,O.jsx)(v.Suspense,{fallback:(0,O.jsx)(b,{}),children:(0,O.jsx)(Et,Ze({blockZoomAtStop:n.blockZoomAtStop,radius:n.radius,markerModeChanged:n.markerModeChanged,refreshDataInterval:n.refreshDataInterval,searchIn:n.searchIn,disableClickOnMap:n.disableClickOnMap,displayModuleInfo:n.displayModuleInfo,dontShowTimetable:n.dontShowTimetable,disableAutocompleteGeolocation:n.disableAutocompleteGeolocation,title:n.title,itemCoordsIfNotFound:n.itemCoordsIfNotFound,minDate:n.minDate,maxDate:n.maxDate,defaultDateTime:n.defaultDateTime,displayScheduleDestination:n.displayScheduleDestination,notScheduleDestinationIfOneDirection:n.notScheduleDestinationIfOneDirection,addCatPictoBeforeLines:n.addCatPictoBeforeLines,displayDisruptionsOnLines:n.displayDisruptionsOnLines,noScheduleTodayLabel:n.noScheduleTodayLabel,aroundTabs:n.tabs,poiFitBoundsOnMobile:n.poiFitBoundsOnMobile},g))});case"lines":return(0,O.jsx)(v.Suspense,{fallback:(0,O.jsx)(b,{}),children:(0,O.jsx)(Tt,Ze({moduleData:n},g))});case"route-calculation":return(0,O.jsx)(v.Suspense,{fallback:(0,O.jsx)(b,{}),children:(0,O.jsx)(Pt,Ze({moduleData:n},g))});case"thematic":return(0,O.jsx)(v.Suspense,{fallback:(0,O.jsx)(b,{}),children:(0,O.jsx)(xt,Ze({moduleData:n},g))});case"text-board":return(0,O.jsx)(v.Suspense,{fallback:(0,O.jsx)(b,{}),children:(0,O.jsx)(St,Ze({moduleData:n},g))});case"bike":return(0,O.jsx)(v.Suspense,{fallback:(0,O.jsx)(b,{}),children:(0,O.jsx)(jt,Ze({moduleData:n},g))});case"network-lines":return(0,O.jsx)(v.Suspense,{fallback:(0,O.jsx)(b,{}),children:(0,O.jsx)(Ot,Ze({moduleData:n},g))});case"projects":return(0,O.jsx)(v.Suspense,{fallback:(0,O.jsx)(b,{}),children:(0,O.jsx)(Rt,Ze({moduleData:n},g))});case"multimobilities":return(0,O.jsx)(v.Suspense,{fallback:(0,O.jsx)(b,{}),children:(0,O.jsx)(wt,Ze({moduleData:n},g))});case"lines-regions":return(0,O.jsx)(v.Suspense,{fallback:(0,O.jsx)(b,{}),children:(0,O.jsx)(Lt,Ze({moduleData:n},g))});case"analyzes":return(0,O.jsx)(v.Suspense,{fallback:(0,O.jsx)(b,{}),children:(0,O.jsx)(Ct,Ze({moduleData:n},g))});case"territories":return(0,O.jsx)(v.Suspense,{fallback:(0,O.jsx)(b,{}),children:(0,O.jsx)(Nt,Ze({moduleData:n},g))});case"new-network-tabs":return(0,O.jsx)(v.Suspense,{fallback:(0,O.jsx)(b,{}),children:(0,O.jsx)(kt,Ze({moduleData:n},g))});case"new-network-lines":return(0,O.jsx)(v.Suspense,{fallback:(0,O.jsx)(b,{}),children:(0,O.jsx)(It,Ze({moduleData:n},g))});case"new-network-towns":return(0,O.jsx)(v.Suspense,{fallback:(0,O.jsx)(b,{}),children:(0,O.jsx)(Dt,Ze({moduleData:n},g))});case"thematic-around":return(0,O.jsx)(v.Suspense,{fallback:(0,O.jsx)(b,{}),children:(0,O.jsx)(Ut,Ze({moduleData:n},g))})}}else console.warn("An error has occured while loading module ...")})),ot(nt(e),"resizeBoardContent",(function(){var t=e.props,n=t.top,r=t.isMobile,i=t.isMobileBoot;(r||i)&&(window.scrollTo(0,n),window.addEventListener("scroll",(function(){clearTimeout(e.isScrolling),e.isScrolling=setTimeout((function(){m.j.dispatch((0,g.rG)(window.pageYOffset))}),50)})))})),ot(nt(e),"showBackButton",(function(t){var n,r,i,o=e.props,a=o.lock,l=o.options,c=A.A.location.pathname,s=(0,h._V)(A.A.location),u=Object.keys(s).filter((function(e){return-1===["lock","tab","size","dont_show","token","client_id","board","hasAuthorizedCookies","touchscreen","lang"].indexOf(e)})).length,d=u>0;if(!1===(null==l||null===(n=l.features)||void 0===n?void 0:n["change-line"])&&!s.date&&(c.includes("/lines")||c.includes("/route-calculation")))return!1;if(!0===(null==l||null===(r=l.config)||void 0===r?void 0:r.noBackButtonOnLinesModule)){if(s.from)return!0;if(!s.date&&(0,h.x$)("lines")&&!s.from&&!s.current&&(!s.stop||!s.stop_area))return!1;if(s.current&&!s.date)return!1;if(s.current&&s.stop&&!s.date)return!1}return!(!0===(null==l||null===(i=l.config)||void 0===i?void 0:i.noBackButtonOnAroundModule)&&(0,h.x$)("around")&&!s.from&&!s.line)&&(Object.keys(t).map((function(e){return t[e].length})).reduce((function(e,t){return e+t}))<=1&&(a=!0),!a||(c.includes("/lines")||(0,h.x$)("around")?!!d:(0,h.x$)("thematic-around")?d:c.includes("/route-calculation")?s.from&&!s.to||!s.from&&s.to?u>1:s.from&&s.to?u>2:void 0:c.includes("/towns")||c.includes("/hiking-routes")||c.includes("/mentions")||c.includes("places-interest")||c.includes("/network-map")||c.includes("/network-towns")?!!d:c.includes("/network-lines")?!(s.stop_area&&!s.line)&&!!d:(c.includes("tourism-partners")||c.includes("partners"),!!d)))})),ot(nt(e),"back",(function(){var t,n=e.props,r=n.isMobile,i=n.modules,o=n.options,a=A.A.location,l=a.pathname,c=a.search,s=(0,h._V)(A.A.location),u=function(e){var t;!0!==(null==o||null===(t=o.config)||void 0===t?void 0:t.cancelBackButton)&&A.A.push(e)};delete s.lock,(0,h.UP)(mt)&&r&&m.j.dispatch((0,g.iB)(!1));var d=function(e){var t=i.find((function(t){return t.id===e})),n=i.find((function(e){return"multimobilities"===e.id})),r=null;n&&n.mobilities.forEach((function(t,n){t.data.find((function(t){return t.type===e}))&&(r=n)})),null!=t&&t.hide&&r?((0,De.i)({clicked:"back",from:l,from_params:s,to:"/multimobilities?mob=".concat(r),to_params:{}}),u("/multimobilities?mob=".concat(r))):((0,De.i)({clicked:"back",from:l,from_params:s,to:"/",to_params:{}}),u("/"))};if(l.includes("lines-regions"))if(s.cat&&s.line){var p="?cat="+s.cat;(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:(0,h._V)({search:p})}),u({pathname:l,search:p})}else if(s.cat&&!s.line||!s.cat&&s.line&&l.includes("-dl")||s.region&&!s.line&&l.includes("-aoapi"))(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:{}}),u(l);else if(s.region&&s.line){var f="?region="+s.region;(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:(0,h._V)({search:f})}),u({pathname:l,search:f})}else(0,De.i)({clicked:"back",from:l,from_params:s,to:"/",to_params:{}}),u("/");else if(l.includes("/lines")){m.j.dispatch((0,me.XW)(null));var v=i.find((function(e){return"lines"===e.id}));if(v&&!0===v.hide)(0,De.i)({clicked:"back",from:l,from_params:s,to:"/",to_params:{}}),u("/");else if(s.from)if(["around","route-calculation"].includes(s.from)&&(s.stop||s.stop_area)){var _="around"===s.from&&s.fromline?"?line=".concat(s.fromline):"around"===s.from?"?from="+(s.stop?s.stop:s.stop_area):""+(s.fromline?"&from=".concat(s.fromline):"");(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:(0,h._V)({search:_})}),u({pathname:"/".concat(s.from),search:_})}else if(s.from.startsWith("stop")){var y=s.from.startsWith("stop_point")?"?stop=".concat(s.from):s.from.startsWith("stop_area")?"?stop_area=".concat(s.from):"";(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:(0,h._V)({search:y})}),u({pathname:"/lines",search:y})}else if(s.from.startsWith("line")){var b="?current=".concat(s.from).concat(s.stop?"&stop=".concat(s.stop):"");(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:(0,h._V)({search:b})}),u({pathname:"/lines",search:b})}else if("entrance"===s.from)(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:""}),u({pathname:"/"});else{var E=i.find((function(e){return e.id===decodeURIComponent(s.from)||e.url===decodeURIComponent(s.from)||e.data===decodeURIComponent(s.from)}));(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:""}),u({pathname:"/"+(E?"thematic"===E.id?E.data:E.url?E.url:E.id:"")})}else if(s.current)if(s.date){var T=c.split("&date=")[0];(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:(0,h._V)({search:T})}),u({pathname:l,search:T})}else{var P,S="?"+(s.stop_area||null!==(P=s.stop)&&void 0!==P&&P.startsWith("stop_area")?"stop_area=".concat(s.stop_area?s.stop_area:s.stop,"&"):"");(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:(0,h._V)({search:S})}),u({pathname:l,search:S})}else s.stop_area?((0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:{}}),u({pathname:l})):((0,De.i)({clicked:"back",from:l,from_params:s,to:"/",to_params:{}}),u("/"),m.j.dispatch((0,x.H7)(null)))}else if((0,h.x$)("around"))if(s.back)(0,De.i)({clicked:"back",from:l,from_params:s,to:"/".concat("board"===s.back?"":s.back),to_params:{}}),u("/".concat("board"===s.back?"":s.back));else if(s.line)if(s.from)if(s.date){var j=c.split("&date=")[0];(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:(0,h._V)({search:j})}),u({pathname:l,search:j})}else{var O="?from="+s.from;(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:(0,h._V)({search:O})}),u({pathname:l,search:O})}else{var R=s.date?c.split("&date=")[0]:"";(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:(0,h._V)({search:R})}),u({pathname:l,search:R})}else s.from&&!s.line?((0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:{}}),m.j.dispatch((0,me._f)("")),m.j.dispatch((0,me.jj)(null)),u(l)):((0,De.i)({clicked:"back",from:l,from_params:s,to:"/",to_params:{}}),u("/"),m.j.dispatch((0,x.H7)(null)));else if((0,h.x$)("thematic-around"))if(s.from&&!s.place||!s.from&&s.place)(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:{}}),m.j.dispatch((0,me._f)("")),u(l);else if(s.from&&s.place){var w="?from="+s.from+(s.tab?"&tab=".concat(s.tab):"");(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:(0,h._V)({search:w})}),u({pathname:l,search:w})}else(0,De.i)({clicked:"back",from:l,from_params:s,to:"/",to_params:{}}),u("/");else if(l.includes("/route-calculation"))if(s.back)(0,De.i)({clicked:"back",from:l,from_params:s,to:"/".concat("board"===s.back?"":s.back),to_params:{}}),u("/".concat("board"===s.back?"":s.back));else if(s.to&&s.from)if(s.journey){var L="?from=".concat(s.from,"&to=").concat(s.to,"&date=").concat(s.date,"&modes=").concat(s.modes).concat(s.extend?"&extend="+s.extend:"").concat(s.walking?"&walking="+s.walking:"").concat(s.cycling?"&cycling="+s.cycling:"").concat(s.bikeProfile?"&bikeProfile="+s.bikeProfile:"");(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:(0,h._V)({search:L})}),u({pathname:l,search:L})}else if(s.date){var C="?from="+s.from+"&to="+s.to;(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:(0,h._V)({search:C})}),u({pathname:l,search:C})}else d("route-calculation");else d("route-calculation");else if(l.includes("/towns"))if(s.insee&&s.line)if(s.date){var N=c.split("&date=")[0];(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:(0,h._V)({search:N})}),u({pathname:l,search:N})}else{var k="?insee="+s.insee;(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:(0,h._V)({search:k})}),u({pathname:l,search:k})}else s.insee&&!s.line?((0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:{}}),u(l)):((0,De.i)({clicked:"back",from:l,from_params:s,to:"/",to_params:{}}),u("/"),m.j.dispatch((0,x.H7)(null)));else if(l.includes("/hiking-routes")){var I=c.split("&");if(I.length>1){var D=I[I.length-1],M=c.replace("&"+D,"");(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:(0,h._V)({search:M})}),u({pathname:l,search:M})}else c?((0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:{}}),u(l)):((0,De.i)({clicked:"back",from:l,from_params:s,to:"/",to_params:{}}),u("/"))}else if(l.includes("/mentions"))(0,De.i)({clicked:"back",from:l,from_params:s,to:"/",to_params:{}}),u("/"),e.setState({mentions:!1});else if(l.includes("places-interest")){var U=c.split("&");if(U.length>1){var G=U[U.length-1],H=c.replace("&"+G,"");(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:(0,h._V)({search:H})}),u({pathname:l,search:H})}else c?((0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:{}}),u(l)):((0,De.i)({clicked:"back",from:l,from_params:s,to:"/",to_params:{}}),u("/"),m.j.dispatch((0,x.H7)(null)))}else if(l.includes("/network-map")||l.includes("/new-network-lines"))if(s.line&&s.from){var Y="?line=".concat(s.from);(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:(0,h._V)({search:Y})}),u({pathname:l,search:Y})}else s.line?((0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:{}}),u({pathname:l})):((0,De.i)({clicked:"back",from:l,from_params:s,to:"/",to_params:{}}),u("/"));else if(l.includes("/network-towns")||l.includes("/new-network-towns"))if(s.town&&s.line&&s.from){var F="?town=".concat(s.town,"&line=").concat(s.from);(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:(0,h._V)({search:F})}),u({pathname:l,search:F})}else if(s.town&&s.line){var B="?town=".concat(s.town);(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:(0,h._V)({search:B})}),u({pathname:l,search:B})}else s.town?((0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:{}}),u({pathname:l})):((0,De.i)({clicked:"back",from:l,from_params:s,to:"/",to_params:{}}),u("/"));else if(l.includes("/network-lines")||l.includes("/new-network-tabs"))if(s.stop_area&&s.line){var V="?stop_area=".concat(s.stop_area)+(s.tab?"&tab="+s.tab:"");(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:(0,h._V)({search:V})}),u({pathname:l,search:V})}else if(s.town&&s.line&&s.from){var z="?town=".concat(s.town,"&line=").concat(s.from)+(s.tab?"&tab="+s.tab:"");(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:(0,h._V)({search:z})}),u({pathname:l,search:z})}else if(s.town&&s.line){var X="?town=".concat(s.town)+(s.tab?"&tab="+s.tab:"");(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:(0,h._V)({search:X})}),u({pathname:l,search:X})}else if(s.town)(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:{}}),u({pathname:l,search:s.tab?"?tab="+s.tab:""});else if(s.line&&s.from){var K="?line=".concat(s.from)+(s.tab?"&tab="+s.tab:"");(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:(0,h._V)({search:K})}),u({pathname:l,search:K})}else s.line?((0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:{}}),u({pathname:l,search:s.tab?"?tab="+s.tab:""})):((0,De.i)({clicked:"back",from:l,from_params:s,to:"/",to_params:{}}),u("/"));else if(l.includes("tourism-partners")||l.includes("partners")||"tourism-partners"===e.props.module.id&&l.includes(null===(t=e.props.module)||void 0===t?void 0:t.url))if(s.partner)if(s.type){var q="?type=".concat(s.type);(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:(0,h._V)({search:q})}),u({pathname:l,search:q})}else(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:{}}),u(l);else s.type?((0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:{}}),u(l)):((0,De.i)({clicked:"back",from:l,from_params:s,to:"/",to_params:{}}),u("/"));else if(l.includes("analyzes"))if(s.indicator&&!s.line)(0,De.i)({clicked:"back",from:l,from_params:s,to:"/analyzes",to_params:{}}),u("/analyzes");else if(s.indicator&&s.line){var W="?indicator=".concat(s.indicator);(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:(0,h._V)({search:W})}),u({pathname:l,search:W})}else!s.indicator&&s.line?((0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:{}}),u({pathname:l})):((0,De.i)({clicked:"back",from:l,from_params:s,to:"/",to_params:{}}),u("/"));else if(l.includes("multimobilities"))if(s.current){var J=c.split("&current=")[0];m.j.dispatch((0,me.zy)(null)),(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:(0,h._V)({search:J})}),u({pathname:l,search:J})}else s.mob?u({pathname:l}):((0,De.i)({clicked:"back",from:l,from_params:s,to:"/",to_params:{}}),u("/"));else if(l.includes("territories"))s.id?((0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:{}}),u("/territories")):((0,De.i)({clicked:"back",from:l,from_params:s,to:"/",to_params:{}}),u("/"));else{if(s.place&&s.line){var Q="?place="+s.place;(0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:(0,h._V)({search:Q})}),u({pathname:l,search:Q})}else s.place?"home"===s.from?((0,De.i)({clicked:"back",from:l,from_params:s,to:"/",to_params:{}}),u("/")):((0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:{}}),u({pathname:l})):s.line?s.tiles?((0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:{}}),u({pathname:l,search:"?tiles="+s.tiles})):s.line&&((0,De.i)({clicked:"back",from:l,from_params:s,to:l,to_params:{}}),u(l)):((0,De.i)({clicked:"back",from:l,from_params:s,to:"/",to_params:{}}),u("/"),"projects"===ft&&m.j.dispatch((0,g.Xv)(1)));m.j.dispatch((0,x.H7)(null))}})),ot(nt(e),"getPage",(function(t){return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("div",{className:"lc-board-header",children:[(0,O.jsx)("div",{className:"back",onClick:e.back,onKeyUp:function(t){return(0,h.zQ)(t,e.back)},role:"button",tabIndex:"0",title:(0,h.Tl)("title-back"),children:(0,O.jsx)("img",{src:(0,h.tx)("/assets/images/back.svg"),alt:(0,h.Tl)("back")})}),(0,O.jsx)("div",{className:"board-title",children:"mentions"===t?"mentions légales":t})]}),(0,O.jsx)("div",{className:"content page",dangerouslySetInnerHTML:{__html:e.state.content}})]})})),ot(nt(e),"onLineSelected",function(){var t=Je(qe().mark((function t(n,r){var i;return qe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==(null==n||null===(i=n.routes)||void 0===i?void 0:i.length)){t.next=2;break}return t.abrupt("return");case 2:e.props.history.push("/lines?current=".concat(n.id,"_").concat(n.direction_id,"&stop=").concat(r.id));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),ot(nt(e),"onClickItemPage",(function(t){e.props.history.push("/"+t),e.setState(ot({},t,!0))})),ot(nt(e),"initMap",(function(){var t=e.props,n=t.lines,r=t.map,i=t.history,o=t.places,l=void 0===o?[]:o,c=t.stations,s=void 0===c?[]:c,u=t.placesRef,d=t.isMobile,p=t.hash,f=t.heavyIds,v=t.complementaryIds,_=t.customMapLines,y=t.customMapMarkers,b=t.allLinesGeojson,A=t.configApp,E=(0,h._V)(i.location);if(r){if((f.length||!0===f||yt)&&a.A.get("/api/file?name=entrance_map&folder=map&ext=geojson").then((function(e){return(0,Ie.fx)(e.data,r)})),E.zoom&&E.center){var T,j=null==r||null===(T=r.mapReference)||void 0===T||null===(T=T.current)||void 0===T?void 0:T.leafletElement;if(j&&j.setView(decodeURI(E.center).split(";"),E.zoom),E.stop){var O=e.props.stops.find((function(e){return e.id===E.stop}));O&&setTimeout((function(){m.j.dispatch((0,x.xY)(O))}))}if(E.stop_area){var R=e.props.areas.find((function(e){return e.id===E.stop_area}));R&&setTimeout((function(){m.j.dispatch((0,x.xY)(R))}))}}else if(pt&&"territory_outline"===JSON.parse(ct).where){var w;null!==(w=e.props)&&void 0!==w&&null!==(w=w.module)&&void 0!==w&&w.zoomOnIt||(0,Ne.hz)(r)}else"all_lines"===JSON.parse(ct).where?!b||b.length>0?a.A.get("/api/file?name=all-lines&ext=geojson").then((function(t){a.A.get("/api/file?name=lines-intersect&ext=geojson").then((function(e){e.data&&m.j.dispatch((0,S.ZH)(e.data))})).catch((function(e){console.log(e)})).finally((function(){m.j.dispatch((0,S.gm)(t.data)),m.j.dispatch((0,g.w1)(ze(e.props.lines.map((function(e){var n;return Ze(Ze({},e),{},{color:(null===(n=t.data.features.find((function(t){return String(t.properties.ID)===String(e.id)})))||void 0===n||null===(n=n.properties.COULEUR)||void 0===n?void 0:n.substring(1))||e.color})}))))),setTimeout((function(){return(0,Ie.hi)(r,!1)}))}))})):m.j.dispatch((0,S.I0)({type:"",id:null})):"start_point"===JSON.parse(ct).where&&E.current;if(null!=A&&A.streetview&&(null==A||!A.hide_streetview_controler)){var L=document.querySelector("#lcmap .leaflet-container");L.ondragover=function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"},L.ondrop=function(e){if(e.preventDefault(),e.dataTransfer.getData("text/html").includes("lc-leaflet-control-streetview-img")){var t=r.mapReference.current.leafletElement.containerPointToLatLng(P().point([e.clientX,ht?e.clientY-(d?60:120):e.clientY]));m.j.dispatch((0,g.iA)(t));var n=(0,Ie.xh)();m.j.dispatch((0,S.lM)([n]))}}}}var C=l.concat(s),N=u?u.find((function(e){return"map-background"===e.name})):[],k=C.filter((function(e){return N&&N.places?N.places.includes(e.cat_id):[]}));if(r&&m.j.dispatch((0,x.D1)(k)),m.j.dispatch((0,x.D1)(k)),r&&"network"!==ft){var I;if((null==v?void 0:v.length)>0&&m.j.dispatch((0,x.M7)()),(null==f?void 0:f.length)>0||yt)m.j.dispatch((0,x.Lc)(JSON.parse(ct).where||void 0!==E.center&&void 0!==E.zoom,null==r||null===(I=r.mapReference)||void 0===I||null===(I=I.current)||void 0===I?void 0:I.leafletElement.getZoom()));(null==_?void 0:_.length)>0&&m.j.dispatch((0,x.BU)(_)),(null==y?void 0:y.length)>0&&m.j.dispatch((0,S.lM)((0,Ie.hp)(y))),m.j.dispatch((0,S.SA)([])),(0,Ne.pf)(r,"onMoveEnd",function(){var t=Je(qe().mark((function t(o){var l,c,s,u,d,v,_,y,g,b,E,T,j,O,R,w,L,C,k,I,D,M,U,G,H,Y,F,B,V,z,X,K,q,W,J;return qe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i.location.pathname.includes("route-calculation")||i.location.pathname.includes("bike")||i.location.pathname.includes("lines")&&i.location.search.includes("current=")||i.location.pathname.includes("multimobilities")&&i.location.search.includes("current="))){t.next=2;break}return t.abrupt("return");case 2:if(l=e.props.reactStops,c=e.props,s=c.reactAreas,u=c.terminusStyle,d=(0,ke.UY)(i.location),v=!1,d.line&&(v=d.line.includes("_f")?d.line.substring(0,d.line.lastIndexOf("_f")):d.line.includes("_b")?d.line.substring(0,d.line.lastIndexOf("_b")):d.line),_=r.mapReference.current.leafletElement.getZoom(),y=o.sourceTarget.getBounds(),g=[],null!=A&&A.entrance_for&&(l=null===(b=l)||void 0===b?void 0:b.filter((function(e){return!e.props.stop.lines.find((function(e){return A.entrance_for.includes(e.mode)}))}))),s){j=(null==N?void 0:N.zoom)&&void 0!==(null==N||null===(E=N.zoom.stop_areas)||void 0===E?void 0:E.min)&&void 0!==(null==N||null===(T=N.zoom.stop_areas)||void 0===T?void 0:T.max),O=Ve(s);try{for(O.s();!(R=O.n()).done;)if(w=R.value,y.contains(w.props.position))if(j&&_>=N.zoom.stop_areas.min&&_<=N.zoom.stop_areas.max)g.push(w);else if(!j&&_>=14&&_<+ut&&st&&st.length){L=Ve(w.props.area.lines);try{for(L.s();!(C=L.n()).done;)k=C.value,(f.includes(k.id)||v&&k.id===v)&&g.indexOf(w)<0&&g.push(w)}catch(e){L.e(e)}finally{L.f()}}else!j&&_>=+ut&&_<17&&g.push(w)}catch(e){O.e(e)}finally{O.f()}dt&&["around","lines"].some((function(e){return(0,h.x$)(e)||i.location.pathname.includes(e)}))&&(0,h.Te)(s,g,_)}if(l){M=(null==N?void 0:N.zoom)&&void 0!==(null==N||null===(I=N.zoom.stop_points)||void 0===I?void 0:I.min)&&void 0!==(null==N||null===(D=N.zoom.stop_points)||void 0===D?void 0:D.max),U=Ve(l);try{for(U.s();!(G=U.n()).done;)H=G.value,y.contains(H.props.position)&&(M&&_>N.zoom.stop_points.min&&_<=N.zoom.stop_points.max||!M&&_>=17)&&g.push(H)}catch(e){U.e(e)}finally{U.f()}}if(!v){t.next=53;break}if(Y=n.find((function(e){return e.id===v})),F=d.line.includes("_b")?"b":"f",!Y){t.next=51;break}if(null!=Y&&Y.stops){t.next=30;break}if("thematic"===(null===(B=e.props.module)||void 0===B?void 0:B.id)||"searchOnly"===(null===(V=e.props.module)||void 0===V?void 0:V.type)){t.next=30;break}return t.prev=19,t.next=22,a.A.get("/api/file?folder=stops&name=".concat(encodeURIComponent(Y.code),"_").concat(Y.network,"_").concat(F,"~").concat(p));case 22:z=t.sent,Y.stops=z.data,t.next=30;break;case 26:t.prev=26,t.t0=t.catch(19),X=t.t0.response&&t.t0.response.data?t.t0.response.data.id:t.t0,console.warn(X);case 30:K=Y.stops.filter((function(e){return e.terminus})),q=Ve(K),t.prev=32,J=qe().mark((function t(){var n,r;return qe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=W.value).lines){t.next=3;break}return t.abrupt("return",1);case 3:(r=e.props.stops.find((function(e){return e.id===n.id})))&&(r=Ze({},r)),g.push(m.j.dispatch((0,x.V5)(r||n,{key:Y.code+"_"+n.index,icon:new(P().DivIcon)({className:"lc-circle-icon-marker lc-map-stop-marker lc-circle-icon-marker-terminus",iconSize:[10,10],tooltipAnchor:new(P().Point)(5,0),html:'<span style="border: 3px solid #'.concat(Y.color,'" />')}),stop:r||n,zIndexOffset:200,terminus:!0})));case 6:case"end":return t.stop()}}),t)})),q.s();case 35:if((W=q.n()).done){t.next=41;break}return t.delegateYield(J(),"t1",37);case 37:if(!t.t1){t.next=39;break}return t.abrupt("continue",39);case 39:t.next=35;break;case 41:t.next=46;break;case 43:t.prev=43,t.t2=t.catch(32),q.e(t.t2);case 46:return t.prev=46,q.f(),t.finish(46);case 49:m.j.dispatch((0,S.SA)(g)),setTimeout((function(){document.querySelectorAll(".lc-tooltip-leaflet-terminus").forEach((function(e){e.style.borderColor="#"+Y.color,u?["imageAndCityName"].includes(u)&&(e.style.padding="2px 8px 2px 2px"):(e.style.backgroundColor="#"+Y.color,e.style.color=(0,pe.N)(Y.color)>.5?"#333":"#fff",e.style.padding="2px 8px")}))}));case 51:t.next=54;break;case 53:m.j.dispatch((0,S.SA)(g.filter((function(e){var t=Object.keys(e.props).includes("area")?"area":"stop";return e.props[t].lines.length}))));case 54:case"end":return t.stop()}}),t,null,[[19,26],[32,43,46,49]])})));return function(e){return t.apply(this,arguments)}}()),yt&&(0,Ne.pf)(r,"onZoomEnd",function(){var e=Je(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.j.dispatch((0,x.Lc)(!0,t.target._zoom));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.removeEventListener=(0,h.o1)(d),setTimeout((function(){var e;null!==(e=r.mapReference)&&void 0!==e&&null!==(e=e.current)&&void 0!==e&&e.leafletElement&&r.mapReference.current.leafletElement.fire("moveend")}))}})),ot(nt(e),"handleProjectsLinkClick",(function(e,t){var n=e.target,r=document.querySelector(".lc-projects-link-selected");if(t||m.j.dispatch((0,g.Xv)(1)),n.classList.contains("lc-projects-link-selected"))return n.classList.remove("lc-projects-link-selected"),A.A.push({pathname:"/"}),m.j.dispatch((0,g.Xv)(1)),e.preventDefault(),!1;r&&r.classList.remove("lc-projects-link-selected"),t&&m.j.dispatch((0,g.Xv)(t.position)),n.classList.contains("lc-menu-title")?n.classList.add("lc-projects-link-selected"):n.classList.contains("lc-menu-item")&&n.querySelector(".lc-menu-title").classList.add("lc-projects-link-selected")})),e}return t=l,n=[{key:"onClickInfobox",value:function(e,t){var n=this.props,r=n.history,i=n.map,o="/".concat(t,"?from=").concat((0,ke.cC)(e.coord));r.push(o),i.setState({infoboxs:[]})}},{key:"componentDidUpdate",value:function(e){if(!e.isMobile&&this.props.isMobile&&this.resizeBoardContent(),1===this.props.modules.length&&_t&&!this.module&&e.module){var t=A.A.location,n=t.pathname,r=t.search;n!=="/".concat(e.module.id)||r||this.initMap()}else this.module||e.module||!_t||this.initMap()}},{key:"componentDidMount",value:(i=Je(qe().mark((function e(){var t,n,r,i,o,l,c,s,u;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.lines,i=n.history,o=n.modules,l=n.touchscreenSelected,c=n.options,"/"===i.location.pathname&&(m.j.dispatch((0,g.I1)(this)),(0,Ce.a9)()),(0,De.i)({loaded:"board"}),m.j.dispatch((0,me.Js)(null)),s=null,u=o.find((function(e){return!e.hide&&(l?e.touchscreen:e)&&e&&"page"===e.id})),e.t0=u,!e.t0){e.next=10;break}return e.next=10,a.A.get("/api/file?folder=pages&ext=html&name="+u.file).then((function(e){s=e.data})).catch((function(e){var t=e.response&&e.response.data?e.response.data.id:e;console.warn(t)}));case 10:if(this.setState({content:s}),"/mentions"===i.location.pathname&&this.setState({mentions:!0}),this.initMap(),r.length){e.next=15;break}return e.abrupt("return");case 15:c&&this.props.isMobile&&null!==(t=this.props)&&void 0!==t&&null!==(t=t.map)&&void 0!==t&&null!==(t=t.mapReference)&&void 0!==t&&null!==(t=t.current)&&void 0!==t&&t.leafletElement&&this.props.map.mapReference.current.leafletElement.invalidateSize();case 16:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){var e=this.props.map;e&&"network"!==ft&&(e.setState({polylines:[],markers:[],markersPlaces:[],clusters:null,status:null,infoboxs:[],selectedInfobox:null,pin:null,circle:null,terminus:!1,infoboxsTerminus:[]}),(0,Ne.aG)(e),this.removeEventListener&&this.removeEventListener(),e.mapReference.current&&this.onStreetViewChanged&&this.onStreetViewChanged.remove())}},{key:"render",value:function(){var e,t,n=this,r=this.props,i=r.modules,o=r.module,a=r.size,l=r.language,c=r.isMobile,s=r.touchscreenSelected,u=r.selectedTown,d=r.selectedPartner,p=r.selectedPartnerType,f=r.options,_=r.showBoard,y=r.isExpandedMap,b=r.showModalGeneric,E=(0,h._V)(A.A.location),T=/(http[s]?:\/\/[^/\s]+)/g,P=document.referrer.match(T)&&document.referrer.match(T).shift(),x=i.filter((function(e){return f&&f.menu&&f.menu.links?"thematic"===e.id?-1===Object.keys(f.menu.links).filter((function(e){return!f.menu.links[e]})).indexOf(e.data):-1===Object.keys(f.menu.links).filter((function(e){return!f.menu.links[e]})).indexOf(e.id):(!e.hide||e.hide&&e.displayInputInMenu)&&(s?e.touchscreen:e)&&e})).sort((function(e,t){return+(e.position>t.position)||+(e.position===t.position)-1})).reduce((function(e,t){var n="pdf-download"===t.id?"pdf":"page"===t.id?"page":"text"===t.id?"text":t.submodule?"subs":"mains";if("pdf-download"===t.id)switch(t.type){case"local":t.url=(0,h.tx)("/assets")+t.link[l];break;case"extern":t.url=P+t.link[l];break;case"link":t.url=t.link[l]}return e[n].push(t),Ze({},e)}),{mains:[],subs:[],page:[],pdf:[],text:[]}),S=!1,j=this.showBackButton(x);if(1===Object.keys(i).length&&o){for(var R=0,w=["lock","size","touchscreen","stop"];R<w.length;R++)delete E[w[R]];0===Object.keys(E).length&&(S=!0)}var L=i.find((function(e){return"board-head"===e.id})),C=i.find((function(e){return!0===e.displayInputInMenu}));return(0,O.jsxs)(O.Fragment,{children:[b&&(0,O.jsx)(Le,{}),(0,O.jsxs)("section",{className:"lc-board"+(o?"":" lc-no-module")+" lc-".concat(a||(null==f||null===(e=f.config)||void 0===e?void 0:e.size))+(_?"":" lc-no-board")+(C?" lc-has-input-on-menu":""),"data-lc-board":!0,children:[o&&(0,O.jsxs)("div",{className:"lc-content",children:[L&&"projects"===ft&&(0,O.jsx)("div",{className:"lc-board-head",children:(0,O.jsx)(fe.N_,{to:"/",onClick:this.handleProjectsLinkClick,children:(0,O.jsx)("img",{src:L.image,alt:L.title})})},"".concat(L.id)),(0,O.jsxs)("div",{className:"lc-board-header "+((0,h.UP)(vt)&&!j?"lc-no-board-header":""),children:[j&&!S&&(0,O.jsx)("button",{className:"lc-back",tabIndex:"0",onClick:this.back,title:(0,h.Tl)("back"),children:(0,O.jsx)("img",{src:(0,h.tx)("/assets/images/back.svg"),alt:(0,h.Tl)("back")})}),(0,h.UP)(mt)&&c&&(0,O.jsx)("button",{className:"lc-expand-map",onClick:function(){return m.j.dispatch((0,g.iB)(!y))},onKeyUp:function(e){return(0,h.zQ)(e,(function(){return m.j.dispatch((0,g.iB)(!y))}))},children:y?(0,O.jsx)("img",{src:(0,h.tx)("/assets/images/chevron-up.svg"),alt:(0,h.Tl)("board-close-expanded-map")}):(0,O.jsx)("img",{src:(0,h.tx)("/assets/images/chevron-down.svg"),alt:(0,h.Tl)("board-open-expanded-map")})}),(0,O.jsxs)("h1",{className:"lc-board-title"+(j?"":" lc-board-title-lock")+(u||p||d?" lc-with-subtitle":"")+(null!=d&&d.topLikes?" lc-with-topLikes":""),tabIndex:"-1",children:[d?(0,O.jsxs)("div",{className:"lc-board-title-uppercase ".concat(d.name.length>60?" lc-long-name":""),children:[(0,O.jsx)("div",{className:"lc-board-title-subtitle",children:(0,h.Tl)(o.title)}),d.name]}):p?(0,O.jsxs)("div",{className:"lc-board-title-uppercase",children:[(0,O.jsx)("div",{className:"lc-board-title-subtitle",children:(0,h.Tl)(o.title)}),p]}):["network-lines","new-network-tabs"].includes(o.id)&&j?(0,h.Tl)(o.tabs[E.tab?E.tab:0].title):(0,h.Tl)(o.title).replace("<br/>"," "),u&&(0,O.jsx)("div",{className:"lc-board-title-town",dangerouslySetInnerHTML:{__html:u.name}})]})]}),this.renderModule()]}),!o&&(this.state.mentions?this.getPage("mentions"):(0,O.jsx)("div",{className:"lc-scrolling",children:i.length?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("div",{className:"lc-content lc-main lc-home",children:[(0,h.UP)(mt)&&c&&(0,O.jsx)("button",{className:"lc-expand-map",onClick:function(){return m.j.dispatch((0,g.iB)(!y))},onKeyUp:function(e){return(0,h.zQ)(e,(function(){return m.j.dispatch((0,g.iB)(!y))}))},children:y?(0,O.jsx)("img",{src:(0,h.tx)("/assets/images/chevron-up.svg"),alt:(0,h.Tl)("board-close-expanded-map")}):(0,O.jsx)("img",{src:(0,h.tx)("/assets/images/chevron-down.svg"),alt:(0,h.Tl)("board-open-expanded-map")})}),Object.keys(x).filter((function(e){return!["pdf","text"].includes(e)})).map((function(e){return"page"===e&&x[e].length?(0,O.jsx)("div",{onClick:function(){return n.onClickItemPage(x[e][0].file)},onKeyUp:function(t){return(0,h.zQ)(t,(function(){return n.onClickItemPage(x[e][0].file)}))},role:"button",tabIndex:"0",className:"lc-menu-item-page",children:x[e][0].title},e):(0,O.jsx)("div",{className:"subs"===e?"lc-sub-module":"",children:x[e].map((function(t,r){return"external-url"===t.id?(0,O.jsxs)("a",{className:"lc-menu-item".concat(r!==x[e].length-1||i.find((function(e){return e.submodule}))?"":" lc-ending-menu"),target:"_blank",rel:"noopener noreferrer",href:t.url,children:[t.image&&(0,O.jsx)("img",{className:"lc-images",src:(0,h.tx)(t.image),alt:"","aria-hidden":"true"}),(0,O.jsxs)("div",{className:t.submodule?"":"lc-menu-item-content",children:[(0,O.jsx)("div",{className:"lc-menu-title",dangerouslySetInnerHTML:{__html:(0,h.Tl)(t.submodule?t.text:t.title)}}),!n.props.isMobile&&!t.submodule&&t.description&&(0,O.jsx)("div",{className:"lc-menu-item-description",dangerouslySetInnerHTML:{__html:(0,h.Tl)(t.description)}})]}),!t.submodule&&(0,O.jsx)("div",{className:"lc-menu-item-arrow"})]},"".concat(t.id,"_").concat(r,"_link")):"title-board"===t.id?(0,O.jsx)(Ge,{module:t,index:r,isMobile:n.props.isMobile},"".concat(t.id,"_").concat(r)):"board-head"===t.id?"projects"===ft?(0,O.jsx)("div",{className:"lc-board-head",children:(0,O.jsx)(fe.N_,{to:"/",onClick:n.handleProjectsLinkClick,children:(0,O.jsx)("img",{src:t.image,alt:t.title})})},"".concat(t.id,"_").concat(r)):(0,O.jsxs)("div",{className:"lc-board-head",children:[(0,O.jsx)("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",children:(0,O.jsx)("img",{src:t.image,alt:t.title})}),(0,O.jsx)("span",{children:(0,h.Tl)(t.title)})]},"".concat(t.id,"_").concat(r)):"projects"===t.id&&t.noLink?(0,O.jsx)(fe.N_,{to:"?tiles=".concat(t.tiles),className:"lc-menu-item",onClick:function(e){return n.handleProjectsLinkClick(e,t)},children:(0,O.jsx)("div",{className:t.submodule?"":"lc-menu-item-content",children:(0,O.jsx)("div",{className:"lc-menu-title",dangerouslySetInnerHTML:{__html:(0,h.Tl)(t.submodule?t.text:t.title)}})})},"".concat(t.id,"_").concat(r)):t.hide&&"around"===t.id&&!0===t.displayInputInMenu?(0,O.jsx)("div",{className:"lc-menu-item lc-input-in-menu lc-input-in-menu-alone",children:(0,O.jsx)(Mt,{withIcon:!0})},"".concat(t.id,"_").concat(r,"_input")):(0,O.jsxs)(v.Fragment,{children:[(0,O.jsxs)(fe.N_,{className:"lc-menu-item".concat(r!==x[e].length-1||i.find((function(e){return e.submodule}))?"":" lc-ending-menu").concat("around"===t.id&&!0===t.displayInputInMenu?" lc-with-input-in-menu":""),to:"/".concat(["thematic","text-board","projects","lines-regions"].includes(t.id)?t.data:t.url||t.id).concat(["projects"].includes(t.id)&&t.tiles?"?tiles=".concat(t.tiles):""),children:[t.image&&(0,O.jsx)("img",{className:"lc-images",src:(0,h.tx)(t.image),alt:"","aria-hidden":"true"}),(0,O.jsxs)("div",{className:t.submodule?"":"lc-menu-item-content",children:[(0,O.jsx)("div",{className:"lc-menu-title",dangerouslySetInnerHTML:{__html:(0,h.Tl)(t.submodule?t.text:t.title)}}),!n.props.isMobile&&!t.submodule&&t.description&&(0,O.jsx)("div",{className:"lc-menu-item-description",dangerouslySetInnerHTML:{__html:(0,h.Tl)(t.description)}})]}),!t.submodule&&(0,O.jsx)("div",{className:"lc-menu-item-arrow"})]},"".concat(t.id,"_").concat(r,"_link")),"around"===t.id&&!0===t.displayInputInMenu&&(0,O.jsx)("div",{className:"lc-menu-item lc-input-in-menu",children:(0,O.jsx)(Mt,{})},"".concat(t.id,"_").concat(r,"_input"))]},"".concat(t.id,"_").concat(r))}))},e)}))]}),x.pdf.map((function(e,t){var r;return(0,O.jsx)("div",{className:"lc-sub-content lc-main",children:(0,O.jsxs)("a",{className:"lc-menu-item",href:e.url,target:!1===e.blank?"_self":null!==(r=e.target)&&void 0!==r?r:"_blank",rel:"noopener noreferrer",onClick:function(){return(0,Ce.X3)({event:"map-consultationPDFPlans"})},children:[(0,O.jsx)("img",{className:"lc-images",src:(0,h.tx)("/assets/images/menu/pdf.svg"),alt:"","aria-hidden":"true"}),(0,O.jsx)("div",{className:"lc-menu-item-content",children:e.title?(0,O.jsxs)("div",{className:"lc-menu-item-content",children:[(0,O.jsx)("div",{className:"lc-menu-title",children:(0,h.Tl)(e.title)}),!n.props.isMobile&&(0,O.jsx)("div",{className:"lc-menu-item-description",children:(0,h.Tl)(e.description)})]}):(0,O.jsx)("div",{className:"lc-menu-title",children:(0,h.Tl)(e.text)})}),(0,O.jsx)("div",{className:"lc-menu-item-arrow"})]})},"".concat(e.id,"_").concat(t))})),null===(t=x.text)||void 0===t?void 0:t.map((function(e,t){return(0,O.jsx)("div",{className:"lc-sub-content",children:(0,O.jsx)("div",{className:"lc-menu-item lc-text",children:!0!==e.collapse?(0,O.jsx)("div",{className:"lc-menu-item-content",dangerouslySetInnerHTML:{__html:(0,h.Tl)(e.text)}}):(0,O.jsxs)("div",{className:"lc-menu-item-content with-collaspe",children:[(0,O.jsxs)("div",{className:"lc-text-collapse-title",onClick:function(){n.setState({textModuleOpened:Ze(Ze({},n.state.textModuleOpened),{},ot({},"".concat(e.id,"-").concat(e.position),!0!==n.state.textModuleOpened["".concat(e.id,"-").concat(e.position)]))})},onKeyUp:function(t){return(0,h.zQ)(t,(function(){n.setState({textModuleOpened:Ze(Ze({},n.state.textModuleOpened),{},ot({},"".concat(e.id,"-").concat(e.position),!0!==n.state.textModuleOpened["".concat(e.id,"-").concat(e.position)]))})}))},tabIndex:"0",role:"button",children:[(0,h.Tl)(e.title),(0,O.jsx)(Fe.W,{className:!0===n.state.textModuleOpened["".concat(e.id,"-").concat(e.position)]?"lc-arrow-collapse-open":"lc-arrow-collapse-close",isOpen:!0===n.state.textModuleOpened["".concat(e.id,"-").concat(e.position)]})]}),(0,O.jsx)(Ye(),{isOpen:!0===n.state.textModuleOpened["".concat(e.id,"-").concat(e.position)],children:(0,O.jsx)("div",{className:"lc-text-collapse-content",dangerouslySetInnerHTML:{__html:(0,h.Tl)(e.text)}})})]})})},"".concat(e.id,"_").concat(t))}))]}):(0,O.jsx)("div",{className:"lc-loading","data-lc-loading":!0,children:(0,O.jsx)("img",{src:(0,h.tx)("/assets/images/loading.gif"),width:30,alt:(0,h.Tl)("loading")})})}))]})]})}}],n&&$e(t.prototype,n),r&&$e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(v.Component),Ht=(0,b.y)((0,o.Ng)((function(e){return{top:e.app.top,isMobile:e.app.isMobile,modules:e.app.modules,map:e.app.map,lines:e.app.lines,linesModes:e.app.linesModes,stops:e.app.stops,areas:e.app.areas,places:e.app.places,placesRef:e.app.placesRef,towns:e.app.towns,stations:e.app.stations,servicesStations:e.app.servicesStations,heavyIds:e.app.heavyIds,complementaryIds:e.app.complementaryIds,customMapLines:e.app.customMapLines,customMapMarkers:e.app.customMapMarkers,language:e.app.language,lock:e.app.lock,size:e.app.size,touchscreenSelected:e.app.touchscreenSelected,hash:e.app.hash,domElement:e.app.domElement,reactAreas:e.map.reactAreas,reactStops:e.map.reactStops,selectedTown:e.network.town,selectedPartner:e.tourismPartners.partner,selectedPartnerType:e.tourismPartners.typePartner,allLinesGeojson:e.map.allLinesGeojson,isExpandedMap:e.app.isExpandedMap,terminusStyle:e.app.terminusStyle,showModalGeneric:e.modalGeneric.showModalGeneric,streetviewPosition:e.app.streetviewPosition,dontShow:e.app.dontShow,configApp:e.app.configApp,orientation:e.app.orientation}}))(Gt)),Yt=n(6035);function Ft(e){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ft(e)}function Bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(n),!0).forEach((function(t){Qt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zt(r.key),r)}}function Xt(e,t){return Xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xt(e,t)}function Kt(e){var t=Wt();return function(){var n,r=Jt(e);if(t){var i=Jt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Ft(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return qt(e)}(this,n)}}function qt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Wt=function(){return!!e})()}function Jt(e){return Jt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jt(e)}function Qt(e,t,n){return(t=Zt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zt(e){var t=function(e,t){if("object"!=Ft(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ft(t)?t:t+""}var $t,en,tn,nn,rn,on=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xt(e,t)}(a,e);var t,n,r,o=Kt(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Qt(qt(e=o.call.apply(o,[this].concat(n))),"scrollingElement",null),Qt(qt(e),"modal",null),Qt(qt(e),"input",null),Qt(qt(e),"hide",(function(){e.modal.classList.remove("lc-active"),setTimeout((function(){m.j.dispatch((0,Yt.Y)())}),250)})),e}return t=a,n=[{key:"componentDidMount",value:function(){this.modal=document.querySelector("[data-lc-modal]"),this.input=this.modal.querySelector("[data-lc-input]"),this.modal.classList.add("lc-active"),this.input.focus(),this.input.click()}},{key:"render",value:function(){var e=this,t=this.props.input;return{REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"}.REACT_APP_LIBRARY_URL||document.getElementById("portal")&&document.getElementById("portal").setAttribute("id","lcmap-modal"),i.createPortal((0,O.jsx)("div",{className:"lc-modal","data-lc-modal":!0,children:(0,O.jsxs)("div",{className:"lc-head",children:[(0,O.jsx)("div",{className:"lc-close",onClick:this.hide,onKeyUp:function(t){return(0,h.zQ)(t,e.hide)},role:"button",tabIndex:"0"}),m.j.dispatch((0,x.j1)(t,!0))]})}),document.getElementById("lcmap-modal"))}}],n&&zt(t.prototype,n),r&&zt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(v.Component),an=(0,o.Ng)((function(e){return Vt(Vt({},e.modal),{},{inputValue:e.board.inputValue,inputItems:e.board.inputItems,inputStartValue:e.board.inputStartValue,inputStartItems:e.board.inputStartItems,inputEndValue:e.board.inputEndValue,inputEndItems:e.board.inputEndItems})}))(on),ln=n(1912);function cn(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var sn=E.A.primarycolor,un=ln.Ay.div($t||($t=cn(["\n  height: 200px;\n  border-style: none;\n  background-color: ",";\n  color: ",";\n  border-radius: 5px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 275px;\n  margin: 15px 15px 0 0;\n"])),sn,(function(e){return e.color>.5?"#333":"#fff"})),dn=ln.Ay.div(en||(en=cn(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  height: 200px;\n  justify-content: space-evenly;\n  padding: 0 15px;\n\n  label {\n    background-color: rgba(0, 0, 0, 0.5);\n    color: white;\n    border-radius: 5px;\n    padding: 10px;\n    cursor: pointer;\n  }\n\n  input {\n    display: none;\n    z-index: -1;\n  }\n\n  span {\n    font-style: italic;\n    font-size: 0.875em;\n\n    span {\n      font-style: initial;\n    }\n  }\n"]))),pn=ln.Ay.a(tn||(tn=cn(["\n  text-decoration: underline;\n  color: white;\n"]))),fn=ln.Ay.div(nn||(nn=cn(["\n  text-align: center;\n"]))),mn=ln.Ay.div(rn||(rn=cn(["\n  background-color: rgba(0, 0, 0, 0.5);\n  color: white;\n  border-radius: 5px;\n  padding: 10px;\n  cursor: pointer;\n"])));function hn(e){return hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hn(e)}function vn(){vn=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,a=Object.create(o.prototype),l=new w(r||[]);return i(a,"_invoke",{value:S(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",f="suspendedYield",m="executing",h="completed",v={};function _(){}function y(){}function g(){}var b={};s(b,a,(function(){return this}));var A=Object.getPrototypeOf,E=A&&A(A(L([])));E&&E!==n&&r.call(E,a)&&(b=E);var T=g.prototype=_.prototype=Object.create(b);function P(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,o,a,l){var c=d(e[i],e,o);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==hn(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(u).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,l)}))}l(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function S(t,n,r){var i=p;return function(o,a){if(i===m)throw Error("Generator is already running");if(i===h){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var l=r.delegate;if(l){var c=j(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var s=d(t,n,r);if("normal"===s.type){if(i=r.done?h:f,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(i=h,r.method="throw",r.arg=s.arg)}}}function j(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(hn(t)+" is not iterable")}return y.prototype=g,i(T,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:y,configurable:!0}),y.displayName=s(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,c,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},P(x.prototype),s(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new x(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},P(T),s(T,c,"Generator"),s(T,a,(function(){return this})),s(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return l.type="throw",l.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],l=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function _n(e,t,n,r,i,o,a){try{var l=e[o](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,i)}function yn(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){_n(o,r,i,a,l,"next",e)}function l(e){_n(o,r,i,a,l,"throw",e)}a(void 0)}))}}function gn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return bn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var An,En={REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"},Tn=En.REACT_APP_ADMIN,Pn=En.REACT_APP_PROJECT,xn=En.REACT_APP_ENV,Sn=E.A.primarycolor,jn=(0,b.y)((function(){var e,t,n=(0,o.d4)((function(e){return e.app})).configApp,r=Tn?JSON.parse(Tn):{},i=Tn?null===(e=JSON.parse(Tn))||void 0===e?void 0:e.params:{},l=(null==i?void 0:i.valkyrie)||null,c=(null==i?void 0:i.externalValkyrie)||"valkyrie.lc.tools",s=(null==i?void 0:i.projectValkyrie)||Pn;c.startsWith("http")||(c="https://".concat(c)),delete r.params;var u=gn((0,v.useState)({type:null,message:null}),2),d=u[0],p=u[1],f=gn((0,v.useState)(!1),2),_=f[0],y=f[1],g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(e){case"loading":p({type:"loading",message:(0,h.Tl)("admin-update-loading".concat(t?"-"+t:""))});break;case"success":p({type:"success",message:(0,h.Tl)("admin-update-success".concat(t?"-"+t:""))});break;default:p({type:"error",message:(0,h.Tl)("admin-update-error".concat(t?"-"+t:""))||t})}},b=function(){var e=yn(vn().mark((function e(t,n,r,i,o,l,c,s){var u,d;return vn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Launch GTFS update"),e.prev=1,e.next=4,(0,a.A)("https://thor.lc.tools/mjolnir/update?project=".concat(Pn,"&coverage=").concat(t,"&file=").concat(n,"&g2n=").concat(r||!1,"&dante=").concat(i||!1,"&send=").concat(o||!1).concat(l?"&merge="+c+"&name="+s:""));case 4:u=e.sent,d=function e(t,n){if(!["done","failed"].includes(n))return new Promise((function(e){return setTimeout(e,1e4)})).then(yn(vn().mark((function n(){var r;return vn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,a.A)("https://thor.lc.tools/mjolnir/update-status?id=".concat(t));case 2:(r=n.sent).data&&e(t,r.data.status);case 4:case"end":return n.stop()}}),n)}))));"failed"===n?(console.warn("Tyr returned error importing GTFS."),g("error","fail-gtfs")):(console.info("Data update success."),E("data","lines"))},n.endsWith(".csv")?setTimeout(yn(vn().mark((function e(){var n,r;return vn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){var e=yn(vn().mark((function e(t){var n,r;return vn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.A)("https://tyr.lc.tools/v0/jobs");case 2:return n=e.sent,r=n.data.jobs.find((function(e){return e.instance.name===t})),e.abrupt("return",r.state);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=3,n(t);case 3:r=e.sent,["done","failed"].includes(r)?"failed"===r?(console.warn("Tyr returned error importing GTFS."),g("error","fail-gtfs")):(console.info("Data update success."),E("data","lines")):(console.warn("Take too long time..."),g("error","fail-gtfs"));case 5:case"end":return e.stop()}}),e)}))),15e3):d(u.data.job,undefined),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.warn("Error while calling Thor..."),g("error","fail-gtfs");case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n,r,i,o,a,l,c){return e.apply(this,arguments)}}(),A=function(){var e=yn(vn().mark((function e(t,n){var i,o,l,c,s,u,d,p,f,m,h,v,_,y;return vn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.length,e.t0=n.type,e.next="gtfs"===e.t0?4:37;break;case 4:if(g("loading","gtfs"),e.prev=5,1!==i){e.next=30;break}if(o=t[0],l=o.name,c=o.type,!(s=[{type:"application/x-zip-compressed",ext:".zip"},{type:"application/zip",ext:".zip"}].find((function(e){return e.type===c})))||!l.endsWith(s.ext)){e.next=27;break}return(u=new FormData).append("coverage",n.coverage),u.append("file",t[0]),e.next=16,a.A.post("/api/upload",u,{withCredentials:!0});case 16:if(d=e.sent,p=n.coverage,f=n.g2n,m=n.dante,h=n.sendGTFS,v=n.merge,_=n.name,y=v?r.gtfs.filter((function(e){return e.merge})).map((function(e){return e.name})).join(","):null,!d.data||"error"!==d.data.status||!p){e.next=23;break}g("error","fail-upload"),e.next=25;break;case 23:return e.next=25,b(p,d.data.file,f,m,h,v,y,_);case 25:e.next=28;break;case 27:g("error","incorrect-format");case 28:e.next=31;break;case 30:g("error","only-one-file");case 31:e.next=36;break;case 33:e.prev=33,e.t1=e.catch(5),g("error");case 36:return e.abrupt("break",39);case 37:return g("error"),e.abrupt("break",39);case 39:case"end":return e.stop()}}),e,null,[[5,33]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=yn(vn().mark((function e(){var t,n=arguments;return vn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.length>1&&void 0!==n[1]?n[1]:null,g("loading",n.length>0&&void 0!==n[0]?n[0]:null),console.info("Launch map update".concat(t?" for "+t:"",".")),(0,a.A)({method:"get",url:"/api/generate/data".concat(t?"?use="+t:""),timeout:6e5}).then((function(){console.info("Map update success."),g("success")})).catch((function(e){console.warn(e),g("error","fail-update")}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=yn(vn().mark((function e(t){var n,r=arguments;return vn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.length>1&&void 0!==r[1]?r[1]:null,g("loading"),a.A.get("/api/admin?id=".concat(t,"&generate=").concat(n)).then((function(){n?E("data","places"):g("success")})).catch((function(e){g("error",e.response&&e.response.data&&e.response.data.message?e.response.data.message:null)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=yn(vn().mark((function e(t){var n,i,o,l,c,s,u,d;return vn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g("loading"),n=t.id,i=t.coverage,o=t.g2n,l=t.dante,c=t.sendGTFS,s=t.merge,u=t.name,d=s?r.gtfs.filter((function(e){return e.merge})).map((function(e){return e.name})).join(","):null,a.A.get("/api/admin?id=".concat(n,"&coverage=").concat(i)).then(yn(vn().mark((function e(){return vn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(i,"gtfs-spreadsheets-".concat(i,".csv"),o,l,c,s,d,u);case 2:case"end":return e.stop()}}),e)})))).catch((function(e){g("error",e.response&&e.response.data&&e.response.data.message?e.response.data.message:null)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,v.useEffect)((function(){y("loading"===d.type)}),[d]),0!==Object.entries(m.j.getState().app.languageFile).length?null!=n&&n.admin?(0,O.jsx)("div",{className:"lc-admin-valkyrie",children:(0,O.jsx)("iframe",{title:"valkyrie",src:n.admin,frameBorder:"0",referrerPolicy:"origin"})},"admin-valkyrie"):l?(0,O.jsx)("div",{className:"lc-admin-valkyrie",children:(0,O.jsx)("iframe",{title:"valkyrie",src:"".concat(c,"/").concat(s),frameBorder:"0",referrerPolicy:"origin"})},"admin-valkyrie"):(0,O.jsxs)("div",{className:"lc-admin-center",children:[(0,O.jsxs)("div",{className:"lc-admin-header",children:[(0,O.jsx)("a",{href:"/",children:(0,O.jsx)("img",{alt:(0,h.Tl)("back"),src:(0,h.tx)("/assets/images/admin/back.svg"),className:"lc-admin-header-back",height:28})}),(0,O.jsxs)("span",{children:[(0,h.Tl)("admin-title"),"prod"!==xn?" ("+xn+")":""]})]}),null!==(t=JSON.parse(Tn))&&void 0!==t&&null!==(t=t.params)&&void 0!==t&&t.force?(0,O.jsx)("div",{className:"lc-admin-content force-map-update",children:(0,O.jsx)(un,{children:(0,O.jsxs)(dn,{children:[(0,O.jsx)(fn,{children:(0,h.Tl)("admin-update-map-datas")}),(0,O.jsx)("label",{children:(0,O.jsx)("div",{role:"button",tabIndex:"0",onClick:function(){return E(null,"lines")},onKeyUp:function(e){return(0,h.zQ)(e,(function(){return E(null,"lines")}))},children:(0,h.Tl)("admin-update-launch-button")})})]})},"admin-update-map")}):null,(0,O.jsxs)("div",{className:"lc-admin-datas",children:[d.type&&(0,O.jsx)("div",{className:"lc-admin-modal".concat("loading"!==d.type?" lc-admin-modal-close":""),role:"button",tabIndex:"0",onClick:function(){"loading"!==d.type&&p({type:null,message:null})},onKeyUp:function(e){return(0,h.zQ)(e,(function(){"loading"!==d.type&&p({type:null,message:null})}))},children:(0,O.jsxs)("div",{className:"lc-admin-message ".concat(d.type&&"error"===d.type?" message-error":"success"===d.type?" message-success":" message-loading"),children:["loading"!==d.type&&(0,O.jsx)("img",{alt:(0,h.Tl)("close"),src:(0,h.tx)("/assets/images/admin/close-modal.svg"),className:"lc-admin-modal-close",height:15}),d.message,_&&(0,O.jsx)("div",{className:"lc-loading","data-lc-loading":!0,children:(0,O.jsx)("img",{src:(0,h.tx)("/assets/images/loading.gif"),width:30,alt:(0,h.Tl)("loading")})})]})}),Object.keys(r).map((function(e){var t;return(0,O.jsxs)("div",{className:"lc-admin-cat",children:[(0,O.jsx)("div",{className:"lc-admin-title",children:(0,h.Tl)("admin-update-title-data-".concat(e))}),(0,O.jsx)("div",{className:"lc-admin-content",children:null===(t=r[e])||void 0===t?void 0:t.map((function(e,t){switch(e.type){case"xlsxFromDrive":return(0,O.jsx)(un,{color:(0,pe.N)(Sn),children:(0,O.jsxs)(dn,{children:[(0,O.jsx)(fn,{children:(0,h.Tl)("admin-update-".concat(e.name))}),e.url&&(0,O.jsx)(pn,{href:e.url,target:"_blank",rel:"noopener noreferrer",children:"Lien vers le fichier"}),(0,O.jsx)(mn,{onClick:function(){return T(e.id,null==e?void 0:e.generate)},children:(0,h.Tl)("admin-update-launch-button")})]})},"admin-".concat(t));case"gtfs-from-drive":return(0,O.jsx)(un,{color:(0,pe.N)(Sn),children:(0,O.jsxs)(dn,{children:[(0,O.jsx)(fn,{children:(0,h.Tl)("admin-update-".concat(e.name))}),e.url&&(0,O.jsx)(pn,{href:e.url,target:"_blank",rel:"noopener noreferrer",children:"Lien vers le fichier"}),(0,O.jsx)(mn,{onClick:function(){return P(e)},children:(0,h.Tl)("admin-update-launch-button")})]})},"admin-".concat(t));case"gtfs":return e.url?null:(0,O.jsx)(un,{color:(0,pe.N)(Sn),onDrop:function(t){return function(e,t){e.preventDefault();var n=e.dataTransfer.files;A(n,t)}(t,e)},onDragOver:function(e){return e.preventDefault()},children:(0,O.jsxs)(dn,{children:[(0,O.jsx)(fn,{children:(0,h.Tl)("admin-update-".concat(e.name))}),(0,O.jsxs)("span",{children:[(0,O.jsx)("span",{role:"img","aria-label":"warning",children:"⚠️"})," ",(0,h.Tl)("admin-update-warning-gtfs")]}),(0,O.jsx)("label",{htmlFor:"file",children:(0,h.Tl)("admin-update-add-zip")}),(0,O.jsx)("input",{className:"file",id:"file",type:"file",onChange:function(t){return A(t.target.files,e)}})]})},"admin-".concat(t));default:return null}}))})]},e)}))]})]}):(0,O.jsx)("div",{children:"Loading..."})})),On=n(5556),Rn=n.n(On),wn=n(4552),Ln=n.n(wn);function Cn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Nn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var kn,In,Dn=E.A.primarycolor,Mn=ln.Ay.div(An||(kn=["\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  z-index: 499;\n  opacity: ",";\n  visibility: ",";\n"],In||(In=kn.slice(0)),An=Object.freeze(Object.defineProperties(kn,{raw:{value:Object.freeze(In)}}))),(function(e){return e.show?1:0}),(function(e){return e.show?"visible":"hidden"})),Un=function(e){var t=e.duration,n=e.easing,r=e.showAt,i=e.style,o=e.top,a=Cn((0,v.useState)(!1),2),l=a[0],c=a[1],s={startValue:0,currentTime:0,startTime:null,id:null};function u(){window.cancelAnimationFrame(s.id)}function d(e){s.startTime||(s.startTime=e),s.currentTime=e-s.startTime;var r=Ln()[n](s.currentTime,s.startValue,o,t);window.pageYOffset<=o?u():(window.scrollTo(window.pageYOffset,r),s.id=window.requestAnimationFrame(d))}return(0,v.useEffect)((function(){function e(){window.pageYOffset>r?l||c(!0):l&&c(!1)}return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[l]),(0,O.jsx)(Mn,{show:l,onClick:function(){(0,h.Yz)({message:"Just clicked"},"info","click scroll"),u(),s.startValue=window.pageYOffset,s.currentTime=0,s.startTime=null,s.id=window.requestAnimationFrame(d)},style:i,className:"lc-scrollToTop",children:"↑"})};Un.defaultProps={duration:250,easing:"easeInCubic",showAt:60,style:{position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",bottom:30,right:30,width:30,height:30,borderRadius:"50%",cursor:"pointer",backgroundColor:Dn,color:"white",transitionDuration:"0.2s",transitionTimingFunction:"linear",transitionDelay:"0s"},top:0},Un.propTypes={topPosition:Rn().number,showAt:Rn().number,easing:Rn().oneOf(["linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce"]),duration:Rn().number,style:Rn().object};var Gn,Hn,Yn,Fn,Bn,Vn,zn,Xn,Kn,qn,Wn,Jn,Qn,Zn,$n,er,tr,nr,rr,ir,or,ar,lr,cr,sr=n(7935),ur=n(8705),dr=n(2627),pr=n(7888),fr=n(9011);function mr(e){return mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mr(e)}function hr(){hr=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,a=Object.create(o.prototype),l=new w(r||[]);return i(a,"_invoke",{value:S(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",f="suspendedYield",m="executing",h="completed",v={};function _(){}function y(){}function g(){}var b={};s(b,a,(function(){return this}));var A=Object.getPrototypeOf,E=A&&A(A(L([])));E&&E!==n&&r.call(E,a)&&(b=E);var T=g.prototype=_.prototype=Object.create(b);function P(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,o,a,l){var c=d(e[i],e,o);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==mr(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(u).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,l)}))}l(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function S(t,n,r){var i=p;return function(o,a){if(i===m)throw Error("Generator is already running");if(i===h){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var l=r.delegate;if(l){var c=j(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var s=d(t,n,r);if("normal"===s.type){if(i=r.done?h:f,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(i=h,r.method="throw",r.arg=s.arg)}}}function j(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(mr(t)+" is not iterable")}return y.prototype=g,i(T,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:y,configurable:!0}),y.displayName=s(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,c,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},P(x.prototype),s(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new x(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},P(T),s(T,c,"Generator"),s(T,a,(function(){return this})),s(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return l.type="throw",l.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],l=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function vr(e){return function(e){if(Array.isArray(e))return br(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||gr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _r(e,t,n,r,i,o,a){try{var l=e[o](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,i)}function yr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||gr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gr(e,t){if(e){if("string"==typeof e)return br(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?br(e,t):void 0}}function br(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(n),!0).forEach((function(t){Tr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ar(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=mr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=mr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pr(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var xr,Sr,jr={REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"},Or=jr.REACT_APP_START_POINT,Rr=jr.REACT_APP_PROJECT,wr=jr.REACT_APP_ZOOM,Lr=jr.REACT_APP_MBTILES,Cr=jr.REACT_APP_URL_TILES,Nr=jr.REACT_APP_ABOVE_TILES_URL,kr=E.A.primarycolor,Ir=E.A.errorcolor,Dr=E.A.printBackgroundColor,Mr=ln.Ay.div(Gn||(Gn=Pr(["\n  page-break-after: always;\n  break-after: always;\n\n  .lc-elevation {\n    margin: 0 !important;\n\n    .lc-line-header {\n      padding: 0 0 10px !important;\n      margin: 0 10px;\n\n      .lc-line {\n        padding: 10px 10px 10px 0 !important;\n      }\n\n      .lc-direction {\n        margin-left: 0 !important;\n      }\n    }\n    .lc-timetable-stop {\n      padding: 15px 0 !important;\n      margin: 0 10px;\n    }\n    .lc-timetable {\n      margin-top: 0 !important;\n      padding: 0 !important;\n    }\n    .lc-otherDirections {\n      margin-left: 10px !important;\n    }\n  }\n"]))),Ur=(0,ln.Ay)(Mr)(Hn||(Hn=Pr(["\n  padding-top: 30px;\n  padding-bottom: 30px;\n"]))),Gr=(0,ln.Ay)(Mr)(Yn||(Yn=Pr(["\n  .journey-date {\n    font-size: 48px;\n  }\n  .lc-cat-picto {\n    width: 80px;\n    margin-left: 40px;\n  }\n"]))),Hr=function(e){return(0,o.d4)((function(e){return e.app})).configApp.new_print_design?(0,O.jsx)(Gr,Er(Er({},e),{},{children:e.children})):(0,O.jsx)(Ur,Er(Er({},e),{},{children:e.children}))},Yr=ln.Ay.div(Fn||(Fn=Pr(["\n  display: flex;\n  padding-left: 10px;\n  margin-bottom: 15px;\n"]))),Fr=ln.Ay.div(Bn||(Bn=Pr(["\n  background-color: ",";\n  min-height: 190px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  border-radius: 8px;\n"])),Dr),Br=function(e){return(0,o.d4)((function(e){return e.app})).configApp.new_print_design?(0,O.jsx)(Fr,{children:e.children}):(0,O.jsx)(Yr,{children:e.children})},Vr=ln.Ay.div(Vn||(Vn=Pr(["\n  display: flex;\n  padding-left: 10px;\n  margin-bottom: 15px;\n"]))),zr=ln.Ay.div(zn||(zn=Pr(["\n  background-color: ",";\n  border: solid black 1px;\n  border-radius: 5px;\n  border-left: none;\n  height: 50px;\n  align-items: center;\n  display: flex;\n  margin-left: 10px;\n"])),kr),Xr=ln.Ay.div(Xn||(Xn=Pr(["\n  height: 100%;\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 28px;\n"]))),Kr=function(e){return(0,o.d4)((function(e){return e.app})).configApp.new_print_design?(0,O.jsx)(Xr,{children:e.children}):(0,O.jsx)(zr,{children:e.children})},qr=ln.Ay.div(Kn||(Kn=Pr(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  max-width: 250px;\n  gap: 20px;\n"]))),Wr=ln.Ay.div(qn||(qn=Pr(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin-left: 32px;\n  h1,\n  p {\n    margin: 0;\n  }\n"]))),Jr=ln.Ay.h1(Wn||(Wn=Pr(["\n  color: #ffffff;\n  padding: 0 10px 0 15px;\n"]))),Qr=ln.Ay.h1(Jn||(Jn=Pr(["\n  color: ",";\n"])),kr),Zr=function(e){return(0,o.d4)((function(e){return e.app})).configApp.new_print_design?(0,O.jsx)(Qr,{children:e.children}):(0,O.jsx)(Jr,{children:e.children})},$r=ln.Ay.div(Qn||(Qn=Pr(["\n  width: 50px;\n  height: 50px;\n  border: solid white 1px;\n  border-radius: 5px;\n  box-shadow: 0px 0px 5px 2px rgba(0, 0, 0, 0.3);\n  margin-left: -10px;\n  background: url(",") #fff\n    no-repeat center;\n"])),(function(e){return(0,h.tx)("/assets/images/menu/".concat(e.image?e.image:"lines",".svg"))})),ei=ln.Ay.div(Zn||(Zn=Pr(["\n  width: 140px;\n  height: 140px;\n  border-radius: 5px;\n  background: url(",") #fff\n    no-repeat center;\n  margin-right: 32px;\n  background-color: transparent;\n\n  img {\n    width: 100%;\n    height: auto;\n  }\n"])),(function(e){return(0,h.tx)("/assets/images/menu/".concat(e.image?e.image:"lines",".svg"))})),ti=function(e){return(0,o.d4)((function(e){return e.app})).configApp.new_print_design?(0,O.jsx)(ei,{image:e.image,children:e.children}):(0,O.jsx)($r,{children:e.children})},ni=ln.Ay.div($n||($n=Pr(["\n  margin: 0 20px;\n"]))),ri=ln.Ay.div(er||(er=Pr(["\n  display: flex;\n  align-items: center;\n  gap: 8px;\n"]))),ii=ln.Ay.div(tr||(tr=Pr(["\n  height: 35px;\n  width: 35px;\n  background-color: ",";\n  border-radius: 2px;\n  background: url(",") #fff\n    no-repeat center;\n"])),kr,(function(e){return(0,h.tx)("/assets/images/menu/".concat(e.image?e.image:"lines",".svg"))})),oi=ln.Ay.footer(nr||(nr=Pr(["\n  color: ",";\n"])),(function(){return Ir})),ai=ln.Ay.img(rr||(rr=Pr(["\n  width: 15px;\n  height: 15px;\n  margin-right: 5px;\n"]))),li=ln.Ay.p(ir||(ir=Pr(["\n  color: ",";\n"])),(function(){return kr})),ci=ln.Ay.div(or||(or=Pr(["\n  padding-left: 10px;\n"]))),si=ln.Ay.p(ar||(ar=Pr(["\n  color: ",";\n  font-weight: bold;\n  font-size: 18px;\n"])),(function(){return kr})),ui=(0,ln.Ay)(si)(lr||(lr=Pr(["\n  background-color: ",";\n  border-radius: 8px;\n  padding: 8px 16px;\n"])),Dr),di=function(e){return(0,o.d4)((function(e){return e.app})).configApp.new_print_design?(0,O.jsx)(ui,{children:e.children}):(0,O.jsx)(si,{children:e.children})},pi=ln.Ay.p(cr||(cr=Pr(["\n  font-style: italic;\n"]))),fi=function(e){var t,n=(0,o.d4)((function(e){return e.app})),r=n.language,i=n.configApp,a=e.component,l=a.state,c=l.extendArea,s=l.extendAreaValue,u=l.journey,d=a.props,p=d.walkingSpeeds,f=d.inputStartValue,m=d.inputEndValue,v=d.modes,_=(0,h._V)(A.A.location),y=(0,G._k)(u.departure_date_time),g=[];if(_.modes)for(var b=0,E=Object.keys(v);b<E.length;b++){var T=E[b];"avoid"!==T&&"pmr"!==T&&_.modes.includes(","+T)&&g.push((0,h.Tl)("modes-"+T,!1))}var P=p.length>0||(null===(t=_.modes)||void 0===t?void 0:t.includes("pmr")),x=[];if(_.modes&&_.modes.includes("pmr")&&x.push((0,h.Tl)("modes-pmr")),_.walking){var S=p.find((function(e){return parseFloat(e.speed)===parseFloat(_.walking)}));x.push((0,h.Tl)("route-calculation-walking-speed-"+(void 0!==S?S.type:"normal")))}return(0,O.jsx)("div",{className:"lc-journeys-search-summary lc-elevation",children:(0,O.jsxs)("div",{className:"lc-journeys-search-summary-text",children:[i.new_print_design?(0,O.jsxs)(ri,{children:[(0,O.jsx)(ii,{className:"lc-print-title-image",image:"picto-itinerary"}),(0,O.jsx)(di,{children:(0,h.Tl)("print-page-your-itinerary")})]}):(0,O.jsx)(di,{children:(0,h.Tl)("print-page-your-itinerary")}),(0,O.jsxs)("div",{className:"lc-journeys-search-summary-from",children:[(0,h.Tl)("label-inputStart")," ",f]}),(0,O.jsxs)("div",{className:"lc-journeys-search-summary-end",children:[(0,h.Tl)("label-inputEnd")," ",m]}),(0,O.jsxs)("div",{className:"lc-journeys-search-summary-date",children:[(0,O.jsx)("span",{children:_.modes.includes("departure")?(0,h.Tl)("departure"):(0,h.Tl)("arrival")})," "+(0,G.Je)(y,r,"full")+", "+y.toLocaleTimeString(r,{hour:"2-digit",minute:"2-digit"})]}),(0,O.jsxs)("div",{className:"lc-journeys-search-summary-modes",children:[(0,O.jsx)("span",{children:(0,h.Tl)("route-calculation-pref")})," ",g.join(", ")]}),P&&(0,O.jsxs)("div",{className:"lc-journeys-search-summary-traveler-profil",children:[(0,O.jsx)("span",{children:(0,h.Tl)("route-calculation-walking-speed")})," ",x.join(", ")]}),c&&s&&(0,O.jsxs)("div",{className:"lc-journeys-search-summary-extend-area",children:[(0,O.jsx)("span",{children:(0,h.Tl)("route-calculation-expand-area-value")})," ",s,"m"]})]})})},mi=function(e){var t=(0,v.useRef)(),n=JSON.parse(Or).desktop,r=JSON.parse(wr),i=e.component,o=e.journey,a=e.section,l=e.size,c=e.configApp,s=yr((0,v.useState)(P().latLngBounds()),2),u=s[0],d=s[1],p=yr((0,v.useState)([]),2),f=p[0],m=p[1],_=yr((0,v.useState)([]),2),y=_[0],g=_[1],b=yr((0,v.useState)([]),2),A=b[0],E=b[1];return(0,v.useEffect)((function(){var e=function(){var e,t=(e=hr().mark((function e(){var t,n,r,l,c;return hr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],r=[],l=P().latLngBounds(),n.push.apply(n,vr(i.props.map.state.markers.filter((function(e){return["inputStart-pin","inputEnd-pin"].includes(e.key)})))),e.next=7,i.displayJourney(o,0,0,t,n,r);case 7:null!=a&&a.geojson?(c=(c=a.geojson.coordinates).map((function(e){return[e[1],e[0]]})),l.extend(c)):(t.forEach((function(e){var t;l.extend(null==e||null===(t=e.props)||void 0===t?void 0:t.positions)})),n.forEach((function(e){var t;l.extend(null==e||null===(t=e.props)||void 0===t?void 0:t.position)}))),l.isValid()&&d(l),m(t),g(n),E(r);case 12:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){_r(o,r,i,a,l,"next",e)}function l(e){_r(o,r,i,a,l,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();e()}),[]),(0,v.useEffect)((function(){var e;null!=t&&null!==(e=t.current)&&void 0!==e&&e.leafletElement&&u.isValid()&&t.current.leafletElement.fitBounds(u,{paddingTopLeft:"small"===l?P().point(10,10):P().point(50,50),paddingBottomRight:"small"===l?P().point(10,10):P().point(50,50),animate:!1})}),[t,u]),(0,O.jsxs)(dr.A,{ref:t,className:"lc-print-itinerary-map ".concat(l||""),center:n,zoom:14,maxZoom:r.max,minZoom:r.min,dragging:!1,doubleClickZoom:!1,keyboard:!1,tap:!1,touchZoom:!1,zoomControl:!1,attributionControl:!1,style:c.new_print_design?{height:"800px"}:{},children:[(0,O.jsx)(pr.A,{errorTileUrl:(0,h.tx)("/assets/images/blank.png"),url:null!=c&&c.print_tiles_url?c.print_tiles_url:null!=c&&c.tiles?c.tiles:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png"}),Nr&&(0,O.jsx)(fr.A,{name:"tilelayer-above",children:(0,O.jsx)(pr.A,{errorTileUrl:(0,h.tx)("/assets/images/blank.png"),url:"mbtiles"===Nr?"https://".concat(void 0!==Cr?Cr:"tiles.lc.tools","/services/").concat(void 0!==Lr?Lr:Rr,"-above/tiles/{z}/{x}/{y}.png"):"mbtiles-rendering-test"===Nr?"https://".concat(void 0!==Cr?Cr:"tiles.lc.tools","/services/").concat(void 0!==Lr?Lr:Rr,"-above-rendering-test/tiles/{z}/{x}/{y}.png"):"".concat(Nr,"/png/{z}/{x}/{y}.png")})}),f," ",y," ",A]})};function hi(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var vi,_i=ln.Ay.div(xr||(xr=hi(["\n  padding: 10px !important;\n  font-size: 1.02em !important;\n\n  .journey-date {\n    font-size: 17px;\n  }\n\n  .lc-roadmap-summary {\n    width: 400px;\n    margin-left: 0px !important;\n  }\n\n  .lc-section-notes {\n    width: 600px;\n  }\n\n  .lc-disruptions {\n    display: ",";\n    width: 400px;\n\n    #lc-disruptions {\n      overflow: visible !important;\n      height: unset !important;\n      visibility: visible !important;\n    }\n\n    .lc-disruptions-head {\n      display: none !important;\n    }\n  }\n  .lc-roadmap-elevation {\n    margin: 0 15px 15px;\n    background: white;\n    border-radius: 5px;\n\n    canvas {\n      margin: 15px;\n    }\n\n    .lc-elevation-summary {\n      display: flex;\n      align-items: center;\n      color: #888;\n      padding-inline-start: 0px;\n      list-style-type: none;\n      margin: 0px;\n\n      .lc-elevation-title {\n        flex: 1;\n        padding: 10px;\n        font-weight: 500;\n      }\n\n      li.lc-elevation-status {\n        display: flex;\n        align-items: center;\n        padding: 10px;\n\n        height: auto;\n\n        &:last-child {\n          border-left: 1px solid rgba(0, 0, 0, 0.08);\n        }\n\n        div {\n          display: flex;\n        }\n\n        .lc-elevation-gain,\n        .lc-elevation-loss {\n          height: 15px;\n        }\n      }\n    }\n  }\n"])),(function(e){return e.openDisruptions?"block !important":"none"})),yi=ln.Ay.div(Sr||(Sr=hi(["\n  margin-bottom: 20px;\n  margin-top: 0px;\n"]))),gi=function(e){var t=(0,o.d4)((function(e){return e.app})),n=t.configApp,r=t.language,i=new Date,a=(0,G.Yq)(i,(0,h.Ck)(r)?"m/d/y":"d/m/y"),l=(0,G.Yq)(i,(0,h.Ck)(r)?"h:m a":"h:m"),c=e.datas,s=e.page,u=c.journey,d=c.component,p=(0,G.Yq)((0,G._k)(u.departure_date_time),"full-with-year",r);s.openStops&&u.sections.filter((function(e){return"public_transport"===e.type})).forEach((function(e){e.opened=!0})),s.openWalkingSections&&u.sections.filter((function(e){return"street_network"===e.type||"transfer"===e.type})).forEach((function(e){e.opened=!0}));var f=u.disruptions&&u.disruptions.filter((function(e){return"blocking"===e.severity})).length>0;return(0,O.jsxs)(Hr,{className:"lc-print-page",children:[(0,O.jsx)(Br,{children:(0,O.jsx)(Kr,{className:"lc-print-title",children:n.new_print_design?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(Wr,{children:[(0,O.jsx)(Zr,{className:"lc-print-title-text",children:(0,h.Tl)("print-page-title")}),(0,O.jsx)(li,{className:"journey-date",children:(0,h.Tl)("journey-date",!1,{key:"date",value:p})})]}),(0,O.jsx)(ti,{className:"lc-print-title-image",image:"block-logo"})]}):(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(ti,{className:"lc-print-title-image",image:"route-calculation"}),(0,O.jsx)(Zr,{className:"lc-print-title-text",children:(0,h.Tl)("print-page-title")})]})})}),n.new_print_design?(0,O.jsxs)(ni,{children:[(0,O.jsx)(fi,{component:d}),(0,O.jsxs)(_i,{className:"lc-roadmap lc-scroll","data-lc-scroll":"scroll","data-lc-roadmap":!0,openDisruptions:s.openDisruptions,children:[(0,O.jsxs)(ri,{children:[(0,O.jsx)(ii,{className:"lc-print-title-image",image:"picto-detail"}),(0,O.jsx)(di,{children:(0,h.Tl)("print-page-roadmap-details")})]}),u.sections.map((function(e,t){return d.renderSection(e,t)})),u.geovelo&&(0,O.jsxs)("div",{className:"lc-roadmap-elevation lc-scroll",tabIndex:"-1","aria-hidden":"true",children:[(0,O.jsx)("br",{}),(0,O.jsx)(yi,{children:(0,O.jsxs)(di,{children:[(0,h.Tl)("route-calculation-elevation-title",!1)," : "]})}),(0,O.jsxs)("ul",{className:"lc-elevation-summary",children:[(0,O.jsx)("li",{className:"lc-elevation-status",children:(0,O.jsxs)("div",{children:[(0,O.jsx)(ur.A,{image:"elevation-gain",className:"lc-elevation-gain",type:"elevation-gain",options:{height:12,padding:"0 5px 0 0"}}),u.verticalGain,"m"]})}),(0,O.jsx)("li",{className:"lc-elevation-status",children:(0,O.jsxs)("div",{children:[(0,O.jsx)(ur.A,{image:"elevation-loss",className:"lc-elevation-loss",type:"elevation-loss",options:{height:12,padding:"0 5px 0 0"}}),u.verticalLoss,"m"]})})]}),(0,sr.ln)(u,null)]})]}),f&&(0,O.jsxs)(oi,{children:[(0,O.jsx)(ai,{src:(0,h.tx)("/assets/images/disruptions/blocking.svg")}),(0,O.jsx)("span",{dangerouslySetInnerHTML:{__html:(0,h.Tl)("print-page-has-disruptions")}})]})," ",(0,O.jsx)("div",{id:"can-print"})]}):(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(ci,{children:[(0,O.jsx)(li,{children:(0,h.Tl)("print-page-date",!1,{key:"date",value:a},{key:"hours",value:l})}),(0,O.jsx)(li,{dangerouslySetInnerHTML:{__html:(0,h.Tl)("print-page-check-website")}})]}),(0,O.jsx)(fi,{component:d}),(0,O.jsxs)(_i,{className:"lc-roadmap lc-scroll","data-lc-scroll":"scroll","data-lc-roadmap":!0,openDisruptions:s.openDisruptions,children:[(0,O.jsx)(yi,{children:(0,O.jsx)(di,{children:(0,h.Tl)("print-page-roadmap-details",!1)})}),u.sections.map((function(e,t){return d.renderSection(e,t)})),u.geovelo&&(0,O.jsxs)("div",{className:"lc-roadmap-elevation lc-scroll",tabIndex:"-1","aria-hidden":"true",children:[(0,O.jsx)("br",{}),(0,O.jsx)(yi,{children:(0,O.jsxs)(di,{children:[(0,h.Tl)("route-calculation-elevation-title",!1)," : "]})}),(0,O.jsxs)("ul",{className:"lc-elevation-summary",children:[(0,O.jsx)("li",{className:"lc-elevation-status",children:(0,O.jsxs)("div",{children:[(0,O.jsx)(ur.A,{image:"elevation-gain",className:"lc-elevation-gain",type:"elevation-gain",options:{height:12,padding:"0 5px 0 0"}}),u.verticalGain,"m"]})}),(0,O.jsx)("li",{className:"lc-elevation-status",children:(0,O.jsxs)("div",{children:[(0,O.jsx)(ur.A,{image:"elevation-loss",className:"lc-elevation-loss",type:"elevation-loss",options:{height:12,padding:"0 5px 0 0"}}),u.verticalLoss,"m"]})})]}),(0,sr.ln)(u,null)]})]}),f&&(0,O.jsxs)(oi,{children:[(0,O.jsx)(ai,{src:(0,h.tx)("/assets/images/disruptions/blocking.svg")}),(0,O.jsx)("span",{dangerouslySetInnerHTML:{__html:(0,h.Tl)("print-page-has-disruptions")}})]}),(0,O.jsx)("div",{id:"can-print"})]})]})};var bi,Ai,Ei,Ti=ln.Ay.div(vi||(vi=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  padding-left: 10px;\n"]))),Pi=function(e){var t=e.datas,n=e.page,r=e.configApp,i=t.component,a=t.journey,l=(0,o.d4)((function(e){return e.app})).language,c=(0,G.Yq)((0,G._k)(a.departure_date_time),"full-with-year",l);return(0,O.jsxs)(Hr,{children:[(0,O.jsx)(Br,{children:(0,O.jsx)(Kr,{children:r.new_print_design?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(Wr,{children:[(0,O.jsx)(Zr,{className:"lc-print-title-text",children:(0,h.Tl)("print-page-title")}),(0,O.jsx)(li,{className:"journey-date",children:(0,h.Tl)("journey-date",!1,{key:"date",value:c})})]}),(0,O.jsx)(ti,{className:"lc-print-title-image",image:"block-logo"})]}):(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(ti,{src:(0,h.tx)("/assets/images/menu/route-calculation.svg")}),(0,O.jsx)(Zr,{children:(0,h.Tl)("print-page-title")})]})})}),r.new_print_design?(0,O.jsxs)(ni,{children:[n.summary&&(0,O.jsx)(fi,{component:i}),(0,O.jsxs)(Ti,{children:[(0,O.jsxs)(ri,{children:[(0,O.jsx)(ii,{className:"lc-print-title-image",image:"picto-journey"}),(0,O.jsx)(di,{children:(0,h.Tl)("print-page-my-trip")})]}),(0,O.jsx)(mi,{component:i,journey:a,configApp:r})]})]}):(0,O.jsxs)(O.Fragment,{children:[n.summary&&(0,O.jsx)(fi,{component:i}),(0,O.jsxs)(Ti,{children:[(0,O.jsx)(di,{children:(0,h.Tl)("print-page-my-trip",!1)}),(0,O.jsx)(mi,{component:i,journey:a,configApp:r})]})]})]})};function xi(e){return xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xi(e)}function Si(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ji(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Si(Object(n),!0).forEach((function(t){Oi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Si(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oi(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=xi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=xi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xi(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ri(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var wi=ln.Ay.div(bi||(bi=Ri(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n"]))),Li=ln.Ay.div(Ai||(Ai=Ri([""]))),Ci=ln.Ay.div(Ei||(Ei=Ri(["\n  padding-left: 10px;\n"]))),Ni=function(e){var t=e.section,n=e.journey,r=(0,o.d4)((function(e){return e.app})).configApp,i=0===t.index?(0,h.Tl)("departure",!1):t.index===n.sections.length-1?(0,h.Tl)("arrival",!1):(0,h.Tl)("connection",!1,{key:"number",value:t.indexWalk});return(0,O.jsxs)(Li,{children:[r.new_print_design?(0,O.jsx)(pi,{children:i}):(0,O.jsx)(di,{children:i}),(0,O.jsx)(mi,ji({size:"small"},e))]})},ki=function(e){var t=e.datas,n=e.page,r=e.configApp,i=(0,o.d4)((function(e){return e.app.language})),a=t.component,l=t.journey,c=new Date,s=(0,G.Yq)(c,(0,h.Ck)(i)?"m/d/y":"d/m/y"),u=(0,G.Yq)(c,(0,h.Ck)(i)?"h:m a":"h:m"),d=(0,G.Yq)((0,G._k)(l.departure_date_time),"full-with-year",i),p=l.sections.map((function(e,t){return ji(ji({},e),{},{index:t})})).filter((function(e){return"street_network"===e.type&&["walking","bike"].includes(e.mode)||"transfer"===e.type&&"walking"===e.transfer_type&&e.duration>0})).map((function(e,t){return ji(ji({},e),{},{indexWalk:t})}));return 0===p.length||1===p.length&&p.length===l.sections.length?null:(0,O.jsxs)(Hr,{children:[(0,O.jsx)(Br,{children:(0,O.jsx)(Kr,{children:r.new_print_design?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(Wr,{children:[(0,O.jsx)(Zr,{className:"lc-print-title-text",children:(0,h.Tl)("print-page-title")}),(0,O.jsx)(li,{className:"journey-date",children:(0,h.Tl)("journey-date",!1,{key:"date",value:d})})]}),(0,O.jsx)(ti,{className:"lc-print-title-image",image:"block-logo"})]}):(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(ti,{src:(0,h.tx)("/assets/images/menu/route-calculation.svg")}),(0,O.jsx)(Zr,{children:(0,h.Tl)("print-page-title")})]})})}),r.new_print_design?(0,O.jsxs)(ni,{children:[n.summary&&(0,O.jsx)(fi,{component:a}),(0,O.jsxs)(Ci,{children:[(0,O.jsxs)(ri,{children:[(0,O.jsx)(ii,{className:"lc-print-title-image",image:"picto-zoom"}),(0,O.jsx)(di,{children:(0,h.Tl)("print-page-zoom-walking-sections")})]}),(0,O.jsx)(wi,{children:p.map((function(e,t){return(0,O.jsx)(Ni,{section:e,sections:p,component:a,journey:l,configApp:r},"section-".concat(t))}))})]}),(0,O.jsxs)(ci,{children:[(0,O.jsx)(li,{children:(0,h.Tl)("print-page-date",!1,{key:"date",value:s},{key:"hours",value:u})}),(0,O.jsx)(li,{dangerouslySetInnerHTML:{__html:(0,h.Tl)("print-page-check-website")}})]})]}):(0,O.jsxs)(O.Fragment,{children:[n.summary&&(0,O.jsx)(fi,{component:a}),(0,O.jsxs)(Ci,{children:[(0,O.jsx)(di,{children:(0,h.Tl)("print-page-zoom-walking-sections")}),(0,O.jsx)(wi,{children:p.map((function(e,t){return(0,O.jsx)(Ni,{section:e,sections:p,component:a,journey:l,configApp:r},"section-".concat(t))}))})]})]})]})},Ii=n(707);function Di(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||Mi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mi(e,t){if(e){if("string"==typeof e)return Ui(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ui(e,t):void 0}}function Ui(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Gi,Hi=function(e){var t=(0,o.d4)((function(e){return e.app})),n=t.language,r=t.configApp,i=(0,o.d4)((function(e){return e.board})),a=i.timetableData,l=i.timetableHours,c=e.datas,s=e.page,u=Di((0,v.useState)(c.component),1)[0],d=Di((0,v.useState)(!1),2),p=d[0],f=d[1],m=new Date,_=(0,G.Yq)(m,(0,h.Ck)(n)?"m/d/y":"d/m/y"),y=(0,G.Yq)(m,(0,h.Ck)(n)?"h:m a":"h:m"),g=(0,Ne.fV)(u,{id:s.line.includes("_f")?s.line.substring(0,s.line.lastIndexOf("_f")):s.line.includes("_b")?s.line.substring(0,s.line.lastIndexOf("_b")):s.line});return g.direction_id=s.line.slice(-1),(0,v.useEffect)((function(){a&&(document.querySelector(".lc-timetable-stop")&&setTimeout((function(){var e,t=[],n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Mi(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}(document.querySelectorAll(".lc-otherDirections"));try{for(n.s();!(e=n.n()).done;){var r=e.value;-1===t.indexOf(r.innerHTML)?(document.querySelector(".lc-scroll").append(r),r.style.marginLeft="20px",t.push(r.innerHTML)):r.remove()}}catch(e){n.e(e)}finally{n.f()}})),f(!0))}),[a,l]),(0,O.jsxs)(Hr,{className:"lc-print-page",children:[(0,O.jsx)(Br,{children:(0,O.jsx)(Kr,{className:"lc-print-title",children:r.new_print_design?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(Vr,{children:[(0,O.jsxs)(qr,{children:[(0,O.jsx)("img",{className:"lc-cat-picto",src:(0,h.tx)("/assets/images/modes/".concat(g.cat,".svg")),alt:g.cat,"aria-hidden":"true"}),(0,O.jsx)(Ii.D,{line:g,image:"image",width:"80px",height:"80px"})]}),(0,O.jsxs)(Wr,{children:[(0,O.jsx)(Zr,{className:"lc-print-title-text",children:(0,h.Tl)("lc-print-title")}),(0,O.jsx)(li,{className:"journey-date",children:(0,h.Tl)("journey-date",!1,{key:"date",value:(0,G.Yq)((0,G._k)("".concat(s.date,"T1000")),"full-with-year",n)})})]})]}),(0,O.jsx)(ti,{className:"lc-print-title-image",image:"block-logo"})]}):(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(ti,{className:"lc-print-title-image"}),(0,O.jsx)(Zr,{className:"lc-print-title-text",children:(0,h.Tl)("print-page-timetable-title",!1,{key:"date",value:(0,G.Yq)((0,G._k)("".concat(s.date,"T1000")),"full-with-year",n)})})]})})}),r.new_print_design?(0,O.jsxs)(ni,{children:[(0,O.jsxs)(ri,{children:[(0,O.jsx)(ii,{className:"lc-print-title-image",image:"picto-timetable"}),(0,O.jsx)(di,{children:(0,h.Tl)("timetable")})]}),a&&(0,Ne.ni)(u,g,!0,{timetableData:a,timetableHours:l}),p&&(0,O.jsx)("div",{id:"can-print"}),(0,O.jsxs)(ci,{children:[(0,O.jsx)(li,{children:(0,h.Tl)("print-page-date",!1,{key:"date",value:_},{key:"hours",value:y})}),(0,O.jsx)(li,{dangerouslySetInnerHTML:{__html:(0,h.Tl)("print-page-check-website")}})]})]}):(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(ci,{children:[(0,O.jsx)(li,{children:(0,h.Tl)("print-page-date",!1,{key:"date",value:_},{key:"hours",value:y})}),(0,O.jsx)(li,{dangerouslySetInnerHTML:{__html:(0,h.Tl)("print-page-check-website")}})]}),a&&(0,Ne.ni)(u,g,!0,{timetableData:a,timetableHours:l}),p&&(0,O.jsx)("div",{id:"can-print"})]})]})};var Yi=ln.Ay.div(Gi||(Gi=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  /* padding: 30px; */\n"]))),Fi=function(){var e=(0,o.d4)((function(e){return e.app.configApp})),t=(0,o.d4)((function(e){return e.app.print})),n=(0,o.d4)((function(e){return e.app.domElement})),r=t.datas,i=t.pages,a=(0,h._V)(A.A.location);return document.querySelector("".concat(n," header"))&&document.querySelector("".concat(n," header")).remove(),(0,O.jsx)(Yi,{children:i.map((function(t,n){switch(t.type){case"itinerary-roadmap":return(0,O.jsx)(gi,{page:t,datas:r,modes:null==a?void 0:a.modes},"print-page-".concat(n));case"itinerary-map":return(0,O.jsx)(Pi,{page:t,datas:r,configApp:e},"print-page-".concat(n));case"itinerary-map-walk":return(0,O.jsx)(ki,{page:t,datas:r,configApp:e},"print-page-".concat(n));case"timetable":return(0,O.jsx)(Hi,{page:t,datas:r,data:a.date},"print-page-".concat(n));default:return(0,O.jsx)(O.Fragment,{})}}))})};function Bi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Vi(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vi(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var zi,Xi,Ki,qi,Wi=function(){var e;return null===(e=window.screen)||void 0===e||null===(e=e.orientation)||void 0===e?void 0:e.type},Ji=function(){var e=Bi((0,v.useState)(Wi()),2),t=e[0],n=e[1],r=function(){n(Wi())};return(0,v.useEffect)((function(){return window.addEventListener("orientationchange",r),function(){window.removeEventListener("orientationchange",r)}}),[]),t};function Qi(e){var t=e.children,n=Ji(),r=(0,o.wA)();return(0,v.useEffect)((function(){r((0,g.DP)(n))}),[n]),(0,O.jsx)("div",{children:t(n)})}function Zi(e){var t=e.headerDirection,n=e.header,r=(0,o.d4)((function(e){return e.app.isMobile}));return(0,v.useLayoutEffect)((function(){(0,h.XR)(r)}),[r]),(0,O.jsx)("header",{className:("column"===t||r?"lc-header-column":"lc-header-row")+(r?"-mobile":""),dangerouslySetInnerHTML:{__html:n}})}function $i(e){return $i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$i(e)}function eo(){eo=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,a=Object.create(o.prototype),l=new w(r||[]);return i(a,"_invoke",{value:S(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",f="suspendedYield",m="executing",h="completed",v={};function _(){}function y(){}function g(){}var b={};s(b,a,(function(){return this}));var A=Object.getPrototypeOf,E=A&&A(A(L([])));E&&E!==n&&r.call(E,a)&&(b=E);var T=g.prototype=_.prototype=Object.create(b);function P(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,o,a,l){var c=d(e[i],e,o);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==$i(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(u).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,l)}))}l(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function S(t,n,r){var i=p;return function(o,a){if(i===m)throw Error("Generator is already running");if(i===h){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var l=r.delegate;if(l){var c=j(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var s=d(t,n,r);if("normal"===s.type){if(i=r.done?h:f,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(i=h,r.method="throw",r.arg=s.arg)}}}function j(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError($i(t)+" is not iterable")}return y.prototype=g,i(T,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:y,configurable:!0}),y.displayName=s(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,c,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},P(x.prototype),s(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new x(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},P(T),s(T,c,"Generator"),s(T,a,(function(){return this})),s(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return l.type="throw",l.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],l=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function to(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return no(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?no(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function no(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ro(e,t,n,r,i,o,a){try{var l=e[o](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,i)}function io(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,po(r.key),r)}}function oo(e,t){return oo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},oo(e,t)}function ao(e){var t=co();return function(){var n,r=so(e);if(t){var i=so(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==$i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return lo(e)}(this,n)}}function lo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function co(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(co=function(){return!!e})()}function so(e){return so=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},so(e)}function uo(e,t,n){return(t=po(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function po(e){var t=function(e,t){if("object"!=$i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$i(t)?t:t+""}function fo(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var mo={REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"},ho=mo.REACT_APP_HEADER,vo=mo.REACT_APP_HEAVY_LINES,_o=mo.REACT_APP_LEGEND,yo=mo.REACT_APP_TERRITORY_OUTLINE,go=mo.REACT_APP_BOARD_SIZE,bo=mo.REACT_APP_API_PROXY_URL,Ao=mo.REACT_APP_PROJECT,Eo=mo.REACT_APP_LIBRARY_URL,To=mo.REACT_APP_GTM,Po=mo.REACT_APP_ADMIN,xo=mo.REACT_APP_FORCE_DISABLE_COOKIES,So=mo.REACT_APP_COMPLEMENTARY_LINES,jo=mo.REACT_APP_LAUNCH_MODAL,Oo=mo.REACT_APP_GA,Ro=E.A.headerDirection,wo=U("specific/LeafletBretagneCanaux",(function(){return n.e(631).then(n.bind(n,4631))})),Lo=ln.Ay.div(zi||(zi=fo(["\n  background: #f1f5f5;\n  position: ",";\n  bottom: 0;\n  padding: 10px;\n  z-index: 500;\n  font-size: 0.9em;\n  display: ",";\n  align-items: center;\n  justify-content: center;\n  border-top: 1px solid rgba(0, 0, 0, 0.3);\n"])),(function(e){return e.isMobile?"sticky":"relative"}),(function(e){return!e.isMobile&&"flex"})),Co=ln.Ay.span(Xi||(Xi=fo(["\n  flex: 1;\n"]))),No=ln.Ay.div(Ki||(Ki=fo(["\n  display: flex;\n  justify-content: end;\n  margin-top: ",";\n"])),(function(e){return e.isMobile&&"10px"})),ko=ln.Ay.div(qi||(qi=fo(["\n  background-color: #58585a;\n  color: #ffffff;\n  padding: 7px 10px;\n  border-radius: 5px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &:nth-child(2) {\n    margin-left: 10px;\n  }\n\n  &:hover {\n    background-color: #808080;\n  }\n"])));function Io(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}var Do=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oo(e,t)}(i,e);var t,n,r=ao(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return uo(lo(e=r.call.apply(r,[this].concat(n))),"mediaQueries",window.matchMedia("(max-width: 600px)")),uo(lo(e),"languageFile",null),uo(lo(e),"loaded",!1),uo(lo(e),"handleMediaQueryChanged",(function(e){m.j.dispatch((0,g._Z)(e.matches))})),uo(lo(e),"handleCookies",(function(t){m.j.dispatch((0,g.d6)(t,e.props.configApp)),document.querySelector(".cookies-banner").style.display="none"})),e}return function(e,t,n){t&&io(e.prototype,t),n&&io(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(i,[{key:"componentDidMount",value:(t=eo().mark((function e(){var t,n,r,i,o,l,c,s,u,d,p,f,v,_,y,b,E,T,P,x,j,O,R,w,L,C,N,k,I,D,M,U;return eo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.addEventListener("message",De.x,!0),console.log("handling..."),e.next=4,a.A.get("/api/init-config");case 4:return(i=e.sent).data&&m.j.dispatch((0,g.J9)(i.data)),o=(0,h._V)(A.A.location),Io(),window.addEventListener("resize",(function(){Io()})),window.onbeforeprint=function(){m.j.dispatch((0,g.Ex)(!0))},window.onafterprint=function(){m.j.dispatch((0,g.Ex)(!1))},To&&!window.document.cookie.includes("hasAuthorizedCookies")&&(window.document.cookie="hasAuthorizedCookies=undefined;path=/"),l=window.document.cookie.includes("hasAuthorizedCookies=true"),("true"===o.hasAuthorizedCookies||l)&&m.j.dispatch((0,g.d6)(!0,i.data)),(0,Ce.mb)(),o.token&&m.j.dispatch((0,g.b_)(o.token)),o.client_id&&m.j.dispatch((0,g.rc)(1)),m.j.dispatch((0,g.uk)(o.lock)),o.dont_show&&m.j.dispatch((0,g.zW)(o.dont_show)),c=o.size?o.size:o.board?o.board:go,m.j.dispatch((0,g.tP)(c)),("all"===_o||"web-only"===_o&&!this.mediaQueries.matches)&&m.j.dispatch((0,S.FG)(!1)),null!=i&&null!==(t=i.data)&&void 0!==t&&t.disruptions_in_mappopup&&a.A.get("/api/disruptions",{params:{isMobile:this.mediaQueries.matches}}).then((function(e){e&&e.data&&m.j.dispatch((0,me.zj)(e.data))})).catch((function(e){console.warn(e),m.j.dispatch((0,me.zj)([]))})),(yo||null!=i&&null!==(n=i.data)&&void 0!==n&&n.territory_outline)&&!1!==(null===(r=this.props.options)||void 0===r||null===(r=r.config)||void 0===r?void 0:r.territory)&&a.A.get("/api/file?name=territory_outline&folder=map&ext=geojson").then((function(e){return m.j.dispatch((0,S.zl)(e.data))})),e.prev=24,p={params:{}},o.touchscreen&&(p.params.touchscreen=o.touchscreen),o.lang&&(p.params.lang=o.lang),this.props.options&&this.props.options.lang&&(p.params.lang=this.props.options.lang),(null!==(s=this.props.options)&&void 0!==s&&null!==(s=s.config)&&void 0!==s&&s.displayLinesAt||o.displayLinesAt)&&(p.params.displayLinesAt=(null===(f=this.props.options)||void 0===f||null===(f=f.config)||void 0===f?void 0:f.displayLinesAt)||o.displayLinesAt),e.next=32,a.A.get("/api/init-application",p);case 32:if(v=e.sent,_=v.data,this.languageFile=_.languageFile,m.j.dispatch((0,g.ff)(_.hash)),_.isMobile=this.mediaQueries.matches,y=[],_.heavyIds=vo?JSON.parse(vo).length?JSON.parse(vo).concat(y):!0===JSON.parse(vo)||[].concat(y):[].concat(y),_.complementaryIds=So&&JSON.parse(So).length>0?_.lines.filter((function(e){return JSON.parse(So).includes(e.mode)})).map((function(e){return e.id})):[],b=_.modules.find((function(e){return"route-calculation"===e.id})),!(0,h.UP)(ho)){e.next=49;break}return e.next=44,fetch("/header.html");case 44:return E=e.sent,e.next=47,E.text();case 47:T=e.sent,m.j.dispatch((0,g.oZ)(T));case 49:if(b){P={},x=to(b.modes);try{for(x.s();!(j=x.n()).done;)O=j.value,P[O.type]=void 0!==O.defaultValue?O.defaultValue:O.value}catch(e){x.e(e)}finally{x.f()}void 0!==b.hidePmr&&!1!==b.hidePmr||(P.pmr=A.A.location.search.includes("pmr")),P.avoid="",m.j.dispatch((0,g.$C)(P)),void 0!==b.walkingSpeeds&&b.walkingSpeeds.length>0&&m.j.dispatch((0,g.uS)(b.walkingSpeeds)),void 0!==b.bikeSpeeds&&b.bikeSpeeds.length>0&&m.j.dispatch((0,g.QZ)(b.bikeSpeeds)),void 0!==b.bikeProfiles&&b.bikeProfiles.length>0&&m.j.dispatch((0,g.n8)(b.bikeProfiles)),void 0!==b.travelSolutions&&b.travelSolutions.length>0&&m.j.dispatch((0,g.NH)(b.travelSolutions)),R=new Date,w=new Date,void 0===b.minDate&&void 0===b.maxDate&&void 0===b.defaultDateTime||(m.j.dispatch((0,g.xI)(b.minDate,b.maxDate,b.defaultDateTime)),void 0!==b.defaultDateTime?(R=new Date(b.defaultDateTime),m.j.dispatch((0,g.Lc)(new Date(R)))):(void 0!==b.minDate&&new Date(b.minDate)>w&&((R=new Date(b.minDate)).setHours(10),m.j.dispatch((0,g.Lc)(R))),void 0!==b.maxDate&&new Date(b.maxDate)<w&&((R=new Date(b.maxDate)).setHours(w.getHours()),R.setMinutes(w.getMinutes()),m.j.dispatch((0,g.Lc)(R))))),m.j.dispatch((0,g.PH)(R))}if(m.j.dispatch((0,g.ow)(_.lang)),document.documentElement.lang=_.lang,_.domElement="#lcmap",L=document.referrer?new URL(document.referrer).origin:null,_.documentReferer=L&&((0,h.fK)()||Eo)?L:bo||window.location.origin,_.customMapLines=[],_.customMapMarkers=[],(C=this.props.options)&&(""===(null==C?void 0:C.route)&&(null==C||null===(N=C.lines)||void 0===N?void 0:N.length)>0&&(_.customMapLines=C.lines),(null==C||null===(k=C.markers)||void 0===k?void 0:k.length)>0&&(_.customMapMarkers=C.markers)),null==_||null===(u=_.linesNetwork)||void 0===u||!u.length||null==i||null===(d=i.data)||void 0===d||!d.keep_encoded){e.next=79;break}I=to(_.linesNetwork),e.prev=61,I.s();case 63:if((D=I.n()).done){e.next=71;break}if(null==(U=D.value)||null===(M=U.geojson)||void 0===M||!M.polyline){e.next=69;break}return e.next=68,(0,h.II)(JSON.parse(U.geojson.polyline||"[]"),!1,5);case 68:U.geojson.polyline=e.sent;case 69:e.next=63;break;case 71:e.next=76;break;case 73:e.prev=73,e.t0=e.catch(61),I.e(e.t0);case 76:return e.prev=76,I.f(),e.finish(76);case 79:m.j.dispatch((0,g.SA)(_)),this.loaded=!0,e.next=86;break;case 83:e.prev=83,e.t1=e.catch(24),console.warn("Error : app won't init : ",e.t1);case 86:this.mediaQueries.addEventListener("change",this.handleMediaQueryChanged),(0,h.UP)(jo)&&!window.document.cookie.includes("launchModal=true")&&m.j.dispatch((0,he.d)("launch-modal")),(0,De.i)({loaded:"app"});case 89:case"end":return e.stop()}}),e,this,[[24,83],[61,73,76,79]])})),n=function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(e){ro(o,r,i,a,l,"next",e)}function l(e){ro(o,r,i,a,l,"throw",e)}a(void 0)}))},function(){return n.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",De.x,!0),console.log("deshandling..."),this.mediaQueries&&this.mediaQueries.removeEventListener("change",this.handleMediaQueryChanged)}},{key:"render",value:function(){var e,t,n,r,i,o=this,a=this.props,l=a.show,c=a.modules,s=a.options,u=a.header,d=a.size,p=a.print,f=a.configApp,v=A.A.location,_=v.pathname,y=v.search,E=(0,h._V)(A.A.location),T=this.mediaQueries.matches;if(1===c.filter((function(e){return!0!==e.hide})).length&&"/"===_&&A.A.push({pathname:"".concat(_).concat(c[0].id),search:y.split("&date=")[0]}),null!=s&&s.route&&"/"===_)A.A.push((s.route.startsWith("/")?"":"/")+s.route);else if(null!=s&&null!==(e=s.menu)&&void 0!==e&&e.links){var P=Object.keys(s.menu.links).filter((function(e){return!s.menu.links[e]}));if(c.length-P.length==1){var x=A.A.location.pathname,S=c.map((function(e){return"thematic"===e.id?e.data:e.id})).find((function(e){return!P.includes(e)}));"/"===x&&A.A.push({pathname:"".concat(x).concat(S)})}}"true"!==E.disableDesktopScrollWheelZoom||T||m.j.dispatch((0,g.Gt)({scrollWheelZoom:!1})),null!=s&&s.config?(E.displayLinesAt&&(s.config.displayLinesAt=E.displayLinesAt),m.j.dispatch((0,g.Gt)(s.config))):E.displayLinesAt&&m.j.dispatch((0,g.Gt)({displayLinesAt:E.displayLinesAt}));var j=!0;(this.loaded&&0===c.length||(null==s||null===(t=s.config)||void 0===t||!t.size)&&!d||void 0!==(null==s||null===(n=s.menu)||void 0===n?void 0:n.show)&&!1===(null==s||null===(r=s.menu)||void 0===r?void 0:r.show))&&(j=!1);return(0,O.jsxs)(O.Fragment,{children:[(0,h.UP)(ho)&&"/admin"!==_&&(0,O.jsx)(Zi,{headerDirection:Ro,header:u}),(0,O.jsxs)(b.Ix,{history:A.A,children:[function(){var e,t=A.A.location.pathname;return Po&&t===(null===(e=JSON.parse(Po))||void 0===e||null===(e=e.params)||void 0===e?void 0:e.entry)||(null!=f&&f.admin&&null!=f&&f.admin_path?"/"===f.admin_path.charAt(0)?t===f.admin_path:t==="/".concat(f.admin_path):"/admin"===t)?(0,O.jsx)(jn,{}):"bretagne-canaux"===Ao?(0,O.jsx)(wo,{startOnMobile:o.mediaQueries.matches}):(0,O.jsxs)(O.Fragment,{children:[!p&&(0,O.jsx)(de,{configApp:f,startOnMobile:o.mediaQueries.matches,showBoard:j}),(0,O.jsxs)(b.dO,{children:[c.map((function(e,t){return(0,O.jsx)(b.qh,{path:"/".concat(["thematic","text-board","projects","lines-regions"].includes(e.id)?e.data:e.url||e.id),component:function(){return(0,O.jsx)(Qi,{children:function(t){return(0,O.jsx)(Ht,{module:e,options:s,showBoard:j})}})}},e.id+"_"+t)})),(0,O.jsx)(b.qh,{path:"/print",component:function(){return(0,O.jsx)(Fi,{})}},"print"),(0,O.jsx)(b.qh,{component:function(){return(0,O.jsx)(Qi,{children:function(e){return(0,O.jsx)(Ht,{isMobileBoot:o.mediaQueries.matches,options:s,showBoard:j})}})}})]})]})}(),l&&(0,O.jsx)(an,{}),(!s||(null==s||null===(i=s.features)||void 0===i?void 0:i.scrollToTop))&&(0,O.jsx)(Un,{}),((To||Oo||(null==f?void 0:f.ga_key)||(null==f?void 0:f.gtm_key)||(null==f?void 0:f.matomo_tracker_url))&&!window.document.cookie.includes("hasAuthorizedCookies")||window.document.cookie.includes("hasAuthorizedCookies=undefined"))&&!(0,h.UP)(xo)&&(0,O.jsxs)(Lo,{className:"cookies-banner",isMobile:T,children:[(0,O.jsx)(Co,{dangerouslySetInnerHTML:{__html:(0,h.Tl)("cookies-header",!1)}}),(0,O.jsxs)(No,{isMobile:T,children:[(0,O.jsx)(ko,{onClick:function(){return o.handleCookies(!0)},children:(0,h.Tl)("cookies-accept")}),(0,O.jsx)(ko,{onClick:function(){return o.handleCookies(!1)},children:(0,h.Tl)("cookies-refuse")})]})]})]})]})}}]),i}(v.Component),Mo=(0,o.Ng)((function(e){return{modules:e.app.modules,show:e.modal.show,header:e.app.header,size:e.app.size,print:e.app.print.isPrinting,configApp:e.app.configApp}}))(Do),Uo={REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"}.REACT_APP_LOGIN?JSON.parse({REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"}.REACT_APP_LOGIN):null,Go=function(e){var t=e.url,n=e.app,r=e.perms,i=e.origin,a=(0,o.wA)();return(0,v.useEffect)((function(){var e=function(e){e.origin===i&&"valkyrie"===e.data.source&&"authComplete"===e.data.action&&a(_(e.data.token))};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}),[a,i]),(0,O.jsx)("div",{className:"lc-login-valkyrie1",children:(0,O.jsx)("iframe",{title:"valkyrie1 login",src:"".concat(t,"?app=").concat(encodeURIComponent(n),"&perms=").concat(encodeURIComponent(r.join(",")))})})},Ho=function(){return"valkyrie1"===Uo.mode?(0,O.jsx)(Go,{url:Uo.valkyrie1.url,app:Uo.valkyrie1.app,perms:Uo.valkyrie1.perms,origin:Uo.valkyrie1.origin}):null};function Yo(e){return Yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yo(e)}function Fo(){Fo=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,a=Object.create(o.prototype),l=new w(r||[]);return i(a,"_invoke",{value:S(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",f="suspendedYield",m="executing",h="completed",v={};function _(){}function y(){}function g(){}var b={};s(b,a,(function(){return this}));var A=Object.getPrototypeOf,E=A&&A(A(L([])));E&&E!==n&&r.call(E,a)&&(b=E);var T=g.prototype=_.prototype=Object.create(b);function P(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,o,a,l){var c=d(e[i],e,o);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==Yo(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(u).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,l)}))}l(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function S(t,n,r){var i=p;return function(o,a){if(i===m)throw Error("Generator is already running");if(i===h){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var l=r.delegate;if(l){var c=j(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var s=d(t,n,r);if("normal"===s.type){if(i=r.done?h:f,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(i=h,r.method="throw",r.arg=s.arg)}}}function j(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Yo(t)+" is not iterable")}return y.prototype=g,i(T,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:y,configurable:!0}),y.displayName=s(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,c,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},P(x.prototype),s(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new x(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},P(T),s(T,c,"Generator"),s(T,a,(function(){return this})),s(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return l.type="throw",l.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],l=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Bo(e,t,n,r,i,o,a){try{var l=e[o](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,i)}var Vo={REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"},zo=Vo.REACT_APP_LOGIN,Xo=Vo.REACT_APP_PROJECT,Ko=zo?JSON.parse(zo):null,qo=function(e){var t=e.options,n=(0,o.wA)(),r=(0,o.d4)((function(e){return e.login.token})),i=(0,o.d4)((function(e){return e.login.data})),l="app";switch(Ko&&(l=i?"app":r?"checkToken":"getToken"),(0,v.useEffect)((function(){var e=!1,t=(0,h.VS)("localStorage"),i=function(){var i,o=(i=Fo().mark((function i(){var o;return Fo().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,a.A)("/api/checkLogin",{method:"POST",data:{token:r}});case 2:if(o=i.sent,!e){i.next=5;break}return i.abrupt("return");case 5:o&&o.data.status&&("success"===o.data.status?(a.A.transformConfig.headers["X-Auth-Token"]=r,t&&localStorage.setItem("token_".concat(Xo),r),n(y(o.data.data))):(n(_(null)),t&&localStorage.removeItem("token_".concat(Xo))));case 6:case"end":return i.stop()}}),i)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){Bo(o,n,r,a,l,"next",e)}function l(e){Bo(o,n,r,a,l,"throw",e)}a(void 0)}))});return function(){return o.apply(this,arguments)}}();if("getToken"===l&&t){var o=localStorage.getItem("token_".concat(Xo));o&&n(_(o))}else"checkToken"===l&&i();return function(){e=!0}}),[l,r,n]),l){case"app":return(0,O.jsx)(Mo,{options:t});case"getToken":return(0,O.jsx)(Ho,{});default:return null}};function Wo(e){return Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wo(e)}function Jo(){Jo=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,a=Object.create(o.prototype),l=new w(r||[]);return i(a,"_invoke",{value:S(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",f="suspendedYield",m="executing",h="completed",v={};function _(){}function y(){}function g(){}var b={};s(b,a,(function(){return this}));var A=Object.getPrototypeOf,E=A&&A(A(L([])));E&&E!==n&&r.call(E,a)&&(b=E);var T=g.prototype=_.prototype=Object.create(b);function P(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,o,a,l){var c=d(e[i],e,o);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==Wo(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(u).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,l)}))}l(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function S(t,n,r){var i=p;return function(o,a){if(i===m)throw Error("Generator is already running");if(i===h){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var l=r.delegate;if(l){var c=j(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var s=d(t,n,r);if("normal"===s.type){if(i=r.done?h:f,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(i=h,r.method="throw",r.arg=s.arg)}}}function j(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Wo(t)+" is not iterable")}return y.prototype=g,i(T,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:y,configurable:!0}),y.displayName=s(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,c,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},P(x.prototype),s(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new x(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},P(T),s(T,c,"Generator"),s(T,a,(function(){return this})),s(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return l.type="throw",l.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],l=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Qo(e,t,n,r,i,o,a){try{var l=e[o](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,i)}var Zo,$o,ea=(0,r.detect)(),ta="#lcmap",na=A.A.location.search,ra=function(){var e,t=(e=Jo().mark((function e(t){var n,r,l;return Jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ie"!==ea.name){e.next=3;break}throw f(ea,ta),new Error("Internet Explorer unsupported");case 3:if(!{REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"}.REACT_APP_LIBRARY_URL){e.next=16;break}if((0,h.w1)()){e.next=12;break}return(n=document.domain).startsWith("www.")&&(n=n.replace("www.","")),e.next=9,a.A.get("/api/validate-host?host=".concat(n));case 9:if(e.sent.data.valid){e.next=12;break}throw new Error("You're not authorized to display this content");case 12:if(document.querySelector(ta)){e.next=14;break}throw new Error("No DOM element with id 'lcmap' was found");case 14:e.next=19;break;case 16:document.body.style.margin=0,document.querySelector("#app")&&document.querySelector("#app").setAttribute("id","lcmap"),document.querySelector(ta).style.height="calc(var(--vh, 1vh) * 100)";case 19:if(console.log("options",t),!(r=document.querySelector(ta)).dataset.mounted){e.next=24;break}return console.warn("Lib already mounted, return."),e.abrupt("return",null);case 24:r.dataset.mounted="mounted",i.render((0,O.jsx)(o.Kq,{store:m.j,children:(0,O.jsx)(qo,{options:t})}),r),!na.includes("print=true")&&f(ea,ta),{REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"}.REACT_APP_OBSERVE_LIB&&(l=new MutationObserver((function(){r&&!r.isConnected&&(console.info("Lib node is not connected. Unmount lib component"),i.unmountComponentAtNode(r),r=null,l.disconnect())}))).observe(document.body,{subtree:!0,childList:!0});case 28:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Qo(o,r,i,a,l,"next",e)}function l(e){Qo(o,r,i,a,l,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();({REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"}).REACT_APP_LIBRARY_URL||ra(),Zo=document,$o=Zo.createElement("style"),Zo.getElementsByTagName("head")[0].appendChild($o),Zo.addEventListener("mousedown",(function(){$o.innerHTML="#lcmap *:focus{outline:0}"})),Zo.addEventListener("keydown",(function(e){"Tab"===e.key&&($o.innerHTML="")}))},8203:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.d(t,{A:function(){return l}});var l=o((function e(t,n){switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n){case"arras-artis":this.id=t.name,this.cat_id="poi_type:amenity:bicycle_rental",this.name=t.name,this.address=t.streetAddress+"\n"+t.postalCode+" "+t.addressLocality,this.capacity=t.capacity,this.availablePlaces=t.availablePlaces,this.coord={lat:t.latitude,lon:t.longitude};break;case"toulouse-tisseo":this.id="poi:amenity:bicycle_rental:".concat(t.veloStation),this.cat_id="poi_type:amenity:bicycle_rental",this.name=t.label,this.address=t.address+" "+t.cityName;var r=t.available_bikes?parseInt(t.available_bikes):0,i=t.availables_mechanical_bikes?parseInt(t.availables_mechanical_bikes):0,o=t.availables_electrical_bikes?parseInt(t.availables_electrical_bikes):0,a=t.available_bike_stands?parseInt(t.available_bike_stands):0;this.capacity=r+a,this.availableBikes=r,this.availableMechanicalBikes=i,this.availableElectricalBikes=o,this.availablePlaces=a;var l=Math.ceil(r/this.capacity*100);this.code=l>=0&&l<=10?"velo_toulouse_0":l>10&&l<=20?"velo_toulouse_10":l>20&&l<=30?"velo_toulouse_20":l>30&&l<=40?"velo_toulouse_30":l>40&&l<=50?"velo_toulouse_40":l>50&&l<=60?"velo_toulouse_50":l>60&&l<=70?"velo_toulouse_60":l>70&&l<=80?"velo_toulouse_70":l>80&&l<=90?"velo_toulouse_80":l>90&&l<=100?"velo_toulouse_90":"velo_toulouse_100",this.coord={lat:t.y,lon:t.x};break;case"annecy-mobilites":case"annecy-mobilites-2024":case"montelimar-montelibus":this.id="poi:amenity:bicycle_rental:".concat(t.station_id),this.cat_id="poi_type:amenity:bicycle_rental",this.name=t.name,this.code="amenity_bicycle_rental";var c=t.available_bikes?parseInt(t.available_bikes):0,s=t.available_bike_stands?parseInt(t.available_bike_stands):0;this.capacity=c+s,this.availableBikes=c,this.availablePlaces=s,this.is_available=!0,this.coord={lat:t.lat,lon:t.lon},n.startsWith("annecy")&&(this.website="https://mobilites.grandannecy.fr/velo")}}))},5875:function(e,t,n){var r=n(3042),i=n(9736),o=n(2951);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(){l=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),l=new C(r||[]);return i(a,"_invoke",{value:O(e,n,l)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var m="suspendedStart",h="suspendedYield",v="executing",_="completed",y={};function g(){}function b(){}function A(){}var E={};d(E,c,(function(){return this}));var T=Object.getPrototypeOf,P=T&&T(T(N([])));P&&P!==n&&r.call(P,c)&&(E=P);var x=A.prototype=g.prototype=Object.create(E);function S(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function n(i,o,l,c){var s=f(e[i],e,o);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==a(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,l,c)}),(function(e){n("throw",e,l,c)})):t.resolve(d).then((function(e){u.value=e,l(u)}),(function(e){return n("throw",e,l,c)}))}c(s.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function O(t,n,r){var i=m;return function(o,a){if(i===v)throw Error("Generator is already running");if(i===_){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var l=r.delegate;if(l){var c=R(l,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===m)throw i=_,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var s=f(t,n,r);if("normal"===s.type){if(i=r.done?_:h,s.arg===y)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(i=_,r.method="throw",r.arg=s.arg)}}}function R(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,R(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=f(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(a(t)+" is not iterable")}return b.prototype=A,i(x,"constructor",{value:A,configurable:!0}),i(A,"constructor",{value:b,configurable:!0}),b.displayName=d(A,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,A):(e.__proto__=A,d(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(j.prototype),d(j.prototype,s,(function(){return this})),t.AsyncIterator=j,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new j(p(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(x),d(x,u,"Generator"),d(x,c,(function(){return this})),d(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return l.type="throw",l.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],l=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;L(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function s(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t,n,r,i,o,a){try{var l=e[o](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,i)}var f=function(){var e,t=(e=l().mark((function e(t,n,a,u){var d,p,f,h,v,_,y,g,b,A,E,T,P,x,S,j,O,R,w;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d=[],e.t0=a,e.next="bordeaux-tbm-azure"===e.t0?4:35;break;case 4:if(b=[],(null==t||null===(p=t.bike)||void 0===p||null===(p=p.journeys)||void 0===p?void 0:p.length)>0&&(A=b).push.apply(A,s(t.bike.journeys.map((function(e){return e.id})))),(null==t||null===(f=t.car)||void 0===f||null===(f=f.carParkJourneys)||void 0===f?void 0:f.length)>0&&(E=b).push.apply(E,s(t.car.carParkJourneys.map((function(e){return e.id})))),(null==t||null===(h=t.car)||void 0===h||null===(h=h.parkAndRideJourneys)||void 0===h?void 0:h.length)>0&&(T=b).push.apply(T,s(t.car.parkAndRideJourneys.map((function(e){return e.id})))),(null==t||null===(v=t.walking)||void 0===v||null===(v=v.journeys)||void 0===v?void 0:v.length)>0&&(P=b).push.apply(P,s(t.walking.journeys.map((function(e){return e.id})))),(null==t||null===(_=t.publicTransport)||void 0===_||null===(_=_.onDemandTransportJourneys)||void 0===_?void 0:_.length)>0&&(x=b).push.apply(x,s(t.publicTransport.onDemandTransportJourneys.map((function(e){return e.id})))),(null==t||null===(y=t.publicTransport)||void 0===y||null===(y=y.publicTransportJourneys)||void 0===y?void 0:y.length)>0&&(S=b).push.apply(S,s(t.publicTransport.publicTransportJourneys.map((function(e){return e.id})))),b=b.filter((function(e){var t;return void 0===(null==u||null===(t=u.state)||void 0===t||null===(t=t.journeys)||void 0===t?void 0:t.find((function(t){return t.id===e})))})),(null==u||null===(g=u.state)||void 0===g||null===(g=g.journeys)||void 0===g?void 0:g.length)>0&&d.push.apply(d,s(u.state.journeys)),!(b.length>0)){e.next=34;break}return e.next=16,Promise.all((0,i.Am)(b).map((function(e){return(0,r.A)("".concat({REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"}.REACT_APP_KBM_GATEWAY_MAAS,"/web/v2/journeys/").concat(e))})));case 16:if(!((j=e.sent).length>0)){e.next=34;break}O=c(j),e.prev=19,w=l().mark((function e(){var t,r,i,a,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=R.value).data&&(r=t.data,i={taxi:0,car:0,walking:0,bike:0,ridesharing:0},a={taxi:0,walking:0,car:0,ridesharing:0,bike:0,total:0},c={id:r.id,arrival_date_time:(0,o.Yq)(new Date(r.arrivalDateTime),"ymdThms"),departure_date_time:(0,o.Yq)(new Date(r.departureDateTime),"ymdThms"),distances:i,durations:a,co2_emission:{value:r.geqCo2Emission,unit:"gEC"},duration:r.duration,sections:r.steps.map((function(e,t){return m(e,r.steps[t-1],r.steps[t+1],n)})).flat(),disruptions:[],links:[],tags:[],fare:{},requested_date_time:"",nb_transfers:0,status:"",type:"rapid",calendars:[]},d.push(c));case 2:case"end":return e.stop()}}),e)})),O.s();case 22:if((R=O.n()).done){e.next=26;break}return e.delegateYield(w(),"t1",24);case 24:e.next=22;break;case 26:e.next=31;break;case 28:e.prev=28,e.t2=e.catch(19),O.e(e.t2);case 31:return e.prev=31,O.f(),e.finish(31);case 34:return e.abrupt("break",36);case 35:return e.abrupt("return",t);case 36:return e.abrupt("return",d);case 37:case"end":return e.stop()}}),e,null,[[19,28,31,34]])})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){p(o,r,i,a,l,"next",e)}function l(e){p(o,r,i,a,l,"throw",e)}a(void 0)}))});return function(e,n,r,i){return t.apply(this,arguments)}}(),m=function(e,t,n,r){var i,a=function(e){switch(e.type){case"ADDRESS":return{embedded_type:"address",id:e.id,name:e.location,address:{name:e.location,house_number:0,coord:{lat:e.coordinates.latitude,lon:e.coordinates.longitude},label:e.location,administrative_regions:[],id:e.id}};case"ADMINISTRATIVE_REGION":return{embedded_type:"administrative_region",id:e.id,name:e.location,administrative_region:{id:e.id,name:e.location,label:e.location,coord:{lat:e.coordinates.latitude,lon:e.coordinates.longitude},administrative_regions:[]}};case"POI":return{embedded_type:"poi",id:e.id,name:e.location,poi:{id:e.id,name:e.location,label:e.location,coord:{lat:e.coordinates.latitude,lon:e.coordinates.longitude},administrative_regions:[],poi_type:{id:"",name:""}}};case"STOP_AREA":return{embedded_type:"stop_area",id:e.id,name:e.location,stop_area:{id:e.id,name:e.location,label:e.location,coord:{lat:e.coordinates.latitude,lon:e.coordinates.longitude}}};case"STOP_POINT":return{embedded_type:"stop_point",id:e.id,name:e.location,stop_point:{id:e.id,name:e.location,label:e.location,coord:{lat:e.coordinates.latitude,lon:e.coordinates.longitude}}};default:return{}}},l={id:"section_".concat(Math.random()),from:a(e.departure),to:a(e.arrival),departure_date_time:(0,o.Yq)(new Date(e.departure.dateTime),"ymdThms"),arrival_date_time:(0,o.Yq)(new Date(e.arrival.dateTime),"ymdThms"),duration:e.duration,links:[],disruptions:[]};(null===(i=e.path)||void 0===i?void 0:i.length)>0&&(l.geojson={type:"LineString",coordinates:e.path.map((function(e){return[e.longitude,e.latitude]})),properties:[{length:e.distance}]});var c=!1,s=!1,u=!1;switch(e.mode){case"BIKE":l.mode="bike",l.type="street_network";break;case"BSS":l.mode="bike",l.type="street_network",(c={from:a(t.arrival),to:a(e.departure),arrival_date_time:(0,o.Yq)(new Date(e.departure.dateTime),"ymdThms"),departure_date_time:(0,o.Yq)(new Date(e.departure.dateTime),"ymdThms"),duration:0,type:"bss_rent",mode:"bike",id:"section_".concat(Math.random()),realtime:{available:0,available_bikes:0,available_places:0}}).to.poi.poi_type={id:"poi_type:amenity:bicycle_rental",name:"amenity:bicycle_rental"},(s={from:a(e.arrival),to:a(n.departure),arrival_date_time:(0,o.Yq)(new Date(e.arrival.dateTime),"ymdThms"),departure_date_time:(0,o.Yq)(new Date(e.arrival.dateTime),"ymdThms"),duration:0,type:"bss_put_back",mode:"bike",id:"section_".concat(Math.random()),realtime:{available:0,available_bikes:0,available_places:0}}).from.poi.poi_type={id:"poi_type:amenity:bicycle_rental",name:"amenity:bicycle_rental"},l.from.poi.poi_type={id:"poi_type:amenity:bicycle_rental",name:"amenity:bicycle_rental"},l.to.poi.poi_type={id:"poi_type:amenity:bicycle_rental",name:"amenity:bicycle_rental"};break;case"CAR":l.mode="car",l.type="street_network",l.to.poi.poi_type={id:"poi_type:amenity:parking",name:"Parc Relais"},(u={from:a(e.arrival),to:a(n.departure),departure_date_time:(0,o.Yq)(new Date(e.departure.dateTime),"ymdThms"),arrival_date_time:(0,o.Yq)(new Date(e.arrival.dateTime),"ymdThms"),duration:0,type:"park",id:"section_".concat(Math.random())}).from.poi.poi_type={id:"poi_type:amenity:parking",name:"Parc Relais"},u.to.poi.poi_type={id:"poi_type:amenity:parking",name:"Parc Relais"};break;case"WALKING":l.mode="walking",l.type="street_network";break;default:var d={TRAMWAY:"TRAMWAY",BUS:"BUS",ON_DEMAND_TRANSPORT:"BUS",FERRY:"FERRY",SCHOOL_BUS:"BUSSCOLAIRE",TRAIN:"TER",REGIONAL_BUS:"AUTOCAR"};if(void 0!==d[e.mode]){var p,f,m,h,v,_;l.type="public_transport",l.display_informations={direction:null!==(p=e.route)&&void 0!==p&&p.terminus?e.route.terminus:"",code:null!==(f=e.line)&&void 0!==f&&f.code?e.line.code:"",color:null!==(m=e.line)&&void 0!==m&&null!==(m=m.style)&&void 0!==m&&m.color?e.line.style.color.replace("#",""):"",text_color:null!==(h=e.line)&&void 0!==h&&null!==(h=h.style)&&void 0!==h&&h.textColor?e.line.style.textColor.replace("#",""):"",commercial_mode:null!==(v=e.line)&&void 0!==v&&v.mode?"commercial_mode:"+d[e.line.mode]:"",physical_mode:null!==(_=e.line)&&void 0!==_&&_.mode?"physical_mode:"+d[e.line.mode]:"",network:"bordeaux-tbm"};var y=r.find((function(e){return l.from.stop_point?l.from.stop_point.id===e.id:!!l.from.stop_area&&l.from.stop_area.id===e.stop_area}));y||(y={id:e.departure.id,name:e.departure.location,label:e.departure.location,coord:{lat:e.departure.coordinates.latitude,lon:e.departure.coordinates.longitude}});var g=r.find((function(e){return l.to.stop_point?l.to.stop_point.id===e.id:!!l.to.stop_area&&l.to.stop_area.id===e.stop_area}));g||(g={id:e.arrival.id,name:e.arrival.location,label:e.arrival.location,coord:{lat:e.arrival.coordinates.latitude,lon:e.arrival.coordinates.longitude}}),l.stop_date_times=y&&g?[{stop_point:y,links:[]},{stop_point:g,links:[]}]:[]}}return c&&s?[c,l,s]:u?[l,u]:[l]};t.A=f},5337:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.d(t,{A:function(){return l}});var l=o((function e(t,n,r){switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n){case"bordeaux-tbm":case"bordeaux-tbm-azure":var i="".concat(r);if(this.cat=i,this.cat_id="poi_type:".concat(i),this.subcat="empty-subcat",this.name=t.name,this.label=t.name,this.id=t.id,this.divIcon=!0,["vcub"].includes(r)?this.coord={lat:t.coordinates.latitude,lon:t.coordinates.longitude}:this.coord={lat:t.latitude,lon:t.longitude},["vcub"].includes(r)){var o=parseInt(t.nbBikeAvailable+t.nbElectricBikeAvailable);isNaN(o)&&(o=0);var a=parseInt(t.nbPlaceAvailable);isNaN(a)&&(a=0);var l=t.display,c=t.predict,s=parseInt("bikes"===l?o:a)>=3?c?"blue":"green":parseInt("bikes"===l?o:a)>0?"orange":"red";c&&(s="blue"),o<0&&(o=0),"MAINTENANCE"===t.connexionState&&(s="maintenance",o=null),"DECONNECTEE"===t.connexionState&&(s="unavailable",o=null);var u=t.typeVlsPlus&&"bikes"===l==="VLS_PLUS"?"+":"";this.code="".concat(i).concat(u,"_").concat("bikes"!==l?"slots_":"").concat(s),this.stand={available_bikes:t.nbBikeAvailable,available_electric_bikes:t.nbElectricBikeAvailable,available_total_bikes:o,available_places:a},c&&(this.stand.time=c.tau,this.stand.available_bikes=c.bikes,this.stand.available_total_bikes=c.bikes,this.stand.available_places=c.free_slots,o=c.bikes,a=c.free_slots),this.color=s,this.value="bikes"===l?o:a,this.predictFilter=!0}else if("p+r"===r){var d=t.predict,p=null!==t.freeSpots&&void 0!==t.freeSpots?t.freeSpots:0,f=t.vlecSpace>0?t.freeVlec:null,m=t.pmrSpace>0?t.freePmr:null,h=t.isReducedPrice,v="F"===t.parkState?"closed":null===t.parkState?"unavailable":parseInt(p)>=20?"green":parseInt(p)<20&&parseInt(p)>=10?"orange":"red";if(d&&"green"===v&&(v="blue"),this.code="".concat(i,"_slots_").concat(v).concat(h?"_reduced":""),null===t.parkState?this.stand={available:null,available_electric_cars:null,available_prm:null}:this.stand={available:p,available_electric_cars:f,available_prm:m},this.capacity=t.vlSpace,d){var _=t.tau||15,y=d.predictions.find((function(e){return e.tau_in_min===_}));y&&(this.stand.time=y.tau_in_min,this.stand.available=y.free_spots,p=y.free_spots)}this.id=t.parkingId||t.id,this.color=v,this.value=p,this.updatedAt=t.updatedAt,this.info=t.address+" "+t.postalCode+" "+t.city,this.isReducedPrice=h}this.id=String(this.id)}}))},3042:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=n(1083).A.create({baseURL:"https://annecy-mobilites.latitude-cartagene.com"}),c=function e(t){e.config&&Object.assign(t,e.config),e.headers&&Object.assign(t.headers,e.headers),e.fn.length&&e.fn.forEach((function(e){return e(t)}))};c.fn=[],c.config={},c.headers={};var s=function(e){return e||(e={}),e.headrs||(e.headers={}),c(e),l(e)},u=function(e){return function(t,n){return n||(n={}),s(o({url:t,method:e},n))}},d=function(e){return function(t,n,r){return r||(r={}),s(o({url:t,method:e,data:n},r))}},p=function(e,t){return s("string"==typeof e&&t?o({url:e},t):"string"==typeof e?{url:e}:e)};p.request=s,p.get=u("get"),p.delete=u("delete"),p.head=u("head"),p.post=d("post"),p.put=d("put"),p.patch=d("patch"),p.transformConfig=c,t.A=p},2677:function(e,t,n){var r,i,o,a,l=n(6540),c=n(1225),s=n(1912),u=n(9736),d=n(9742),p=n(2951),f=n(3042),m=n(4848);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var y="https://annecy-mobilites.latitude-cartagene.com",g=s.Ay.div(r||(r=_(["\n  display: flex;\n  flex-direction: column;\n  background-color: #ffffff;\n  opacity: 1;\n"]))),b=s.Ay.button(i||(i=_(["\n  padding: 5px !important;\n  margin-top: 3px;\n  border: none;\n"]))),A=s.Ay.label(o||(o=_(["\n  margin: 3px 5px;\n"]))),E=s.Ay.input(a||(a=_([""])));t.A=function(){var e=h((0,l.useState)(!0),2),t=e[0],n=e[1],r=h((0,l.useState)(!0),2),i=r[0],o=r[1],a=h((0,l.useState)(!0),2),s=a[0],v=a[1],_=h((0,l.useState)(!1),2),T=_[0],P=_[1],x=h((0,l.useState)(!1),2),S=x[0],j=x[1],O=h((0,l.useState)(!0),2),R=O[0],w=O[1],L=(0,p.Yq)(new Date,"ymdThm"),C=(0,c.d4)((function(e){return e.app.language})),N=function(){P(!0);var e=(0,u._V)(d.A.location);"now"===e.date&&(e.date=L);var n=(0,u.vf)(e,{displaySummary:t?"true":"false",openDisruptions:i?"true":"false",openWalkingSections:s?"true":"false",openStops:S?"true":"false",displayMap:R?"true":"false",lang:C,type:"route-calculation",size:"large"});f.A.get("/api/print".concat(n)).then((function(e){if(e.data&&"done"===e.data.status){var t=document.createElement("a");t.setAttribute("href","".concat(y?"/"===y.slice(-1)?y:y+"/":"".concat(window.location.origin,"/"),"api/file?name=").concat(e.data.filename,"&folder=").concat(e.data.dir,"&ext=pdf")),t.click(),t.onclick=function(){return t.remove()},P(!1)}else console.log("Route calculation print server error"),P(!1)})).catch((function(e){console.log("Route calculation print error : ",e),P(!1)}))};return(0,m.jsxs)(g,{children:[(0,m.jsxs)(A,{htmlFor:"openDisruptions",className:"lc-openDisruptions",children:[(0,m.jsx)(E,{type:"checkbox",name:"openDisruptions",id:"openDisruptions",value:i,checked:i?"checked":"",onChange:function(){return o(!i)},onKeyUp:function(e){return(0,u.zQ)(e,(function(){return o(!i)}))}}),(0,u.Tl)("popup-print-open-disruptions")]}),(0,m.jsxs)(A,{htmlFor:"openWalkingSections",className:"lc-openWalkingSections",children:[(0,m.jsx)(E,{type:"checkbox",name:"openWalkingSections",id:"openWalkingSections",value:s,checked:s?"checked":"",onChange:function(){return v(!s)},onKeyUp:function(e){return(0,u.zQ)(e,(function(){return v(!s)}))}}),(0,u.Tl)("popup-print-walking-sections")]}),(0,m.jsxs)(A,{htmlFor:"displaySummary",className:"lc-displaySummary",children:[(0,m.jsx)(E,{type:"checkbox",name:"displaySummary",id:"displaySummary",value:t,checked:t?"checked":"",onChange:function(){return n(!t)},onKeyUp:function(e){return(0,u.zQ)(e,(function(){return n(!t)}))}}),(0,u.Tl)("popup-print-display-summary")]}),(0,m.jsxs)(A,{htmlFor:"displayMap",className:"lc-displayMap",children:[(0,m.jsx)(E,{type:"checkbox",name:"displayMap",id:"displayMap",value:R,checked:R?"checked":"",onChange:function(){return w(!R)},onKeyUp:function(e){return(0,u.zQ)(e,(function(){return w(!R)}))}}),(0,u.Tl)("popup-print-display-map")]}),(0,m.jsxs)(A,{htmlFor:"openStops",className:"lc-openStops",children:[(0,m.jsx)(E,{type:"checkbox",name:"openStops",id:"openStops",value:S,checked:S?"checked":"",onChange:function(){return j(!S)},onKeyUp:function(e){return(0,u.zQ)(e,(function(){return j(!S)}))}}),(0,u.Tl)("popup-print-open-stops")]}),T?(0,m.jsx)("div",{className:"lc-loading","data-lc-loading":!0,children:(0,m.jsx)("img",{src:(0,u.tx)("/assets/images/loading.gif"),width:30,alt:(0,u.Tl)("loading")})}):(0,m.jsx)(b,{onClick:function(){return N()},onKeyUp:function(e){return(0,u.zQ)(e,(function(){return N()}))},className:"lc-button",children:(0,u.Tl)("popup-print-button")})]})}},4903:function(e,t,n){n.d(t,{BA:function(){return te},Dq:function(){return q},Ht:function(){return W},Jj:function(){return Z},NI:function(){return re},O:function(){return ne},Uv:function(){return J},V:function(){return Q}});var r=n(9832),i=n.n(r),o=n(8062),a=n(8413),l=n(9742),c=n(9243),s=n(2537),u=n(9736),d=n(8063),p=n.n(d),f=n(4457),m=n(1290),h=n(7577),v=n(3052),_=n(5471),y=n(4305),g=n(6293),b=n(2951),A=n(8089),E=n(35),T=n(3042),P=(n(707),n(4877)),x=n(3727),S=n(1576),j=n(4848);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function R(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||M(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(){w=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,a=Object.create(o.prototype),l=new C(r||[]);return i(a,"_invoke",{value:S(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",f="suspendedYield",m="executing",h="completed",v={};function _(){}function y(){}function g(){}var b={};s(b,a,(function(){return this}));var A=Object.getPrototypeOf,E=A&&A(A(N([])));E&&E!==n&&r.call(E,a)&&(b=E);var T=g.prototype=_.prototype=Object.create(b);function P(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,o,a,l){var c=d(e[i],e,o);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==O(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(u).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,l)}))}l(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function S(t,n,r){var i=p;return function(o,a){if(i===m)throw Error("Generator is already running");if(i===h){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var l=r.delegate;if(l){var c=j(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var s=d(t,n,r);if("normal"===s.type){if(i=r.done?h:f,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(i=h,r.method="throw",r.arg=s.arg)}}}function j(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(O(t)+" is not iterable")}return y.prototype=g,i(T,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:y,configurable:!0}),y.displayName=s(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,c,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},P(x.prototype),s(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new x(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},P(T),s(T,c,"Generator"),s(T,a,(function(){return this})),s(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return l.type="throw",l.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],l=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;L(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function L(e,t,n,r,i,o,a){try{var l=e[o](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,i)}function C(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){L(o,r,i,a,l,"next",e)}function l(e){L(o,r,i,a,l,"throw",e)}a(void 0)}))}}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=O(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==O(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=M(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function M(e,t){if(e){if("string"==typeof e)return U(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var G={REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"},H=G.REACT_APP_LINES_MAIN_TYPE,Y=G.REACT_APP_LINES_TYPE_EXCEPTIONS,F=G.REACT_APP_GO_TO_RC_URL,B=G.REACT_APP_AUTOCOMPLETE_HEADERS,V=G.REACT_APP_AUTOCOMPLETE_NO_ICONS,z=G.REACT_APP_ITINERARY_FORM_CONFIG,X=G.REACT_APP_CLICK_THROUGH_LINES;function K(e,t){var n,r,i;return e.embedded_type?e.embedded_type!==(null===(n=t[e.index-1])||void 0===n?void 0:n.embedded_type):e.id.includes("stop_")?!(e.index>0)||!(null!==(r=t[e.index-1])&&void 0!==r&&r.id.includes("stop_")):e.id.includes("line:")?!(e.index>0)||!(null!==(i=t[e.index-1])&&void 0!==i&&i.id.includes("line:")):void 0}var q=function(e,t,n){var r,o,c=l.A.location.pathname,s=e.app,d=s.lock,p=s.size,f=s.modules,m=s.touchscreenSelected,h=s.linesModes,v=s.component,y=s.configApp,E=s.stops,T=s.areas,P=v.props,x=P.options,S=P.searchIn,O=!0!==d;if(O&&!1===(null==x||null===(r=x.features)||void 0===r?void 0:r["route-calculation"])&&(O=!1),O&&null!=y&&y.hide_gotorc_button_if_one_mode){var R,L=(0,u._V)(l.A.location);if(null!=L&&null!==(R=L.from)&&void 0!==R&&R.startsWith("stop_")){var N,I=L.from.startsWith("stop_point")?E.find((function(e){return e.id===L.from})):T.find((function(e){return e.id===L.from}));if((null==I||null===(N=I.lines)||void 0===N?void 0:N.length)>0){var M=(0,b.il)(I);1===(null==M?void 0:M.length)&&y.hide_gotorc_button_if_one_mode===M[0]&&(O=!1)}}}O||!0!==(null==x||null===(o=x.features)||void 0===o?void 0:o["force-go-to-rc-button"])||(O=!0);var U="inputStart"===t?e.board.inputStartItems:"inputEnd"===t?e.board.inputEndItems:e.board.inputItems,G="inputStart"===t?e.board.inputStartValue:"inputEnd"===t?e.board.inputEndValue:e.board.inputValue,z=[],X="inputSchedules"===t?(0,u.Tl)("placeholder-inputSchedules"):c.includes("/route-calculation")?"inputStart"===t?(0,u.Tl)("placeholder-inputStart"):(0,u.Tl)("placeholder-inputEnd"):"inputNetworkSearch"===t?(0,u.Tl)("placeholder-inputNetworkSearch"):t.includes("inputThematic-")&&c.includes("bss")?(0,u.Tl)("placeholder-inputBss"):t.includes("inputThematic-")&&c.includes("pt-vente")?(0,u.Tl)("placeholder-inputPtVente"):t.includes("inputThematic-")&&c.includes("e-tecely")?(0,u.Tl)("placeholder-inputeTecely"):t.includes("inputThematic-")&&c.includes("gab")?(0,u.Tl)("placeholder-inputGAB"):t.includes("inputThematic-")&&(c.includes("p+r")||c.includes("parcs-relais")||c.includes("parking"))?(0,u.Tl)("placeholder-inputPR"):t.includes("inputThematic-")&&c.includes("park-ride")?(0,u.Tl)("placeholder-park-ride"):t.includes("inputThematic-")&&c.includes("agence")?(0,u.Tl)("placeholder-inputHideAgence"):t.includes("inputThematic-")&&c.includes("pt-service")?(0,u.Tl)("placeholder-inputHidePtService"):t.includes("inputThematic-")&&c.includes("vcub")?(0,u.Tl)("placeholder-inputVcub"):t.includes("inputThematic-")&&c.includes("velo")?(0,u.Tl)("placeholder-inputVelo"):t.includes("inputThematic-")&&c.includes("citiz")?(0,u.Tl)("placeholder-inputCitiz"):t.includes("inputThematic-")&&c.includes("bike-parks")?(0,u.Tl)("placeholder-inputBikeParks"):t.includes("inputThematic-")&&c.includes("lieux_touristiques")?(0,u.Tl)("placeholder-inputThematic-lieux_touristiques"):t.includes("inputThematic-")&&c.includes("borne-apport")?(0,u.Tl)("placeholder-inputThematic-borne-apport"):"inputTourismPartners"===t?(0,u.Tl)("placeholder-inputTourismPartners"):t.includes("inputThematic-")&&c.includes("depositaires")?(0,u.Tl)("placeholder-inputDepositaires"):t.startsWith("inputThematicAroundSearch")?(0,u.Tl)("placeholder-".concat(t)):S?(0,u.Tl)("placeholder-input-".concat(S)):"/"===c?(0,u.Tl)("placeholder-input-around-in-board"):(0,u.Tl)("placeholder-inputAround"),q=e.app.modules.filter((function(e){return"boolean"==typeof(null==e?void 0:e.enableLinesInAutocomplete)})),W=[];if(q.length){var J,Q=q.find((function(e){return(0,u.x$)(e.id)}));Q||"/"!==l.A.location.pathname||(Q=q.find((function(e){return e.displayInputInMenu}))),Q&&!1===(null===(J=Q)||void 0===J?void 0:J.enableLinesInAutocomplete)&&W.push("line")}if(B&&JSON.parse(B)){var Z,$=D(U);try{for($.s();!(Z=$.n()).done;){var ee=Z.value;if(null!=W&&W.length&&ee.id.includes("history-")&&W.includes(ee.id.split(":")[0].split("-")[1]))break;!0===ee.best_result&&z.push({divider:!0,id:"best-result-divider",key:"best-result-divider",name:(0,u.Tl)("autocomplete-header-best-result-divider")}),K(ee,U)&&z.push({divider:!0,id:ee.embedded_type?ee.embedded_type+"-divider":ee.id.includes("stop_")?"stop-divider":"other-divider",key:ee.embedded_type?ee.embedded_type+"-divider":ee.id.includes("stop_")?"stop-divider":ee.id.includes("line:")?"line-divider":"other-divider",name:(0,u.Tl)("autocomplete-header-".concat(ee.embedded_type?ee.embedded_type.replaceAll("_","-"):ee.id.includes("stop_")?"stop-area":ee.id.includes("line:")?"line":"other"))}),z.push(ee)}}catch(e){$.e(e)}finally{$.f()}}var te=function(r,i){var o,a;if((0,g.i)({clicked:"autocomplete-item",id:i.id,type:"geoloc"===i.id?"geolocation":i.embedded_type?i.embedded_type:i.cat_id?i.cat_id:"line"}),(0,u.x$)("route-calculation")){var l="geoloc"===i.id?"Géolocation":i.id.includes("stop_area:")?"Arrêt":i.id.includes("admin:")?"Commune":i.id.includes("poi:")?"Lieu":"Adresse";(0,A.X3)({event:"map-itinerarySearch",itinerarySearchType:l,itinerarySearchTerm:r,itinerarySearchInput:"inputStart"===t?"Départ":"Arrivée",itinerarySearchHistoric:i.id.startsWith("history-"),itinerarySearchFavori:i.id.startsWith("favori-")})}else if("geoloc"===i.id&&(null!=v&&null!==(o=v.props)&&void 0!==o&&null!==(o=o.moduleData)&&void 0!==o&&o.title||null!=v&&null!==(a=v.props)&&void 0!==a&&a.title)){var c,s;(0,A.X3)({event:"map-geolocationInput",module:(0,u.Tl)((null==v||null===(c=v.props)||void 0===c?void 0:c.title)||(null==v||null===(s=v.props)||void 0===s||null===(s=s.moduleData)||void 0===s?void 0:s.title),!1)})}(0,u.Pb)(r,i,t,e,n)};return(0,j.jsxs)("form",{className:"lc-formAutocomplete",onSubmit:function(e){e.preventDefault()},children:[(0,j.jsx)(i(),{inputProps:{id:t},autoHighlight:!0,wrapperStyle:{display:"flex",flex:1,position:"relative"},value:G,items:B&&JSON.parse(B)?z:U,getItemValue:function(e){return e.name},onSelect:te,onChange:function(n){(0,u.W)(n,t,e)},onMenuVisibilityChange:function(e){var t=parseInt(getComputedStyle(document.querySelector(".lc-board")).marginTop)||0,n=parseInt(getComputedStyle(document.querySelector(".lc-board")).marginBottom)||0,r=document.querySelector(".lc-board").getBoundingClientRect(),i=x&&Object.keys(x).length>0?document.querySelector("#lcmap").offsetHeight:window.innerHeight;document.querySelector(".lc-scroll")&&i-t-n-r.top>r.height&&(document.querySelector(".lc-scroll").style.overflowY=e?"inherit":"auto")},isItemSelectable:function(e){return!e.divider},renderMenu:function(e){W.length&&(e=e.filter((function(e){return!e.key.includes("history-")||!W.includes(e.key.split(":")[0].split("-")[1])})));var n=e.filter((function(e){return"geoloc"===e.key})),r=e.filter((function(e){return e.key.includes("history-")})),i=e.filter((function(e){return e.key.includes("favorite-")})),o=1===e.filter((function(e){return"no_result"===e.key})).length,a=e.filter((function(e){return e.key.includes("partner-")})),l={};if(a.length>=1){var s,d,h=(null===(s=f.find((function(e){return"tourism-partners"===e.id||"partners"===e.id})).options)||void 0===s?void 0:s.dataSetPer)||{type:"type",subType:"region"},v=D(a);try{for(v.s();!(d=v.n()).done;){var _=d.value,y=_.props[h.subType];l[y]=l[y]||[],l[y].push(_)}}catch(e){v.e(e)}finally{v.f()}}return o&&(e=e.filter((function(e){return"no_result"!==e.key}))),(0,j.jsxs)("ul",{className:"lc-autocomplete lc-".concat(p)+(c.includes("route-calculation")?" lc-offsetRoute":"")+(G?" lc-offset-clear":""),id:"lc-autocomplete-"+t,role:"listbox","aria-label":(0,u.Tl)("aria-autocomplete-input-"+t,!1)?(0,u.Tl)("aria-autocomplete-input-"+t,!1):(0,u.Tl)("aria-autocomplete-input",!1,{key:"search",value:X}),children:[n,r.length>=1&&!m&&(0,j.jsxs)("li",{className:"lc-autocompleteHistory",children:[(0,j.jsx)("div",{className:"lc-autocompleteHeader",children:(0,u.Tl)("autocomplete-historic")}),(0,j.jsx)("ul",{children:r})]}),i.length>=1&&(0,j.jsxs)("li",{className:"autocompleteFavorites",children:[(0,j.jsx)("div",{className:"lc-autocompleteHeader",children:(0,u.Tl)("autocomplete-favorites")}),(0,j.jsx)("div",{children:i})]}),a.length>=1&&Object.keys(l).sort().map((function(e){return(0,j.jsxs)("div",{className:"lc-autocompleteFavorites",children:[(0,j.jsx)("div",{className:"lc-autocompleteHeader",children:e}),(0,j.jsx)("div",{children:l[e].sort((function(e,t){return e.props.children.localeCompare(t.props.children)}))})]},e)})),o&&(0,j.jsx)("li",{className:"lc-item lc-no-result",children:(0,u.Tl)("autocomplete-no-result")},"emptyResults"),0===r.length&&0===a.length&&0===i.length&&e.filter((function(e){return"geoloc"!==e.key}))]})},renderInput:function(r){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("input",k(k({className:"lc-input","data-lc-input":!0,tabIndex:"0",title:X},r),{},{onKeyUp:function(e){if("Enter"===e.key){var t=(B&&JSON.parse(B)?z:U).find((function(e){return"geoloc"!==e.id&&!0!==e.divider}));te(t.name,t)}},onFocus:function(r){return!n&&(0,u.T5)(r,t,e)},placeholder:X,"aria-label":(0,u.Tl)("aria-autocomplete-input-"+t,!1)?(0,u.Tl)("aria-autocomplete-input-"+t,!1):(0,u.Tl)("aria-autocomplete-input",!1,{key:"search",value:X}),"aria-autocomplete":"list","aria-controls":"lc-autocomplete-"+t})),(F||f.find((function(e){return"route-calculation"===e.id&&!0!==e.hide})))&&!n&&!d&&e.board.goToValid&&!c.includes("/route-calculation")&&O&&(0,j.jsx)(_.Ay,{theme:"latitude",touch:["hold",500],placement:"top",boundary:"window",content:(0,u.Tl)("title-go-to-route-calculation"),children:(0,j.jsx)("div",{className:"lc-go-to-route lc-around",tabIndex:"0",role:"button",onClick:C(w().mark((function e(){var t,n;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,u._V)(l.A.location),!c.includes("/lines")){e.next=5;break}(0,u.YB)(t.stop_area),e.next=17;break;case 5:if(!(0,u.x$)("around")||t.from.includes(";")){e.next=9;break}(0,u.YB)(t.from),e.next=17;break;case 9:if(!t.place){e.next=13;break}(0,u.YB)(t.place),e.next=17;break;case 13:return e.next=15,(0,u.l_)((0,u._V)(l.A.location).from,null,v);case 15:n=e.sent,(0,u.YB)({address:{lon:n[1],lat:n[0]}});case 17:case"end":return e.stop()}}),e)}))),onKeyUp:function(){var e=C(w().mark((function e(t){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.zQ)(t,C(w().mark((function e(){var t,n;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,u._V)(l.A.location),!c.includes("/lines")){e.next=5;break}(0,u.YB)(t.stop_area),e.next=17;break;case 5:if(!(0,u.x$)("around")||t.from.includes(";")){e.next=9;break}(0,u.YB)(t.from),e.next=17;break;case 9:if(!t.place){e.next=13;break}(0,u.YB)(t.place),e.next=17;break;case 13:return e.next=15,(0,u.l_)((0,u._V)(l.A.location).from,null,v);case 15:n=e.sent,(0,u.YB)({address:{lon:n[1],lat:n[0]}});case 17:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:(0,j.jsx)("img",{src:(0,u.tx)("/assets/images/route-calculation/input-go-to.svg"),alt:(0,u.Tl)("route-calculation-board-title")})})})]})},renderItem:function(t,n){var r,i,o,l=h&&h.find((function(e){return e.modes.includes(t.mode)}));if(t.styleLine=H||"color",Y){var c=JSON.parse(Y).find((function(e){var n,r;return(null===(n=e.lines)||void 0===n?void 0:n.includes(t.id.replace(/history-|favorite-/g,"")))||(null===(r=e.networks)||void 0===r?void 0:r.includes(t.network))}));c&&(t.styleLine=c.type,t.prefixNetwork=!0===c.prefixNetwork)}return t.divider?(0,j.jsxs)("li",{className:"lc-item-header",children:[(0,j.jsx)("img",{src:(0,u.tx)("/assets/images/autocomplete/"+t.id+".svg"),alt:"","aria-hidden":"true"}),t.name]},t.id):t.embedded_type?(0,j.jsxs)("li",{className:"lc-item"+(n?" lc-highlight":""),role:"option",id:"result-item-".concat(t.id),"aria-selected":n?"true":"false","aria-label":t.name,children:[V&&(0,u.UP)(V)?null:(0,j.jsx)("img",{width:30,src:(0,u.tx)("/assets/images/autocomplete/"+t.embedded_type+".svg"),alt:t.embedded_type}),y.split_stops_name_and_town_by?(0,j.jsxs)("div",{className:"lc-stop-and-town-name",children:[(0,j.jsx)("span",{className:"lc-stop-town-town",children:t.name.split(y.split_stops_name_and_town_by)[0]}),t.name.split(y.split_stops_name_and_town_by)[1]&&(0,j.jsx)("span",{className:"lc-stop-town-name",children:null===(r=t.name.split(y.split_stops_name_and_town_by)[1].split("("))||void 0===r?void 0:r[0]})]}):"poi"===t.embedded_type&&null!=y&&y.autocomplete_poi_cat_picto&&null!==(i=t[t.embedded_type])&&void 0!==i&&null!==(i=i.poi_type)&&void 0!==i&&i.id?(0,j.jsxs)("div",{className:"lc-poi-cat-picto",children:[(0,j.jsx)("span",{children:t.name}),(0,j.jsx)("img",{src:(0,u.tx)("assets/images/places/".concat(null===(o=t[t.embedded_type].poi_type.id)||void 0===o||null===(o=o.replace("poi_type:",""))||void 0===o?void 0:o.replaceAll(":","_"),".svg")),alt:t[t.embedded_type].poi_type.name,"aria-hidden":"true"})]}):(0,j.jsx)(j.Fragment,{children:t.name})]},t.id+"-"+t.index):t.isPartner?(0,j.jsx)("li",{className:"lc-item"+(n?" lc-highlight":""),type:t.type,role:"option",id:"result-item-".concat(t.index),"aria-selected":n?"true":"false","aria-label":t.name,children:t.name},"partner-".concat(t.id)):"geoloc"===t.id?(0,j.jsxs)("li",{className:"lc-item lc-item-geoloc"+(n?" lc-highlight":""),role:"option",id:"result-item-".concat(t.index),"aria-selected":n?"true":"false","aria-label":t.name,children:[(0,j.jsx)("img",{width:30,src:(0,u.tx)("/assets/images/autocomplete/position.svg"),alt:(0,u.Tl)("autocomplete-geoloc"),"aria-hidden":"true"}),t.name]},t.id):t.id.includes("history-")&&t.type&&"line"!==t.type?(0,j.jsxs)("div",{className:"lc-item"+(n?" lc-highlight":""),role:"option",id:"result-item-".concat(t.index),"aria-selected":n?"true":"false","aria-label":t.name,children:[V&&(0,u.UP)(V)?null:(0,j.jsx)("img",{width:30,src:(0,u.tx)("/assets/images/autocomplete/"+t.type+".svg"),alt:t.type}),t.name]},t.id):t.id.includes("favorite-")&&"line"!==t.type&&"stop_point"!==t.type?(0,j.jsxs)("div",{className:"lc-item"+(n?" lc-highlight":""),role:"option",id:"result-item-".concat(t.index),"aria-selected":n?"true":"false","aria-label":t.name,children:[(0,j.jsx)("img",{width:30,src:(0,u.tx)("/assets/images/autocomplete/"+t.type+".svg"),alt:t.type}),t.name]},t.id):t.id.includes("stop_")?(0,j.jsxs)("li",{className:"lc-item"+(n?" lc-highlight":""),role:"option",id:"result-item-".concat(t.index),"aria-selected":n?"true":"false","aria-label":t.name,children:[V&&(0,u.UP)(V)?null:(0,j.jsx)("img",{width:30,src:(0,u.tx)("/assets/images/autocomplete/stop_area.svg"),alt:(0,u.Tl)("stop")}),(0,j.jsx)("div",{className:"lc-item-with-subtitle",children:y.split_stops_name_and_town_by?(0,j.jsxs)("div",{className:"lc-stop-and-town-name",children:[(0,j.jsx)("span",{className:"lc-stop-town-town",children:t.name.split(y.split_stops_name_and_town_by)[0]}),t.name.split(y.split_stops_name_and_town_by)[1]&&(0,j.jsx)("span",{className:"lc-stop-town-name",children:t.name.split(y.split_stops_name_and_town_by)[1]})]}):(0,j.jsxs)(j.Fragment,{children:[null!=y&&y.autocomplete_use_stoparea_label?t.label:t.name,(null==t?void 0:t.type)&&(0,j.jsx)("div",{className:"lc-item-subtitle",children:(0,u.Tl)("stop-".concat(t.type))})]})})]},t.id+"-"+t.index):e.board.thematicPlaces?(0,j.jsxs)("li",{className:"lc-item"+(n?" lc-highlight":""),role:"option",id:"result-item-".concat(t.index),"aria-selected":n?"true":"false","aria-label":t.name,children:[(0,j.jsx)("img",{width:30,src:(0,u.tx)("/assets/images/places/"+t.code+".svg"),alt:t.code}),t.name]},t.id):t.id.includes("line")?(0,j.jsxs)("div",{className:"lc-autocomplete-line"+(n?" lc-highlight":""),style:{padding:10},role:"option",id:"result-item-".concat(t.index),"aria-selected":n?"true":"false",children:[function(){switch(t.styleLine){case"modeWithDirection":return(0,j.jsx)("div",{className:"lc-line lc-line-with-direction lc-mode",style:{background:"#"+t.color,color:(0,a.N)(t.color)>.5?"#333":"#fff"},children:l?l.name:""},t.id);case"codeWithDirection":return(0,j.jsx)("div",{className:"lc-line lc-line-with-direction lc-code",style:{background:"#"+t.color,color:(0,a.N)(t.color)>.5?"#333":"#fff"},children:t.code},t.id);case"imageWithRouteDirection":case"image":return(0,j.jsx)("div",{className:"lc-line",children:(0,j.jsx)("img",{src:(0,u.tx)("/assets/images/lines/"+(t.prefixNetwork?t.network+"-":"")+("before"===t.network?"before/":"")+t.code+".svg"),alt:t.code})});case"color":return(0,j.jsx)("div",{className:"lc-line",children:(0,j.jsx)("span",{className:"lc-line-code",style:{background:"#"+t.color,color:(0,a.N)(t.color)>.5?"#333":"#fff"},children:t.code})});default:return""}}(),(0,j.jsx)("div",{style:{flex:5,paddingLeft:10},children:t.code===t.name&&t.routes?(0,u.Am)(t.routes,"name").map((function(e){return(0,j.jsx)("div",{className:"lc-autocompleteDirection","aria-label":e.name.replace("\n"," à "),children:y.split_stops_name_and_town_by?(0,j.jsxs)("div",{className:"lc-stop-and-town-name",children:[(0,j.jsx)("span",{className:"lc-stop-town-town",children:e.name.split(y.split_stops_name_and_town_by)[0]}),e.name.split(y.split_stops_name_and_town_by)[1]&&(0,j.jsx)("span",{className:"lc-stop-town-name",children:e.name.split(y.split_stops_name_and_town_by)[1]})]}):(0,j.jsx)(j.Fragment,{children:e.name.replace("\n"," <> ")})},e.name)})):(0,j.jsx)("div",{className:"lc-autocompleteDirection","aria-label":t.name.replace("\n"," à "),children:y.split_stops_name_and_town_by?(0,j.jsxs)("div",{className:"lc-stop-and-town-name",children:[(0,j.jsx)("span",{className:"lc-stop-town-town",children:t.name.split(y.split_stops_name_and_town_by)[0]}),t.name.split(y.split_stops_name_and_town_by)[1]&&(0,j.jsx)("span",{className:"lc-stop-town-name",children:t.name.split(y.split_stops_name_and_town_by)[1]})]}):(0,j.jsx)(j.Fragment,{children:t.name.replace("\n"," <> ")})},t.name)})]},t.id):t.id.includes("town")?(0,j.jsxs)("li",{className:"lc-item"+(n?" lc-highlight":""),role:"option",id:"result-item-".concat(t.index),"aria-selected":n?"true":"false","aria-label":t.name,children:[(0,j.jsx)("img",{width:30,src:(0,u.tx)("/assets/images/autocomplete/administrative_region.svg"),alt:"town"}),t.name]},t.id):t.id.includes("aeroway")?(0,j.jsxs)("li",{className:"lc-item"+(n?" lc-highlight":""),role:"option",id:"result-item-".concat(t.index),"aria-selected":n?"true":"false","aria-label":t.name,children:[(0,j.jsx)("img",{width:30,src:(0,u.tx)("/assets/images/autocomplete/aeroway_terminal.svg"),alt:"aeroway"}),t.name]},t.id):(0,j.jsx)("div",{},"no_result")}}),G&&(0,j.jsx)(_.Ay,{theme:"latitude",touch:["hold",500],placement:"top",boundary:"window",content:(0,u.Tl)("autocomplete-clear-input"),children:(0,j.jsx)("span",{className:"lc-autocompleteClear",onClick:function(){(0,u.W)({target:{value:""}},t,e)},onKeyUp:function(n){return(0,u.zQ)(n,(function(){(0,u.W)({target:{value:""}},t,e)}))},role:"button",tabIndex:"0"})}),"/"===c&&(0,j.jsx)(_.Ay,{theme:"latitude",touch:["hold",500],placement:"top",boundary:"window",content:(0,u.Tl)("autocomplete-geoloc"),children:(0,j.jsx)("span",{className:"lc-autocompleteGeoloc",onClick:function(){(0,u.Pb)((0,u.Tl)("autocomplete-geoloc"),{id:"geoloc",name:(0,u.Tl)("autocomplete-geoloc"),geolocation:!0},t,e,n)},onKeyUp:function(r){return(0,u.zQ)(r,(function(){(0,u.Pb)((0,u.Tl)("autocomplete-geoloc"),{id:"geoloc",name:(0,u.Tl)("autocomplete-geoloc"),geolocation:!0},t,e,n)}))},role:"button",tabIndex:"0"})})]})},W=function(e){var t,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=Object.keys(i),a=(0,u._V)(l.A.location),c=e.board,s=c.openedCollapse,d=c.thematicPlaces,h=e.app,_=h.component,b=h.placesRef,A=h.configApp,E=null,T=null,P=o.length>1;if(null!=e&&null!==(t=e.app)&&void 0!==t&&null!==(t=t.component)&&void 0!==t&&null!==(t=t.state)&&void 0!==t&&t.selectedFind&&(E=e.app.component.state.selectedFind,i[E.cat_id]=[k(k({},E),{},{id:E.id+"-copy"})],o=o.filter((function(e){return e!==E.cat_id}))),!P&&null!=e&&null!==(n=e.app)&&void 0!==n&&null!==(n=n.component)&&void 0!==n&&null!==(n=n.props)&&void 0!==n&&null!==(n=n.moduleData)&&void 0!==n&&n.groupBy){T=e.app.component.props.moduleData.groupBy;var x=[];i[Object.keys(i)[0]].forEach((function(e){x.includes(e[T])||x.push(e[T])})),o=x}if(0===o.length)return null!=_&&null!==(r=_.props)&&void 0!==r&&null!==(r=r.moduleData)&&void 0!==r&&r.overrideNoPlaceLabel?(0,j.jsx)("div",{className:"lc-empty",dangerouslySetInnerHTML:{__html:(0,u.Tl)(_.props.moduleData.overrideNoPlaceLabel,!1)}}):(0,j.jsx)("div",{className:"lc-empty",children:(0,u.Tl)("no-places-around")});var S=function(t,n){var r,o,a,l;f.j.dispatch((0,m.f4)(n));var c=null==_||null===(r=_.props)||void 0===r||null===(r=r.moduleData)||void 0===r?void 0:r.data,u=b.find((function(e){return e.name===c}));if((0,g.i)({clicked:"thematic",module:c,category:n}),d&&1===Object.keys(d).length&&1===(null===(o=d[n])||void 0===o?void 0:o.length)&&$(t,d[n][0],e),!0!==(null==_||null===(a=_.props)||void 0===a||null===(a=a.moduleData)||void 0===a?void 0:a.onlyDisplayMarkerOnSelectedCollapse)||s!==n){if(!0===(null==_||null===(l=_.props)||void 0===l||null===(l=l.moduleData)||void 0===l?void 0:l.filterMarkersWithOpenedCollapse))if(u&&u.parentCategories&&Object.keys(u.parentCategories).includes(n)&&s!==n)f.j.dispatch((0,v.aD)(u.parentCategories[n].map((function(e){return R(d[e])})).flat()));else if(s===n)f.j.dispatch((0,v.aD)(d));else{var p;!P&&null!=e&&null!==(p=e.app)&&void 0!==p&&null!==(p=p.component)&&void 0!==p&&null!==(p=p.props)&&void 0!==p&&null!==(p=p.moduleData)&&void 0!==p&&p.groupBy?f.j.dispatch((0,v.aD)(d[Object.keys(i)[0]].filter((function(t){var r;return t[null==e||null===(r=e.app)||void 0===r||null===(r=r.component)||void 0===r||null===(r=r.props)||void 0===r||null===(r=r.moduleData)||void 0===r?void 0:r.groupBy]===n})))):f.j.dispatch((0,v.aD)(d[n]))}return t.stopPropagation(),t.preventDefault(),!1}f.j.dispatch((0,v.aD)([]))};return o.sort((function(e,t){var n;return null===(n=(0,u.Tl)(e,!1))||void 0===n?void 0:n.localeCompare((0,u.Tl)(t,!1))})).map((function(t){var n,r,o,l,c,d,f=null==_||null===(n=_.props)||void 0===n||null===(n=n.moduleData)||void 0===n?void 0:n.data,m=b.find((function(e){return e.name===f})),h=!!(m&&m.parentCategories&&Object.keys(m.parentCategories).includes(t));return m&&m.parentCategories&&Object.keys(m.parentCategories).map((function(e){return m.parentCategories[e]})).flat().includes(t)?null:(0,j.jsxs)("div",{className:"lc-group"+(0===_.state.tab?" lc-tab-transport":" lc-tab-places"),children:[(0,j.jsxs)("div",{className:"lc-group-name",onClick:function(n){var r;if(T){var i,o=null===(i=e.map.transportPlaces)||void 0===i?void 0:i.filter((function(e){return e.props.place[T]===t}));(0,y.Fe)(e.app.map,o)}(P||T)&&S(n,(!h||null==m||null===(r=m.parentCategories[t])||void 0===r||!r.includes(s))&&t)},onKeyUp:function(n){if(T){var r,i=null===(r=e.map.transportPlaces)||void 0===r?void 0:r.filter((function(e){return e.props.place[T]===t}));(0,y.Fe)(e.app.map,i)}(P||T)&&(0,u.zQ)(n,(function(){var e;return S(n,(!h||null==m||null===(e=m.parentCategories[t])||void 0===e||!e.includes(s))&&t)}))},role:"button",tabIndex:"0","aria-label":(0,u.Tl)(t,!1),children:[(0,j.jsxs)("div",{className:"lc-category lc-category-"+t.replace("poi_type:","").replace(":","_"),children:[(!T||T&&!0===(null==e||null===(r=e.app)||void 0===r||null===(r=r.component)||void 0===r||null===(r=r.props)||void 0===r||null===(r=r.moduleData)||void 0===r?void 0:r.groupByCatPicto))&&(0,j.jsx)("img",{width:20,src:(0,u.tx)("/assets/images/places/"+t.replace("poi_type:","").replaceAll(":","_")+".svg"),alt:"","aria-hidden":"true"}),T&&void 0===(0,u.Tl)(t,!1)?t:(0,u.Tl)(t),null!=A&&A.pr_url&&"poi_type:amenity:parking"===t?(0,j.jsx)("a",{href:null==A?void 0:A.pr_url,className:"lc-with-pr-url",target:"_blank",rel:"noreferrer",onClick:function(e){return e.stopPropagation()},children:(0,j.jsx)("img",{src:(0,u.tx)("/assets/images/disruptions/informations-white.svg"),alt:"","aria-hidden":"true"})}):null]}),(P||T)&&(e.board.thematicPlaces||_.state.places&&1===_.state.tab)&&(0,j.jsx)("div",{className:"lc-arrow-group",children:(0,j.jsx)("img",{className:s===t||h&&null!=m&&null!==(o=m.parentCategories[t])&&void 0!==o&&o.includes(s)?"":"lc-closed",src:(0,u.tx)("/assets/images/v.svg"),alt:(0,u.Tl)("collapse-arrow")})})]}),h&&P?(0,j.jsx)(p(),{isOpen:s===t||(null==m||null===(l=m.parentCategories[t])||void 0===l?void 0:l.includes(s)),children:m.parentCategories[t].map((function(n){return(0,j.jsxs)("div",{className:"lc-group-subcategory lc-group"+(0===_.state.tab?" lc-tab-transport":" lc-tab-places"),onClick:function(e){return S(e,s===n?t:n)},onKeyUp:function(e){return(0,u.zQ)(e,(function(){return S(e,s===n?t:n)}))},role:"button",tabIndex:"0","aria-label":(0,u.Tl)(n,!1),children:[(0,j.jsxs)("div",{className:"lc-group-name",children:[(0,j.jsxs)("div",{className:"lc-category",children:[(0,j.jsx)("img",{width:20,src:(0,u.tx)("/assets/images/places/"+n.replace("poi_type:","").replace(":","_")+".svg"),alt:"","aria-hidden":"true"}),(0,u.Tl)(n)]}),(e.board.thematicPlaces||_.state.places&&1===_.state.tab)&&(0,j.jsx)("div",{className:"lc-arrow-group",children:(0,j.jsx)("img",{className:s!==n?"lc-closed":"",src:(0,u.tx)("/assets/images/v.svg"),alt:(0,u.Tl)("collapse-arrow")})})]}),(0,j.jsx)(p(),{isOpen:s===n,children:(0,j.jsx)("ul",{className:"lc-ul-places",children:re(e,i[n])})})]},n)}))}):!h&&(P||T)&&(e.board.thematicPlaces||_.state.places&&1===_.state.tab)?(0,j.jsx)(p(),{isOpen:s===t||T&&a.place&&t===(null===(c=i[Object.keys(i)[0]])||void 0===c?void 0:c.find((function(e){return e.id===a.place}))[T]),children:(0,j.jsx)("ul",{className:"lc-ul-places",children:re(e,T?null===(d=i[Object.keys(i)[0]])||void 0===d?void 0:d.filter((function(e){return e[T]===t})):i[t])})}):(0,j.jsx)("ul",{className:"lc-ul-places",children:re(e,i[t],T)})]},t)}))},J=function(e){var t,n,r=e.app,i=r.component,o=r.isMobile,a=e.board.radiusPanel,l=i.props,c=l.radius,s=l.currentRadius,d=(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",{className:"lc-around-radius-times",role:"group","aria-labelledby":"lc-around-radius-times",children:null==c||null===(t=c.sort((function(e,t){return e.time>t.time})))||void 0===t?void 0:t.map((function(e){return(0,j.jsx)("div",{className:"lc-radius-value"+(e.value===s?" lc-active":""),role:"button",tabIndex:"0",onClick:function(t){t.stopPropagation(),f.j.dispatch((0,h.Lo)(e.value)),i.loadData()},onKeyUp:function(t){return(0,u.zQ)(t,(function(){t.stopPropagation(),f.j.dispatch((0,h.Lo)(e.value)),i.loadData()}))},children:(0,j.jsx)("img",{src:(0,u.tx)("/assets/images/radius/".concat(e.time).concat(e.value===s?"-selected":"",".svg")),alt:e.time})},e.time)}))})});return(0,j.jsx)("div",{className:"lc-prefs lc-around",children:(0,j.jsxs)("div",{className:"lc-buttons",children:[(0,j.jsxs)("div",{className:a?"lc-collapse lc-radius lc-active":"lc-collapse lc-radius",id:"lc-around-radius-times",onClick:function(){f.j.dispatch((0,m.Oe)(a)),(0,u.XR)(o)},onKeyUp:function(e){return(0,u.zQ)(e,(function(){f.j.dispatch((0,m.Oe)(a)),(0,u.XR)(o)}))},role:"button",tabIndex:"0","aria-expanded":a?"true":"false","aria-controls":"lc-radius",children:[(0,u.Tl)("time-around-tab-radius-prefix"),(0,j.jsxs)("span",{children:[null==c||null===(n=c.find((function(e){return e.value===s})))||void 0===n?void 0:n.time," ",(0,u.Tl)("time-around-tab-radius-unit")]}),(0,j.jsx)("div",{className:"lc-menu-item-arrow"+(a?" lc-active":"")})]}),(0,j.jsx)(p(),{className:"collapse-css-transition lc-radius",id:"lc-radius",isOpen:a,children:function(e){return(0,j.jsx)("div",{className:"lc-"+e,children:d})}})]})})},Q=function(e){for(var t,n=e.app,r=e.app,i=r.calculateItineraryNow,a=r.isMobile,l=r.language,c=r.modes,d=r.datePicker,v=r.calendar,_=n.walkingSpeeds,y=n.bikeSpeeds,g=n.bikeProfiles,E=n.travelSolutions,T=n.allowDisruptions,P=e.board,x=P.datesPanel,S=P.modesPanel,O=P.walkingSpeedsPanel,R=P.bikePanel,w=P.travelSolutionsPanel,L="departure"===c.represents,C=[],N=0,I=Object.keys(n.modes);N<I.length;N++){var D=I[N];"boolean"==typeof n.modes[D]&&C.push({id:D,name:(0,u.Tl)("modes-".concat(D))})}var M=(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"lc-represents",children:[(0,j.jsx)("div",{className:"lc-radio",children:(0,j.jsxs)("label",{className:L?"lc-radio-checked":"",children:[(0,j.jsx)("input",{type:"radio",value:"departure",checked:L,tabIndex:"0",onChange:function(){return f.j.dispatch((0,h.a8)("departure"))}}),(0,u.Tl)("route-calculation-board-preferences-departure")]})}),(0,j.jsx)("div",{className:"lc-radio",children:(0,j.jsxs)("label",{className:L?"":"lc-radio-checked",children:[(0,j.jsx)("input",{type:"radio",value:"arrival",checked:!L,tabIndex:"0",onChange:function(){return f.j.dispatch((0,h.a8)("arrival"))}}),(0,u.Tl)("route-calculation-board-preferences-arrival")]})})]}),(0,j.jsxs)("div",{className:"lc-pickers",children:[(0,j.jsx)(s.A,{button:!0,minDate:d.minDate,maxDate:d.maxDate,defaultDateTime:d.defaultDateTime,followInput:!0}),(0,j.jsxs)("div",{className:"lc-time-picker-group",onClick:function(){document.querySelector(".lc-time-picker").click()},onKeyUp:function(e){return(0,u.zQ)(e,(function(){document.querySelector(".lc-time-picker").click()}))},role:"button",tabIndex:"0","aria-label":(0,u.Tl)("aria-route-calculation-time",!1,{key:"hour",value:v.date.toLocaleTimeString(l,{hour:"2-digit",minute:"2-digit"})}),children:[(0,j.jsx)("div",{children:(0,j.jsx)("img",{src:(0,u.tx)("/assets/images/route-calculation-time.svg"),alt:(0,u.Tl)("time-alt",!1)})}),(0,j.jsx)(o.A,{style:{position:"relative"},className:"lc-time-picker",popupClassName:"lc-time-picker-popup",defaultValue:new Date,placement:"bottomLeft",use12Hours:"en"===l,showSecond:!1,minuteStep:5,allowEmpty:!1,inputReadOnly:!0,value:v.date,onChange:function(e){f.j.dispatch((0,h.Y_)(e.getHours(),e.getMinutes()))},onClose:function(){return document.querySelector(".rc-time-picker-input").blur()},ariaLabelInput:(0,u.Tl)("aria-time-picker-input"),ariaLabelSelectHours:(0,u.Tl)("aria-time-picker-hours"),ariaLabelSelectMinutes:(0,u.Tl)("aria-time-picker-minutes")})]})]})]}),U=(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",{className:"lc-route-calculation-modes",role:"radiogroup","aria-labelledby":"lc-route-calculation-modes",children:C.filter((function(e){return"pmr"!==e.id})).map((function(e){return(0,j.jsxs)("div",{className:"lc-route-calculation-mode"+(c[e.id]?" lc-active":"")+(["bss"].includes(e.id)&&c.pmr?" lc-forbiden":""),onClick:function(){["bss"].includes(e.id)&&c.pmr||f.j.dispatch((0,h.Dl)(e))},onKeyUp:function(t){return(0,u.zQ)(t,(function(){["bss"].includes(e.id)&&c.pmr||f.j.dispatch((0,h.Dl)(e))}))},role:"radio",tabIndex:"0","aria-checked":c[e.id]?"true":"false","aria-label":e.name,children:[(0,j.jsx)("img",{src:(0,u.tx)("/assets/images/modes/"+e.id+".svg"),alt:"","aria-hidden":"true"}),e.name]},e.id)}))})}),G=function(e){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"bike"===e&&R||"traveler"===e&&O||"travelSolutions"===e&&w?"lc-collapse lc-profile lc-active":"lc-collapse lc-profile",onClick:function(){switch(e){case"traveler":O||(0,A.X3)({event:"map-openItineraryPanel",panel:(0,u.Tl)("route-calculation-walking-speed")}),f.j.dispatch((0,m.KM)(O));break;case"bike":R||(0,A.X3)({event:"map-openItineraryPanel",panel:(0,u.Tl)("route-calculation-bike-profile")}),f.j.dispatch((0,m.OM)(R));break;case"travelSolutions":w||(0,A.X3)({event:"map-openItineraryPanel",panel:(0,u.Tl)("route-calculation-travel-solutions")}),f.j.dispatch((0,m.NA)(w))}(0,u.XR)(a)},onKeyUp:function(t){return(0,u.zQ)(t,(function(){switch(e){case"traveler":O||(0,A.X3)({event:"map-openItineraryPanel",panel:(0,u.Tl)("route-calculation-walking-speed")}),f.j.dispatch((0,m.KM)(O));break;case"bike":R||(0,A.X3)({event:"map-openItineraryPanel",panel:(0,u.Tl)("route-calculation-bike-profile")}),f.j.dispatch((0,m.OM)(R));break;case"travelSolutions":w||(0,A.X3)({event:"map-openItineraryPanel",panel:(0,u.Tl)("route-calculation-travel-solutions")}),f.j.dispatch((0,m.NA)(w))}(0,u.XR)(a)}))},role:"button",tabIndex:"0","aria-expanded":"traveler"===e&&O||"bike"===e&&R||"travelSolutions"===e&&w?"true":"false","aria-controls":"lc-profile",children:[(0,u.Tl)("route-calculation-".concat("traveler"===e?"walking-speed":"bike"===e?"bike-profile":"travel-solutions")),(0,j.jsx)("span",{children:{bike:(0,j.jsxs)("div",{children:[void 0!==g.find((function(e){return!0===e.value}))&&(0,u.Tl)("route-calculation-bike-profile-"+g.find((function(e){return!0===e.value})).type)+",",void 0!==y.find((function(e){return!0===e.value}))&&(0,u.Tl)("route-calculation-bike-speed-"+y.find((function(e){return!0===e.value})).type)]}),traveler:(0,j.jsx)("div",{children:void 0!==_.find((function(e){return!0===e.value}))?(0,u.Tl)("route-calculation-walking-speed-"+_.find((function(e){return!0===e.value})).type):C.filter((function(e){return"pmr"===e.id})).filter((function(e){return c[e.id]})).map((function(e){return e.name}))}),travelSolutions:(0,j.jsx)("div",{children:void 0!==E.find((function(e){return!0===e.value}))&&(0,u.Tl)("route-calculation-travel-solution-"+E.find((function(e){return!0===e.value})).type)})}[e]}),(0,j.jsx)("div",{className:"lc-menu-item-arrow"+("traveler"===e&&O||"bike"===e&&R||"travelSolutions"===e&&w?" lc-active":"")})]}),(0,j.jsx)(p(),{className:"collapse-css-transition lc-profile",id:"lc-profile",isOpen:"bike"===e?R:"traveler"===e?O:w,children:function(t){return(0,j.jsx)("div",{className:"lc-"+t,children:H(e)})}})]})},H=function(e){return"traveler"===e?(0,j.jsx)("div",{className:"lc-route-calculation-profiles".concat(C.find((function(e){return"pmr"===e.id}))?" lc-route-calulation-profiles-include-pmr":""),role:"group","aria-labelledby":"lc-route-calculation-profiles",children:C.filter((function(e){return"pmr"===e.id})).concat(_).map((function(e){return"pmr"===e.id&&(e=k(k({},e),{},{type:"pmr",speed:null,value:!1})),(0,j.jsxs)("div",{className:e.id?"lc-route-calculation-mode"+(c[e.id]?" lc-active":""):"lc-route-calculation-walking-speed"+(!0===e.value?" lc-active":""),onClick:function(){return"pmr"===e.id?f.j.dispatch((0,h.Dl)(e)):f.j.dispatch((0,h.Kg)(e.type))},onKeyUp:function(t){return(0,u.zQ)(t,(function(){return"pmr"===e.id?f.j.dispatch((0,h.Dl)(e)):f.j.dispatch((0,h.Kg)(e.type))}))},role:"checkbox",tabIndex:"0","aria-checked":c[e.id]||e.value?"true":"false","aria-label":e.id?e.name:(0,u.Tl)("route-calculation-walking-speed-"+e.type),children:[(0,j.jsx)("img",{src:(0,u.tx)("/assets/images/modes/".concat(e.id?e.id:"walking-speed-"+e.type,".svg")),alt:e.type,"aria-hidden":"true"}),e.id?e.name:(0,u.Tl)("route-calculation-walking-speed-"+e.type)]},e.type)}))}):"bike"===e?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"lc-route-calculation-profiles",role:"group","aria-labelledby":"lc-route-calculation-profiles",children:g.map((function(e){return(0,j.jsxs)("div",{className:"lc-route-calculation-bike-profile"+(!0===e.value?" lc-active":""),onClick:function(){return f.j.dispatch((0,h.xi)(e.type))},onKeyUp:function(t){return(0,u.zQ)(t,(function(){return f.j.dispatch((0,h.xi)(e.type))}))},role:"checkbox",tabIndex:"0","aria-checked":e.value?"true":"false","aria-label":(0,u.Tl)("route-calculation-bike-profile-"+e.type),children:[(0,j.jsx)("img",{src:(0,u.tx)("/assets/images/modes/".concat("bike-profile-"+e.type,".svg")),alt:e.type,"aria-hidden":"true"}),(0,u.Tl)("route-calculation-bike-profile-"+e.type)]},e.type)}))}),(0,j.jsx)("div",{className:"lc-route-calculation-profiles",role:"group","aria-labelledby":"lc-route-calculation-profiles",children:y.map((function(e){return(0,j.jsxs)("div",{className:"lc-route-calculation-bike-speed"+(!0===e.value?" lc-active":""),onClick:function(){return f.j.dispatch((0,h.CI)(e.type))},onKeyUp:function(t){return(0,u.zQ)(t,(function(){return f.j.dispatch((0,h.CI)(e.type))}))},role:"checkbox",tabIndex:"0","aria-checked":e.value?"true":"false","aria-label":(0,u.Tl)("route-calculation-bike-speed-"+e.type),children:[(0,j.jsx)("img",{src:(0,u.tx)("/assets/images/modes/".concat("bike-speed-"+e.type,".svg")),alt:e.type,"aria-hidden":"true"}),(0,u.Tl)("route-calculation-bike-speed-"+e.type)]},e.type)}))})]}):"travelSolutions"===e?(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",{className:"lc-route-calculation-profiles",role:"group","aria-labelledby":"lc-route-calculation-profiles",children:E.map((function(e){return(0,j.jsxs)("div",{className:"lc-route-calculation-travel-solution"+(!0===e.value?" lc-active":""),onClick:function(){return f.j.dispatch((0,h.vh)(e.type))},onKeyUp:function(t){return(0,u.zQ)(t,(function(){return f.j.dispatch((0,h.vh)(e.type))}))},role:"checkbox",tabIndex:"0","aria-checked":e.value?"true":"false","aria-label":(0,u.Tl)("route-calculation-travel-solution-"+e.type),children:[(0,j.jsx)("img",{src:(0,u.tx)("/assets/images/modes/".concat("travel-solution-"+e.type,".svg")),alt:e.type,"aria-hidden":"true"}),(0,u.Tl)("route-calculation-travel-solution-"+e.type)]},e.type)}))})}):void 0},Y=(_.length>0||C.filter((function(e){return"pmr"===e.id})).length>0)&&!1!==(null===(t=JSON.parse(z||"{}"))||void 0===t?void 0:t.traveler_profile),F=y.length>0||g.length>0,B=E.length>0;return(0,j.jsx)("div",{className:"lc-prefs",children:(0,j.jsxs)("div",{className:"lc-buttons",children:[(0,j.jsxs)("div",{className:x?"lc-collapse lc-date lc-active":"lc-collapse lc-date",onClick:function(){f.j.dispatch((0,m.o8)(x)),(0,u.XR)(a)},onKeyUp:function(e){return(0,u.zQ)(e,(function(){f.j.dispatch((0,m.o8)(x)),(0,u.XR)(a)}))},role:"button",tabIndex:"0","aria-expanded":x?"true":"false","aria-controls":"lc-date","aria-label":(0,u.Tl)("aria-route-calculation-datetime",!1,{key:"type",value:L?(0,u.Tl)("departure"):(0,u.Tl)("arrival")},{key:"date",value:i?(0,u.Tl)("route-calculation-departure-now"):(0,b.Je)(v.date,l,"full-with-year")},{key:"hour",value:v.date.toLocaleTimeString(l,{hour:"2-digit",minute:"2-digit"})}),children:[L?(0,u.Tl)("departure"):(0,u.Tl)("arrival")," ",(0,j.jsx)("span",{children:i?(0,u.Tl)("route-calculation-departure-now"):(0,b.Je)(v.date,l,"full-with-year")+" "+(0,u.Tl)("route-calculation-departure-date-hours")+" "+v.date.toLocaleTimeString(l,{hour:"2-digit",minute:"2-digit"})}),(0,j.jsx)("div",{className:"lc-menu-item-arrow"+(x?" lc-active":"")})]}),(0,j.jsx)(p(),{className:"collapse-css-transition lc-date",id:"lc-date",isOpen:x,children:function(e){return(0,j.jsx)("div",{className:"lc-"+e,children:M})}}),B&&G("travelSolutions"),(0,j.jsxs)("div",{className:S?"lc-collapse lc-modes lc-active":"lc-collapse lc-modes",id:"lc-route-calculation-modes",onClick:function(){S||(0,A.X3)({event:"map-openItineraryPanel",panel:(0,u.Tl)("route-calculation-pref")}),f.j.dispatch((0,m.hK)(S)),(0,u.XR)(a)},onKeyUp:function(e){return(0,u.zQ)(e,(function(){f.j.dispatch((0,m.hK)(S)),(0,u.XR)(a)}))},role:"button",tabIndex:"0","aria-expanded":S?"true":"false","aria-controls":"lc-modes","aria-label":(0,u.Tl)("aria-route-calculation-preferences",!1,{key:"prefs",value:C.filter((function(e){return"pmr"!==e.id})).filter((function(e){return c[e.id]})).map((function(e){return e.name})).join(", ")}),children:[(0,u.Tl)("route-calculation-pref"),(0,j.jsx)("span",{children:C.filter((function(e){return"pmr"!==e.id})).filter((function(e){return c[e.id]})).map((function(e){return e.name})).join(", ")}),(0,j.jsx)("div",{className:"lc-menu-item-arrow"+(S?" lc-active":"")})]}),(0,j.jsx)(p(),{className:"collapse-css-transition lc-modes",id:"lc-modes",isOpen:S,children:function(e){return(0,j.jsx)("div",{className:"lc-"+e,children:U})}}),F&&G("bike"),Y&&G("traveler"),function(){if(z&&Object.keys(JSON.parse(z)).length>0){var e=function(e){switch(e){case"pmr":f.j.dispatch((0,h.Dl)(C.find((function(e){return"pmr"===e.id}))));break;case"allowDisruptions":f.j.dispatch((0,h.A1)(!T))}};return(0,j.jsxs)("div",{className:"lc-route-calculation-more-config",children:[!0===JSON.parse(z).disruptions_checkbox&&(0,j.jsx)("div",{className:"lc-route-calculation-checkbox",children:(0,j.jsxs)("label",{children:[(0,j.jsx)("img",{src:(0,u.tx)("/assets/images/informations.svg"),alt:"disruptions","aria-hidden":"true"}),(0,j.jsx)("span",{children:(0,u.Tl)("route-calculation-disruptions-journey-checkbox")}),(0,j.jsx)("input",{type:"checkbox",checked:T,onChange:function(){e("allowDisruptions")},"aria-checked":T?"true":"false","aria-label":(0,u.Tl)("aria-route-calculation-checkbox-avoid-disruptions")})]})}),!0===JSON.parse(z).pmr_checkbox&&(0,j.jsx)("div",{className:"lc-route-calculation-checkbox",children:(0,j.jsxs)("label",{children:[(0,j.jsx)("img",{src:(0,u.tx)("/assets/images/pmr.svg"),alt:"pmr","aria-hidden":"true"}),(0,j.jsx)("span",{children:(0,u.Tl)("route-calculation-pmr-journey-checkbox")}),(0,j.jsx)("input",{type:"checkbox",checked:c.pmr,onChange:function(){e("pmr")},"aria-checked":c.pmr?"true":"false","aria-label":(0,u.Tl)("route-calculation-pmr-journey-checkbox")})]})})]})}return null}()]})})},Z=function(e){var t,n,r,i=e.app.component,o=i.state,a=o.pois,l=o.places,s=o.tab,d=o.town,p=i.props,h=p.moduleData,_=p.searchIn,g=p.linesModes,b=p.radius,A=p.currentRadius,E=p.configApp;if(i.props.placeClicked&&0===s){var T=i.props,P=T.openedCollapse,O=T.placeClicked;if(O.cat_id===P&&!a[O.cat_id])for(var R in a)_&&a[R][O.cat_id]&&O.code===_?f.j.dispatch((0,m.f4)(g[0].name)):a[R][O.cat_id]&&f.j.dispatch((0,m.f4)(R))}h||(0===s?(f.j.dispatch((0,v.aD)(a)),f.j.dispatch((0,v.Kk)([]))):1===s&&(f.j.dispatch((0,v.aD)([])),f.j.dispatch((0,v.Kk)(l))));for(var w=function(e){if(!1===i.state.isSelectedLinesInAroundRadius){var t=(0,x.je)(e.sort((0,u.ck)("position","desc")),{clickThroughLines:!0===(0,u.UP)(X)});Promise.all(t).then((function(e){f.j.dispatch((0,S.l2)(e.flat())),f.j.dispatch((0,S.lO)(!0))})).catch((function(e){console.log("Error in get lines : ",e)})),i.setState({isSelectedLinesInAroundRadius:!0})}else f.j.dispatch((0,S.l2)([])),f.j.dispatch((0,S.lO)(!1)),i.setState({isSelectedLinesInAroundRadius:!1})},L=[],C=0,N=Object.keys(i.state.groups);C<N.length;C++){var k,I=N[C],M=D(i.state.groups[I]);try{for(M.s();!(k=M.n()).done;){var U=k.value;L.push(U)}}catch(e){M.e(e)}finally{M.f()}}return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(c.tU,{selectedIndex:i.state.tab||0,onSelect:function(e){return(0,u.c8)(i,e)},selectedTabClassName:"lc-active",selectedTabPanelClassName:"lc-active lc-scroll",className:"lc-react-tabs",children:[(0,j.jsxs)(c.wb,{className:"lc-tab-list",children:[(0,j.jsxs)(c.oz,{className:"lc-tab",children:[(0,u.Tl)("transport-tab"),(0,j.jsx)("br",{}),(0,j.jsx)("span",{children:d?d.name.replace(/arrondissement/i,""):(0,u.x$)("around")&&null!=b&&b.length?"".concat(null==b||null===(t=b.find((function(e){return e.value===A})))||void 0===t?void 0:t.time," ").concat((0,u.Tl)("time-around-tab-radius-unit")):(0,u.Tl)("time-around-tab")})]}),(0,j.jsxs)(c.oz,{className:"lc-tab",children:[(0,u.Tl)("places-tab"),(0,j.jsx)("br",{}),(0,j.jsx)("span",{children:d?d.name.replace(/arrondissement/i,""):(0,u.x$)("around")&&null!=b&&b.length?"".concat(null==b||null===(n=b.find((function(e){return e.value===A})))||void 0===n?void 0:n.time," ").concat((0,u.Tl)("time-around-tab-radius-unit")):(0,u.Tl)("time-around-tab")})]})]}),(0,j.jsxs)(c.Kp,{className:"lc-tab-panel","data-lc-scroll":0===i.state.tab?"scroll":"",children:[null!=E&&E.toggle_lines_in_around_radius&&(null==L?void 0:L.length)>0?(0,j.jsxs)("div",{className:"lc-around-toggle-lines-through-area",tabIndex:"0",role:"button",onKeyUp:function(e){return(0,u.zQ)(e,(function(){return w(L)}))},onClick:function(){return w(L)},children:[(0,u.Tl)("around-toggle-lines-through-area"),(0,j.jsx)("input",{type:"checkbox",checked:(null===(r=i.props.reactLines)||void 0===r?void 0:r.length)>0})]}):null,(0,y.Pk)(i)]}),(0,j.jsx)(c.Kp,{className:"lc-tab-panel","data-lc-scroll":1===i.state.tab?"scroll":"",children:f.j.dispatch((0,v.$q)(i.state.places))})]})})},$=function(e,t,n){var r,i,o,a;e.stopPropagation();var c,s,d,p=l.A.location,h=p.pathname,_=p.search,y=n.board,b=y.openedCollapse,E=y.thematicPlaces,T=n.app.component,P=(null==T||null===(r=T.state)||void 0===r?void 0:r.pois)||null;((0,g.i)({clicked:"thematic-item",module:null==T||null===(i=T.props)||void 0===i||null===(i=i.moduleData)||void 0===i?void 0:i.data,category:t.cat_id,id:t.id}),null!=T&&null!==(o=T.state)&&void 0!==o&&o.lastestSelectedPlace&&(null==T||null===(a=T.state)||void 0===a?void 0:a.lastestSelectedPlace)===t.id)||((0,A.X3)({event:"map-selectedPoi",name:t.name,category:t.cat,module:(0,u.Tl)(null!=T&&null!==(c=T.props)&&void 0!==c&&c.title?null==T||null===(s=T.props)||void 0===s?void 0:s.title:null==T||null===(d=T.props)||void 0===d||null===(d=d.moduleData)||void 0===d?void 0:d.title,!1)}),T.state&&T.setState({lastestSelectedPlace:t.id}));if((0,u.x$)("around"))["poi_type:stations"].includes(t.cat_id)?(0,u.g0)(t,P,E):(b!==t.cat_id&&f.j.dispatch((0,m.f4)(t.cat_id)),f.j.dispatch((0,v.xY)(t)));else if((0,u.x$)("multimobilities"))if(["poi_type:stations","poi_type:amenity:citiz","poi_type:amenity:parking"].includes(t.cat_id))f.j.dispatch((0,v.xY)(t)),(0,u.g0)(t,P,E);else{var x=(0,u._V)(l.A.location);delete x.id;var S=(0,u.vf)(x,{place:t.id});delete S.id,l.A.push(k(k({},l.A.location),{},{search:S})),setTimeout((function(){b!==t.cat_id&&f.j.dispatch((0,m.f4)(t.cat_id)),f.j.dispatch((0,v.xY)(t))}))}else t.coord?l.A.push({pathname:h,search:decodeURIComponent(_).includes(t.id)?"":"?place="+t.id}):T.setState({displayInformations:t.id})},ee=function(){var e=C(w().mark((function e(t,n){var r,i;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.j.getState().app.isMobile,!t){e.next=17;break}return e.prev=2,e.next=5,T.A.get("/api/favorites?token=".concat(t).concat(n?"&client_id="+n:""));case 5:return i=e.sent,f.j.dispatch((0,h.ep)(i.data)),e.abrupt("return",i.data);case 10:return e.prev=10,e.t0=e.catch(2),f.j.dispatch((0,m.TX)("cant-get-favs","line",(0,u.Tl)("error-cant-get-favs"))),(0,u.XR)(r),setTimeout((function(){f.j.dispatch((0,m.PR)("cant-get-favs")),(0,u.XR)(r)}),5e3),console.warn(e.t0),e.abrupt("return",null);case 17:return e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}(),te=function(){var e=C(w().mark((function e(t,n){var r,i,o,a=arguments;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:null,!n){e.next=22;break}if(e.prev=2,!(o=f.j.getState().app.favoritesData)){e.next=8;break}i=o,e.next=11;break;case 8:return e.next=10,ee(n,r);case 10:i=e.sent;case 11:if(!i){e.next=17;break}if(!t.id.startsWith("stop_")){e.next=16;break}return e.abrupt("return",i.find((function(e){return e.id===(null==t?void 0:t.stop_area)&&e.route===(null==t?void 0:t.route_id)})));case 16:return e.abrupt("return",i.find((function(e){return e.id===t.id})));case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),console.warn(e.t0);case 22:return e.abrupt("return",null);case 23:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t,n){return e.apply(this,arguments)}}(),ne=function(){var e=C(w().mark((function e(t,n){var r,i,o,a,c,s,d,p,h,v=arguments;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=v.length>2&&void 0!==v[2]?v[2]:null,i=f.j.getState().app.isMobile,!n){e.next=62;break}return e.next=5,te(t,n,r);case 5:if(o=e.sent,a=null,t.id.startsWith("line:")?a="line":t.id.startsWith("stop_")?a="stop":console.warn("to implement"),c={token:n,client_id:r,id:t.id.startsWith("stop_point")?t.stop_area:t.id,type:a,name:t.name},t.id.startsWith("stop_")&&(s=(0,u._V)(l.A.location),d=s.line||s.current||null,c.route_id=t.route_id,c.ligne_id=d?d.replace(/[_f|_b]([^_]*?)$/gim,""):"",c.suite_type="line"),o||!a){e.next=36;break}return c.id=t.id.startsWith("stop_point")?t.stop_area:t.id,e.prev=12,e.next=15,(0,T.A)({method:"post",url:"/api/favorites",params:c});case 15:e.t0=a,e.next="line"===e.t0?18:"stop"===e.t0?20:22;break;case 18:return f.j.dispatch((0,m.Bt)(t)),e.abrupt("break",24);case 20:return f.j.dispatch((0,m.rP)({id:t.id.startsWith("stop_point")?t.stop_area:t.id,type:a,name:t.name,route:t.id.startsWith("stop_point")?t.route_id:null})),e.abrupt("break",24);case 22:return console.warn("".concat(a," to implement")),e.abrupt("break",24);case 24:t.favorite=!0,e.next=34;break;case 27:e.prev=27,e.t1=e.catch(12),f.j.dispatch((0,m.TX)("add-fav-".concat(t.id),a,(0,u.Tl)("error-add-fav"))),(0,u.XR)(i),setTimeout((function(){f.j.dispatch((0,m.PR)("add-fav-".concat(t.id))),(0,u.XR)(i)}),5e3),p=e.t1.response&&e.t1.response.data?e.t1.response.data.id:e.t1,console.warn(p);case 34:e.next=58;break;case 36:return null!=o&&o.stop_id&&(c.id=o.stop_id),e.prev=37,e.next=40,(0,T.A)({method:"delete",url:"/api/favorites",params:c});case 40:e.t2=a,e.next="line"===e.t2?43:"stop"===e.t2?45:47;break;case 43:return f.j.dispatch((0,m.Bt)(null)),e.abrupt("break",48);case 45:return f.j.dispatch((0,m.rP)(null)),e.abrupt("break",48);case 47:return e.abrupt("break",48);case 48:t.favorite=!1,e.next=58;break;case 51:e.prev=51,e.t3=e.catch(37),f.j.dispatch((0,m.TX)("delete-fav-".concat(t.id),a,(0,u.Tl)("error-delete-fav"))),(0,u.XR)(i),setTimeout((function(){f.j.dispatch((0,m.PR)("delete-fav-".concat(t.id))),(0,u.XR)(i)}),5e3),h=e.t3.response&&e.t3.response.data?e.t3.response.data.id:e.t3,console.warn(h);case 58:if(!f.j.getState().app.favoritesData){e.next=62;break}return e.next=62,ee(n,r);case 62:return e.abrupt("return","No token");case 63:case"end":return e.stop()}}),e,null,[[12,27],[37,51]])})));return function(t,n){return e.apply(this,arguments)}}(),re=function(e,t){var n,r,i,o=e.app.component,a=e.board,l=a.placeClicked,c=a.isPlaceAvailibilityLoading,s=null==o||null===(n=o.state)||void 0===n?void 0:n.displayInformations,d=o.props.options,p=null===(r=o.props)||void 0===r||null===(r=r.moduleData)||void 0===r?void 0:r.sortByTown;if(0===t.length&&void 0!==(null===(i=o.props)||void 0===i||null===(i=i.moduleData)||void 0===i?void 0:i.overrideNoPlaceLabel))return(0,j.jsx)("div",{children:(0,u.Tl)("no-thematic-places-"+o.props.moduleData.data)});function m(t){return(0,j.jsx)("li",{className:"lc-place",children:(0,j.jsxs)("div",{onClick:function(n){$(n,t,e)},onKeyUp:function(n){return(0,u.zQ)(n,(function(){return $(n,t,e)}))},role:"button",tabIndex:"0",onMouseEnter:function(){var n;return f.j.dispatch((0,v.b2)(t,null===(n=(0,u.cX)(t,e.map.mapPlaces))||void 0===n||null===(n=n.leafletElement)||void 0===n?void 0:n._icon))},onMouseLeave:function(){return setTimeout((function(){var n;return f.j.dispatch((0,v.bu)(t,null===(n=(0,u.cX)(t,e.map.mapPlaces))||void 0===n||null===(n=n.leafletElement)||void 0===n?void 0:n._icon))}))},"aria-label":t.name,"aria-expanded":l&&l.id===t.id?"true":"false","aria-controls":"place-"+t.id,className:"lc-place-content"+(l&&t&&l.id===t.id?" lc-selected":""),children:[(0,j.jsxs)("span",{className:"lc-place-content-name"+(l&&t&&l.id===t.id?" lc-selected":""),children:["poi_type:stations"===t.cat_id?t.name.replace("Gare de ","").replace("Gare SNCF de ","").replace("gare de ",""):t.name,t.addPictoToName&&(0,j.jsx)("img",{className:"lc-place-content-name-picto",src:(0,u.tx)("/assets/images/places/"+t.cat_id.replace("poi_type:","").replace(":","_")+".svg"),alt:"","aria-hidden":"true"})]}),s===t.id&&(0,j.jsx)("span",{className:"lc-informations-display",dangerouslySetInnerHTML:{__html:t.informations}}),l&&l.error&&(0,j.jsxs)("div",{className:"lc-"+l.error.severity,children:[(0,j.jsx)("img",{src:(0,u.tx)("/assets/images/error.svg"),alt:(0,u.Tl)("severity-error")}),l.error.message]}),c===t.id&&(0,j.jsx)("div",{className:"lc-loading","data-lc-loading":!0,children:(0,j.jsx)("img",{src:(0,u.tx)("/assets/images/loading.gif"),width:20,alt:"","aria-hidden":"true"})}),l&&!l.error&&l.id===t.id&&(0,j.jsx)(E.A,{place:l,displayon:"board",options:d})]})},t.id)}if(p){var h,_=null,y=[],g=D((0,P.Ul)(t.sort((function(e,t){return e.name.localeCompare(t.name)})),"town"));try{for(g.s();!(h=g.n()).done;){var b=h.value;_&&_===b.town||(_=b.town,y.push((0,j.jsx)("li",{className:"lc-place-town-header",children:b.town},b.town))),y.push(m(b))}}catch(e){g.e(e)}finally{g.f()}return y}return t.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){return m(e)}))}},3727:function(e,t,n){n.d(t,{hi:function(){return At},KR:function(){return _t},mj:function(){return Tt},je:function(){return gt},T2:function(){return Pt},GL:function(){return Lt},hp:function(){return jt},fx:function(){return yt},Tl:function(){return Et},wO:function(){return xt},d8:function(){return Ft},HD:function(){return Ht},pX:function(){return Rt},hQ:function(){return wt},vs:function(){return Ct},xh:function(){return Ot},Ih:function(){return Yt},bC:function(){return Nt},HK:function(){return kt},vI:function(){return It},Y_:function(){return Dt},d:function(){return Mt}});var r,i,o,a,l,c,s,u=n(5471),d=n(3042),p=n(3481),f=n.n(p),m=n(6857),h=n(8413),v=n(6026),_=n(2355),y=n(3847),g=n(402),b=n(707),A=n(9902),E=n(1290),T=n(1576),P=n(3052),x=n(9742),S=n(8203),j=n(4457),O=n(4877),R=n(2951),w=n(4305),L=n(9736),C=n(6293),N=n(35),k=n(6297),I=n(1225),D=n(2391),M=n(4848),U='[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',G="image",H=function(e){var t=e.lines,n=e.popup,r=(0,I.d4)((function(e){return e.app})),i=r.lock,o=r.linesModes,a=r.size,l=r.lines,c=r.modules,s=G||"color",u=!1,d=Math.ceil(t.length/2),p=!i,f=(0,I.wA)(),m=function(e){if((0,C.i)({clicked:"line",id:e.id}),f((0,P.M7)()),n&&n.remove(),(0,L.x$)("around"))x.A.push({pathname:"/around",search:"?line="+e.id});else if(c.find((function(e){return"lines"===e.id})))x.A.push({pathname:"/lines",search:"?current="+e.id+(x.A.location.pathname.length>1?"&from="+x.A.location.pathname.substring(1):"")});else if(c.find((function(e){return"multimobilities"===e.id}))){var t=c.find((function(e){return"multimobilities"===e.id})).mobilities.find((function(e){return e.data.map((function(e){return e.type})).includes("lines")}));t&&x.A.push({pathname:"/multimobilities",search:"?mob="+t.id+"&current="+e.id})}else console.warn("No module with lines")},v=function(e){f((0,P.M7)(e))},_=function(){f((0,P.M7)())};return(0,M.jsxs)("div",{className:"lc-infobox",children:[(0,M.jsx)("div",{className:"lc-infobox-title",children:(0,L.Tl)("lignes-through-this-area")}),(0,M.jsx)("div",{className:"lc-infobox-content",children:(0,M.jsx)("div",{className:"lc-infobox-lines lc-".concat(a).concat(s.includes("WithDirection")?" lc-line-with-direction":"").concat(p?" lc-interactive":""),style:s.includes("WithRouteDirection")?{gridTemplateRows:"repeat(".concat(d,", 1fr)")}:{},children:(0,O.Ul)(t.map((function(e){return(0,L.fV)(l,e)})),"position").map((function(e){if(U){var t=JSON.parse(U).find((function(t){var n,r;return(null===(n=t.lines)||void 0===n?void 0:n.includes(e.id))||(null===(r=t.networks)||void 0===r?void 0:r.includes(e.network))}));t&&(s=t.type,u=!0===t.prefixNetwork)}switch(s){case"modeWithDirection":var n=o.find((function(t){return t.modes.includes(e.mode)}));return(0,M.jsx)("div",{className:"lc-attribute-line",onClick:function(){return m(e)},onKeyUp:function(t){return(0,L.zQ)(t,(function(){return m(e)}))},onMouseEnter:function(){return v(e)},onMouseLeave:function(){return _()},role:p?"button":"img",tabIndex:"0","aria-label":(0,L.Tl)("aria-line",!1,{key:"code",value:e.code}),children:(0,M.jsxs)(D.A,{line:e,styleLine:s,inpopup:!0,children:[(0,M.jsx)("div",{className:"lc-line lc-mode",style:{background:"#"+e.color,color:(0,h.N)("#"+e.color)>.5?"#333":"#fff"},children:n.name}),(0,M.jsx)("div",{className:"lc-name",children:e.name})]})},e.id);case"codeWithDirection":return(0,M.jsx)("div",{className:"lc-attribute-line",onClick:function(){return m(e)},onKeyUp:function(t){return(0,L.zQ)(t,(function(){return m(e)}))},onMouseEnter:function(){return v(e)},onMouseLeave:function(){return _()},role:p?"button":"img",tabIndex:"0","aria-label":(0,L.Tl)("aria-line",!1,{key:"code",value:e.code}),children:(0,M.jsxs)(D.A,{line:e,styleLine:s,inpopup:!0,children:[(0,M.jsx)("div",{className:"lc-line lc-code",style:{background:"#"+e.color,color:(0,h.N)("#"+e.color)>.5?"#333":"#fff"},children:e.code}),(0,M.jsx)("div",{className:"lc-name",children:e.name})]})},e.id);case"imageWithRouteDirection":case"image":return(0,M.jsxs)("div",{className:"lc-line",onClick:function(){return m(e)},onKeyUp:function(t){return(0,L.zQ)(t,(function(){return m(e)}))},onMouseEnter:function(){return v(e)},onMouseLeave:function(){return _()},role:p?"button":"img",tabIndex:"0","aria-label":(0,L.Tl)("aria-line",!1,{key:"code",value:e.code}),children:[(0,M.jsx)(D.A,{line:e,styleLine:s,inpopup:!0,children:(0,M.jsx)("img",{src:(0,L.tx)("/assets/images/lines/"+(u?e.network+"-":"")+e.code+".svg"),alt:e.code,"aria-hidden":"true"})}),"imageWithRouteDirection"===s&&e.direction&&(0,M.jsx)("div",{className:"lc-name",children:e.direction})]},e.id);case"color":return(0,M.jsx)("div",{className:"lc-line",onClick:function(){return m(e)},onKeyUp:function(t){return(0,L.zQ)(t,(function(){return m(e)}))},onMouseEnter:function(){return v(e)},onMouseLeave:function(){return _()},role:p?"button":"img",tabIndex:"0","aria-label":(0,L.Tl)("aria-line",!1,{key:"code",value:e.code}),children:(0,M.jsx)(D.A,{line:e,styleLine:s,inpopup:!0,children:(0,M.jsx)("div",{className:"lc-line-code",style:{background:"#"+e.color,color:(0,h.N)(e.color)>.5?"#333":"#fff"},children:e.code})})},e.id);default:return""}}))})})]})},Y=n(961),F=n(1198),B=n(6540),V=n(1912),z=n(5885),X=n(7293),K=n(1399);function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){Q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=q(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==q(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return $(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ee(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var te,ne,re,ie,oe,ae,le,ce,se=X.A.textColor,ue=X.A.borderXS,de=X.A.secondarycolor,pe=V.Ay.div(r||(r=ee(["\n  cursor: default;\n  color: ",";\n"])),(function(){return se})),fe=V.Ay.div(i||(i=ee(["\n  display: flex;\n  gap: 5px;\n  &:not(:first-child) {\n    padding-top: 10px;\n    border-top: solid "," 1px;\n    margin-top: 5px;\n  }\n  &:last-child {\n    padding-bottom: 0px;\n    margin-bottom: 0px;\n  }\n\n  .lc-uiline {\n    width: 30px !important;\n    height: 30px !important;\n    margin-top: 7px;\n  }\n"])),(function(){return ue})),me=V.Ay.div(o||(o=ee(["\n  &:not(:first-child) {\n    margin-top: 0px;\n  }\n  display: flex;\n  flex-direction: column;\n  padding: 5px;\n  border-radius: 5px;\n  font-size: 0.9em;\n  &:hover {\n    background-color: ",";\n  }\n  cursor: ",";\n"])),(function(e){return e.canClickLine?de:"transparent"}),(function(e){return e.canClickLine?"pointer":"default !important"})),he=V.Ay.div(a||(a=ee(["\n  white-space: ",";\n  display: flex;\n  align-items: center;\n  gap: 2.5px;\n  font-weight: bold;\n"])),(function(e){return e.isMobile?"":"nowrap"})),ve=V.Ay.div(l||(l=ee(["\n  display: flex;\n  gap: ",";\n  flex-direction: ",";\n  margin-top: ",";\n  white-space: ",";\n  .lc-schedule {\n    img {\n      width: 12px;\n      margin-left: 5px;\n    }\n  }\n"])),(function(e){return!0===e.flexDirectionRow?"5px":"20px"}),(function(e){return!0===e.flexDirectionRow?"column":"row"}),(function(e){return e.marginTop?"5px":"0px"}),(function(e){return!0===e.flexDirectionRow?"nowrap":""})),_e=V.Ay.div(c||(c=ee(["\n  .lc-no-schedule-today {\n    margin-top: 5px;\n    margin-left: ",";\n    ","\n    img {\n      width: 15px;\n      ","\n\n      margin-right: 5px;\n    }\n  }\n"])),(function(e){return e.marginLeft?e.marginLeft:"0px"}),(function(e){return e.displayFlex?"display: flex; align-items: flex-start;":""}),(function(e){return e.displayFlex?"":"margin-bottom: 2px;\n      margin-bottom: ".concat((function(e){return e.noMarginBottomImage?"0px":"2.5px"}),";")})),ye=V.Ay.div(s||(s=ee(["\n  font-size: 0.8em;\n  cursor: pointer;\n  display: inline-block;\n  margin: 0px 7px "," 7px;\n  white-space: nowrap;\n  text-decoration-line: underline;\n"])),(function(e){return e.marginBottom?"7px":"0px"})),ge=function(e){var t,n,r,i,o,a=e.stop,l=e.componentState,c=e.dataKey,s=(0,I.d4)((function(e){return e.app})),u=s.configApp,p=s.language,f=s.component,m=s.lock,h=s.isMobile,v=s.areas,_=s.linesModes,y=(0,I.d4)((function(e){return e.board})),g=y.linesSchedules,A=y.disruptionsInLine,T=(0,I.d4)((function(e){return e.map})).openedMarker,x=(0,I.wA)(),S=f.props.options,j=f.state,O=j.stopsList,w=j.currentLine,N=!1!==(null==S||null===(t=S.features)||void 0===t?void 0:t["change-line"]),k=(0,K.r)(),U=[],G=v.find((function(e){return e.id===a.stop_area}));if(G){var H,Y=Z(G.lines);try{var V=function(){var e=H.value;a.lines.find((function(t){return t.id===e.id}))||U.push(e)};for(Y.s();!(H=Y.n()).done;)V()}catch(e){Y.e(e)}finally{Y.f()}}var X=(null==O||null===(n=O.find((function(e){return e.id===a.id})))||void 0===n?void 0:n.terminus)&&a.id===(null===(r=O[(null==O?void 0:O.length)-1])||void 0===r?void 0:r.id);(0,B.useEffect)((function(){setTimeout((function(){var e;null!=a&&null!==(e=a.ref)&&void 0!==e&&e.leafletElement&&(0,L.tK)(a.ref.leafletElement,a)}))}),[a,g]);(0,B.useEffect)((function(){var e,t;((0,L.x$)("around")||(0,L.x$)("route-calculation"))&&(null==T?void 0:T.id)===a.id&&(null===(e=a.lines)||void 0===e?void 0:e.length)<=2&&(t={stop:a.id,count:99,extend:7},(0,d.A)({url:"/api/schedules",params:t}).then((function(e){var t;if((null==e||null===(t=e.data)||void 0===t?void 0:t.length)>0){var n,r=[],i=Z(e.data);try{for(i.s();!(n=i.n()).done;){var o,l=n.value,c=Z(l.date_times);try{for(c.s();!(o=c.n()).done;){var s=o.value;r.push(J(J({},s),{},{route_id:l.route_id}))}}catch(e){c.e(e)}finally{c.f()}}}catch(e){i.e(e)}finally{i.f()}var u,d=[],p=Z(e.data);try{for(p.s();!(u=p.n()).done;){var f=u.value;a.linesTerminus||(a.linesTerminus={}),a.linesTerminus[f.route_id]="terminus"===f.additional_informations;var m,h=Z(f.date_times);try{for(h.s();!(m=h.n()).done;){var v=m.value;d.push({time:v.date_time,realtime:"realtime"===v.data_freshness,extend:!0,equipments:v.equipments?v.equipments:[],destination:!!v.destination&&v.destination,route:v.route?v.route:f.route_id?f.route_id:void 0,stop_point:a.id})}}catch(e){h.e(e)}finally{h.f()}}}catch(e){p.e(e)}finally{p.f()}x((0,E.AK)(d))}})).catch((function(e){console.log("Error in get schedules : ",e)})))}),[T,G]);var q=function(e,t,n){e.stopPropagation(),t&&!m&&N&&(k.query.current?k.query.current!=="".concat(t.id,"_").concat(t.direction_id):k.query.line!=="".concat(t.id,"_").concat(t.direction_id))&&((0,C.i)({clicked:"line",id:t.id}),x((0,P.H7)(t,n)))},W=function(e,t){var n="";(0,L.x$)("around")?n="&from=around"+(k.query.line?"&fromline=".concat(k.query.line):""):(0,L.x$)("route-calculation")?n="&from=route-calculation":"/"===k.pathname?n="&from=entrance":(0,L.x$)("lines")&&k.query.stop&&!k.query.current?n="&from=".concat(k.query.stop):(0,L.x$)("lines")&&k.query.current&&(n="&from=".concat(k.query.current)),"area"===t&&k.push("/lines?stop_area=".concat(a.stop_area).concat(n)),"stop"===t&&k.push("/lines?stop=".concat(a.id).concat(n)),e.stopPropagation(),e.preventDefault()};if((null===(i=a.lines)||void 0===i?void 0:i.length)>2||a.id!==(null==T?void 0:T.id)||X){var Q,$,ee=!1;if(k.query.current||k.query.line){var te=k.query.current||k.query.line;ee=a.lines.find((function(e){return te.includes("_f")?e.id===(null==te?void 0:te.split("_f")[0]):null!=te&&te.includes("_b")?e.id===te.split("_b")[0]:e.id===te}))}return(0,M.jsxs)(M.Fragment,{children:[a.id===(null==T?void 0:T.id)&&!0!==X&&(null==g||null===(Q=g.filter((function(e){return e.stop_point===(null==a?void 0:a.id)})))||void 0===Q?void 0:Q.length)>0&&0===(null==g?void 0:g.filter((function(e){var t;return w?(null==w||null===(t=w.routes)||void 0===t||null===(t=t.find((function(e){return e.direction_id===w.direction_id})))||void 0===t?void 0:t.route_id)===e.route&&e.stop_point===(null==a?void 0:a.id)&&!(0,R.wQ)((0,R._k)(e.time)):e.stop_point===(null==a?void 0:a.id)&&!(0,R.wQ)((0,R._k)(e.time))})).length)?(0,M.jsx)(_e,{marginLeft:"7.5px",noMarginBottomImage:!0,children:(0,M.jsxs)("div",{className:"lc-no-schedule-today",tabIndex:"0",role:"button",children:[(0,M.jsx)("img",{src:(0,L.tx)("/assets/images/informations.svg"),alt:"information","aria-hidden":"true"}),ee?(0,L.Tl)("no-schedule-today-for-line",!1,{key:"code",value:null===($=ee)||void 0===$?void 0:$.code}):(0,L.Tl)("no-schedule-today")]})}):null,Ht(l,a,c,{buttonSeeMoreSchedulesStopArea:(0,M.jsx)(ye,{onClick:function(e){return W(e,"area")},marginBottom:!0,children:(0,L.Tl)("popup-schedules-lines-see-more-schedules-area")}),buttonSeeMoreSchedulesStopPoint:(0,M.jsx)(ye,{onClick:function(e){return W(e,"stop")},marginBottom:!0,children:(0,L.Tl)("popup-schedules-lines-see-more-schedules-stop")})})]})}return(0,M.jsxs)(pe,{children:[null==a||null===(o=a.lines)||void 0===o||null===(o=o.filter((function(e){var t,n=Z(_);try{for(n.s();!(t=n.n()).done;){if(t.value.modes.includes(e.mode))return!0}}catch(e){n.e(e)}finally{n.f()}return!1})))||void 0===o?void 0:o.map((function(e){var t,n,r,i,o,l,c,s,d=null==g?void 0:g.filter((function(t){return t.route===e.route_id&&t.stop_point===a.id})).map((function(e){return e.destination})).filter((function(e,t,n){return n.indexOf(e)===t}));return d.length>1?d.map((function(t){var n,r,i,o,l,c,s;return(0,M.jsxs)(fe,{children:[(0,M.jsx)("div",{className:"",children:(0,M.jsx)(D.A,{line:e,styleLine:"image",children:(0,M.jsx)(b.D,{line:e,image:null===(n="image")?void 0:n.includes("image")})})}),(0,M.jsxs)(me,{onClick:function(t){return q(t,e,a)},onKeyUp:function(t){return(0,L.zQ)(t,(function(){return q(t,e,a)}))},role:N?"button":"img",canClickLine:N&&k.query.current?k.query.current!=="".concat(e.id,"_").concat(e.direction_id):k.query.line!=="".concat(e.id,"_").concat(e.direction_id),children:[(0,M.jsxs)(he,{isMobile:h,children:[(0,L.Tl)("schedules-to")," ",t||e.direction,(0,M.jsx)(F.A,{pmr:null==a?void 0:a.pmr,noAria:!0})]}),(0,M.jsx)(ve,{children:!0!==(null==u?void 0:u.no_schedule_today_label)&&0===g.filter((function(n){return n.route===e.route_id&&n.stop_point===a.id&&n.destination===t})).length?(0,M.jsx)("div",{children:(0,L.Tl)("no-schedules")}):!0===(null==u?void 0:u.no_schedule_today_label)&&0===(null===(r=g.filter((function(n){return n.route===e.route_id&&n.stop_point===a.id&&n.destination===t})))||void 0===r?void 0:r.filter((function(e){return e&&e.time&&new Date((0,R._k)(e.time)).getDate()===(new Date).getDate()})).length)?(0,M.jsx)(_e,{displayFlex:!0,children:(0,M.jsxs)("div",{className:"lc-no-schedule-today",tabIndex:"0",role:"button",children:[(0,M.jsx)("img",{src:(0,L.tx)("/assets/images/informations.svg"),alt:"information","aria-hidden":"true"}),(0,L.Tl)("no-schedule-today-for-line",!1,{key:"code",value:null==e?void 0:e.code})]})}):null}),(null==A?void 0:A.length)>0&&(null==f||null===(i=f.state)||void 0===i||null===(i=i.currentLine)||void 0===i?void 0:i.id)===e.id&&(null===(o=(0,L.xA)(A,a,null==f||null===(l=f.state)||void 0===l?void 0:l.currentLine))||void 0===o||null===(o=o.filter((function(e){return"blocking"===e.severity})))||void 0===o?void 0:o.length)>0?(0,M.jsx)("div",{children:(0,L.Tl)("no-schedules")}):(0,M.jsx)(ve,{marginTop:!0,flexDirectionRow:!0===(null==u?void 0:u.no_schedule_today_label)&&0===(null===(c=g.filter((function(n){return n.route===e.route_id&&n.stop_point===a.id&&n.destination===t})))||void 0===c?void 0:c.filter((function(e){return e&&e.time&&new Date((0,R._k)(e.time)).getDate()===(new Date).getDate()})).length),children:null==g||null===(s=g.filter((function(n){return n.route===e.route_id&&n.stop_point===a.id&&n.destination===t})))||void 0===s||null===(s=s.filter((function(e,t){return t<2})))||void 0===s?void 0:s.map((function(e,t){return(0,M.jsx)(z.A,{configApp:u,language:p,schedule:e},"schedule-".concat(t))}))})]})]},e.id+e.route_id+""+t)})):(0,M.jsxs)(fe,{children:[(0,M.jsx)("div",{className:"",children:(0,M.jsx)(D.A,{line:e,styleLine:"image",children:(0,M.jsx)(b.D,{line:e,image:null===(t="image")?void 0:t.includes("image")})})}),(0,M.jsxs)(me,{onClick:function(t){return q(t,e,a)},onKeyUp:function(t){return(0,L.zQ)(t,(function(){return q(t,e,a)}))},role:N?"button":"img",canClickLine:N&&k.query.current?k.query.current!=="".concat(e.id,"_").concat(e.direction_id):k.query.line!=="".concat(e.id,"_").concat(e.direction_id),children:[(0,M.jsxs)(he,{isMobile:h,children:[(0,L.Tl)("schedules-to")," ",e.direction,(0,M.jsx)(F.A,{pmr:null==a?void 0:a.pmr,noAria:!0})]}),(0,M.jsx)(ve,{children:!0!==(null==u?void 0:u.no_schedule_today_label)&&0===g.filter((function(t){return t.route===e.route_id&&t.stop_point===a.id})).length?(0,M.jsx)("div",{children:(0,L.Tl)("no-schedules")}):!0===(null==u?void 0:u.no_schedule_today_label)&&a.linesTerminus&&!0!==a.linesTerminus[e.route_id]&&0===(null===(n=g.filter((function(t){return t.route===e.route_id&&t.stop_point===a.id})))||void 0===n?void 0:n.filter((function(e){return e&&e.time&&new Date((0,R._k)(e.time)).getDate()===(new Date).getDate()})).length)?(0,M.jsx)(_e,{displayFlex:!0,children:(0,M.jsxs)("div",{className:"lc-no-schedule-today",tabIndex:"0",role:"button",children:[(0,M.jsx)("img",{src:(0,L.tx)("/assets/images/informations.svg"),alt:"information","aria-hidden":"true"}),(0,L.Tl)("no-schedule-today-for-line",!1,{key:"code",value:null==e?void 0:e.code})]})}):!0===(null==u?void 0:u.no_schedule_today_label)&&a.linesTerminus&&!0===a.linesTerminus[e.route_id]&&0===(null===(r=g.filter((function(t){return t.route===e.route_id&&t.stop_point===a.id})))||void 0===r?void 0:r.filter((function(e){return e&&e.time&&new Date((0,R._k)(e.time)).getDate()===(new Date).getDate()})).length)?(0,M.jsx)("div",{children:(0,L.Tl)("stop-terminus")}):null}),(null==A?void 0:A.length)>0&&(null==f||null===(i=f.state)||void 0===i||null===(i=i.currentLine)||void 0===i?void 0:i.id)===e.id&&(null===(o=(0,L.xA)(A,a,null==f||null===(l=f.state)||void 0===l?void 0:l.currentLine))||void 0===o||null===(o=o.filter((function(e){return"blocking"===e.severity})))||void 0===o?void 0:o.length)>0?(0,M.jsx)("div",{children:(0,L.Tl)("no-schedules")}):(0,M.jsx)(ve,{marginTop:!0,flexDirectionRow:!0===(null==u?void 0:u.no_schedule_today_label)&&0===(null===(c=g.filter((function(t){return t.route===e.route_id&&t.stop_point===a.id})))||void 0===c?void 0:c.filter((function(e){return e&&e.time&&new Date((0,R._k)(e.time)).getDate()===(new Date).getDate()})).length),children:null==g||null===(s=g.filter((function(t){return t.route===e.route_id&&t.stop_point===a.id})))||void 0===s||null===(s=s.filter((function(e,t){return t<2})))||void 0===s?void 0:s.map((function(e,t){return(0,M.jsx)(z.A,{configApp:u,language:p,schedule:e},"schedule-".concat(t))}))})]})]},e.id+e.route_id)})),(0,L.x$)("lines")&&k.query.stop!==a.id?null:(0,M.jsx)(ye,{onClick:function(e){return W(e,"stop")},marginBottom:(null==U?void 0:U.length)>0,children:(0,L.Tl)("popup-schedules-lines-see-more-schedules-stop")}),Ht(l,a,c,{onlyProximityLines:!0,noAria:!0}),(0,L.x$)("lines")&&k.query.stop!==a.id?null:(null==U?void 0:U.length)>0?(0,M.jsx)(ye,{onClick:function(e){return W(e,"area")},children:(0,L.Tl)("popup-schedules-lines-see-more-schedules-area")}):null]})};function be(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Ae=X.A.borderXS,Ee=X.A.secondarycolor,Te=X.A.textColor,Pe=V.Ay.div(te||(te=be(["\n  cursor: default;\n  color: ",";\n"])),(function(){return Te})),xe=V.Ay.div(ne||(ne=be(["\n  display: flex;\n  gap: 5px;\n  &:not(:first-child) {\n    padding-top: 10px;\n    border-top: solid "," 1px;\n    margin-top: 5px;\n  }\n  &:last-child {\n    padding-bottom: 0px;\n    margin-bottom: 0px;\n  }\n\n  .lc-uiline {\n    width: 30px !important;\n    height: 30px !important;\n    margin-top: 7px;\n  }\n"])),(function(){return Ae})),Se=V.Ay.div(re||(re=be(["\n  flex-grow: 1;\n  font-size: 0.9em;\n"]))),je=V.Ay.div(ie||(ie=be(["\n  &:not(:first-child) {\n    margin-top: 0px;\n  }\n  display: flex;\n  align-items: center;\n  padding: 5px;\n  border-radius: 5px;\n  &:hover {\n    background-color: ",";\n  }\n  ","\n"])),(function(e){return e.canClickLine?Ee:"transparent"}),(function(e){return e.canClickLine?"\n      cursor: pointer;\n ":""})),Oe=V.Ay.div(oe||(oe=be(["\n  white-space: ",";\n  font-weight: 700;\n  div {\n    display: inline-block;\n    height: 12px !important;\n    width: 12px !important;\n  }\n"])),(function(e){return e.isMobile?"":"nowrap"})),Re=V.Ay.div(ae||(ae=be(["\n  flex-grow: 1;\n"]))),we=V.Ay.div(le||(le=be(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0px 20px;\n\n  .lc-schedule {\n    img {\n      width: 12px;\n      margin-left: 5px;\n    }\n  }\n"]))),Le=V.Ay.div(ce||(ce=be(["\n  font-size: 0.8em;\n  cursor: pointer;\n  margin: 0px "," 0px ",";\n  display: inline-block;\n  text-wrap: nowrap;\n  text-decoration-line: underline;\n"])),(function(e){return e.noLeftMargin?"0px":"7px"}),(function(e){return e.noLeftMargin?"0px":"7px"})),Ce=function(e){var t,n,r,i=e.area,o=e.componentState,a=e.dataKey,l=(0,I.d4)((function(e){return e.app})),c=l.configApp,s=l.language,u=l.component,p=l.lines,f=l.stops,m=l.isMobile,h=(0,I.d4)((function(e){return e.board})).linesSchedules,v=(0,I.d4)((function(e){return e.map})).openedMarker,_=(0,I.wA)(),y=u.props.options,g=!1!==(null==y||null===(t=y.features)||void 0===t?void 0:t["change-line"]),A=(0,K.r)();(0,B.useEffect)((function(){setTimeout((function(){var e;null!=i&&null!==(e=i.ref)&&void 0!==e&&e.leafletElement&&(0,L.tK)(i.ref.leafletElement,i)}))}),[h]),(0,B.useEffect)((function(){var e;!(0,L.x$)("around")||(null==v?void 0:v.id)!==i.id||(null===(e=(0,L.Am)(i.lines,"id"))||void 0===e?void 0:e.length)>2||d.A.get("/api/schedules?area=".concat(i.id).concat("&extend=".concat(7),"&count=10")).then((function(e){var t;(null==e||null===(t=e.data)||void 0===t?void 0:t.length)>0&&_((0,E.AK)(e.data))})).catch((function(e){console.log("Error in get schedules : ",e)}))}),[v,i]);var T=function(e,t,n){if(g){var r="";(0,L.x$)("around")?r="&from=around"+(A.query.line?"&fromline=".concat(A.query.line):""):(0,L.x$)("route-calculation")?r="&from=route-calculation":"/"===A.pathname?r="&from=entrance":(0,L.x$)("lines")&&A.query.stop_area&&!A.query.current?r="&from=".concat(A.query.stop_area):(0,L.x$)("lines")&&A.query.current&&(r="&from=".concat(A.query.current)),A.push("/lines?current=".concat(t.id,"_").concat(n.direction_id,"&stop=").concat(i.id).concat(r))}return e.stopPropagation(),e.preventDefault(),!1},P=function(){A.push("/lines?stop_area=".concat(i.id).concat((0,L.x$)("around")?"&from=around":"/"===A.pathname?"&from=entrance":""))};return(null===(n=(0,L.Am)(i.lines,"id"))||void 0===n?void 0:n.length)>2||(null==v?void 0:v.id)!==i.id?(0,M.jsxs)(M.Fragment,{children:[Ht(o,i,a),(0,L.x$)("lines")||"/"===A.pathname?null:(0,M.jsx)(Le,{onClick:function(){return P()},children:(0,L.Tl)("popup-schedules-lines-see-more-schedules-area")})]}):(0,M.jsxs)(Pe,{className:"lc-lines-going-through-stoparea",children:[null===(r=(0,L.Am)(i.lines,"id"))||void 0===r?void 0:r.map((function(e){var t,n;return(0,M.jsxs)(xe,{className:"lc-lines-going-through-stoparea-line",children:[(0,M.jsx)("div",{className:"",children:(0,M.jsx)(D.A,{line:e,styleLine:"image",children:(0,M.jsx)(b.D,{line:e,image:null===(t="image")?void 0:t.includes("image")})})}),(0,M.jsx)(Se,{children:null===(n=p.find((function(t){return t.id===e.id})))||void 0===n?void 0:n.routes.map((function(t){var n,r=(0,L.Am)((null==h||null===(n=h.find((function(e){return e.route_id===t.route_id})))||void 0===n||null===(n=n.date_times)||void 0===n?void 0:n.map((function(e){return e.destination})))||[]);return null==r?void 0:r.map((function(n,r){var o,a,l,u,d;return(0,M.jsx)(je,{onClick:function(n){return T(n,e,t)},onKeyUp:function(n){return(0,L.zQ)(n,T(n,e,t))},tabIndex:"0",role:"button","aria-label":(0,L.Tl)("aria-lines-stop-area-open-line-direction",!1,{key:"line",value:e.code},{key:"direction",value:n}),canClickLine:g,children:(0,M.jsxs)(Re,{children:[(0,M.jsxs)(Oe,{isMobile:m,children:[(0,L.Tl)("schedules-to")," ",n,(0,M.jsx)(F.A,{noAria:!0,pmr:null===(o=f.find((function(e){return e.stop_area===i.id&&e.lines.find((function(e){return e.route_id===t.route_id}))})))||void 0===o?void 0:o.pmr})]}),(0,M.jsx)(we,{children:0==(null===(a=h.find((function(e){return e.route_id===t.route_id})))||void 0===a||null===(a=a.date_times)||void 0===a||null===(a=a.filter((function(e){return e.destination===n})))||void 0===a?void 0:a.length)&&"terminus"===(null===(l=h.find((function(e){return e.route_id===t.route_id})))||void 0===l?void 0:l.additional_informations)?(0,M.jsx)("div",{children:(0,L.Tl)("stop-terminus")}):(null===(u=h.find((function(e){return e.route_id===t.route_id})))||void 0===u||null===(u=u.date_times)||void 0===u||null===(u=u.filter((function(e){return e.destination===n})))||void 0===u?void 0:u.length)>0?null===(d=h.find((function(e){return e.route_id===t.route_id})))||void 0===d||null===(d=d.date_times)||void 0===d||null===(d=d.filter((function(e){return e.destination===n})))||void 0===d||null===(d=d.filter((function(e,t){return t<2})))||void 0===d?void 0:d.map((function(e,t){return(0,M.jsx)(z.A,{configApp:c,language:s,schedule:{time:e.date_time,realtime:"realtime"===e.data_freshness,equipments:e.equipments,extend:"7"}},"schedule-".concat(t))})):(0,M.jsx)("div",{children:(0,L.Tl)("no-schedules")})})]})},t.route_id+"_"+r)}))}))})]},"line-by-area-".concat(e.id))})),(0,L.x$)("lines")||"/"===A.pathname?null:(0,M.jsx)(Le,{onClick:function(){return P()},noLeftMargin:!0,children:(0,L.Tl)("popup-schedules-lines-see-more-schedules-area")})]})};function Ne(e){return Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ne(e)}function ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||Ye(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){Me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Me(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ne(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ne(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ue(e){return function(e){if(Array.isArray(e))return Fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ye(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ge(){Ge=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,a=Object.create(o.prototype),l=new w(r||[]);return i(a,"_invoke",{value:S(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",f="suspendedYield",m="executing",h="completed",v={};function _(){}function y(){}function g(){}var b={};s(b,a,(function(){return this}));var A=Object.getPrototypeOf,E=A&&A(A(L([])));E&&E!==n&&r.call(E,a)&&(b=E);var T=g.prototype=_.prototype=Object.create(b);function P(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,o,a,l){var c=d(e[i],e,o);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==Ne(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(u).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,l)}))}l(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function S(t,n,r){var i=p;return function(o,a){if(i===m)throw Error("Generator is already running");if(i===h){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var l=r.delegate;if(l){var c=j(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var s=d(t,n,r);if("normal"===s.type){if(i=r.done?h:f,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(i=h,r.method="throw",r.arg=s.arg)}}}function j(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Ne(t)+" is not iterable")}return y.prototype=g,i(T,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:y,configurable:!0}),y.displayName=s(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,c,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},P(x.prototype),s(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new x(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},P(T),s(T,c,"Generator"),s(T,a,(function(){return this})),s(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return l.type="throw",l.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],l=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function He(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ye(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function Ye(e,t){if(e){if("string"==typeof e)return Fe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fe(e,t):void 0}}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Be(e,t,n,r,i,o,a){try{var l=e[o](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,i)}function Ve(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Be(o,r,i,a,l,"next",e)}function l(e){Be(o,r,i,a,l,"throw",e)}a(void 0)}))}}var ze={REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"},Xe=ze.REACT_APP_LINES_MAIN_TYPE,Ke=ze.REACT_APP_LINES_TYPE_EXCEPTIONS,qe=ze.REACT_APP_SHOW_PMR,We=ze.REACT_APP_SHOW_ADDITIONAL_STOP_TOOL,Je=ze.REACT_APP_CONNECTIONS_TEXT,Qe=ze.REACT_APP_PROXIMITY_LINES_AT_STOP,Ze=ze.REACT_APP_GO_TO_RC_URL,$e=ze.REACT_APP_DEFAULT_LINES_WEIGHT,et=ze.REACT_APP_ALLOW_HEAVY_LINES_ON_ROUTECALCULATION,tt=ze.REACT_APP_DISRUPTION,nt=ze.REACT_APP_CLICK_THROUGH_LINES,rt=ze.REACT_APP_HEAVY_LINES,it=ze.REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE,ot=ze.REACT_APP_TERMINUS_DISPLAY_LINES,at=ze.REACT_APP_AREAS_ZOOM_LEVEL,lt=ze.REACT_APP_INIT_MAP_ON_BACK,ct=ze.REACT_APP_BLOCK_TERMINUS,st=ze.REACT_APP_HEAVY_MODES,ut=ze.REACT_APP_DISPLAY_STOP_ID,dt=ze.REACT_APP_DISPLAY_ADDITIONAL_INFOS_ON_POPUP_CONTENT,pt=ze.REACT_APP_MARKER_SELECTED_PICTO,ft=ze.REACT_APP_POPUP_GROUP_LINES_BY_CAT,mt=ze.REACT_APP_POPUP_GROUP_LINES_BY_CAT_MERGE_CAT,ht=ze.REACT_APP_TERMINUS_SHOW_ONLY_LINES,vt=ze.REACT_APP_TERMINUS_ENTRYMAP_NO_PERMANENT_TOOLTIP,_t=function(){var e=Ve(Ge().mark((function e(t){var n,r,i,o,a,l=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=l.length>1&&void 0!==l[1]?l[1]:{},r=[],i=He(t),e.prev=3,a=Ge().mark((function e(){var t,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o.value,n[t.id]||(i={color:t.style.color,opacity:1,weight:t.style.size,dashArray:t.style.dashArray,lineJoin:"round"},r.push(d.A.get("/api/file?name=".concat(t.id,"&folder=","map/bike","&ext=geojson")).then((function(e){return(0,M.jsx)(v.A,{interactive:!1,data:e.data,style:i},t.id)}))));case 2:case"end":return e.stop()}}),e)})),i.s();case 6:if((o=i.n()).done){e.next=10;break}return e.delegateYield(a(),"t0",8);case 8:e.next=6;break;case 10:e.next=15;break;case 12:e.prev=12,e.t1=e.catch(3),i.e(e.t1);case 15:return e.prev=15,i.f(),e.finish(15);case 18:Promise.all(r).then((function(e){j.j.dispatch((0,T.ak)(e))}));case 19:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})));return function(t){return e.apply(this,arguments)}}(),yt=function(){var e=Ve(Ge().mark((function e(t,n){var r,i,o,a,l,c,s,u,d,p,m,h,g,b,A,E,P,x,S,R,w,N,k;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=j.j.getState().app,o=i.lines,a=i.configApp,t&&Object.keys(t).length){e.next=5;break}return(0,C.i)({error:"geojson_entrance_map_not_found"}),e.abrupt("return");case 5:if(l=null===(r=j.j.getState())||void 0===r||null===(r=r.app)||void 0===r?void 0:r.config,c=[],n.mapReference.current&&(n=n.mapReference.current.leafletElement),s=[],null==a||!a.heavy_lines_from_lines){e.next=14;break}u=He(o);try{for(u.s();!(d=u.n()).done;)(p=d.value).heavyline&&s.push(p.code.toLowerCase())}catch(e){u.e(e)}finally{u.f()}e.next=49;break;case 14:if(!rt||"boolean"==typeof JSON.parse(rt)){e.next=31;break}m=He(JSON.parse(rt)),e.prev=16,g=Ge().mark((function e(){var t,n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=h.value,(n=o.find((function(e){return e.id===t||e.cat===t.split("~~")[0]&&e.code===t.split("~~")[1]})))&&s.push(n.code.toLowerCase());case 3:case"end":return e.stop()}}),e)})),m.s();case 19:if((h=m.n()).done){e.next=23;break}return e.delegateYield(g(),"t0",21);case 21:e.next=19;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(16),m.e(e.t1);case 28:return e.prev=28,m.f(),e.finish(28);case 31:if(!st){e.next=49;break}b=JSON.parse(st),A=He(o),e.prev=34,P=Ge().mark((function e(){var t;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=E.value,b.find((function(e){return e.mode===t.mode}))&&!s.find((function(e){return e===t.code.toLowerCase()}))&&s.push(t.code.toLowerCase());case 2:case"end":return e.stop()}}),e)})),A.s();case 37:if((E=A.n()).done){e.next=41;break}return e.delegateYield(P(),"t2",39);case 39:e.next=37;break;case 41:e.next=46;break;case 43:e.prev=43,e.t3=e.catch(34),A.e(e.t3);case 46:return e.prev=46,A.f(),e.finish(46);case 49:x=He(t.features),e.prev=50,x.s();case 52:if((S=x.n()).done){e.next=61;break}if(R=S.value,w=R.properties.type,!1!==l.heavyLines){e.next=58;break}if("jalon"!==w){e.next=58;break}return e.abrupt("continue",59);case 58:R.geometry.type.includes("String")&&"lines"!==w?(c.push((0,M.jsx)(v.A,{data:R,style:{opacity:0,weight:18},onMouseMove:function(e){var t=j.j.getState().map.entrancePopup,r=e.target.getPopup();t&&t._leaflet_id===r._leaflet_id||r.setLatLng(e.latlng).openOn(n)},onMouseOut:function(e){var t=j.j.getState().map.entrancePopup,n=e.target.getPopup();t&&t._leaflet_id===n._leaflet_id||e.target.closePopup()},onClick:function(e){n.eachLayer((function(e){return e.closePopup()}));var t=e.target.getPopup();j.j.dispatch((0,T.hh)(t)),t.setLatLng(e.latlng).openOn(n)},children:(0,M.jsx)(_.A,{className:"lc-popup-leaflet",closeButton:!1,autoClose:!1,autoPan:!1,onClose:function(){return j.j.dispatch((0,T.hh)(null))},children:Ut(j.j.getState(),{lines:R.properties.desserte.split(";").map((function(e){return{code:e.split("_")[0],network:e.split("_")[1]}}))},!0)})},Math.random())),"hover"===w&&c.push((0,M.jsx)(v.A,{data:R,style:{color:"#"+R.properties.color,weight:R.properties.weight}},Math.random()))):(("image"===w||"jalon"===w&&(s.length>0&&null!==(N=R.properties.image)&&void 0!==N&&null!==(N=N.toLowerCase())&&void 0!==N&&null!==(N=N.split("-"))&&void 0!==N&&N.every((function(e){return s.includes(e)}))||0===s.length))&&c.push((0,M.jsx)(y.A,{ref:function(e){return(0,O.eQ)(e)},interactive:!1,position:[R.geometry.coordinates[1],R.geometry.coordinates[0]],icon:f().icon({iconUrl:(0,L.tx)("/assets/images/lines/entrance/")+R.properties.image+".svg",iconSize:R.properties.size,iconAnchor:R.properties.anchor}),zIndexOffset:50,zoom:R.properties.zoom},"jalon-".concat(Math.random()))),"lines"===w&&c.push((0,M.jsx)(v.A,{interactive:!0,className:"lc-entrance-map-lines",data:R,style:{color:"#"+R.properties.color,weight:R.properties.weight},zoom:R.properties.zoom},"entrance-map-lines-".concat(Math.random()))));case 59:e.next=52;break;case 61:e.next=66;break;case 63:e.prev=63,e.t4=e.catch(50),x.e(e.t4);case 66:return e.prev=66,x.f(),e.finish(66);case 69:if(!((null==rt?void 0:rt.length)>0&&"boolean"!=typeof JSON.parse(rt))){e.next=74;break}return e.next=72,bt(null!=a&&a.heavy_lines_from_lines?o.filter((function(e){return e.heavyline})).map((function(e){return e.id})):JSON.parse(rt));case 72:(k=e.sent)&&k.length>0&&c.push.apply(c,Ue(k));case 74:setTimeout((function(){return j.j.dispatch((0,T.Kv)(c))})),e.next=80;break;case 77:e.prev=77,e.t5=e.catch(0),console.log("Error in build entrance map : ",e.t5);case 80:case"end":return e.stop()}}),e,null,[[0,77],[16,25,28,31],[34,43,46,49],[50,63,66,69]])})));return function(t,n){return e.apply(this,arguments)}}(),gt=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{clickThroughLines:!0===(0,L.UP)(nt)},n=[],r=j.j.getState().app,i=r.hash,o=r.configApp,a=0;a<e.length;a++)n.push(xt(e[a],i)),null!=t&&t.clickThroughLines&&!e[a].tad&&n.push(xt(De(De({},e[a]),{},{clickThrough:null==t?void 0:t.clickThroughLines}),i)),null!=o&&o.lines_decorators&&n.push(St(e[a]));return!0!==(null==t?void 0:t.hideTerminus)&&n.push(bt(e.map((function(e){return e.id})))),n},bt=function(){var e=Ve(Ge().mark((function e(t){var n,r,i,o,a,l,c,s,u,p,m,v,_,A;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],!((null==t?void 0:t.length)>0)){e.next=39;break}r=j.j.getState().app,i=r.areas,o=r.hash,a=r.lines,l=it&&JSON.parse(it)||[],c=l.filter((function(e){return"create"===(null==e?void 0:e.action)})),s=[],u=He(t),e.prev=7,m=Ge().mark((function e(){var t,n,r,u,f,m,h,v,_,y;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=p.value,n=t.split("~~"),r=ke(n,2),u=r[0],f=r[1],!(m=(0,L.fV)(a,u&&f?{code:f,mode:u}:{id:t,direction_id:"f"}))){e.next=27;break}return e.next=6,d.A.get("/api/file?name=".concat(m.code,"_").concat(m.network,"_f~").concat(o,"&folder=stops&ext=json"));case 6:if(!(h=e.sent)||!h.data){e.next=27;break}v=He(h.data.filter((function(e){return c.find((function(t){return t.id===e.stop_area.replace(/:/g,"")}))||e.terminus&&!e.terminusInt}))),e.prev=9,y=Ge().mark((function e(){var n,r,o,a,c,u,d,p,f,h,v,y,g;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=_.value,!(r=i.find((function(e){return e.id===n.stop_area})))){e.next=29;break}if(a=null,!it){e.next=25;break}if(!(c=l.find((function(e){return e.id===r.id.replace(/:/g,"")})))){e.next=25;break}if(!c.action){e.next=13;break}if("create"!==c.action){e.next=12;break}a=c,e.next=13;break;case 12:return e.abrupt("return",0);case 13:if(!c.mergeWith){e.next=24;break}if(!(u=s.find((function(e){return e.id==="terminus-".concat(c.mergeWith)})))){e.next=20;break}return u.lines.push(t),e.abrupt("return",0);case 20:r=i.find((function(e){return e.id.replace(/:/g,"")===c.mergeWith})),a=l.find((function(e){return e.id===r.id.replace(/:/g,"")}));case 22:e.next=25;break;case 24:a=c;case 25:if("delete"!==(null===(o=a)||void 0===o?void 0:o.action)){e.next=27;break}return e.abrupt("return",0);case 27:-1!==(d=s.findIndex((function(e){return e.id==="terminus-".concat(r.id.replace(/:/g,""))})))?s[d].lines.includes(t)||((p=s[d]).lines.find((function(e){return e.id===m.id}))||p.lines.push(m),p.direction.includes("right")||a.color||(p.color=m.color)):s.push({id:"terminus-".concat(r.id.replace(/:/g,"")),name:(null===(f=a)||void 0===f?void 0:f.name)||r.name,lines:[m],coord:r.coord,color:(null===(h=a)||void 0===h?void 0:h.color)||m.color,direction:(null===(v=a)||void 0===v?void 0:v.direction)||"right",class:(null===(y=a)||void 0===y?void 0:y.class)||"",displayLines:!ot||(0,L.UP)(ot),dontRenderTooltip:!1===(null===(g=a)||void 0===g?void 0:g.tooltip)});case 29:case"end":return e.stop()}}),e)})),v.s();case 12:if((_=v.n()).done){e.next=19;break}return e.delegateYield(y(),"t0",14);case 14:if(0!==e.t0){e.next=17;break}return e.abrupt("continue",17);case 17:e.next=12;break;case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(9),v.e(e.t1);case 24:return e.prev=24,v.f(),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[9,21,24,27]])})),u.s();case 10:if((p=u.n()).done){e.next=14;break}return e.delegateYield(m(),"t0",12);case 12:e.next=10;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(7),u.e(e.t1);case 19:return e.prev=19,u.f(),e.finish(19);case 22:if((0,L.UP)(ct)){e.next=39;break}v=He(s),e.prev=24,A=Ge().mark((function e(){var t,r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=_.value,r=0,i=0,e.t0=t.direction,e.next="left"===e.t0?6:"top-left"===e.t0?8:"top"===e.t0?11:"top-right"===e.t0?14:"right"===e.t0?17:"bottom-right"===e.t0?19:"bottom"===e.t0?22:"bottom-left"===e.t0?25:28;break;case 6:return r=-5,e.abrupt("break",29);case 8:return i=-10,r=-5,e.abrupt("break",29);case 11:return i=-10,r=2.5,e.abrupt("break",29);case 14:return i=-10,r=5,e.abrupt("break",29);case 17:return r=10,e.abrupt("break",29);case 19:return i=10,r=5,e.abrupt("break",29);case 22:return r=2.5,i=10,e.abrupt("break",29);case 25:return i=10,r=-5,e.abrupt("break",29);case 28:return e.abrupt("break",29);case 29:n.push((0,M.jsx)(y.A,{interactive:!!(0,L.UP)(vt)||!0===t.dontRenderTooltip,position:[t.coord.lat,t.coord.lon],zoom:{min:10,max:at||16},icon:new(f().DivIcon)({className:"lc-circle-icon-marker lc-circle-icon-marker-terminus",iconSize:[8,8],tooltipAnchor:new(f().Point)(r,i),html:'<span style="border:3px solid #'.concat(t.color,'" />')}),ref:function(e){return(0,O.eQ)(e)},children:(0,M.jsx)(g.A,{direction:t.direction.includes("-")?t.direction.split("-")[1]:t.direction.split("-")[0],className:"lc-tooltip-leaflet-terminus lc-".concat(t.id," ").concat(null!=t&&t.class?t.class:""),opacity:1,permanent:!(0,L.UP)(vt)&&!0!==t.dontRenderTooltip,interactive:!1,onOpen:function(){document.querySelectorAll(".lc-tooltip-leaflet-terminus.lc-".concat(t.id)).forEach((function(e){e.style.borderColor="#"+t.color,ht&&!1!==(0,L.UP)(ht)||(e.style.padding="2px 8px"),t.displayLines?(e.style.borderColor="transparent",e.style.backgroundColor="white",e.style.padding="0px",["left","top-left","bottom-left"].includes(t.direction)?(ht&&!1!==(0,L.UP)(ht)||(e.style.paddingLeft="4px"),e.style.paddingRight="0px"):["top","right","bottom","top-right","bottom-right"].includes(t.direction)&&(ht&&!1!==(0,L.UP)(ht)||(e.style.paddingRight="4px"),e.style.paddingLeft="0px")):(e.style.backgroundColor="#"+t.color,e.style.color=(0,h.N)(t.color)>.5?"#333":"#fff")}))},children:t.displayLines?(0,M.jsxs)("div",{className:"lc-em-multilines-terminus "+(t.direction.includes("left")?"direction-left":"direction-right"),children:[(!ht||!1===(0,L.UP)(ht))&&(0,M.jsx)("div",{className:"lc-em-multilines-terminus-name",children:t.name}),(0,M.jsx)("div",{className:"lc-em-multilines-terminus-lines",children:(0,O.Ul)(t.lines,"position").map((function(e){return(0,M.jsx)("div",{className:"lc-em-multilines-terminus-line",children:(0,M.jsx)(b.D,{line:e,image:null==Xe?void 0:Xe.includes("image")})},"terminus-line-".concat(e.id))}))})]}):t.name},Math.random())},t.id));case 30:case"end":return e.stop()}}),e)})),v.s();case 27:if((_=v.n()).done){e.next=31;break}return e.delegateYield(A(),"t2",29);case 29:e.next=27;break;case 31:e.next=36;break;case 33:e.prev=33,e.t3=e.catch(24),v.e(e.t3);case 36:return e.prev=36,v.f(),e.finish(36);case 39:return e.abrupt("return",n);case 40:case"end":return e.stop()}}),e,null,[[7,16,19,22],[24,33,36,39]])})));return function(t){return e.apply(this,arguments)}}(),At=function e(t,n){var r,i,o,a,l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=j.j.getState().map.allLinesGeojson,s=j.j.getState().map.allLinesIntersecGeojson,u=j.j.getState().map.allLinesColorType,d=j.j.getState().app.ddls,p=j.j.getState().app.aoapis,f=(0,L._V)(x.A.location);if(void 0===n||void 0===j.j.getState().map.allLinesSelected||(null===(r=n)||void 0===r?void 0:r.type)!==(null===(i=j.j.getState().map.allLinesSelected)||void 0===i?void 0:i.type)||(null===(o=n)||void 0===o?void 0:o.id)!==(null===(a=j.j.getState().map.allLinesSelected)||void 0===a?void 0:a.id)||l)if(!n&&j.j.getState().map.allLinesSelected&&(n=j.j.getState().map.allLinesSelected),c&&Object.keys(c).length){t.mapReference.current&&(n&&n.type&&"id"===n.type&&void 0===f.line?(0,w.pf)(t,"onClick",(function(){j.j.dispatch((0,T.I0)({type:"",id:null}))})):(0,w.aG)(t),(0,w.pf)(t,"onZoomend",(function(){e(t,n,!0)})));var h=[];c.features.map((function(e){var r=j.j.getState().app.lines.find((function(t){return String(t.id)===String(e.properties.ID)}));if(r){var i=function(e,t){if(n&&n.type){if(void 0!==e){if("indicator"===n.type){var r="";return n.steps.forEach((function(t){t.ids.includes(e.id)&&(r=t.color)})),r}if("region"===n.type){var i=p.filter((function(e){return e.region===n.id}));if(i.length>0){var o,a=He(i);try{for(a.s();!(o=a.n()).done;){var l=o.value;if(l.lines.includes(e.id))return l.color}}catch(e){a.e(e)}finally{a.f()}}return"#A0A0A0"}if("aoapi"===n.type){var c=p.find((function(e){return e.uuid===n.id}));return c&&c.lines.includes(e.id)?c.color:"#A0A0A0"}return void 0===f.cat&&String(e[n.type])===String(n.id)||f.cat&&String(f.cat)===String(e.cat)&&String(e[n.type])===String(n.id)?n.color?n.color:t:"#A0A0A0"}return t}if("ddl"===u){var s=null==d?void 0:d.find((function(t){return t.code===e.dl}));return s?s.color:"#A0A0A0"}if("aoapi"===u){var m=p.find((function(t){return t.lines.includes(e.id)}));return m?m.color:"#A0A0A0"}return t}(r,e.properties.COULEUR),o=y(Math.round(2.5*parseFloat(parseFloat(e.properties["#StrokeWeight"]).toFixed(2))),t);return De(De({},e),{},{color:i,weight:o,findLine:r})}return De(De({},e),{},{findLine:r})})).sort((function(e,t){return"#A0A0A0"===e.color?-1:"#A0A0A0"===t.color?1:0})).forEach((function(e,t){var n=e.findLine;n&&h.push((0,M.jsx)(m.A,{positions:e.geometry.coordinates.map((function(e){return[e[1],e[0]]})),color:e.color,weight:e.weight,interactive:!0,onClick:function(){if((0,L.x$)("analyzes")){var e=(0,L._V)(x.A.location),t=(0,L.vf)(e,{line:n.id});x.A.push(De(De({},x.A.location),{},{search:t}))}else x.A.push({pathname:"/lines-regions-services",search:"?line="+n.id})},children:(0,M.jsx)(g.A,{direction:"top",sticky:!0,children:(0,M.jsx)("div",{children:(0,M.jsx)(b.D,{image:!1,line:n})},"popup-select-line-"+n.id)})},"pl-"+t))})),s&&s.features&&s.features.length>0&&s.features.forEach((function(e,n){var r=e.properties.lines.split(";").map((function(e){var t;return null===(t=j.j.getState().app.lines.find((function(t){return String(t.id)===String(e)})))||void 0===t?void 0:t.weight})),i=y(Math.max.apply(Math,Ue(r)),t),o=(0,M.jsx)("div",{className:"lc-intersection-content",children:e.properties.lines.split(";").map((function(e){var t=j.j.getState().app.lines.find((function(t){return String(e)===String(t.id)}));return t?(0,M.jsx)("div",{role:"button",tabIndex:"0",onClick:function(){x.A.push({pathname:"/lines-regions-services",search:"?line="+t.id})},onKeyUp:function(e){return(0,L.zQ)(e,(function(){x.A.push({pathname:"/lines-regions-services",search:"?line="+t.id})}))},children:(0,M.jsx)(b.D,{image:!1,line:t})},"popup-select-line-"+t.id):""}))});h.push((0,M.jsxs)(v.A,{data:e,style:function(){return{color:"#000000",opacity:0,weight:i,interactive:!0}},children:[(0,M.jsx)(_.A,{className:"lc-intersections-popup",closeButton:!1,autoClose:!1,autoPan:!1,keepInView:!0,direction:"right",children:o}),(0,M.jsx)(g.A,{direction:"top",sticky:!0,children:o})]},"intersec-"+n))})),setTimeout((function(){var e=h.filter((function(e){return"#A0A0A0"!==e.props.color&&!e.key.includes("intersec")})),n=h.filter((function(e){return!e.key.includes("intersec")}));e.length===n.length||l||(0,w.Fe)(t,e)}),500),setTimeout((function(){j.j.dispatch((0,T.l2)(h))}))}else(0,C.i)({error:"geojson_all_lines_not_found"});function y(e,t){var n=t.mapReference.current.leafletElement.getZoom();return 8===n?e/3:9===n?e/2:e}},Et=function(e,t,n){var r,i,o=e.app,a=o.heavyIds,l=o.lines,c=o.hash,s=o.map,u=o.configApp,d=Ue(a);if(st&&JSON.parse(st).length){var p,f=JSON.parse(st),m=He(l);try{var h=function(){var e=p.value,t=f.find((function(t){return e.mode===t.mode}));t&&n&&(t.minZoom||t.maxZoom)?n&&t.minZoom&&n>=t.minZoom&&!t.maxZoom||n&&t.maxZoom&&n<=t.maxZoom&&!t.minZoom||n&&t.minZoom&&n>=t.minZoom&&t.maxZoom&&n<=t.maxZoom?d.includes(e.id)||d.push(e.id):!t||t.minZoom||t.maxZoom||d.includes(e.id)||d.push(e.id):t&&(d.includes(e.id)||d.push(e.id))};for(m.s();!(p=m.n()).done;)h()}catch(e){m.e(e)}finally{m.f()}}if(null!=u&&u.heavy_lines_from_lines){d.length=0;var v,_=He(l);try{for(_.s();!(v=_.n()).done;){var y=v.value;y.heavyline&&d.push(y.id)}}catch(e){_.e(e)}finally{_.f()}}if(!e.map.heavyLines&&!1!==(null==e||null===(r=e.app)||void 0===r||null===(r=r.config)||void 0===r?void 0:r.heavyLines)||(null==d?void 0:d.length)!==(null==e||null===(i=e.map)||void 0===i||null===(i=i.heavyLines)||void 0===i?void 0:i.length)){var g,b=[],A=He((0,O.C8)(d,l));try{var E=function(){var e=g.value,t=ke(e.split("~~"),2),n=t[0],r=t[1],i=(0,L.fV)(l,n&&r?{code:r,mode:n}:{id:e,direction_id:"f"});if(i.code){if(st&&JSON.parse(st).length){var o=JSON.parse(st).find((function(e){return i.mode===e.mode}));null!=o&&o.weight&&(i.weight=o.weight),null!=o&&o.color&&(i.color=o.color),i&&o&&!0===o.bringToback&&(i.bringToback=!0)}b.push(xt(De(De({},i),{},{displayOnlyMainSegment:!0===u.heavy_lines_only_main_segment}),c)),(0,L.UP)(nt)&&b.push(xt(De(De({},i),{},{displayOnlyMainSegment:!0===u.heavy_lines_only_main_segment,clickThrough:!0}),c))}};for(A.s();!(g=A.n()).done;)E()}catch(e){A.e(e)}finally{A.f()}Promise.all(b).then((function(e){j.j.dispatch((0,T.$Y)(e)),t||(0,w.Fe)(s,e)}))}else!t&&lt&&e.map.heavyLines&&(0,w.Fe)(s,e.map.heavyLines)},Tt=function(e,t){var n;if(!1!==(null==e||null===(n=e.app)||void 0===n||null===(n=n.config)||void 0===n?void 0:n.complementaryLines)){var r=e.app,i=r.complementaryIds,o=r.lines,a=r.hash,l=x.A.location.pathname,c=(0,L._V)(x.A.location);if(!l.includes("route-calculation")||l.includes("route-calculation")&&(0,L.UP)(et)&&Object.keys(c).length<3){if(t){var s,u=null===(s=e.map.complementaryLines)||void 0===s?void 0:s.find((function(e){return e.props.line.id===t.id}));if(u){var d=(0,M.jsx)(v.A,{interactive:!0,data:u.props.data,style:De(De({},u.props.style),{},{color:"#".concat(t.color)}),line:t});j.j.dispatch((0,T.xF)(d))}}else e.map.complementaryLines&&j.j.dispatch((0,T.xF)(null));if(!e.map.complementaryLines||void 0===e.map.complementaryLines){var p,f=[],m=He(i);try{for(m.s();!(p=m.n()).done;){var h=p.value,_=(0,L.fV)(o,{id:h,direction_id:"f",complementaryLine:!0,complementaryLineHover:t&&t.id===h});_.code&&(f.push(xt(_,a)),(0,L.UP)(nt)&&f.push(xt(De(De({},_),{},{clickThrough:!0}),a)))}}catch(e){m.e(e)}finally{m.f()}Promise.all(f).then((function(e){j.j.dispatch((0,T.oN)(Ue(e).filter((function(e){return void 0!==e}))))}))}}}};function Pt(e,t){var n,r=e.app,i=r.lines,o=r.hash,a=[],l=He(t);try{for(l.s();!(n=l.n()).done;){var c=n.value,s=(0,L.fV)(i,{id:c.id?c.id:c,direction_id:"f"});s.code?a.push(xt(s,o)):(0,C.i)({error:"custom_line_not_found",id:c,message:"Custom line is not found in line list"})}}catch(e){l.e(e)}finally{l.f()}Promise.all(a).then((function(e){j.j.dispatch((0,T.Xf)(e))}))}var xt=function(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=null===(n=j.j.getState().app.config)||void 0===n?void 0:n.displayLinesAt,a=null===(r=j.j.getState().app.configApp)||void 0===r?void 0:r.around_highlight_selected_line;e.direction_id||(e.direction_id="f");var l=e.type?4!=+e.type?"routes/future/lines":"routes/current/lines":"routes",c=e.type?"".concat(e.code,"~").concat(t):"".concat(encodeURIComponent(e.code),"_").concat(e.network,"_").concat(e.direction_id,"~").concat(t);if(o){var s=j.j.getState().app.datasets,u=new Date(o),p=s.find((function(e){if(e.start_validation_date&&e.end_validation_date){var t=new Date((0,R._k)(e.start_validation_date)),n=new Date((0,R._k)(e.end_validation_date));if(t<=u&&n>=u)return!0}return!1}));p&&(l="datasets/".concat(p.id.replace(":","_"),"/routes"))}var f="/api/file?folder=".concat(l,"&ext=geojson&name=").concat(c);return d.A.get(f).then((function(t){var n=0===t.data.length?null:t.data,r={color:"#"+e.color,opacity:1,weight:$e&&!i?$e:5,zIndex:7},o="";if(n){var l;if(e.displayOnlyMainSegment)n=De(De({},n),{},{features:null===(l=n)||void 0===l||null===(l=l.features)||void 0===l?void 0:l.filter((function(e){var t;return"main"===(null===(t=e.properties)||void 0===t?void 0:t.segment)}))});if((e.tad&&e.tad.zone||e.tad&&"Polygon"==n.features[0].geometry.type)&&(n.features[0].geometry.type="Polygon",r.weight=2,r.fillColor="#"+e.color,r.fillOpacity=.2),void 0!==e.dashArray&&(r.dashArray=e.dashArray),void 0!==e.weight&&(r.weight=e.weight),e.complementaryLine&&(r.color=e.complementaryLineHover?r.color:"#999",r.weight=e.complementaryLineHover?4:3),e.clickThrough&&(r.opacity=0,r.weight=15,o="lc-geojson-click-through"),a&&e.highlight){return[].concat(Ue([{c:"#FFFFFF",w:14,o:.1},{c:"#FFFFFF",w:12,o:.3},{c:"#FFFFFF",w:6,o:.5},{c:"#FFFFFF",w:4,o:.6},{c:"#DDDDDD",w:2,o:.7}].map((function(t){var i=t.c,a=t.w,l=t.o;return(0,M.jsx)(v.A,{interactive:!!e.clickThrough,className:o,data:n,style:{color:i,weight:r.weight+a,opacity:l},line:e,ref:function(t){var n;null!=t&&t.leafletElement&&(e.bringToback||null!=t&&null!==(n=t.line)&&void 0!==n&&n.bringToBack)&&t.leafletElement.bringToBack()}},"line-path-"+Math.random())}))),[(0,M.jsx)(v.A,{interactive:!!e.clickThrough,className:o,data:n,style:r,line:e,ref:function(t){var n;null!=t&&t.leafletElement&&(e.bringToback||null!=t&&null!==(n=t.line)&&void 0!==n&&n.bringToBack)&&t.leafletElement.bringToBack()}},"line-path-"+Math.random())])}return(0,M.jsx)(v.A,{interactive:!!e.clickThrough,className:o,data:n,style:r,line:e,ref:function(t){var n;null!=t&&t.leafletElement&&(e.bringToback||null!=t&&null!==(n=t.line)&&void 0!==n&&n.bringToBack)&&t.leafletElement.bringToBack()}},"line-path-"+Math.random())}(0,C.i)({error:"geojson_line_not_found",id:e.code,message:"Line has no geojson"})})).catch((function(e){var t=e.response&&e.response.data?e.response.data.id:e;console.warn(t)}))},St=function(){var e=Ve(Ge().mark((function e(t){var n,r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.prev=1,e.next=4,d.A.get("/api/file?folder=map&ext=geojson&name=jalons");case 4:(null==(i=e.sent)||null===(r=i.data)||void 0===r||null===(r=r.features)||void 0===r?void 0:r.length)>0&&i.data.features.filter((function(e){return e.properties.id===t.id})).forEach((function(e){n.push((0,M.jsx)(y.A,{interactive:!1,position:[e.geometry.coordinates[1],e.geometry.coordinates[0]],icon:f().icon({iconUrl:(0,L.tx)("/assets/images/lines/entrance/")+e.properties.image+".svg",iconSize:e.properties.size,iconAnchor:e.properties.anchor}),ref:function(e){return(0,O.eQ)(e)},zIndexOffset:50,zoom:e.properties.zoom,line:t},"jalon-".concat(Math.random())))})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("Error in get jalons file : ",e.t0),(0,C.i)({error:"geojson_jalons_not_found",id:t.code,message:"Jalons not found"});case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),jt=function(e){var t=[];try{var n,r=He(e);try{var i=function(){var e=n.value;if(void 0===e.id)console.warn("Custom marker has no id"),(0,C.i)({error:"custom_marker_no_id",message:"Custom marker must have an id"});else{var r,i=null===(r=e.title)||void 0===r?void 0:r.split(/[()]/),o=(null==i?void 0:i.length)>1;t.push((0,M.jsx)(y.A,{name:e.title,position:e.position,icon:f().icon({iconUrl:e.icon.url,iconSize:e.icon.size||[26,26],iconAnchor:e.icon.anchor||[13,13],className:e.icon.className}),ref:function(t){(0,O.eQ)(t),e.arrowAngle>=0&&null!=t&&t.leafletElement&&t.leafletElement.setRotationAngle(e.arrowAngle).setRotationOrigin("center center")},zIndexOffset:e.zIndexOffset,onMouseOver:function(t){e.title&&(t.target.isPopupOpen()||(t.target.openPopup(),setTimeout((function(){(0,L.tK)(t.target)})),j.j.dispatch((0,T.Os)(e.id,"mouseover"))))},onMouseOut:function(t){var n;e.title&&("mouseover"===(null===(n=j.j.getState().map.customMarkers.find((function(t){return t.key==="customMarker-"+e.id})))||void 0===n?void 0:n.lastEvent)&&(t.target.closePopup(),j.j.dispatch((0,T.Os)(e.id,""))))},onClick:function(t){var n;e.title&&("mouseover"===(null===(n=j.j.getState().map.customMarkers.find((function(t){return t.key==="customMarker-"+e.id})))||void 0===n?void 0:n.lastEvent)?((0,C.i)({clicked:"custom-marker",id:e.id}),j.j.dispatch((0,T.Os)(e.id,"click")),setTimeout((function(){t.target.openPopup()}))):j.j.dispatch((0,T.Os)(e.id,"")))},children:e.title&&(0,M.jsx)(_.A,{className:"lc-popup-leaflet",closeButton:!1,autoClose:!1,autoPan:!1,keepInView:!0,children:(0,M.jsxs)("div",{className:"lc-infobox",children:[(0,M.jsx)("div",{className:"lc-infobox-title",children:(0,M.jsxs)("span",{children:[i[0],o&&(0,M.jsx)("em",{children:e.name.split(/[()]/).filter((function(e,t){return t>0&&""!==e.trim()})).map((function(e){return"(".concat(e,")")})).join(" ")})]})}),(0,M.jsx)("div",{className:"lc-infobox-content",dangerouslySetInnerHTML:{__html:e.description}})]})})},"customMarker-"+e.id))}};for(r.s();!(n=r.n()).done;)i()}catch(e){r.e(e)}finally{r.f()}}catch(e){throw console.warn("Something went wrong while building custom markers"),e}return t},Ot=function(){var e=j.j.getState().app.streetviewPosition,t=j.j.getState().app.configApp;return(0,M.jsx)(y.A,{id:"streetview-marker",options:{zIndex:999},icon:new(f().icon)({iconUrl:(0,L.tx)("/assets/images/streetview.svg"),iconSize:[30,30],iconAnchor:[15,15]}),ref:function(e){return(0,O.eQ)(e)},position:[e.lat,e.lng],onMouseOver:function(e){e.target.isPopupOpen()||(e.target.openPopup(),(0,L.tK)(e.target),j.j.dispatch((0,T.Os)("streetview-marker","mouseover")))},onClick:function(){j.j.dispatch((0,T.lM)(j.j.getState().map.customMarkers.filter((function(e){return"streetview-marker"!==e.key}))))},children:(0,M.jsx)(_.A,{className:"lc-popup-leaflet lc-popup-streetview",closeButton:!1,autoClose:!1,autoPan:!1,keepInView:!0,children:(0,M.jsxs)("div",{className:"lc-infobox",children:[(0,M.jsxs)("span",{className:"lc-infobox-title",children:[(0,L.Tl)("google-streetview"),(0,M.jsx)("div",{className:"lc-infobox-title-tools",role:"button",tabIndex:"0",onClick:function(){return j.j.dispatch((0,T.lM)(j.j.getState().map.customMarkers.filter((function(e){return"streetview-marker"!==e.key}))))},onKeyUp:function(e){return(0,L.zQ)(e,(function(){j.j.dispatch((0,T.lM)(j.j.getState().map.customMarkers.filter((function(e){return"streetview-marker"!==e.key}))))}))},children:(0,M.jsx)("div",{className:"lc-close"})})]}),(0,M.jsx)("div",{className:"lc-infobox-content lc-streetview",children:(0,M.jsx)("iframe",{title:"streetview",style:{border:0},loading:"lazy",height:"350px",width:"500px",src:"https://www.google.com/maps/embed/v1/streetview?key=".concat(null==t?void 0:t.streetview,"&location=").concat(e.lat,",").concat(e.lng)})})]})})},"streetview-marker")},Rt=function(e,t){var n,r=[],i=He(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;r.push(wt(e,o,{icon:f().icon({iconUrl:o.code?(0,L.tx)("/assets/images/places/"+o.code+".svg"):(0,L.tx)("/assets/images/menu/velo.svg"),className:(0,L.u7)(o.cat_id)}),bike:o,zIndexOffset:200}))}}catch(e){i.e(e)}finally{i.f()}j.j.dispatch((0,T.Pv)(r))},wt=function(e,t,n){var r,i,o,a=null==e||null===(r=e.app)||void 0===r||null===(r=r.component)||void 0===r||null===(r=r.state)||void 0===r?void 0:r.currentLine,l=null==e||null===(i=e.app)||void 0===i?void 0:i.terminusStyle,c=null==e||null===(o=e.app)||void 0===o?void 0:o.lines,s=(0,L._V)(x.A.location);return!a&&c&&s.current&&(a=(0,L.fV)(e.app.lines,{id:s.current.includes("_f")?s.current.substring(0,s.current.lastIndexOf("_f")):s.current.includes("_b")?s.current.substring(0,s.current.lastIndexOf("_b")):s.current})),a&&s.current&&a.id!==s.current&&c&&(a=(0,L.fV)(e.app.lines,{id:s.current.includes("_f")?s.current.substring(0,s.current.lastIndexOf("_f")):s.current.includes("_b")?s.current.substring(0,s.current.lastIndexOf("_b")):s.current})),(0,M.jsxs)(y.A,De(De({ref:function(e){t.ref=e,(0,O.eQ)(e)},overrideZoom:!!t.overrideZoom&&t.overrideZoom,name:t.name,onMouseOver:function(e){j.j.dispatch((0,P.b2)(t,!(!pt||!JSON.parse(pt).includes(t.cat_id))&&e.originalEvent.target))},onMouseOut:function(e){var n=e.originalEvent.target;n.classList.contains("leaflet-tooltip")||setTimeout((function(){return j.j.dispatch((0,P.bu)(t,!(!pt||!JSON.parse(pt).includes(t.cat_id))&&n))}))},onClick:function(){(0,C.i)({clicked:"marker",id:t.id}),j.j.dispatch((0,P.xY)(t))},position:[+t.coord.lat,+t.coord.lon]},n),{},{children:[n.terminus&&t.terminus&&(0,M.jsx)(g.A,{direction:"right",onClick:function(){return j.j.dispatch((0,P.xY)(t,!0))},className:"lc-tooltip-leaflet-terminus",opacity:1,interactive:!0,permanent:!0,children:["imageAndCityName"].includes(l)&&a?(0,M.jsxs)("div",{className:"lc-tooltip-leaflet-terminus-with-image",children:[(0,M.jsx)(b.D,{line:a,image:Xe.includes("image")}),(0,M.jsxs)("div",{className:"lc-tooltip-leaflet-terminus-title",children:[t.town&&(0,M.jsx)("div",{className:"lc-terminus-commune",children:t.town}),(0,M.jsx)("div",{className:"lc-terminus-name"+(t.town?" has-town":""),children:t.name})]})]}):t.name},"terminus_"+t.id),(0,M.jsx)(_.A,{className:"lc-popup-leaflet",closeButton:!1,autoClose:!1,autoPan:!1,onClose:function(){if(pt&&(JSON.parse(pt).includes(t.cat_id)||t.id.startsWith("stop")&&JSON.parse(pt).includes("stops"))){var e,n,r=null===(e=t.ref)||void 0===e||null===(e=e.leafletElement)||void 0===e?void 0:e._icon;if(r&&r.src)(null===(n=j.j.getState())||void 0===n||null===(n=n.map)||void 0===n||null===(n=n.openedMarker)||void 0===n?void 0:n.id)===t.id&&j.j.dispatch((0,T.hL)(null)),r.classList.remove("opened"),r.src=r.src.replace("_selected.svg",".svg")}t.opened&&(t.opened=!1)},children:Ut(e,t)})]}),t.id)},Lt=function(e,t){var n,r=j.j.getState().app.configApp,i=null==r?void 0:r.split_stops_name_and_town_by,o=i?null==e||null===(n=e.name)||void 0===n?void 0:n.split(null==r?void 0:r.split_stops_name_and_town_by):null==e?void 0:e.name;return(0,M.jsxs)(y.A,De(De({ref:function(t){e.ref=t,(0,O.eQ)(t)},position:[+e.coord.lat,+e.coord.lon],onClick:function(){(0,C.i)({clicked:t.postMessageEventName?t.postMessageEventName:"custom-marker",id:e.id})}},t),{},{children:[e.terminus&&(0,M.jsx)(g.A,{direction:"right",className:"lc-tooltip-leaflet-terminus",opacity:1,permanent:!0,children:e.name},"terminus_"+e.id),(0,M.jsx)(_.A,{className:"lc-popup-leaflet lc-custom-popup-leaflet",closeButton:!1,autoClose:!1,autoPan:!1,children:(0,M.jsxs)("div",{className:"lc-infobox",children:[(0,M.jsx)("div",{className:"lc-infobox-title",children:(0,M.jsxs)("div",{className:"lc-stop-and-town-name".concat(i?" lc-with-town":""),children:[i&&(0,M.jsx)("span",{className:"lc-stop-town-town",children:o[0]}),(0,M.jsxs)("span",{className:"lc-stop-town-name",children:[i?o[1]:o,!dt&&qe&&(0,M.jsx)(F.A,{pmr:e.pmr})]})]})}),e.content&&(0,M.jsx)("div",{className:"lc-infobox-content",children:e.content})]})})]}),e.id)},Ct=function(e,t){if(t){var n,r=Array.isArray(t)?t:(0,L.YO)(t),i=[],o=e.map.markerMode,a=He(r);try{for(a.s();!(n=a.n()).done;){var l,c,s,u=n.value;if(u.coord)i.push(wt(e,u,{icon:u.divIcon?f().divIcon({className:"lc-place-divicon lc-".concat(u.color," lc-place-").concat(u.cat_id.replace("poi_type:","").replace("+","").toLowerCase()," lc-price-").concat(u.isReducedPrice?"reduced":"normal"),html:"default"===o?'<img src="'.concat((0,L.tx)("/assets/images/places/".concat(u.code,".svg")),'"/>').concat(null===u.value||["closed","unavailable","maintenance"].includes(u.color)?"":'<span class="'.concat(u.value>99?"lc-long-value":"",'">').concat(null!==(l=u.stand)&&void 0!==l&&l.time&&u.predictFilter?"-":u.value,"</span>")):'<div class="lc-small-circle-marker"/>',iconSize:[0,0]}):f().icon({iconUrl:u.code?(0,L.tx)("/assets/images/places/".concat(u.code).concat((null==e||null===(c=e.map)||void 0===c||null===(c=c.openedMarker)||void 0===c?void 0:c.id)===u.id&&pt&&null!==(s=JSON.parse(pt))&&void 0!==s&&s.includes(u.cat_id)?"_selected":"",".svg")):(0,L.tx)("/assets/images/stop_point.svg"),className:(0,L.u7)(u.cat_id)+(u.className?" "+u.className:"")}),place:u,zIndexOffset:(0,L.x$)("thematic")?200:40}))}}catch(e){a.e(e)}finally{a.f()}return i}},Nt=function(e,t,n){var r;if(0!==(null==t||null===(r=t.routes)||void 0===r?void 0:r.length)){var i=x.A.location.pathname,o=(0,L._V)(x.A.location);if((0,L.x$)("around")){var a="line=".concat(t.id,"_").concat(t.direction_id||"f")+(n?"&stop=".concat(n.id):"")+(o.date?"&date=".concat(o.date):"")+(o.back?"&back=".concat(o.back):"");o&&(o.from||o.insee||o.place)?x.A.push({pathname:i,search:(o.from?"?from="+o.from:o.place?"?place="+o.place:"?insee="+o.insee)+"&"+a}):x.A.push({pathname:i,search:"?"+a})}else if((0,L.x$)("multimobilities"))if(n&&n.id){var l=(0,L.vf)(o,{current:"".concat(t.id,"_").concat(t.direction_id||"f"),stop:n.id});x.A.push({pathname:i,search:l})}else{var c=(0,L.vf)(o,{current:"".concat(t.id,"_").concat(t.direction_id||"f")});x.A.push({pathname:i,search:c})}else if(n&&n.id){var s,u,d=e.app.modules,p="/lines";if(d.find((function(e){return"multimobilities"===e.id}))){var f,m=null===(f=d.find((function(e){return"multimobilities"===e.id})).mobilities)||void 0===f?void 0:f.find((function(e){return"mob-tc"===e.name}));p="/multimobilities",u=(0,L.vf)(o,{mob:m?m.id:0,current:"".concat(t.id,"_").concat(t.direction_id||"f"),stop:n.id})}else if((0,L.x$)("lines")&&null!==(s=e.app.configApp)&&void 0!==s&&s.schedules_in_popup&&(o.current||o.stop||o.stop_area)){var h,v,_;o.stop_area&&delete o.stop_area;var y={current:"".concat(t.id,"_").concat(t.direction_id||"f"),stop:n.id,from:null!==(h=null!==(v=null!==(_=o.current)&&void 0!==_?_:o.stop)&&void 0!==v?v:o.stop_area)&&void 0!==h?h:null};u=(0,L.vf)(o,y)}else u=(0,L.vf)(o,{current:"".concat(t.id,"_").concat(t.direction_id||"f"),stop:n.id});x.A.push({pathname:p,search:u})}else{var g=(0,L.vf)(o,{current:"".concat(t.id,"_").concat(t.direction_id||"f")});x.A.push({pathname:"/lines",search:g})}}},kt=function(e,t){var n=e.map,r=n.openedMarker,i=n.reduxMarkers,o=n.customMarkers;if(!r||r&&r.id!==t.id){var a=t.ref||(0,L.cX)(t,i.length>0?i:o);a&&a.leafletElement.closePopup()}},It=function(e,t){var n=e.map,r=n.openedMarker,i=n.reduxMarkers,o=n.customMarkers;if(r!==t||r&&r.ref&&!r.ref.leafletElement.isPopupOpen()){var a=t.ref||(0,L.cX)(t,i.length>0?i:o);if(a){var l=a.leafletElement;l.openPopup(),setTimeout((function(){(0,L.tK)(l,t)}))}}},Dt=function(e,t){var n,r,i=x.A.location,o=i.pathname,a=i.search,l=e.app,c=l.component,s=l.linesModes,u=l.configApp,p=e.board,f=p.openedCollapse,m=p.thematicPlaces,h=e.map,v=h.cluster,_=h.mapPlaces,y=h.clusters,g=null!=c&&c.state?c.state:{pois:[],tab:0},b=g.pois,A=g.tab,O=(0,L._V)(x.A.location),R=["poi_type:amenity:bicycle_rental","poi_type:amenity:bicycle_parking","poi_type:amenity:car_rental","poi_type:amenity:citiz","poi_type:amenity:parking","poi_type:stations"];null!=c&&null!==(n=c.props)&&void 0!==n&&null!==(n=n.moduleData)&&void 0!==n&&n.groupBy||o.includes("/lines")||!t.cat_id||f===t.cat_id||j.j.dispatch((0,E.f4)(t.cat_id));var C=!0;e.board.thematicPlaces&&(Object.values(e.board.thematicPlaces).flat().find((function(e){return e.id===t.id}))||(C=!1));if(C){if(!e.board.thematicPlaces||t instanceof S.A||R.includes(t.cat_id)||o.includes("/multimobilities"))if(b&&0!==b.length)if(e.board.thematicPlaces&&!o.includes("/multimobilities"))x.A.push({pathname:o,search:"?place="+t.id+(O.line?"&line="+O.line+(O.stop?"&stop="+O.stop:""):"")}),j.j.dispatch((0,T.hL)(t));else{var N;(0,L.g0)(t,null==c||null===(N=c.state)||void 0===N?void 0:N.pois,m)}else if(R.includes(t.cat_id)&&o.includes("/citiz")){if(a!=="?place="+t.id){var k=(0,L.vf)(O,{place:t.id});x.A.push(De(De({},x.A.location),{},{search:k}))}}else if(t instanceof S.A&&o.includes("/bike")){if(a!=="?id="+t.id){var I=(0,L.vf)(O,{id:t.id});x.A.push(De(De({},x.A.location),{},{search:I}))}}else{var D=_.map((function(e){return e.props.place})),M=D.find((function(e){return e.id===t.id}));if(M&&(R.includes(M.cat_id)||!0===M.needRequest&&M.availibilityType)){if("poi_type:stations"!==M.cat_id){var U=M.cat_id.includes("bicycle_rental")?"bss":M.cat_id.includes("bicycle_parking")?"bike_parking":M.cat_id.includes("car_rental")?"car_rental":M.cat_id.includes("citiz")?"citiz":M.needRequest?M.availibilityType:"parking";j.j.dispatch((0,E.Pl)(M.id)),d.A.get("/api/availability?type=".concat(U,"&id=").concat(M.id)).then((function(n){var r;if(j.j.dispatch((0,E.Pl)(!1)),M.stand=n.data,j.j.dispatch((0,P.D1)(D)),(["poi_type:amenity:car_rental","poi_type:amenity:citiz","poi_type:amenity:parking","poi_type:amenity:bicycle_rental","poi_type:amenity:bicycle_parking"].includes(M.cat_id)||!0===M.needRequest)&&(null===(r=Object.keys(M.stand))||void 0===r?void 0:r.length)>0&&(j.j.dispatch((0,E.jj)(M)),(0,L.x$)("thematic")&&0===Object.keys(e.board.thematicPlaces).length&&j.j.dispatch((0,P.aD)(D)),t.ref||(t.ref=(0,L.cX)(t,e.map.reduxMarkers),!t.ref&&_.length>0&&(t.ref=(0,L.cX)(t,_))),t.ref)){var i=t.ref.leafletElement;setTimeout((function(){(0,L.tK)(i,t)}))}})).catch((function(e){j.j.dispatch((0,E.Pl)(!1));var t=e.response&&e.response.data?e.response.data.id:e;console.warn(t)}))}else d.A.get("/api/stations?id=".concat(M.id)).then((function(e){M.stand=e.data,j.j.dispatch((0,E.jj)(M))})).catch((function(e){M.stand={};var t=e.response&&e.response.data?e.response.data.id:e;console.warn(t)})).finally((function(){j.j.dispatch((0,E.Pl)(!1))}));if((0,L.x$)("thematic")){var G=(0,L.vf)(O,{place:M.id});x.A.push({pathname:o,search:G})}}else if(!t.id.includes("stop_point")&&!t.id.includes("stop_area")){var H=(0,L.vf)(O,{place:t.id});x.A.push({pathname:o,search:H})}}else{var Y=(0,L.vf)(O,{place:t.id,from:1===Object.keys(e.board.thematicPlaces).length&&1===e.board.thematicPlaces[Object.keys(e.board.thematicPlaces)[0]].length?"home":void 0});x.A.push({pathname:o,search:Y}),j.j.dispatch((0,T.hL)(t))}t.ref&&(0,L.x$)("route-calculation")&&null!=u&&u.schedules_in_popup||(t.id.startsWith("stop")&&(t.ref=(0,L.cX)(t,j.j.getState().map.reduxMarkers)),!t.ref&&_.length>0&&(t.ref=(0,L.cX)(t,_)))}if(v&&t.ref&&v.hasLayer(t.ref.leafletElement)||t.ref&&y.length>0&&y.filter((function(e){return e.hasLayer(t.ref.leafletElement)})).length>0){var F=v.hasLayer(t.ref.leafletElement)?v:y.find((function(e){return e.hasLayer(t.ref.leafletElement)})),B=t.ref.leafletElement;F.zoomToShowLayer(B,(function(){setTimeout((function(){var t=F.getVisibleParent(B);(0,w.Fe)(e.app.map,[t.getLatLng()]),B.openPopup(),(0,L.tK)(B)}))}))}else t.ref?setTimeout((function(){var n;if(null!==(n=t.ref)&&void 0!==n&&n.leafletElement){var r=t.ref.leafletElement;e.app.isMobile&&(0,L.x$)("around")&&c.props.poiFitBoundsOnMobile&&t.id.startsWith("poi")&&(0,w.Fe)(e.app.map,[r.getLatLng()]),r._map||(r=j.j.getState().map.reduxMarkers.find((function(e){return e.props.stop.id===t.id})).props.stop.ref.leafletElement),r.openPopup(),(0,L.tK)(r,t)}})):setTimeout((function(){var e;if(t.ref||(t.ref=(0,L.cX)(t,j.j.getState().map.reduxMarkers)),null!==(e=t.ref)&&void 0!==e&&e.leafletElement){var n=t.ref.leafletElement;n.openPopup(),(0,L.tK)(n,t)}}),200);if(t.lines&&null!=c&&null!==(r=c.state)&&void 0!==r&&r.groups){var V,z=(0,L.Dg)(null==c||null===(V=c.state)||void 0===V?void 0:V.groups,s);z&&z!==f&&0===A&&j.j.dispatch((0,E.f4)(z))}},Mt=function(e,t){var n=e&&e.current&&e.current.leafletElement,r=j.j.getState().app.placesRef,i=j.j.getState().app.moreInformationsOnMap,o=!!r&&r.find((function(e){return"map-background"===e.name})),a=(0,L._V)(x.A.location),l=null!=o&&o.minZoomLevel?o.minZoomLevel:15,c=[];if(n){var s=n.getZoom();if(null!=i&&i.length){t=t.filter((function(e){var t;return!(null!=e&&null!==(t=e.props)&&void 0!==t&&t.overrideZoom)}));var u,d=[],p=He(i);try{var m=function(){var e=u.value.properties,n=e.coord,r=e.id,i=e.max,o=e.min;if(s>=+o&&s<=+i){var a=(r.startsWith("stop_area:SNCF:")?j.j.getState().app.stations:r.startsWith("stop_area:")?j.j.getState().app.areas:r.startsWith("stop_point:")?j.j.getState().app.stops:j.j.getState().app.places).find((function(e){return e.id===r}));a&&(a.coord.lat=n.split(",")[1],a.coord.lon=n.split(",")[0],a.overrideZoom=!0,t=t.filter((function(e){return(null==e?void 0:e.key)!==r})),d.push(a))}};for(p.s();!(u=p.n()).done;)m()}catch(e){p.e(e)}finally{p.f()}if(d.length){var h,v=He(Ct(j.j.getState(),d));try{for(v.s();!(h=v.n()).done;){var _=h.value;t.push(_)}}catch(e){v.e(e)}finally{v.f()}}}c=t.filter((function(e){var t;return!(null==e||null===(t=e.props)||void 0===t||!t.overrideZoom)||(o.zoom&&o.zoom.ids&&o.zoom.ids[e.props.place.id]&&o.zoom.ids[e.props.place.id].min&&o.zoom.ids[e.props.place.id].max?s>=o.zoom.ids[e.props.place.id].min&&s<=o.zoom.ids[e.props.place.id].max:o&&o.zoom&&o.zoom[e.props.place.cat_id]&&o.zoom[e.props.place.cat_id].min&&o.zoom[e.props.place.cat_id].max?s>=o.zoom[e.props.place.cat_id].min&&s<=o.zoom[e.props.place.cat_id].max:s>l)}))}if((!x.A.location.pathname.includes("route-calculation")||x.A.location.pathname.includes("route-calculation")&&(0,L.UP)(et)&&Object.keys(a).length<3)&&n&&t&&c)return[(0,M.jsx)(A.A,{ref:function(e){return e&&j.j.dispatch((0,T.Fm)(e.leafletElement))},removeOutsideVisibleBounds:!0,showCoverageOnHover:!1,iconCreateFunction:function(e){return f().divIcon({html:e.getChildCount(),className:"lc-cluster"})},children:c.filter((function(e){return!(0,L.uB)(e.props.place)}))},"map-places"),c.filter((function(e){return(0,L.uB)(e.props.place)}))]},Ut=function(e,t){var n,r,i,o,a,l=e.app,c=l.lock,s=l.modules,d=l.servicesStations,p=l.lines,f=l.component,m=l.isMobile,h=l.configApp,v=f.props.options,_=(0,L._V)(x.A.location),y=[],g=Ze||!v||(null==v||null===(n=v.features)||void 0===n?void 0:n["route-calculation"]);if(null!=h&&h.dont_display_goto_rc_if_modes&&t.lines.every((function(e){var t;return null===(t=h.dont_display_goto_rc_if_modes)||void 0===t||null===(t=t.split(","))||void 0===t?void 0:t.includes(e.mode)}))&&(g=!1),g&&null!=h&&h.hide_gotorc_button_if_one_mode&&(null==t||null===(r=t.lines)||void 0===r?void 0:r.length)>0){var b=(0,R.il)(t);1===(null==b?void 0:b.length)&&h.hide_gotorc_button_if_one_mode===b[0]&&(g=!1)}if(g&&!0===t.dontDisplayGotoRC&&(g=!1),d){var A=d.find((function(e){return e.id===t.id}));A&&A.services&&Object.keys(A.services).map((function(e){return y.push({id:A.services[e][0].code,name:e})}))}var E=null==h?void 0:h.split_stops_name_and_town_by,T=E?null==t||null===(i=t.name)||void 0===i?void 0:i.split(null==h?void 0:h.split_stops_name_and_town_by):null==t?void 0:t.name;return(0,M.jsxs)("div",{className:"lc-infobox"+(t.id?"":" lc-no-arrow")+(t.divIcon?" lc-".concat(t.color):""),onMouseLeave:function(){return j.j.dispatch((0,P.bu)(t))},onClick:function(){return t.name&&j.j.dispatch((0,P.xY)(t))},onKeyUp:function(e){return(0,L.zQ)(e,(function(){return t.name&&j.j.dispatch((0,P.xY)(t))}))},role:"button",tabIndex:"0",children:[t.name&&(0,M.jsxs)("div",{className:"lc-infobox-title",children:[(0,M.jsxs)("div",{className:"lc-infobox-title-name"+(t.picto?" with-picto":"")+(ut&&t.stop_number?" with-stop-number":""),children:[(0,M.jsxs)("div",{className:"lc-stop-and-town-name".concat(E?" lc-with-town":""),children:[E&&(0,M.jsx)("span",{className:"lc-stop-town-town",children:T[0]}),(0,M.jsxs)("span",{className:"lc-stop-town-name",children:[E?T[1]:T,!dt&&qe&&(0,M.jsx)(F.A,{pmr:t.pmr})]})]}),t.picto&&(0,M.jsx)("img",{className:"lc-infobox-stop-picto",src:(0,L.tx)("/assets/images/stops/"+t.picto+".svg"),alt:t.name,"aria-hidden":"true"}),ut&&t.stop_number&&(0,M.jsxs)("span",{className:"lc-infobox-title-id",children:[(0,L.Tl)("stop-number"),t.stop_number]})]}),(0,M.jsxs)("div",{className:"lc-infobox-title-tools",children:[We&&JSON.parse(We).map((function(e){return!0===t[e]&&(0,M.jsx)("div",{className:"lc-is-".concat(e)},"".concat(t.id,"_").concat(e))})),(0,M.jsxs)("div",{className:"lc-title-tools-right",children:[null!=h&&h.go_to_stop_point&&s.find((function(e){return"lines"===e.id&&!0!==e.hide}))&&!c&&t.id.startsWith("stop_")?(0,M.jsx)(u.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,L.Tl)("title-go-to-stop-point"),children:(0,M.jsx)("div",{className:"lc-tool-go-to-stop-point lc-toolSmall",onClick:function(e){e.stopPropagation(),(0,L.KI)(t)},onKeyUp:function(e){return(0,L.zQ)(e,(function(){(0,L.KI)(t)}))},role:"button",tabIndex:"0"})}):null,s.find((function(e){return"around"===e.id&&!0!==e.hide}))&&!c&&!(!0===t.dontDisplayGotoAround)&&(0,M.jsx)(u.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,L.Tl)("title-go-to-around"),children:(0,M.jsx)("div",{className:"lc-tool-around lc-toolSmall",onClick:function(e){e.stopPropagation(),(0,L.zu)(t)},onKeyUp:function(e){return(0,L.zQ)(e,(function(){(0,L.zu)(t)}))},role:"button",tabIndex:"0"})}),(Ze||s.find((function(e){return"route-calculation"===e.id&&!0!==e.hide})))&&!c&&g&&(0,M.jsx)(u.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,L.Tl)("title-go-to-route-calculation"),children:(0,M.jsx)("div",{className:"lc-tool-route-calculation lc-toolSmall",onClick:function(e){e.stopPropagation(),(0,L.YB)(t)},onKeyUp:function(e){return(0,L.zQ)(e,(function(){(0,L.YB)(t)}))},role:"button",tabIndex:"0"})}),!m&&(null==h?void 0:h.streetview)&&(0,M.jsx)(u.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,L.Tl)("title-streetview-link"),children:(0,M.jsx)("div",{className:"lc-tool-streetview-link lc-toolSmall",role:"button",tabIndex:"0","aria-label":(0,L.Tl)("title-streetview-link"),onClick:function(){var e,t=document.querySelector(".stop-infobox-streetview");document.querySelector(".stop-infobox-streetview iframe").setAttribute("src",document.querySelector(".stop-infobox-streetview iframe").getAttribute("data-src")),document.querySelector(".stop-infobox-streetview").style.display="block"===(null==t||null===(e=t.style)||void 0===e?void 0:e.display)?"none":"block",document.querySelectorAll(".lc-infobox-lines").forEach((function(e){var n;"block"===(null==t||null===(n=t.style)||void 0===n?void 0:n.display)?e.classList.add("lc-active-streetview"):e.classList.remove("lc-active-streetview")}))},onKeyUp:function(e){return(0,L.zQ)(e,(function(){var e,t=document.querySelector(".stop-infobox-streetview");document.querySelector(".stop-infobox-streetview iframe").setAttribute("src",document.querySelector(".stop-infobox-streetview iframe").getAttribute("data-src")),document.querySelector(".stop-infobox-streetview").style.display="block"===(null==t||null===(e=t.style)||void 0===e?void 0:e.display)?"none":"block",document.querySelectorAll(".lc-infobox-lines").forEach((function(e){var n;"block"===(null==t||null===(n=t.style)||void 0===n?void 0:n.display)?e.classList.add("lc-active-streetview"):e.classList.remove("lc-active-streetview")}))}))}})})]})]})]}),t.severity&&["blocking","delays"].includes(t.severity)&&(0,M.jsxs)("div",{className:"lc-severity lc-"+t.severity,children:[(0,M.jsxs)("div",{className:"lc-disruption-severity",children:[(0,M.jsx)("div",{className:"lc-icon"}),!0===JSON.parse(tt).titleInsteadOfSeverity&&t.title?t.title:"blocking"===t.severity?"Perturbation majeure":"delays"===t.severity?"Perturbation":"Information"]}),"blocking"===t.severity?"".concat((0,L.Tl)("severity-blocking-stop")," ").concat(null===(o=(0,L.fV)(p,{id:_.current.substring(0,_.current.lastIndexOf("_"))}))||void 0===o?void 0:o.code):(0,L.Tl)("severity-delays-stop",!1,{key:"line",value:null===(a=(0,L.fV)(p,{id:_.current.substring(0,_.current.lastIndexOf("_"))}))||void 0===a?void 0:a.code})]}),y.length>0&&(0,M.jsxs)("div",{className:"lc-infobox-services-station",children:[(0,M.jsx)("span",{children:(0,L.Tl)("infobox-services-title")}),(0,M.jsx)("div",{className:"lc-services-list",children:y.map((function(e){return(0,M.jsx)(u.Ay,{theme:"latitude",touch:["hold",500],delay:[15,0],placement:"right",boundary:"window",content:(0,L.Tl)(e.name),children:(0,M.jsx)("img",{src:(0,L.tx)("/assets/images/places/"+e.name+".svg"),alt:e.name})},e.id)}))})]}),(null==h?void 0:h.streetview)&&!m&&(0,M.jsx)("div",{className:"lc-streetview stop-infobox-streetview",children:(0,M.jsx)("iframe",{title:"streetview",style:{border:0},loading:"lazy",height:"350px",width:"500px","data-src":"https://www.google.com/maps/embed/v1/streetview?key=".concat(null==h?void 0:h.streetview,"&location=").concat(t.coord.lat,",").concat(t.coord.lon)})}),(0,M.jsx)("div",{className:"lc-infobox-content",children:(0,M.jsxs)(M.Fragment,{children:[dt&&t.id.includes("stop_point")&&["pmr","both"].includes(qe)&&(0,M.jsx)("div",{className:"lc-infobox-content-additional",children:(0,M.jsx)(F.A,{pmr:t.pmr,displayon:"popup"})}),t.cat_id||t instanceof S.A?Gt(e,t):!0!==(null==h?void 0:h.schedules_in_popup)||!0===(null==h?void 0:h.schedules_in_popup)&&!t.id.startsWith("stop_point")&&!t.id.startsWith("stop_area")?Ht(e,t,"infobox"):null,!0===(null==h?void 0:h.schedules_in_popup)&&t.id.startsWith("stop_point")?(0,M.jsx)(ge,{stop:t,componentState:e,dataKey:"infobox"}):null,!0===(null==h?void 0:h.schedules_in_popup)&&t.id.startsWith("stop_area")?(0,M.jsx)(Ce,{area:t,componentState:e,dataKey:"infobox"}):null]})})]})},Gt=function(e,t){var n=e.app.component.props.options;return(0,M.jsx)("div",{className:"lc-place",children:(0,M.jsx)(N.A,{place:t,displayon:"map",options:n})})},Ht=function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{onlyProximityLines:!1,noAria:!1},o=t.lines,a=e.app,l=a.areas,c=a.stops,s=a.lock,u=a.linesModes,d=a.size,p=a.component.props.options,f=!1!==(null==p||null===(r=p.features)||void 0===r?void 0:r["change-line"]),m=(0,L.UP)(Qe)?l.find((function(e){return e.id===t.stop_area})):null,v=[],_=!0===(0,L.UP)(ft),y=(0,L._V)(x.A.location),g=mt&&JSON.parse(mt)?JSON.parse(mt):{};if(m){var b,A=He(m.lines);try{var E=function(){var e=b.value;o.find((function(t){return t.id===e.id}))||v.push(e)};for(A.s();!(b=A.n()).done;)E()}catch(e){A.e(e)}finally{A.f()}}if(!o)return null;o=o.map((function(t){return(0,L.fV)(e.app.lines,t)}));var T=Xe||"color",S=!1,R=!s&&f,w=function(e,t,n,r){e.stopPropagation();var i=null;if(r){var o=c.filter((function(e){return e.stop_area===n.stop_area}));c&&(i=o.find((function(e){return e.lines.find((function(e){return e.id===t.id}))})))}!s&&f&&((0,C.i)({clicked:"line",id:t.id}),j.j.dispatch((0,P.H7)(t,i||n)))},N=Math.ceil(o.length/2),k=function(r){var o,a,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,M.jsx)("div",{role:!0===i.noAria?void 0:"list",className:("infobox"===n?"lc-infobox-":"lc-")+"lines lc-"+d+(T.includes("WithDirection")?" lc-line-with-direction":"")+("infobox"===n&&null!=t&&null!==(o=t.id)&&void 0!==o&&o.startsWith("stop_point:")&&T.includes("WithRouteDirection")?" lc-line-with-route-direction":"")+(_?" lc-cat-picto":"")+(R?" lc-interactive":""),style:T.includes("WithRouteDirection")&&null!=t&&null!==(a=t.id)&&void 0!==a&&a.startsWith("stop_point:")&&"infobox"===n?{gridTemplateRows:"repeat(".concat(N,", 1fr)")}:{},children:Object.keys(r).map((function(n){return(0,L.Am)(r[n],"id").map((function(n,r,o){var a,c,s,d;T=Xe||"color",n=(0,L.fV)(e.app.lines,n);var p,f,m=y.current||y.line;if(m=null!==(a=m)&&void 0!==a&&a.includes("_f")?null===(c=m)||void 0===c?void 0:c.split("_f")[0]:!(null===(s=m)||void 0===s||!s.includes("_b"))&&m.split("_b")[0],Ke){var v=JSON.parse(Ke).find((function(e){var t,r;return(null===(t=e.lines)||void 0===t?void 0:t.includes(n.id))||(null===(r=e.networks)||void 0===r?void 0:r.includes(n.network))}));v&&(T=v.type,S=!0===v.prefixNetwork)}_&&n.cat!==(null===(d=o[r-1])||void 0===d?void 0:d.cat)&&(f=(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{className:"break"}),(0,M.jsx)("img",{className:"lc-line-cat-picto",src:(0,L.tx)("/assets/images/route-calculation/modes/".concat(n.cat,".svg")),alt:n.cat,role:!0===i.noAria?void 0:"listitem"},"line-cat-".concat(n.cat))]})),r>0&&g[n.cat]&&f&&(f=null);var b="".concat(!0===i.noAria?void 0:"listitem"," ").concat(R?"button":"img");switch(T){case"modeWithDirection":var A=u.find((function(e){return e.modes.includes(n.mode)}));p=(0,M.jsx)("div",{className:"lc-attribute-line",onClick:function(e){return w(e,n,t,l)},onKeyUp:function(e){return(0,L.zQ)(e,(function(){return w(e,n,t,l)}))},role:b,tabIndex:"0","aria-label":(0,L.Tl)("aria-line",!1,{key:"code",value:n.code}),children:(0,M.jsxs)(D.A,{line:n,styleLine:T,inpopup:!0,children:[(0,M.jsx)("div",{className:"lc-line lc-mode",style:{background:"#"+n.color,color:(0,h.N)("#"+n.color)>.5?"#333":"#fff"},children:A.name}),(0,M.jsx)("div",{className:"lc-name",children:n.name})]})},n.id);break;case"codeWithDirection":p=(0,M.jsxs)("div",{className:"lc-attribute-line",onClick:function(e){return w(e,n,t,l)},onKeyUp:function(e){return(0,L.zQ)(e,(function(){return w(e,n,t,l)}))},role:b,tabIndex:"0","aria-label":(0,L.Tl)("aria-line",!1,{key:"code",value:n.code}),children:[(0,M.jsx)(D.A,{line:n,styleLine:T,inpopup:!0,children:(0,M.jsx)("div",{className:"lc-line lc-code",style:{background:"#"+n.color,color:(0,h.N)("#"+n.color)>.5?"#333":"#fff"},children:n.code})}),(0,M.jsx)("div",{className:"lc-name",children:n.name})]},n.id);break;case"imageWithRouteDirection":case"image":p=(0,M.jsxs)("div",{className:"lc-line".concat(m===n.id?" no-line-module":""),onClick:function(e){return w(e,n,t,l)},onKeyUp:function(e){return(0,L.zQ)(e,(function(){return w(e,n,t,l)}))},role:b,tabIndex:!0===i.noAria?void 0:"0","aria-label":(0,L.Tl)("aria-line",!1,{key:"code",value:n.code}),children:[(0,M.jsx)(D.A,{line:n,styleLine:T,inpopup:!0,children:(0,M.jsx)("img",{src:(0,L.tx)("/assets/images/lines/"+(S?n.network+"-":"")+n.code+".svg"),alt:n.code,"aria-hidden":"true"})}),"imageWithRouteDirection"===T&&n.direction&&(0,M.jsx)("div",{className:"lc-name",children:n.direction})]},n.id);break;case"color":p=(0,M.jsxs)("div",{className:"lc-line",onClick:function(e){return w(e,n,t)},onKeyUp:function(e){return(0,L.zQ)(e,(function(){return w(e,n,t)}))},role:b,tabIndex:!0===i.noAria?void 0:"0","aria-label":(0,L.Tl)("aria-line",!1,{key:"code",value:n.code}),children:[(0,M.jsx)("div",{className:"lc-tools-at-line",children:We&&JSON.parse(We).map((function(e){return!!(t[e]&&t[e].length&&t[e].includes("".concat(n.code,"_").concat(n.network)))&&(0,M.jsx)("div",{className:"lc-is-".concat(e)},"".concat(t.id,"_").concat(e))}))}),(0,M.jsx)(D.A,{line:n,styleLine:T,inpopup:!0,children:(0,M.jsx)("div",{className:"lc-line-code",style:{background:"#"+n.color,color:(0,h.N)(n.color)>.5?"#333":"#fff"},children:n.code})})]},n.id);break;default:p=""}return[f,p]}))}))},n+Math.random())};return i.onlyProximityLines?v.length>0?(0,M.jsxs)(M.Fragment,{children:[Object.keys((0,O.DL)(v,u)).length>0?(0,M.jsx)("div",{className:"lc-connections-at-stop",children:(0,L.Tl)("proximity-at-stop")}):null,k((0,O.DL)(v,u),!0)]}):null:(0,M.jsxs)(M.Fragment,{children:[(0,L.UP)(Je)&&(0,M.jsx)("div",{className:"lc-connections-at-stop",children:(0,L.Tl)("connections-at-stop")}),k((0,O.DL)(o,u)),i.buttonSeeMoreSchedulesStopPoint?i.buttonSeeMoreSchedulesStopPoint:null,v.length>0&&(0,M.jsxs)(M.Fragment,{children:[Object.keys((0,O.DL)(v,u)).length>0?(0,M.jsx)("div",{className:"lc-connections-at-stop",children:(0,L.Tl)("proximity-at-stop")}):null,k((0,O.DL)(v,u),!0),i.buttonSeeMoreSchedulesStopArea?i.buttonSeeMoreSchedulesStopArea:null]})]})},Yt=function(e,t,n){var r=[t.latlng.lng,t.latlng.lat],i=[],o=7*(40075016.686*Math.abs(Math.cos(e.getCenter().lat/180*Math.PI))/Math.pow(2,e.getZoom()+8));e.eachLayer((function(e){var t;null!==(t=e.options)&&void 0!==t&&t.interactive&&e._layers&&e.eachLayer((function(e){var t;null!==(t=e.options)&&void 0!==t&&null!==(t=t.className)&&void 0!==t&&t.includes("lc-geojson-click-through")&&("LineString"===e.feature.geometry.type?(0,k.A)(r,e.feature,{units:"meters"})<=o&&i.push(e):"MultiLineString"===e.feature.geometry.type&&e.feature.geometry.coordinates.forEach((function(t){var n={type:"Feature",geometry:{type:"LineString",coordinates:t}};(0,k.A)(r,n,{units:"meters"})<=o&&i.push(e)})))}))})),n(i)},Ft=function(e,t,n){var r=document.createElement("div"),i=new(f().popup)({className:"lc-popup-leaflet lc-popup-clickthrough",closeButton:!1,autoClose:!1,autoPan:!1});Y.render((0,M.jsx)(I.Kq,{store:j.j,children:(0,M.jsx)(H,{lines:t,popup:i})}),r),i.setContent(r).setLatLng(n).openOn(e);var o=i.getElement();i.options.offset=new(f().Point)(o.offsetWidth/2+17,o.offsetHeight-2.5),i.update()}},6293:function(e,t,n){n.d(t,{x:function(){return Z},i:function(){return Q}});var r=n(9736),i=n(4457),o=n(3727),a=n(1576),l=n(2752),c=n(3052),s=n(9742),u=n(7577),d=n(5337);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function m(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}var v=m((function e(t,n,r){switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r){case"bordeaux-tbm":case"bordeaux-tbm-azure":this.id=t.id,this.name=t.fullLabel,this.coord={lat:t.latitude,lon:t.longitude},this.pmr=!1,this.terminus=t.terminus,this.lines=[n]}}));function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function g(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_(t)?t:t+""}var A,E=g((function e(t,n){var r=this;switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n){case"bordeaux-tbm":case"bordeaux-tbm-azure":this.id=t.id,this.code=t.code,this.name=t.name,this.color=t.color,this.text=t.textColor,this.mode="commercial_mode:"+t.type,this.cat=t.type.toLowerCase(),this.network=n,this.stops=t.routes.map((function(e,t){var i=0===t?"f":"b";return e.stopPoints.map((function(t){var o=(Array.isArray(e.stopPointOrder)?e.stopPointOrder:Object.keys(e.stopPointOrder)).indexOf(t.id);t.terminus=0===o||o===(Array.isArray(e.stopPointOrder)?e.stopPointOrder:Object.keys(e.stopPointOrder)).length-1;var a=new v(t,r,n);return a.lines=[{id:r.id,code:r.code,name:r.name,mode:r.mode,cat:r.cat,network:r.network,position:1,direction_id:i,direction:e.end,route_id:e.id,stop_id:a.id}],a}))})).flat(),this.routes=t.routes.map((function(e,t){var n=0===t?"f":"b";return{id:r.code+"_"+r.network+"_"+n,name:e.name,direction:e.end,direction_id:n,route_id:e.id}}))}})),T=n(1912),P=n(2951),x=n(4848);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R(r.key),r)}}function O(e,t,n){return t&&j(e.prototype,t),n&&j(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function R(e){var t=function(e,t){if("object"!=S(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==S(t)?t:t+""}var w,L,C=T.Ay.img(A||(w=["\n  height: 8px;\n  width: 8px;\n  margin-right: 3px;\n"],L||(L=w.slice(0)),A=Object.freeze(Object.defineProperties(w,{raw:{value:Object.freeze(L)}})))),N=O((function e(t,n){switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n){case"bordeaux-tbm":var i,o=function(e){var t=e.waittime.split(":"),n=parseInt(t[0]),i=parseInt(t[1]),o=parseInt(t[2]);if(0===n&&0===i&&o>=0)return(0,r.Tl)("vehicle-close",!1);if(0===n&&i>0)return i+" min";var a=new Date(e.arrival);return"à "+(0,P.Yq)(a,"h:m")};this.content=(0,x.jsxs)("table",{className:"lc-custom-popup-schedules",children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:"Ligne"}),(0,x.jsx)("th",{children:"Destination"}),(0,x.jsx)("th",{children:"Prochains passages"})]})}),(0,x.jsx)("tbody",{children:void 0===t.schedules||t.schedules&&0===t.schedules.length?(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{className:"lc-line-code",children:(0,x.jsx)("img",{src:(0,r.tx)("/assets/images/lines/"+t.line.code+".svg"),alt:t.line.code,"aria-hidden":"true"})}),(0,x.jsx)("td",{colSpan:"2",children:(0,r.Tl)("no-schedules")})]}):null===(i=t.schedules)||void 0===i?void 0:i.map((function(e,n){return(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{className:"lc-line-code",children:(0,x.jsx)("img",{src:(0,r.tx)("/assets/images/lines/"+t.line.code+".svg"),alt:t.line.code,"aria-hidden":"true"})}),(0,x.jsx)("td",{children:e.destination_name}),(0,x.jsxs)("td",{children:["1"===e.realtime&&(0,x.jsx)(C,{src:(0,r.tx)("/assets/images/realtime.gif"),alt:(0,r.Tl)("realtime-gif-alt"),title:(0,r.Tl)("realtime-gif-title")})," ",o(e)]})]},"schedule-"+n)}))})]});break;case"bordeaux-tbm-azure":this.content=null}})),k=n(1290),I=n(4305),D=n(4877),M=n(3481),U=n.n(M),G=n(8413),H=n(3042),Y=n(5875);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function B(){B=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,a=Object.create(o.prototype),l=new w(r||[]);return i(a,"_invoke",{value:S(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",f="suspendedYield",m="executing",h="completed",v={};function _(){}function y(){}function g(){}var b={};s(b,a,(function(){return this}));var A=Object.getPrototypeOf,E=A&&A(A(L([])));E&&E!==n&&r.call(E,a)&&(b=E);var T=g.prototype=_.prototype=Object.create(b);function P(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,o,a,l){var c=d(e[i],e,o);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==F(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(u).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,l)}))}l(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function S(t,n,r){var i=p;return function(o,a){if(i===m)throw Error("Generator is already running");if(i===h){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var l=r.delegate;if(l){var c=j(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var s=d(t,n,r);if("normal"===s.type){if(i=r.done?h:f,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(i=h,r.method="throw",r.arg=s.arg)}}}function j(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(F(t)+" is not iterable")}return y.prototype=g,i(T,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:y,configurable:!0}),y.displayName=s(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,c,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},P(x.prototype),s(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new x(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},P(T),s(T,c,"Generator"),s(T,a,(function(){return this})),s(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return l.type="throw",l.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],l=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function V(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return z(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function X(e,t,n,r,i,o,a){try{var l=e[o](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,i)}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=F(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==F(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var J="annecy-mobilites",Q=function(e){var t=(0,r.fK)()?window.parent:window,n=i.j.getState().app.documentReferer,o={REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"}.REACT_APP_LIBRARY_URL?window.document.location.origin:(0,r.fK)()?n:"https://annecy-mobilites.latitude-cartagene.com";try{t.postMessage(q({source:"lcmap"},e),o),(0,r.Yz)({message:"message sent with",data:e},"info","post message")}catch(t){throw(0,r.Yz)({message:"Error while sending ",data:e},"error","error post message"),new Error("Oops, une erreur est survenue sur l'envoi de données postMessage !")}},Z=function(){var e,t=(e=B().mark((function e(t){var n,p,f,m,h,v,_,y,g,b,A,T,P,x,S,j,O,R,w,L,C,M,z,X,K,W,Z,$,ee,te,ne,re,ie,oe,ae,le,ce,se,ue,de,pe,fe,me,he,ve,_e,ye,ge,be,Ae,Ee,Te,Pe,xe,Se,je,Oe,Re,we,Le,Ce;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"}.REACT_APP_PIN_GEOLOC_OPTIONS,"lcmap-in"!==t.data.source){e.next=135;break}if(!t.data.focus){e.next=11;break}e.t0=t.data.focus,e.next="inputStart"===e.t0?6:"inputEnd"===e.t0?8:10;break;case 6:return document.querySelector("#inputStart").focus(),e.abrupt("break",11);case 8:return document.querySelector("#inputEnd").focus(),e.abrupt("break",11);case 10:return e.abrupt("break",11);case 11:if(t.data.route&&s.A.push((t.data.route.startsWith("/")?"":"/")+t.data.route),void 0!==t.data.lines&&i.j.dispatch((0,c.BU)(t.data.lines)),void 0!==t.data.markers&&i.j.dispatch((0,a.lM)((0,o.hp)(t.data.markers))),t.data.zoom&&i.j.dispatch((0,a.QQ)(t.data.zoom)),t.data.center&&i.j.dispatch((0,a.KK)(t.data.center)),t.data.sliderUrls&&(t.data.sliderUrls.right&&i.j.dispatch((0,l.$V)(t.data.sliderUrls.right)),t.data.sliderUrls.left&&i.j.dispatch((0,l.kz)(t.data.sliderUrls.left))),t.data.config&&i.j.dispatch((0,u.Gt)(t.data.config)),void 0!==t.data.geolocation&&n&&(p=t.data.geolocation,f=p.lat,m=p.lng,h=i.j.getState().app.component,!p||f&&m?(h&&h.removePinCircle&&h.removePinCircle(!0),p?p&&((0,D.RN)("".concat(m,";").concat(f))?p?(_=(0,r.XC)([f,m],JSON.parse(n)),i.j.dispatch((0,a.Rr)(_)),y=null===(v=i.j.getState().app)||void 0===v||null===(v=v.component)||void 0===v||null===(v=v.props)||void 0===v?void 0:v.map,g=(null==y?void 0:y.props)||{},b=g.aroundCircles,A=g.aroundPin,b.length?(0,I.Fe)(y,null,-1,_.refCircle[0].leafletElement.getBounds()):A&&(0,I.Fe)(y,[A])):Q({warning:"geolocation coords out of bounds"}):Q({warning:"invalid geolocation coords"})):i.j.dispatch((0,a.Rr)({}))):Q({warning:"geolocation need a lat and a lng"})),!t.data.thematics){e.next=74;break}if(x=null===(T=i.j.getState().app)||void 0===T?void 0:T.component,!(S=(null===(P=x.props)||void 0===P||null===(P=P.moduleData)||void 0===P?void 0:P.data)||null)){e.next=74;break}if(w={},L=t.data.thematics.find((function(e){return e.name===S})),C=[],M=L.display||(null===(j=i.j.getState().app)||void 0===j||null===(j=j.component)||void 0===j||null===(j=j.props)||void 0===j?void 0:j.libraryThematicDisplay)||(null===(O=i.j.getState().app)||void 0===O||null===(O=O.component)||void 0===O||null===(O=O.props)||void 0===O||null===(O=O.moduleData)||void 0===O?void 0:O.defaultDisplay)||null,z=void 0!==L.predict?L.predict:(null===(R=i.j.getState().app)||void 0===R||null===(R=R.component)||void 0===R||null===(R=R.props)||void 0===R?void 0:R.libraryThematicPredict)||!1,!L.markers){e.next=47;break}X=V(L.markers),e.prev=30,W=B().mark((function e(){var t,n,r,o;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=K.value,null!==(t=i.j.getState().app)&&void 0!==t&&null!==(t=t.component)&&void 0!==t&&null!==(t=t.props)&&void 0!==t&&null!==(t=t.moduleData)&&void 0!==t&&t.overrideID&&(o=null===(r=i.j.getState().app)||void 0===r||null===(r=r.component)||void 0===r||null===(r=r.props)||void 0===r||null===(r=r.moduleData)||void 0===r?void 0:r.overrideID,n[o]&&(n.id=n[o])),z&&(n.tau=L.tau,n.predict=z.find((function(e){var t;return String(e[(null===(t=i.j.getState().app)||void 0===t||null===(t=t.component)||void 0===t||null===(t=t.props)||void 0===t||null===(t=t.moduleData)||void 0===t?void 0:t.predictID)||"id"])===String(n.id)}))),C.push(new d.A(q(q({},n),{},{display:M}),J.toLowerCase(),S));case 4:case"end":return e.stop()}}),e)})),X.s();case 33:if((K=X.n()).done){e.next=37;break}return e.delegateYield(W(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),X.e(e.t2);case 42:return e.prev=42,X.f(),e.finish(42);case 45:e.next=68;break;case 47:if(!($=(null===(Z=i.j.getState().app)||void 0===Z||null===(Z=Z.component)||void 0===Z||null===(Z=Z.props)||void 0===Z?void 0:Z.libraryThematicMarkers)||null)){e.next=67;break}ee=V($),e.prev=50,ne=B().mark((function e(){var t,n,r,o;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=te.value,null!==(t=i.j.getState().app)&&void 0!==t&&null!==(t=t.component)&&void 0!==t&&null!==(t=t.props)&&void 0!==t&&null!==(t=t.moduleData)&&void 0!==t&&t.overrideID&&(o=null===(r=i.j.getState().app)||void 0===r||null===(r=r.component)||void 0===r||null===(r=r.props)||void 0===r||null===(r=r.moduleData)||void 0===r?void 0:r.overrideID,n[o]&&(n.id=n[o])),z?(n.tau=L.tau,n.predict=z.find((function(e){var t;return String(e[(null===(t=i.j.getState().app)||void 0===t||null===(t=t.component)||void 0===t||null===(t=t.props)||void 0===t||null===(t=t.moduleData)||void 0===t?void 0:t.predictID)||"id"])===String(n.id)}))):delete n.predict,C.push(new d.A(q(q({},n),{},{display:M}),J.toLowerCase(),S));case 4:case"end":return e.stop()}}),e)})),ee.s();case 53:if((te=ee.n()).done){e.next=57;break}return e.delegateYield(ne(),"t3",55);case 55:e.next=53;break;case 57:e.next=62;break;case 59:e.prev=59,e.t4=e.catch(50),ee.e(e.t4);case 62:return e.prev=62,ee.f(),e.finish(62);case 65:e.next=68;break;case 67:Q({warning:"no markers detected"});case 68:i.j.dispatch((0,k.UQ)(z)),i.j.dispatch((0,k.$T)(M)),i.j.dispatch((0,c.aD)({thematic:C},!0)),w[S]=C,i.j.dispatch((0,k.i9)(w)),x&&x.buildMarkers(!0);case 74:if(!t.data.itineraries){e.next=88;break}if(ce=null===(re=i.j.getState().app)||void 0===re?void 0:re.component,se=ce.props.map,null==(ue=null==t||null===(ie=t.data)||void 0===ie?void 0:ie.itineraries)||null===(oe=ue.results)||void 0===oe||!oe.journeys){e.next=84;break}return e.next=81,(0,Y.A)(null==ue||null===(ae=ue.results)||void 0===ae?void 0:ae.journeys,i.j.getState().app.stops,J,ce);case 81:e.t5=e.sent,e.next=85;break;case 84:e.t5=null==ce||null===(le=ce.state)||void 0===le?void 0:le.journeys;case 85:de=e.t5,pe=(null==ue?void 0:ue.selected)||0,(null==de?void 0:de.length)>0&&("string"==typeof pe&&(de.find((function(e){return e.id===pe}))?pe=de.findIndex((function(e){return e.id===pe})):(pe=0,Q({warning:"selected has been force to 0"}))),Number.isInteger(pe)&&de[pe]||(pe=0,Q({warning:"selected has been force to 0"})),ce&&ce.state?Object.keys(de).length?ce.setState({journeys:de,journey:de[pe]},(function(){ce.displayJourneys(de,se)})):ce.setState({journeys:void 0,journey:null},(function(){ce.displayJourneys(void 0,se)})):Q({error:"itineraries doesn't exist"}));case 88:if(t.data.line&&(i.j.dispatch((0,a.lM)([])),"string"==typeof t.data.line?fe=i.j.getState().app.lines.find((function(e){return e.id===t.data.line})):"object"===F(t.data.line)&&(fe=new E(t.data.line,J),me=fe.stops,delete fe.stops,void 0===i.j.getState().app.lines.find((function(e){return e.id===fe.id}))&&(i.j.dispatch((0,u.Wm)(fe)),i.j.dispatch((0,u.F$)(me)))),fe&&(t.data.route_id&&(he=fe.routes.find((function(e){return e.route_id===t.data.route_id})))&&(fe.direction_id=he.direction_id),(0,o.wO)(fe,i.j.getState().app.hash).then((function(e){e&&e.props.data.features&&(i.j.dispatch((0,a.Dp)(e)),void 0===t.data.stop_id&&(0,I.Fe)(i.j.getState().app.map,[e]))})))),!t.data.route_id){e.next=134;break}if(i.j.dispatch((0,a.lM)([])),ve=i.j.getState().app.stops,_e=i.j.getState().app.map,ye=!1,t.data.line?"string"==typeof t.data.line?ye=i.j.getState().app.lines.find((function(e){return e.id===t.data.line})):"object"===F(t.data.line)&&(ye=new E(t.data.line,J)):ye=i.j.getState().app.lines.find((function(e){return e.routes.find((function(e){return e.route_id===t.data.route_id}))})),!ye){e.next=133;break}if(be=[],!ye.stops){e.next=101;break}be=ye.stops,e.next=108;break;case 101:if(!(Ae=ye.routes.find((function(e){return e.route_id===t.data.route_id})))){e.next=108;break}return t.data.line||(0,o.wO)(q(q({},ye),{},{direction_id:Ae.direction_id}),i.j.getState().app.hash).then((function(e){e&&e.props.data.features&&(i.j.dispatch((0,a.Dp)(e)),void 0===t.data.stop_id&&(0,I.Fe)(i.j.getState().app.map,[e]))})),e.next=106,H.A.get("/api/file?folder=stops&name=".concat(encodeURIComponent(Ae.id),"~").concat(i.j.getState().app.hash));case 106:Ee=e.sent,be=Ee&&Ee.data?Ee.data:ve.filter((function(e){return e.lines.map((function(e){return e.route_id})).includes(t.data.route_id)}));case 108:Te=[],Pe=V(be);try{for(Pe.s();!(xe=Pe.n()).done;)Oe=xe.value,(null!==(Se=t.data.stop_id)&&void 0!==Se&&Se.startsWith("stop_point")&&Oe.id===t.data.stop_id||null!==(je=t.data.stop_id)&&void 0!==je&&je.startsWith("stop_area")&&Oe.stop_area===t.data.stop_id)&&(Re=new N({schedules:t.data.schedules,line:ye},J),Oe.content=Re.content),Te.push(i.j.dispatch((0,c.wP)(Oe,{key:t.data.route_id+"_"+Oe.index,postMessageEventName:"stop",icon:new(U().DivIcon)({className:"lc-circle-icon-marker",iconSize:[6,6],tooltipAnchor:new(U().Point)(5,0),html:'<span style="border: 2px solid #'.concat(ye.color,'" />')}),zIndexOffset:50})))}catch(e){Pe.e(e)}finally{Pe.f()}i.j.dispatch((0,a.GG)(Te)),we=V(be),e.prev=113,Ce=B().mark((function e(){var n,i,o,a;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=Le.value,null!==(n=t.data.stop_id)&&void 0!==n&&n.startsWith("stop_point")&&o.id===t.data.stop_id||null!==(i=t.data.stop_id)&&void 0!==i&&i.startsWith("stop_area")&&o.stop_area===t.data.stop_id?(setTimeout((function(){o.ref.leafletElement.openPopup(),(0,r.tK)(o.ref.leafletElement)})),null!=_e&&null!==(a=_e.mapReference)&&void 0!==a&&null!==(a=a.current)&&void 0!==a&&a.leafletElement&&_e.mapReference.current.leafletElement.setView([+o.coord.lat,+o.coord.lon],_e.mapReference.current.leafletElement.getZoom())):o.ref.leafletElement.isPopupOpen()&&o.ref.leafletElement.closePopup();case 2:case"end":return e.stop()}}),e)})),we.s();case 116:if((Le=we.n()).done){e.next=120;break}return e.delegateYield(Ce(),"t6",118);case 118:e.next=116;break;case 120:e.next=125;break;case 122:e.prev=122,e.t7=e.catch(113),we.e(e.t7);case 125:return e.prev=125,we.f(),e.finish(125);case 128:void 0===t.data.stop_id&&(0,I.Fe)(i.j.getState().app.map,be.map((function(e){return[e.coord.lat,e.coord.lon]}))),void 0!==t.data.stop_id&&(null===(ge=t.data.schedules)||void 0===ge?void 0:ge.length)>0&&(0,r.Ry)({schedules:t.data.schedules,line:ye},J),setTimeout((function(){document.querySelectorAll(".lc-tooltip-leaflet-terminus").forEach((function(e){e.style.borderColor="#"+ye.color,e.style.backgroundColor="#"+ye.color,e.style.color=(0,G.N)(ye.color)>.5?"#333":"#fff",e.style.padding="2px 8px"}))})),e.next=134;break;case 133:Q({error:"line_not_found_for_this_route"});case 134:void 0!==t.data.hasAuthorizedCookies&&(i.j.dispatch((0,u.d6)(!0===t.data.hasAuthorizedCookies)),document.querySelector(".cookies-banner")&&(document.querySelector(".cookies-banner").style.display="none"));case 135:case"end":return e.stop()}}),e,null,[[30,39,42,45],[50,59,62,65],[113,122,125,128]])})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){X(o,r,i,a,l,"next",e)}function l(e){X(o,r,i,a,l,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}()},9736:function(e,t,n){n.d(t,{$6:function(){return ft},$D:function(){return ut},Am:function(){return He},Ck:function(){return Qe},Dg:function(){return Te},EN:function(){return ze},EX:function(){return at},G0:function(){return ct},Gi:function(){return st},HO:function(){return lt},II:function(){return vt},J:function(){return ve},J4:function(){return ge},Jx:function(){return Fe},KI:function(){return Ue},Lj:function(){return qe},Mn:function(){return oe},N0:function(){return Xe},Pb:function(){return Ne},Pg:function(){return dt},RN:function(){return Be},Ry:function(){return ot},Rz:function(){return Ae},T5:function(){return we},TF:function(){return Ze},TS:function(){return Ee},Te:function(){return $},Tl:function(){return Je},UP:function(){return de},VS:function(){return et},W:function(){return Le},W_:function(){return mt},XC:function(){return it},XR:function(){return xe},YB:function(){return Ge},YO:function(){return pe},Yz:function(){return ne},Zw:function(){return ht},_V:function(){return he},bT:function(){return Ie},c:function(){return ke},c8:function(){return $e},cX:function(){return fe},ck:function(){return ae},fK:function(){return rt},fV:function(){return me},g0:function(){return Ye},l_:function(){return Ke},o1:function(){return Pe},p0:function(){return pt},p4:function(){return We},pz:function(){return ie},ss:function(){return De},tK:function(){return Se},tx:function(){return ee},u7:function(){return te},uB:function(){return Ve},uQ:function(){return Oe},vf:function(){return nt},w1:function(){return be},x$:function(){return ye},x1:function(){return Re},xA:function(){return re},zQ:function(){return tt},zu:function(){return Me}});var r=n(3481),i=n.n(r),o=n(4457),a=n(3052),l=n(1290),c=n(1576),s=n(3727),u=n(3042),d=n(9742),p=n(7577),f=n(6035),m=n(8089),h=n(8203),v=n(6293),_=n(2951),y=n(3847),g=n(9789),b=n(7180),A=n(8413),E=n(4305),T=n(4877),P=n(3970),x=n.n(P),S=n(7293),j=n(4848);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function R(){R=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,a=Object.create(o.prototype),l=new C(r||[]);return i(a,"_invoke",{value:S(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",f="suspendedYield",m="executing",h="completed",v={};function _(){}function y(){}function g(){}var b={};s(b,a,(function(){return this}));var A=Object.getPrototypeOf,E=A&&A(A(N([])));E&&E!==n&&r.call(E,a)&&(b=E);var T=g.prototype=_.prototype=Object.create(b);function P(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,o,a,l){var c=d(e[i],e,o);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==O(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(u).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,l)}))}l(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function S(t,n,r){var i=p;return function(o,a){if(i===m)throw Error("Generator is already running");if(i===h){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var l=r.delegate;if(l){var c=j(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var s=d(t,n,r);if("normal"===s.type){if(i=r.done?h:f,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(i=h,r.method="throw",r.arg=s.arg)}}}function j(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(O(t)+" is not iterable")}return y.prototype=g,i(T,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:y,configurable:!0}),y.displayName=s(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,c,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},P(x.prototype),s(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new x(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},P(T),s(T,c,"Generator"),s(T,a,(function(){return this})),s(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return l.type="throw",l.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],l=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;L(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function w(e,t,n,r,i,o,a){try{var l=e[o](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,i)}function L(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){w(o,r,i,a,l,"next",e)}function l(e){w(o,r,i,a,l,"throw",e)}a(void 0)}))}}function C(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=k(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function k(e,t){if(e){if("string"==typeof e)return I(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=O(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==O(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G={REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"},H=G.REACT_APP_ALL_POPUP_ON_TOP,Y=G.REACT_APP_LIBRARY_URL,F=G.REACT_APP_PROJECT,B=G.REACT_APP_POLES,V=G.REACT_APP_AREAS_ZOOM_LEVEL,z=G.REACT_APP_DISRUPTION,X=G.REACT_APP_POPUP_AREA_COLOR_FIRST_LINE,K=G.REACT_APP_GO_TO_RC_URL,q=G.REACT_APP_GTM,W=G.REACT_APP_STOP_POPUP_COLOR_LINE,J=G.REACT_APP_FAVORITES,Q=G.REACT_APP_PRIMARY_COLOR,Z=G.REACT_APP_GO_TO_RC_INVERT_TO_FROM,$=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=JSON.parse(B);if(l&&l.ids){var c=r?e.reduce((function(e,n){var r=n.props.area.id;return t.find((function(e){return e.props.stop.stop_area===r}))&&l.ids.includes(r)&&e.push(n),e}),[]):e.filter((function(e){return l.ids.includes(e.props.area.id)}));n>l.zoom&&c.map((function(e){return t.push(o.j.dispatch((0,a.V5)(M(M({},e.props.area),{},{id:e.props.area.id+"-pole-exchange"}),{icon:i().icon({iconUrl:ee("/assets/images/stops/pole.svg"),iconSize:V>n?[40,40]:[52,52],iconAnchor:V>n?[20,30]:[26,39]}),area:M({},e.props.area),zIndexOffset:10})))}))}},ee=function(e){return Y?Y+e:e},te=function(e){var t="lc-place-icon";switch(e){case"poi_type:amenity:bicycle_rental":t+=" lc-bicycle-rental";break;case"poi_type:stations":t+=" lc-stations";break;case"poi_type:amenity:vcub":t+=" lc-vcub";break;case"poi_type:entrance":t+=" lc-marker-entrance";break;case"poi_type:depositaires":t+=" lc-depositaires lc-default";break;default:t+=" lc-default"}return t},ne=function(e,t){var n=e.message,r=void 0===n?"debug :":n,i=e.data,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DEBUG_FRONT";if(be()){switch(t){case"success":t="Green";break;case"info":t="DodgerBlue";break;case"error":t="Red";break;case"warning":t="Orange";break;default:t="info"}console.group("%c ".concat(o),"color:".concat(t)),i?console.log("%c ".concat(r),"color:".concat(t),i):console.log("%c ".concat(r),"color:".concat(t)),console.groupEnd()}},re=function(e,t,n){var r=[];if((null==e?void 0:e.length)>0){var i,o=N(e);try{for(o.s();!(i=o.n()).done;){var a,l=i.value,c=N(l.impacted_objects);try{var s=function(){var e=a.value;if((0,_._k)(l.begin)<=new Date&&(0,_._k)(l.end)>=new Date)switch(e.type){case"network":r.push(l);break;case"stop_point":e.id===t.id&&r.push(l);break;case"stop_area":e.id===t.stop_area&&r.push(l);break;case"section":var i,o,c,s,u,d,p,f=null===(i=n.routes)||void 0===i?void 0:i.find((function(e){return e.direction_id===n.direction_id})),m=null===(o=n.stops)||void 0===o?void 0:o.find((function(t){return e.from.includes("stop_area")?t.stop_area===e.from&&e.routes.find((function(e){return e.id===f.route_id})):t.id===e.from&&e.routes.find((function(e){return e.id===f.route_id}))})),h=null===(c=n.stops)||void 0===c?void 0:c.find((function(t){return e.from.includes("stop_area")?t.stop_area===e.to&&e.routes.find((function(e){return e.id===f.route_id})):t.id===e.to&&e.routes.find((function(e){return e.id===f.route_id}))}));(null===(s=n.stops)||void 0===s?void 0:s.indexOf(m))>=(null===(u=n.stops)||void 0===u?void 0:u.indexOf(t))&&(null===(d=n.stops)||void 0===d?void 0:d.indexOf(h))<=(null===(p=n.stops)||void 0===p?void 0:p.indexOf(t))&&r.push(l)}};for(c.s();!(a=c.n()).done;)s()}catch(e){c.e(e)}finally{c.f()}}}catch(e){o.e(e)}finally{o.f()}}return r},ie=function(e,t,n,r){var l=(0,_.Yq)(new Date,"ymdhm"),s=[];if(t.length>0&&0===s.length){var u,d=N(e);try{for(d.s();!(u=d.n()).done;){var p=u.value,f=(0,_.Yq)((0,_._k)(p.begin),"ymdhm"),m=(0,_.Yq)((0,_._k)(p.end),"ymdhm");if(l>=f&&l<=m){var h,v=N(p.impacted_objects);try{for(v.s();!(h=v.n()).done;){var y=h.value;["section","stop_point","stop_area"].includes(y.type)&&(y.line&&y.line===n.id||!y.line)&&(y.severity=p.severity,s.push(y))}}catch(e){v.e(e)}finally{v.f()}}}}catch(e){d.e(e)}finally{d.f()}var g,b=[],A=[],E=N(s);try{var T=function(){var e=g.value;switch(e.type){case"section":var r=n.routes.find((function(e){return e.direction_id===n.direction_id})),l=t.find((function(t){return e.from.includes("stop_area")?t.props.stop.stop_area===e.from&&e.routes.find((function(e){return e.id===r.route_id})):t.props.stop.id===e.from&&e.routes.find((function(e){return e.id===r.route_id}))})),c=t.find((function(t){return e.from.includes("stop_area")?t.props.stop.stop_area===e.to&&e.routes.find((function(e){return e.id===r.route_id})):t.props.stop.id===e.to&&e.routes.find((function(e){return e.id===r.route_id}))}));l&&c&&(l.props.stop.severity=c.props.stop.severity=e.severity,A.push.apply(A,C(t.slice(t.indexOf(l),t.indexOf(c)+1))));break;case"stop_area":case"stop_point":var s=t.find((function(t){return t.props.stop["stop_area"===e.type?"stop_area":"id"]===e.id}));s&&(s.props.stop.severity=e.severity,A.push(s))}for(var u=function(){var e=p[d];e&&!b.find((function(t){return t.props.stop.id===e.props.stop.id}))&&b.push(o.j.dispatch((0,a.V5)(e.props.stop,{key:n.code+"_"+e.props.stop.index+"_disrupted",icon:new(i().DivIcon)({className:"lc-circle-icon-marker lc-map-stop-marker ".concat(e.props.stop.terminus?" lc-stop-terminus":""),iconSize:e.props.stop.terminus?[10,10]:[8,8],iconAnchor:new(i().Point)(4,4),html:'<div><span style="border: 2px solid #'.concat(n.color,"; background: ").concat("blocking"===e.props.stop.severity?"red":"orange",';" /><div class="').concat("blocking"===e.props.stop.severity&&z?"lc-"+JSON.parse(z).map.blocking:"").concat("delays"===e.props.stop.severity&&z?"lc-"+JSON.parse(z).map.delays:"").concat(e.props.stop.terminus?" lc-stop-terminus":"",'" style="border-color: #').concat(n.color,'"></div></div>')}),stop:e.props.stop,zIndexOffset:250})))},d=0,p=A;d<p.length;d++)u()};for(E.s();!(g=E.n()).done;)T()}catch(e){E.e(e)}finally{E.f()}if(r){var P=A.find((function(e){return e.props.stop.id===r}));P&&setTimeout((function(){return o.j.dispatch((0,a.xY)(P.props.stop))}))}o.j.dispatch((0,c.SA)(t.concat(b)))}};function oe(e,t,n,r){var i=re(n,t,e);if((null==i?void 0:i.length)>0)return(0,j.jsx)("div",{className:"lc-disruptions in-stop",children:i.map((function(t){var n;return(0,j.jsxs)("div",{className:"lc-".concat(t.severity),children:[!1!==JSON.parse(z).severityTitle&&(0,j.jsxs)("div",{className:"lc-disruption-severity",children:[(0,j.jsx)("div",{className:"lc-icon"}),!0===JSON.parse(z).titleInsteadOfSeverity&&t.title?t.title:"blocking"===t.severity?"Perturbation majeure":"delays"===t.severity?"Perturbation":"Information"]}),(0,j.jsxs)("div",{className:"lc-disruption","aria-label":Oe(t.begin,t.end,r)+" : "+(null===(n=t.message)||void 0===n?void 0:n.replace(/<[^>]+>/g," ")),children:["blocking"===t.severity?(0,j.jsxs)("div",{className:"lc-severity-blocking-in-stop",children:[Je("severity-blocking-stop")," ",e.code]}):null,t.title&&!JSON.parse(z).titleInsteadOfSeverity&&(0,j.jsx)("div",{className:"lc-disruption-title",children:t.title}),t.message?(0,j.jsx)("div",{className:"lc-disruption-content",dangerouslySetInnerHTML:{__html:t.message}}):(0,j.jsx)("div",{className:"lc-disruption-content empty",children:"Aucun motif renseigné"}),!1!==JSON.parse(z).date&&(0,j.jsx)("div",{className:"lc-disruption-dates",children:Oe(t.begin,t.end,r)})]})]},"stop-disruption-".concat(t.id))}))})}function ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(n,r){if(!Object.prototype.hasOwnProperty.call(n,e)||!Object.prototype.hasOwnProperty.call(r,e))return 0;var i="string"==typeof n[e]?n[e].toLowerCase():n[e],o="string"==typeof r[e]?r[e].toLowerCase():r[e],a=0;return i>o?a=1:i<o&&(a=-1),"desc"===t?-1*a:a}}var le,ce,se,ue,de=function(e){return!!e&&"true"===e},pe=function(e){for(var t=[],n=function(){var n=i[r],o=Array.isArray(e[n])?e[n]:Object.keys(e[n]).reduce((function(t,r){return t.push.apply(t,C(e[n][r])),t}),[]);t.push.apply(t,C(o))},r=0,i=Object.keys(e);r<i.length;r++)n();return t},fe=function(e,t){var n=null==t?void 0:t.find((function(t){return t.props.place?t.key===e.id.toString():t.props.area?e.id.includes("stop_area")?t.props.area.id===e.id:t.props.area.id===e.stop_area:null!=e&&e.id.includes("stop_area")?t.props.stop.stop_area===e.id:t.props.stop.id===e.id}));if(n)return n.divIcon?n.ref:(n.props?n.props.place?n.props.place:n.props.area||n.props.stop:n).ref},me=function(e,t){return M(M({},e.find((function(e){var n=e.id,r=e.code,i=e.network,o=e.cat;return t.id?n===t.id:t.mode?String(r).toLowerCase()===String(t.code).toLowerCase()&&t.mode===o:r===t.code&&i===t.network}))),t)},he=function(e){var t,n={},r=N(new URLSearchParams(e.search).entries());try{for(r.s();!(t=r.n()).done;){var i=t.value;n[i.shift()]=decodeURIComponent(i.shift())}}catch(e){r.e(e)}finally{r.f()}return n},ve=function(e,t){var n,r=e.split(";"),i=" ",o=N(r);try{for(o.s();!(n=o.n()).done;){var a=n.value;if("24/7"===a)i+=Je("open-hour-24/7",!1)+". ";else i+=_e(a,t)+". "}}catch(e){o.e(e)}finally{o.f()}return(0,j.jsxs)("div",{className:"lc-opening-hours","aria-label":Je("open-hour-title",!1)+i,children:[(0,j.jsx)("div",{className:"lc-opening-hours-title",children:Je("open-hour-title")}),(0,j.jsx)("div",{className:"lc-opening-hours-list",children:r.map((function(e){return"24/7"===e?(0,j.jsx)("span",{children:Je("open-hour-24/7")},e):(0,j.jsx)("span",{children:_e(e,t)},e)}))})]})},_e=function(e,t){var n,r,i={Mo:Je("open-hour-mo",!1),Tu:Je("open-hour-tu",!1),We:Je("open-hour-we",!1),Th:Je("open-hour-th",!1),Fr:Je("open-hour-fr",!1),Sa:Je("open-hour-sa",!1),Su:Je("open-hour-su",!1),PH:Je("open-hour-ph",!1),SH:Je("open-hour-sh",!1)},o={Jan:Je("open-hour-jan",!1),Feb:Je("open-hour-feb",!1),Mar:Je("open-hour-mar",!1),Apr:Je("open-hour-apr",!1),May:Je("open-hour-may",!1),Jun:Je("open-hour-jun",!1),Jul:Je("open-hour-jul",!1),Aug:Je("open-hour-aug",!1),Sep:Je("open-hour-sep",!1),Oct:Je("open-hour-oct",!1),Nov:Je("open-hour-nov",!1),Dec:Je("open-hour-dec",!1)},a=e;" "===a.charAt(0)&&(a=a.substr(1));for(var l=0,c=Object.keys(o);l<c.length;l++){var s=c[l];a=a.replace(new RegExp("\\b".concat(s,"\\b"),"g"),o[s])}for(var u=0,d=Object.keys(i);u<d.length;u++){var p=d[u];a=a.replace(new RegExp("\\b".concat(p,"\\b"),"g"),i[p])}e.includes("SH")||e.includes("PH")||(a=a.replace(" ","en"===t?": ":" : "));var f=a.split(": ")[0],m=f.split("-");return!a.split(": ")[0].includes("-")||Object.values(i).includes(m[0])||Object.values(i).includes(m[1])||(a=m[0]!==m[1]?a.replace(a.split(": ")[0],Je("open-hour-months-separator",!1,{key:"m1",value:f.split("-")[0]},{key:"m2",value:f.split("-")[1]})):a.replace(a.split(": ")[0],m[0])),null!==(n=(a=a.replace(/: : /g,"en"===t?": ":" : ")).split(": ")[0])&&void 0!==n&&n.includes("-")&&(a=(a=a.replace("-"," ".concat(Je("open-hour-days-separator",!1)," "))).replace(/([A-Za-z])-/g,"$1 "+Je("open-hour-days-separator",!1)+" ")),null!==(r=a.split(": ")[1])&&void 0!==r&&r.includes("-")&&(a=a.replace(/([A-Za-z])-/g,"$1 "+Je("open-hour-days-separator",!1)+" ")),a=(a=(a=a.replace(/-/g," - ")).replaceAll(/closed|off/g,Je("closed",!1))).replaceAll(",",", ")},ye=function(e){try{var t=ge();return(null==t?void 0:t.id)===e}catch(e){throw console.error(e),e}},ge=function(){var e=o.j.getState().app.modules;try{var t=d.A.location.pathname,n=e.find((function(e){var n=e.id,r=e.url,i=e.data;return r?t.includes(r):"thematic"===n?t.includes("/".concat(i)):t.includes(n)}));return n||!1}catch(e){return console.error(e),!1}},be=function(){return["local","dev"].includes("prod")},Ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=o.j.getState().app.language,r=new Date,i=r.getFullYear().toString(),a=(r.getMonth()+1).toString(),l=r.getDate().toString();if(a.length<2&&(a="0"+a),l.length<2&&(l="0"+l),i+a+l-e.departure_date_time.split("T")[0])return(0,j.jsxs)("div",{className:"lc-journey-warning lc-departure-next-day lc-itinerary"+(t?" lc-in-roadmap":""),children:[(0,j.jsx)("div",{className:"lc-icon"}),Je("route-calculation-departure-next-day")," ",(0,_.Je)(e.departure_date_time,n,"full")]})},Ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=o.j.getState().app.lines,r=e.sections.filter((function(e){var t;return null==e||null===(t=e.additional_informations)||void 0===t?void 0:t.includes("odt_with_stop_time")})).length>0,i=!1,a=!1;if(r){var l,c=e.sections.reduce((function(e,t){var n;return null!=t&&null!==(n=t.additional_informations)&&void 0!==n&&n.includes("odt_with_stop_time")&&!e.includes(t.display_informations.code)&&e.push(t.display_informations.code),e}),[]),s=N(c);try{var u=function(){var e,t,r,o=l.value,c=n.find((function(e){return e.code===o}));null==c||null===(e=c.tad)||void 0===e||!e.zone||null!=c&&null!==(t=c.tad)&&void 0!==t&&t.hideMessageFakeTraces||(i=!0),null!=c&&null!==(r=c.tad)&&void 0!==r&&r.displayAsInfo&&(a=!0)};for(s.s();!(l=s.n()).done;)u()}catch(e){s.e(e)}finally{s.f()}return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"lc-journey-warning lc-journey-with-odt lc-itinerary"+(a?" info":"")+(t?" lc-in-roadmap":""),children:[(0,j.jsx)("div",{className:"lc-icon"}),Je("route-calculation-journey-with-odt",!1,{key:"list",value:c.length>1?Je("more-than-one-line",!1,{key:"lines",value:c.join(", ")}):Je("one-line",!1,{key:"line",value:c[0]})})]}),i&&(0,j.jsxs)("div",{className:"lc-journey-warning info lc-itinerary false-trace"+(t?" lc-in-roadmap":""),children:[(0,j.jsx)("div",{className:"lc-icon"}),Je("route-calculation-false-trace")]})]})}return null},Te=function(e,t){var n,r=N(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(Object.keys(e).includes(i.name))return i.name}}catch(e){r.e(e)}finally{r.f()}return null},Pe=function(e){var t=function(){xe(e)};return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}},xe=function(e,t){var n,r,i=o.j.getState().app,a=i.size,l=i.component.props.options;if(!document.querySelector(".lc-no-board")){var c=o.j.getState().app.domElement,s=S.A.headerHeight,u=document.querySelector(c).getBoundingClientRect(),d=document.querySelector("".concat(c," .lc-board"))||document.querySelector("".concat(c)),p=t||document.querySelector("[data-lc-scroll='scroll']");if(p)if(!e&&(null!=l&&null!==(n=l.config)&&void 0!==n&&n.size||a)){var f=p.getBoundingClientRect(),m=p.offsetParent&&Array.prototype.find.call(null===(r=p.offsetParent)||void 0===r?void 0:r.children,(function(e){return e.classList.contains("lc-elevation")||e.classList.contains("lc-react-tabs")})),h=u.height+parseInt(s)-(f.y-u.y)-parseInt(getComputedStyle(d).marginTop)-parseInt(getComputedStyle(p).paddingTop)-parseInt(getComputedStyle(p).paddingBottom);m&&(h-=parseInt(getComputedStyle(m).marginBottom));var v=document.querySelector(".lc-lastest-nexts-schedules-date.journey")||document.querySelector(".lc-lines-lasted-updated-schedules");v&&(h-=parseInt(getComputedStyle(v).height)+parseInt(getComputedStyle(v).paddingBottom)),p.style.maxHeight=h+"px"}else p.style.maxHeight="inherit"}},Se=function(e,t){var n,r=e.getElement(),a=o.j.getState().map,l=a.markerMode,c=a.lineSelected,s=o.j.getState().app.lines;if(r){var u,d=e.getPopup(),p=d.getElement();if(null!=t&&t.lines&&(0,T.Ul)(t.lines,"position"),de(X))if(p)if((null==t||null===(u=t.lines)||void 0===u?void 0:u.length)>0){var f=me(s,t.lines[0]);null!=f&&f.color&&p.querySelector(".lc-infobox").style.setProperty("--lc-infobox-color","#".concat(null==f?void 0:f.color))}de(W)&&c&&null!=t&&null!==(n=t.lines)&&void 0!==n&&n.find((function(e){return e.id===c.id}))&&(p.querySelector(".lc-infobox").style.setProperty("--lc-infobox-color","#".concat(c.color)),p.querySelector(".lc-infobox").style.setProperty("--lc-infobox-text-color",(0,A.N)(c.color)>.5?"#333":"#fff"));var m=window.getComputedStyle(r),h=parseInt(m.getPropertyValue("height")),v=Math.abs(parseInt(m.getPropertyValue("margin-top")));if(de(H))if(setTimeout((function(){var e;p&&p.querySelector(".lc-infobox")&&p.querySelector(".lc-infobox").style.setProperty("--lc-tooltip-arrow-top",(null==p||null===(e=p.getBoundingClientRect())||void 0===e?void 0:e.height)-1+"px")}),100),r.classList.contains("lc-stop-marker")&&v!==h/2){var _=v-h/2;d.options.offset=new(i().Point)(0,-1*(5+_))}else{var y;d.options.offset=new(i().Point)(0,null!=t&&t.divIcon?"default"===l?10-parseInt(null===(y=r.querySelector("img"))||void 0===y?void 0:y.height):r.offsetHeight+5:r.querySelector("img")||"img"===r.tagName.toLowerCase()?-5:5)}else{var g;null!=t&&t.divIcon&&p&&p.querySelector(".lc-infobox").style.setProperty("--lc-tooltip-arrow-top",p.offsetHeight-1+"px");var b=v!==h/2?-1*(v-h/2):0,E=r.offsetWidth;void 0===E&&void 0!==r.getBBox()&&(E=r.getBBox().width),d.options.offset=new(i().Point)(null!=t&&t.divIcon?0:(null==p?void 0:p.offsetWidth)/2+E/2+17,null!=t&&t.divIcon?"default"===l?10-parseInt(null===(g=r.querySelector("img"))||void 0===g?void 0:g.height):r.offsetHeight+5:(null==p?void 0:p.offsetHeight)-2.5+b)}setTimeout((function(){d.update()}))}},je=(le=function(e,t,n){var r,i=d.A.location.pathname,a=n.app,c=a.component,s=a.configApp,f=a.isMobile,m=a.places,h=c.props.disableAutocompleteGeolocation,v=null;if(null!=c&&null!==(r=c.props)&&void 0!==r&&r.thematicPlaces&&(v=c.props.moduleData.file),0===e.length)Re(c);else{var _,y,g={params:{type:t,query:e,file:v}};n.tourismPartners&&(g.params.typePartner=n.tourismPartners.typePartner),null!=c&&null!==(_=c.props)&&void 0!==_&&_.searchIn&&(g.params.searchIn=c.props.searchIn),t.startsWith("inputThematicAroundSearch")&&(null==c||null===(y=c.props)||void 0===y||null===(y=y.moduleData)||void 0===y||null===(y=y.categories)||void 0===y?void 0:y.length)>0&&(g.params.categories=c.props.moduleData.categories),u.A.get("/api/autocomplete",g).then((function(e){var r,a=[{id:"geoloc",name:Je("autocomplete-geoloc"),geolocation:!0}],c=e.data,u=[],d=N(e.data);try{var v=function(){var e,t,i=r.value;if(i.isPartner)u.push(i);else if("stations"===i.embedded_type)n.app.stations.find((function(e){return e.id===i.id}))?u.push(i):i.merge&&i.station&&(u.push(i),o.j.dispatch((0,p.Kv)(i.station)));else if("stop_area"===i.embedded_type||null!=i&&null!==(e=i.id)&&void 0!==e&&e.includes("stop_area:")){var a;(null!==(a=n.app)&&void 0!==a&&null!==(a=a.stopsNetwork)&&void 0!==a&&a.length||n.app.areas.find((function(e){return e.id===i.id}))||ye("route-calculation")&&null!=s&&s.autocomplete_areas_not_generated)&&u.push(i)}else if(null!=i&&null!==(t=i.id)&&void 0!==t&&t.includes("line:"))u.push(i);else{var l;i.embedded_type||"no_result"===(null==i?void 0:i.id)||!0!==i.merge?i.addToPlaces&&"poi"===i.embedded_type?m.find((function(e){return e.id===i.id}))||(u.push(i),o.j.dispatch((0,p.JI)(i.poi))):u.push(i):u.push({embedded_type:null!=i&&null!==(l=i.id)&&void 0!==l&&l.includes("aeroway")?"aeroway":"poi",addByMerge:!0,id:i.id,name:i.label||i.name,poi:i})}};for(d.s();!(r=d.n()).done;)v()}catch(e){d.e(e)}finally{d.f()}c=u;var _=yt(s,h,f)?a.concat(c):c;_=_.map((function(e,t){return M(M({},e),{},{index:t})})),(i.includes("/places-interest")||i.includes("/lines")||n.board.thematicPlaces||i.includes("/towns"))&&(_=_.filter((function(e){return"geoloc"!==e.id}))),i.includes("/route-calculation")?"inputStart"===t?o.j.dispatch((0,l.Xh)(_)):o.j.dispatch((0,l.oi)(_)):o.j.dispatch((0,l.bm)(_))})).catch((function(e){var t=e.response&&e.response.data?e.response.data.id:e;console.warn(t)}))}},ce=500,function(){var e=arguments,t=this,n=se&&!ue;clearTimeout(ue),ue=setTimeout((function(){ue=null,se||le.apply(t,e)}),ce),n&&le.apply(this,arguments)}),Oe=function(e,t,n){var r=(0,_.Yq)(new Date,"ymd"),i=(0,_._k)(e),o=(0,_._k)(t),a=(0,_.Yq)(i,Qe(n)?"m/d/y":"d/m/y"),l=(0,_.Yq)(o,Qe(n)?"MM/DD/YYYY":"DD/MM/YYYY"),c=(0,_.Yq)(i,Qe(n)?"h:m a":"h:m"),s=(0,_.Yq)(o,Qe(n)?"h:m a":"h:m");return i===r&&o===r?"en"===n?"Today from "+c+" to "+s:"Aujourd'hui de "+c+" à "+s:i===r?"en"===n?o?"Today at "+c+" to "+l+" at "+s:"Today at "+c:o?"Aujourd'hui à "+c+" au "+l+" à "+s:"Aujourd'hui à"+c:o===r?"en"===n?"From "+a+" at "+c+" until today at "+s:"Du "+a+" à "+c+" jusqu'à aujourd'hui à "+s:i===o?"en"===n?o?a+" from "+c+" to "+s:a+" from "+c:o?"Le "+a+" de "+c+" à "+s:"Le "+a+" à partir de "+c:"en"===n?o?"From "+a+" at "+c+" to "+l+" at "+s:"From "+a+" at "+c:o?"Du "+a+" à "+c+" au "+l+" à "+s:"A partir du "+a+" à "+c},Re=function(){var e=L(R().mark((function e(t){var n,r,i,a,c,s,p,f,m,h,v,_,y,g,b,A,E,T,P,x,S,j,O,w,L;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=d.A.location.pathname,r=he(d.A.location),i=t.props,a=i.disableAutocompleteGeolocation,c=i.token,s=i.clientId,p=o.j.getState().app,f=p.configApp,m=p.isMobile,h=p.lines,v=[{id:"geoloc",name:Je("autocomplete-geoloc"),geolocation:!0}],_=et("localStorage")&&JSON.parse(window.localStorage.getItem("history_".concat(F)))||[],y=[],g=N(_),e.prev=8,A=R().mark((function e(){var n,r,i,o,a;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=b.value,r=n.type,e.t0=r,e.next="line"===e.t0||"poi"===e.t0||"stop_area"===e.t0?5:9;break;case 5:return o="line"===r?"lines":"poi"===r?"places":"areas",(a=null==t||null===(i=t.props[o])||void 0===i?void 0:i.find((function(e){return e.id===n.item_id})))&&("lines"===o&&a.routes.length||"lines"!==o)&&y.push(n),e.abrupt("break",10);case 9:y.push(n);case 10:case"end":return e.stop()}}),e)})),g.s();case 11:if((b=g.n()).done){e.next=15;break}return e.delegateYield(A(),"t0",13);case 13:e.next=11;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(8),g.e(e.t1);case 20:return e.prev=20,g.f(),e.finish(20);case 23:if(E=[],T=[],!J||!c){e.next=54;break}return e.prev=26,e.next=29,u.A.get("/api/favorites?token=".concat(c).concat(s?"&client_id="+s:""));case 29:if(!(S=e.sent)||!S.data){e.next=47;break}j=N(S.data),e.prev=32,w=R().mark((function e(){var t,n,r,i;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=O.value,r=null!=n&&null!==(t=n.id)&&void 0!==t&&t.startsWith("line:")?"line":"stop_area",E.find((function(e){return e.id==="favorite-".concat(n.id)}))||E.push({id:"favorite-".concat(n.id),item_id:n.id,code:"line"===r&&h?null===(i=h.find((function(e){return e.id===n.id})))||void 0===i?void 0:i.code:null,type:r,name:n.name,favorite:!0});case 3:case"end":return e.stop()}}),e)})),j.s();case 35:if((O=j.n()).done){e.next=39;break}return e.delegateYield(w(),"t2",37);case 37:e.next=35;break;case 39:e.next=44;break;case 41:e.prev=41,e.t3=e.catch(32),j.e(e.t3);case 44:return e.prev=44,j.f(),e.finish(44);case 47:(null===(P=JSON.parse(J))||void 0===P?void 0:P.stops)&&T.push.apply(T,C(E.filter((function(e){return e.type.includes("stop")})))),(null===(x=JSON.parse(J))||void 0===x?void 0:x.lines)&&T.push.apply(T,C(E.filter((function(e){return"line"===e.type})))),e.next=54;break;case 51:e.prev=51,e.t4=e.catch(26),console.warn(e.t4);case 54:L=[],n.includes("/lines")?(L.push.apply(L,C(y.filter((function(e){return"stop_area"===e.type||"line"===e.type})))),L.push.apply(L,C(T.filter((function(e){return"stop_area"===e.type||"line"===e.type}))))):ye("around")&&!n.includes("/company")?(yt(f,a,m)&&L.push.apply(L,v),L.push.apply(L,y),L.push.apply(L,T)):n.includes("/route-calculation")?(yt(f,a,m)&&L.push.apply(L,v),L.push.apply(L,C(y.filter((function(e){return"line"!==e.type})))),L.push.apply(L,C(T.filter((function(e){return"line"!==e.type}))))):n.includes("/station")&&L.push.apply(L,C(y.filter((function(e){return"stop_area"===e.type})))),n.includes("/route-calculation")?(r.from||o.j.dispatch((0,l.Xh)(L)),r.to||o.j.dispatch((0,l.oi)(L))):o.j.dispatch((0,l.bm)(L));case 57:case"end":return e.stop()}}),e,null,[[8,17,20,23],[26,51],[32,41,44,47]])})));return function(t){return e.apply(this,arguments)}}(),we=function(e,t,n){var r=e.target;o.j.dispatch((0,l.Js)(null)),n.app.isMobile&&(r.blur(),o.j.dispatch((0,p.vA)((0,f.Q)(t),(0,f.Y)())))},Le=function(e,t,n){var r=e.target.value,i=d.A.location.pathname;if(o.j.dispatch((0,l.ev)(!1)),i.includes("/route-calculation")){var c=he(d.A.location);"inputStart"===t?0===r.length&&c.from?c.to?d.A.push({pathname:i,search:"?to="+c.to}):d.A.push({pathname:i}):o.j.dispatch((0,l.qE)({name:r})):0===r.length&&c.to?c.from?d.A.push({pathname:i,search:"?from="+c.from}):d.A.push({pathname:i}):o.j.dispatch((0,l.PU)({name:r}))}else o.j.dispatch((0,l._f)(r)),0===r.length&&"inputTourismPartners"!==t&&(o.j.dispatch((0,a.xY)(null)),d.A.push({pathname:i}));je(r,t,n)},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){navigator.geolocation.getCurrentPosition(t,n,e)}))},Ne=function(){var e=L(R().mark((function e(t,n,r,i,a){var c,s,u,p,h,v,_,y,g,b,A,E,T,P,x,S,j,O,w,L,C,N,k;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=i.app,s=c.component,u=c.lines,p=c.stops,h=c.areas,v=c.touchscreenSelected,_=c.modules,y=d.A.location.pathname,g=he(d.A.location),n.geolocation||n.history||n.region||!et("localStorage")||(!n.id.startsWith("stop_area")||n.id.startsWith("stop_area")&&h.find((function(e){return e.id===n.id})))&&ke(n),!y.includes("/lines")){e.next=8;break}n.id.includes("stop_area")?(s.onStopSelected(h.find((function(e){return e.id===n.item_id||e.id===n.id}))),o.j.dispatch((0,l.ev)(!0))):n.id.includes("stop_point")?(n.item_id=p.filter((function(e){return e.id===n.item_id}))[0].stop_area,s.onStopSelected(h.find((function(e){return e.id===n.item_id}))),o.j.dispatch((0,l.ev)(!0))):s.onLineSelected(u.find((function(e){return e.id===n.item_id||e.id===n.id}))),e.next=95;break;case 8:if(!ye("around")&&"/"!==y){e.next=41;break}if(b="?from=",!n.id.includes("poi:")||!0!==s.props.itemCoordsIfNotFound||s.props.statePlaces.find((function(e){return e.id===n.id}))||!n.poi||!n.poi.coord){e.next=15;break}b=b+n.poi.coord.lon+";"+n.poi.coord.lat,setTimeout((function(){o.j.dispatch((0,l._f)(n.name))}),500),e.next=37;break;case 15:if(!n.geolocation){e.next=36;break}if(!v){e.next=20;break}b+=v.coords,e.next=34;break;case 20:return e.prev=20,e.next=23,Ce({timeout:5e3,enableHighAccuracy:!0});case 23:A=e.sent,E=A.coords,T=E.longitude,P=E.latitude,b+=T+";"+P,e.next=34;break;case 28:throw e.prev=28,e.t0=e.catch(20),a&&o.j.dispatch((0,f.Y)()),document.activeElement.blur(),o.j.dispatch((0,l.Js)(e.t0)),e.t0;case 34:e.next=37;break;case 36:b=n.history||n.favorite?n.item_id.includes("line:")?"?line="+n.item_id:b+n.item_id:n.id.includes("line:")?"?line="+n.id:b+n.id;case 37:b.includes("line:")&&b.includes("admin:fr")||o.j.dispatch((0,l.ev)(!0)),"/"===y?d.A.push({pathname:"/around",search:b+"&back=board"}):d.A.push({pathname:y,search:b}),e.next=95;break;case 41:if(!y.includes("/route-calculation")){e.next=68;break}if(x="",!n.geolocation){e.next=64;break}if(!v){e.next=48;break}x+=v.coords,e.next=62;break;case 48:return e.prev=48,e.next=51,Ce({timeout:5e3,enableHighAccuracy:!0});case 51:S=e.sent,j=S.coords,O=j.longitude,w=j.latitude,x=O+";"+w,e.next=62;break;case 56:throw e.prev=56,e.t1=e.catch(48),a&&o.j.dispatch((0,f.Y)()),document.activeElement.blur(),o.j.dispatch((0,l.Js)(e.t1)),e.t1;case 62:e.next=65;break;case 64:x=n.history||n.favorite?n.item_id:n.id;case 65:"inputStart"===r?g.to?d.A.push({pathname:y,search:"?from="+x+"&to="+g.to}):d.A.push({pathname:y,search:"?from="+x}):"inputEnd"===r&&(g.from?d.A.push({pathname:y,search:"?from="+g.from+"&to="+x}):d.A.push({pathname:y,search:"?to="+x})),e.next=95;break;case 68:if(!y.includes("/network-lines")&&!y.includes("/new-network-tabs")){e.next=94;break}if(L=0,!n.id.includes("stop_")){e.next=77;break}(0,m.X3)({event:"map-openNetworkItem",type:"Stop",name:n.name,from:"Autocompletion"}),L=_.find((function(e){return["network-lines","new-network-tabs"].includes(e.id)})).tabs.find((function(e){return["network-map","new-network-lines"].includes(e.id)})).position-1,C=nt(g,{stop_area:n.id,tab:L}),d.A.push({pathname:y,search:C}),e.next=92;break;case 77:if(!n.id.includes("line:")){e.next=84;break}(0,m.X3)({event:"map-openNetworkItem",type:"Ligne",name:n.name,from:"Autocompletion"}),L=_.find((function(e){return["network-lines","new-network-tabs"].includes(e.id)})).tabs.find((function(e){return["network-map","new-network-lines"].includes(e.id)})).position-1,N=nt(g,{line:n.id,tab:L}),d.A.push({pathname:y,search:N}),e.next=92;break;case 84:if(!n.id.includes("town:")){e.next=91;break}(0,m.X3)({event:"map-openNetworkItem",type:"Ville",name:n.name,from:"Autocompletion"}),L=_.find((function(e){return["network-lines","new-network-tabs"].includes(e.id)})).tabs.find((function(e){return["network-towns","new-network-towns"].includes(e.id)})).position-1,k=nt(g,{town:n.insee,tab:L}),d.A.push({pathname:y,search:k}),e.next=92;break;case 91:return e.abrupt("return");case 92:e.next=95;break;case 94:y.includes("/partners")||y.includes("/tourism-partners")?d.A.push({pathname:y,search:"?type=".concat(n.type,"&partner=").concat(n.id)}):i.board.thematicPlaces?d.A.push({pathname:y,search:"?place="+n.id.replace(/history-|favori-/g,"")}):r.startsWith("inputThematicAroundSearch")&&d.A.push({pathname:y,search:"?from="+n.id.replace(/history-|favori-/g,"")});case 95:"inputStart"===r?o.j.dispatch((0,l.qE)({name:t})):"inputEnd"===r?o.j.dispatch((0,l.PU)({name:t})):o.j.dispatch((0,l._f)(t)),a&&o.j.dispatch((0,f.Y)());case 97:case"end":return e.stop()}}),e,null,[[20,28],[48,56]])})));return function(t,n,r,i,o){return e.apply(this,arguments)}}(),ke=function(e){var t=JSON.parse(window.localStorage.getItem("history_".concat(F)))||[];if(t.reverse(),0===t.filter((function(t){return t.item_id===e.id})).length){if(e.id.includes("poi:")&&"company"===e.embedded_type)return;var n;e.id.startsWith("line:")?null!==(n=e.routes)&&void 0!==n&&n.length?t.push({id:"history-"+e.id,type:"line",name:e.name,mode:e.mode,color:e.color,item_id:e.id,code:e.code,history:!0}):console.warn("don't add line without routes into history"):e.id.includes("stop_area:")?t.push({id:"history-"+e.id,type:"stop_area",name:e.name,item_id:e.id,history:!0}):e.address?t.push({id:"history-"+e.id,type:"address",name:e.name,item_id:e.id,history:!0}):e.id.includes("admin:")&&t.push({id:"history-"+e.id,type:"administrative_region",name:e.name,item_id:e.id,coord:e.administrative_region.coord,history:!0})}t.reverse(),t.length>3&&(t.length=3),window.localStorage.setItem("history_".concat(F),JSON.stringify(t))},Ie=function(e){var t=JSON.parse(window.localStorage.getItem("like_".concat(F)))||[],n=-1;t.find((function(t){return t===e.id}))?t=t.filter((function(t){return t!==e.id})):(t.push(e.id),n=1),u.A.get("/api/likes?id=".concat(e.id,"&value=").concat(1===n?"add":"remove")).then((function(r){var i=r.data.likes;o.j.dispatch((0,b.v)(M(M({},e),{},{isLiked:n,likes:i}))),window.localStorage.setItem("like_".concat(F),JSON.stringify(t))})).catch((function(e){var t=e.response&&e.response.data?e.response.data.id:e;console.warn(t)}))},De=function(){var e=L(R().mark((function e(t){var n,r,i;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(window.localStorage.getItem("like_".concat(F)))||[],r=-1,i=0,n.find((function(e){return e===t.id}))&&(r=1),e.next=6,u.A.get("/api/likes?id=".concat(t.id)).then((function(e){i=e.data.likes})).catch((function(e){console.log(e);var t=e.response&&e.response.data?e.response.data.id:e;console.warn(t)}));case 6:o.j.dispatch((0,b.v)(M(M({},t),{},{isLiked:r,likes:i})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me=function(e){o.j.dispatch((0,c.AU)([])),o.j.dispatch((0,c.UJ)([])),setTimeout((function(){var t="/around?from=".concat(e.id.startsWith("stop_")?e.id:e.coord.lon+";"+e.coord.lat);d.A.push(t)}))},Ue=function(e){setTimeout((function(){var t="/lines?".concat(e.id.startsWith("stop_area")?"stop_area":"stop","=").concat(e.id);d.A.push(t)}))},Ge=function(e){if(K){var t=o.j.getState().app,n=t.places,r=t.domElement,i=null,a=null;if("object"===O(e.address))i="address",a="".concat(e.address.lon,";").concat(e.address.lat);else if(e.id)String(e.id).includes("stop_area:")?(i="stop_area",a=e.id):String(e.id).includes("stop_point:")?(i="stop_point",a=e.id):(String(e.id).includes("poi:")||e.coord)&&(i="address",a="".concat(e.coord.lon,";").concat(e.coord.lat));else if(e.includes("stop_:"))i=e.includes("stop_area:")?"stop_area":"stop_point",a="".concat(e);else if(e.includes("poi:")){var l=n.find((function(t){return t.id===e}));l&&(i="address",a="".concat(l.coord.lon,";").concat(l.coord.lat))}if(i&&a){var s=document.createElement("a");s.href="".concat(K,"?to_type=").concat(i,"&to=").concat(a),document.querySelector(r).appendChild(s),s.click()}}else{o.j.dispatch((0,c.AU)([])),o.j.dispatch((0,c.UJ)([]));var u=de(Z)?"from":"to";setTimeout((function(){var t="/route-calculation?".concat(u,"=").concat("poi_type:stations"===e.cat_id?"sncf_"+e.id:e instanceof h.A?e.coord.lon+";"+e.coord.lat:e.id?e.id:e.address?e.address.lon+";"+e.address.lat:e);d.A.push(t)}))}},He=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?e.filter((function(n,r){return e.findIndex((function(e){return e[t]===n[t]}))===r})):e.filter((function(e,t,n){return n.indexOf(e)===t}))},Ye=function(){var e=L(R().mark((function e(t){var n,r,i,c,s,d=arguments;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=d.length>1&&void 0!==d[1]?d[1]:null,r=d.length>2&&void 0!==d[2]?d[2]:null,i=["poi_type:amenity:bicycle_rental","poi_type:amenity:bicycle_parking","poi_type:amenity:parking","poi_type:amenity:car_rental","poi_type:amenity:citiz","poi_type:stations"],o.j.dispatch((0,l.gQ)()),o.j.dispatch((0,l.jj)(null)),c=function(){setTimeout((function(){var e=document.querySelector("[data-lc-scroll='scroll']"),t=document.querySelector(".lc-board [data-lc-place-infos]");if(e&&e.scrollTo(0,0),e&&t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect();e.scrollTo(0,r.top-n.top-40)}}),500)},t&&(i.includes(t.cat_id)||!0===t.needRequest&&t.availibilityType)?(o.j.dispatch((0,l.Pl)(t.id)),"poi_type:stations"!==t.cat_id?(s=t.cat_id.includes("bicycle_rental")?"bss":t.cat_id.includes("bicycle_parking")?"bike_parking":t.cat_id.includes("car_rental")?"car_rental":t.cat_id.includes("citiz")?"citiz":t.needRequest?t.availibilityType:"parking",u.A.get("/api/availability?type=".concat(s,"&id=").concat(t.id)).then((function(e){t.stand=e.data})).catch((function(e){t.stand={};var n=e.response&&e.response.data?e.response.data.id:e;console.warn(n)})).finally((function(){o.j.dispatch((0,l.Pl)(!1)),o.j.dispatch((0,l.jj)(t)),(!t.cat_id.includes("car_rental")||!t.cat_id.includes("citiz"))&&n&&n.length>0&&o.j.dispatch((0,a.aD)(n)),t.ref&&setTimeout((function(){var e=t.ref.leafletElement;Se(e,t)})),c()}))):(o.j.dispatch((0,a.xY)(t)),u.A.get("/api/stations?id=".concat(t.id)).then((function(e){t.stand=e.data})).catch((function(e){t.stand={};var n=e.response&&e.response.data?e.response.data.id:e;console.warn(n)})).finally((function(){o.j.dispatch((0,l.Pl)(!1)),o.j.dispatch((0,l.jj)(t)),c()})))):(o.j.dispatch((0,l.jj)(t)),c()),r&&(o.j.dispatch((0,l.ev)(!0)),o.j.dispatch((0,l._f)(t.name)));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fe=function(e,t){return[e,t]},Be=function(e){var t=e.split(";")[0],n=e.split(";")[1];return!(isNaN(t)||!_t(t,-180,180)||isNaN(n)||!_t(n,-90,90))},Ve=function(e){return"poi_type:amenity:bicycle_rental"===e.cat_id||"poi_type:stations"===e.cat_id||"poi_type:amenity:park_ride"===e.cat_id||"poi_type:pois_background"===e.cat_id||"poi_type:entrance"===e.cat_id||d.A.location.pathname.includes("/p+r")&&("poi_type:amenity:parking"===e.cat_id||"poi_type:amenity:bicycle_parking"===e.cat_id)},ze=function(e){return ye("around")&&(null==e?void 0:e.length)>0};function Xe(e){var t=e,n=0,r=0;do{for(r+=e.offsetLeft-e.scrollLeft,n+=e.offsetTop-e.scrollTop,e=e.offsetParent,t=t.parentNode;t!==e;)r-=t.scrollLeft,n-=t.scrollTop,t=t.parentNode}while(e.offsetParent);return{top:n,left:r}}var Ke=function(){var e=L(R().mark((function e(t){var n,r,i,a,c,s,f,m,h,v,_,y=arguments;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=y.length>1&&void 0!==y[1]?y[1]:null,r=y.length>2?y[2]:void 0,i=d.A.location.pathname,!t.includes("stop_")&&!t.includes("poi:")){e.next=46;break}if(a=t.includes("stop_area")?"areas":t.includes("stop_point")?"stops":t.includes("sncf_stop_area")?"stations":"places",!(c=r.props[a].find((function(e){return e.id===t})))&&t.includes("stop_area")&&r.props.stations&&(c=r.props.stations.find((function(e){return e.id===t||"sncf_".concat(e.id)===t}))),!c){e.next=18;break}if(!i.includes("/route-calculation")){e.next=13;break}"inputStart"===n?o.j.dispatch((0,l.qE)(c)):"inputEnd"===n&&o.j.dispatch((0,l.PU)(c)),r.createMarker(Fe(c.coord.lat,c.coord.lon),n),e.next=16;break;case 13:return o.j.dispatch((0,l.ev)(!0)),o.j.dispatch((0,l._f)(c.name)),e.abrupt("return",Fe(c.coord.lat,c.coord.lon));case 16:e.next=44;break;case 18:return e.next=20,(0,u.A)("/api/get-place?id=".concat(t));case 20:if(f=e.sent,null===(s=f.data)||void 0===s||!s.id){e.next=42;break}if(c=f.data,!t.startsWith("stop_area:")){e.next=27;break}o.j.dispatch((0,p.f4)(c)),e.next=32;break;case 27:if(!t.startsWith("poi:")){e.next=31;break}o.j.dispatch((0,p.JI)(c)),e.next=32;break;case 31:throw new Error("".concat(t," not found"));case 32:if(!i.includes("/route-calculation")){e.next=37;break}"inputStart"===n?o.j.dispatch((0,l.qE)(c)):"inputEnd"===n&&o.j.dispatch((0,l.PU)(c)),r.createMarker(Fe(c.coord.lat,c.coord.lon),n),e.next=40;break;case 37:return o.j.dispatch((0,l.ev)(!0)),o.j.dispatch((0,l._f)(c.name)),e.abrupt("return",Fe(c.coord.lat,c.coord.lon));case 40:e.next=44;break;case 42:throw["inputStart","inputEnd"].includes(n)&&r.setState({warning:Je("inputStart"===n?"route-calculation-no-departure":"route-calculation-no-arrival")}),new Error("".concat(t," not found"));case 44:e.next=68;break;case 46:if(!t.includes("admin:")){e.next=57;break}if(!(m=r.props.adminRegions.find((function(e){return e.id===t})))||!i.includes("/route-calculation")){e.next=53;break}"inputStart"===n?o.j.dispatch((0,l.qE)(m)):"inputEnd"===n&&o.j.dispatch((0,l.PU)(m)),r.createMarker(Fe(m.coord.lat,m.coord.lon),n),e.next=55;break;case 53:throw["inputStart","inputEnd"].includes(n)&&r.setState({warning:Je("inputStart"===n?"route-calculation-no-departure":"route-calculation-no-arrival")}),new Error("".concat(t," not found"));case 55:e.next=68;break;case 57:if(!Be(t)){e.next=66;break}return h=t.split(";")[1],v=t.split(";")[0],_=null,e.next=63,u.A.get("/api/geocoding",{params:{lat:h,lng:v}}).then((function(e){_=e})).catch((function(e){console.warn("Error : ",e.response&&e.response.data&&e.response.data.id),r.setState({noErrorIcon:!1,error:e.response&&"no-places"===e.response.data.id?Je("around-error-no-places"):Je("around-error-unknow")})})).finally((function(){i.includes("/route-calculation")?("inputStart"!==n&&"inputEnd"!==n||_&&(_.data[0].id=t),"inputStart"===n?o.j.dispatch((0,l.qE)(_?_.data[0]:{name:""})):"inputEnd"===n&&o.j.dispatch((0,l.PU)(_?_.data[0]:{name:""})),r.createMarker(Fe(_?_.data[0].address.coord.lat:h,_?_.data[0].address.coord.lon:v),n)):(o.j.dispatch((0,l.ev)(!0)),o.j.dispatch((0,l._f)(_.data&&_.data.length>0?_.data[0].name:"")))}));case 63:return e.abrupt("return",Fe(h,v));case 66:o.j.dispatch((0,l.ev)(!1)),o.j.dispatch((0,l._f)(""));case 68:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qe=function(e,t){var n,r,i;return J&&(null===(n=JSON.parse(J))||void 0===n?void 0:n[e])&&((null===(r=JSON.parse(J))||void 0===r?void 0:r.onlyIfConnected)&&t||!(null!==(i=JSON.parse(J))&&void 0!==i&&i.onlyIfConnected))},We=function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n={event:t||(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"map-itinerariesShare":"map-itineraryShare"),socialNetwork:e,name:arguments.length>3&&void 0!==arguments[3]?arguments[3]:null};(0,m.X3)(n),(0,v.i)({clicked:"share",share:e})},Je=function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a,l=o.j.getState().app.languageFile;if(0===Object.keys(l).length)return be()?e:"";if(0===(null==r?void 0:r.length))return null!==(a=l[e])&&void 0!==a?a:be()?e:"";try{var c;return null===(c=l[e])||void 0===c?void 0:c.match(/(\$\w+)/g).reduce((function(n,i){var o=r.find((function(e){return e.key===i.replace("$","")}));return o?n=t?n.replace(i,'<span class="lc-translate-'.concat(e,"-").concat(o.key,'">').concat(o.value,"</span>")):n.replace(i,o.value):be()&&ne({message:"Can't retrieve an arg value from ".concat(i)},"warning","Missing translation"),n}),l[e])}catch(t){be()&&console.warn("Error while translating ".concat(e),t.message)}},Qe=function(e){return["en"].includes(e)},Ze=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(0,_._k)(e);return Qe(t)?(0,_.Yq)(r,"h:m a",t,n):(0,_.Yq)(r,"h:m",t,n)},$e=function(e,t){var n=e.props,r=n.isMobile,i=n.openedCollapse,a=n.linesModes;t||0===t||(t=e.state.tab);var s=Te(e.state.groups,a);0===t&&i!==s&&o.j.dispatch((0,l.f4)(s)),e.setState({tab:t},(function(){o.j.dispatch((0,c.en)(null)),document.querySelector("[data-lc-scroll='scroll']")&&document.querySelector("[data-lc-scroll='scroll']").removeAttribute("data-lc-scroll"),document.querySelector(".lc-tab-panel.lc-active").setAttribute("data-lc-scroll","scroll"),xe(r)}))},et=function(e){if(q&&!o.j.getState().app.hasAuthorizedCookies)return!1;try{var t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return!1}},tt=function(e,t){"Enter"!==e.key&&" "!==e.key||t()},nt=function(e,t){return"?"+new URLSearchParams(M(M({},e),t)).toString()},rt=function(){return window.self!==window.top},it=function(e,t){var n,r=t.radius,o=void 0===r?[]:r,a=t.color,l=void 0===a?"black":a,c=t.opacity,s=void 0===c?.1:c,u=[],d=(0,j.jsx)(y.A,{options:{zIndex:999},icon:i().icon({iconUrl:ee("/assets/images/pin.svg"),iconSize:[50,50],iconAnchor:[25,25]}),ref:function(e){return(0,T.eQ)(e)},position:e,draggable:!1}),p=[],f=N(o);try{for(f.s();!(n=f.n()).done;){var m=n.value;p.push((0,j.jsx)(g.A,{center:e,ref:function(e){return u.push(e)},radius:+m,fillColor:l,fillOpacity:s,color:"transparent"}))}}catch(e){f.e(e)}finally{f.f()}return{pin:d,circles:p,refCircle:u}},ot=function(e,t){var n;if(null!=t&&t.startsWith("bordeaux-tbm")&&(null===(n=e.schedules)||void 0===n?void 0:n.length)>0){var r=e.schedules.filter((function(e){return!0===e.isRealTime&&e.vehiclePosition})).map((function(e){var t,n,r,i=!1,o=!1,a=!1;return"ferry"===(null==e||null===(t=e.line)||void 0===t||null===(t=t.mode)||void 0===t?void 0:t.toLowerCase())?i=!0:"tramway"===(null==e||null===(n=e.line)||void 0===n||null===(n=n.mode)||void 0===n?void 0:n.toLowerCase())?o=!0:"ter"===(null==e||null===(r=e.line)||void 0===r||null===(r=r.mode)||void 0===r?void 0:r.toLowerCase())&&(a=!0),{id:e.id,position:{lat:e.vehiclePosition.latitude,lon:e.vehiclePosition.longitude},icon:{url:ee("/assets/images/modes/".concat(i?"boat":o?"tram":a?"ter":"bus","-realtime.gif")),className:"lc-custom-marker-realtime"},zIndexOffset:9e3}}));o.j.dispatch((0,c.GG)((0,s.hp)(r)))}},at=function(e){var t,n=new Date,r=new Date,i=e.defaultDateTime||null;if(e.calendarRescrictDate){e.minDate=(0,_.Yq)(new Date,"y-m-d"),e.defaultDateTime=(0,_.Yq)(new Date,"y-m-d");var a=new Date;a.setDate(a.getDate()+e.calendarRescrictDate),e.maxDate=(0,_.Yq)(a,"y-m-d")}if(e.defaultDateTime&&e.minDate&&e.maxDate){var l=new Date(e.minDate),c=new Date(e.maxDate),s=new Date;s>l&&s<c&&(i=s)}o.j.dispatch((0,p.xI)(e.minDate,e.maxDate,e.defaultDateTime)),null!==(t=e.defaultDateTime)&&void 0!==t&&t.split("T")[1]&&o.j.dispatch((0,p.Y_)(new Date(i).getHours(),new Date(i).getMinutes())),void 0!==i?o.j.dispatch((0,p.Lc)(new Date(i))):(void 0!==e.minDate&&new Date(e.minDate)>r&&((n=new Date(e.minDate)).setHours(10),o.j.dispatch((0,p.Lc)(n))),void 0!==e.maxDate&&new Date(e.maxDate)<r&&((n=new Date(e.maxDate)).setHours(r.getHours()),n.setMinutes(r.getMinutes()),o.j.dispatch((0,p.Lc)(n)))),o.j.dispatch((0,p.PH)(n))},lt=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=parseFloat(e),a=o>=1e3?t?Math.round(o/1e3):o/1e3:o,l=o>=1e3?"km":"m";return r?"".concat(a," ").concat("km"===l?"kilomètres":"mètres"):n?(0,j.jsxs)("div",{children:[(0,j.jsx)("span",{children:a})," ",i?Je("unit-".concat(l)):l]}):"".concat(a," ").concat(l)},ct=function(e,t){o.j.dispatch((0,c.GG)([o.j.dispatch((0,a.wP)({id:"geovelo-hover-instruction",name:"geovelo-hover-instruction",coord:e},{key:"geovelo-hover-instruction-".concat(t),icon:new(i().DivIcon)({className:"lc-circle-icon-marker instruction",iconSize:[20,20],tooltipAnchor:new(i().Point)(5,0),html:'<span style="border: 2px solid '.concat(Q,'; background-color: rgba(255, 255, 255, 0.7)" />')}),zIndexOffset:50}))]))},st=function(){var e=o.j.getState().map.customMarkers;o.j.dispatch((0,c.lM)(e.filter((function(e){return!e.key.startsWith("geovelo-hover-instruction")}))))},ut=function(e,t){(0,E.Fe)(e,[t]),xe(e.props.isMobile)},dt=function(e){var t=M({},e);return delete t.represents,delete t.avoid,Object.values(t).every((function(e){return!1===e}))},pt=function(e){var t=Math.floor(e/3600);return e%=3600,{hours:t,minutes:Math.floor(e/60)}},ft=function(e,t){var n=e.find((function(e){return e.modes.includes(t.mode)}));return null==n?void 0:n.tad},mt=function(e){var t,n={duration:9999999},r=N(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.duration<n.duration&&(n=i)}}catch(e){r.e(e)}finally{r.f()}return n},ht=function(e){var t=pt(e.duration);return t?"".concat(t.hours>0?"".concat(t.hours," ").concat(Je("hour-split")):"").concat(t.minutes>0?" ".concat(t.minutes," ").concat(Je("minute-split")):""):""},vt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=function(e){return function(t){return t.map(e)}},r=n((function(e){return x().toGeoJSON(e,t).coordinates})),i=n(r),o=function(e,t,n){return{type:"Feature",geometry:{type:e,coordinates:t},properties:(r=n,"object"===O(r)?r:{zoom:1})};var r},a=[[["l",void 0,null],function(e){return o("MultiLineString",r(e.poly),e.props)}],[["g"],function(e){return o("MultiPolygon",i(e.poly),e.props)}]];return{type:"FeatureCollection",features:n((function(e){return a.find((function(t){return-1!=t[0].indexOf(e.type)}))[1](e)}))(e)}},_t=function(e,t,n){return e>=t&&e<=n},yt=function(e,t,n){var r=!1;return!1!==(null==e?void 0:e.autocomplete_geolocation)&&(n||!0===(null==e?void 0:e.autocomplete_geolocation_allow_desktop))&&(r=!0),!0===t&&(r=!1),r}},4457:function(e,t,n){n.d(t,{j:function(){return ce}});var r=n(2960),i=n(8089),o=n(9736);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p={REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"},f=p.REACT_APP_LIBRARY_URL,m=p.REACT_APP_ROUTE_CALCULATION_DISALLOW_PMR_BIKE;function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function v(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=A(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==A(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function S(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==x(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=L(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==L(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=I(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==I(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){Y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=U(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==U(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=F(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==F(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var X=n(1576),K=n(3727),q=n(4305),W=n(9742);function J(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Q(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Z,$={REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"},ee=$.REACT_APP_NEXT_SCHEDULES_RESULTS,te=$.REACT_APP_ALL_POPUP_ON_TOP,ne=$.REACT_APP_POPUP_OFFSET,re=$.REACT_APP_MARKER_SELECTED_PICTO,ie=ee||2,oe=n(4903),ae=n(1290),le=(0,r.HY)({app:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{component:{props:{}},isMobile:window.matchMedia("(max-width: 600px)").matches,language:"/fr",modules:[],linesModes:[],lines:[],stops:[],areas:[],stations:[],languageFile:{},modes:{},configApp:null,walkingSpeeds:[],bikeSpeeds:[],bikeProfiles:[],travelSolutions:[],allowDisruptions:!0,calculateItineraryNow:!0,touchscreenSelected:null,isLegendOpen:!1,heavyIds:[],datePicker:{minDate:void 0,maxDate:void 0,defaultDateTime:void 0},config:{scrollWheelZoom:!0,dragging:!0},calendar:{date:new Date,show:!1},isExpandedMap:!1,hasAuthorizedCookies:!1,print:{pages:[],datas:{},isPrinting:!1},placesRef:[],dontShow:[],windowPrinting:!1,periods:[],periodMode:"period",timezone:null,orientation:null===(e=window.screen)||void 0===e||null===(e=e.orientation)||void 0===e?void 0:e.type},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"INIT_CONFIG":return u(u({},t),{},{configApp:n.config});case"INIT_APP":for(var r=[],a=0;a<(null===(c=n.data.lines)||void 0===c?void 0:c.length);a++){var c,s=n.data.lines[a];if(s&&s.routes&&s.routes.length>0)for(var p=0;p<s.routes.length;p++){var h=s.routes[p];r.push({route_id:h.route_id,direction:h.direction,direction_id:h.direction_id,id:s.id,code:s.code,name:s.name,mode:s.mode,cat:s.cat,network:s.network,position:s.position})}}for(var v=[],_=function(){for(var e=n.data.stops[y],t=[],i=function(n){var i=r.find((function(t){return t.route_id===e.lines[n].route_id}));v.push({route_id:e.lines[n].route_id,id:e.id}),i&&t.push(u(u({},i),{},{stop_id:e.id}))},o=0;o<e.lines.length;o++)i(o);e.lines=t},y=0;y<(null===(g=n.data.stops)||void 0===g?void 0:g.length);y++){var g;_()}for(var b=function(){for(var e=n.data.areas[A],t=[],i=function(n){var i=r.find((function(t){return t.route_id===e.lines[n].route_id})),o=v.find((function(t){return t.route_id===e.lines[n].route_id}));i&&o&&t.push({id:i.id,code:i.code,name:i.name,mode:i.mode,cat:i.cat,network:i.network,position:i.position,direction_id:i.direction_id,stop_id:o.id})},o=0;o<e.lines.length;o++)i(o);e.lines=t},A=0;A<(null===(E=n.data.areas)||void 0===E?void 0:E.length);A++){var E;b()}return u(u({},t),n.data);case"UPDATE_MEDIA_QUERIES":return u(u({},t),{},{isMobile:n.isMobile});case"SET_MAP":return u(u({},t),{},{map:n.map});case"SET_COMPONENT":return u(u({},t),{},{component:n.component});case"SCROLL_END":return u(u({},t),{},{top:n.top});case"SET_USER_TOKEN":return u(u({},t),{},{token:n.token});case"SET_USER_ID":return u(u({},t),{},{clientId:n.client_id});case"SET_FAVORITES_DATA":return u(u({},t),{},{favoritesData:n.data});case"SET_APP_LANGUAGE":return u(u({},t),{},{language:n.language});case"SET_APP_LOCKER":return u(u({},t),{},{lock:"true"===n.lock});case"SET_APP_PANEL_SIZE":return u(u({},t),{},{size:"false"!==n.size&&(["small","large"].includes(n.size)?n.size:"large")});case"SET_APP_TRACKING":var T=new Date;return T.setMonth(T.getMonth()+6),n.tracking?(window.document.cookie="hasAuthorizedCookies=true;path=/;expires="+T.toGMTString(),(0,i.RZ)(n.configApp),(0,i.h1)(n.configApp),(0,i.S6)(n.configApp)):window.document.cookie.includes("hasAuthorizedCookies=true")?(window.document.cookie="hasAuthorizedCookies=false;path=/;expires="+T.toGMTString(),!1===(0,o.UP)(f)&&window.location.reload()):window.document.cookie="hasAuthorizedCookies=false;path=/;expires="+T.toGMTString(),u(u({},t),{},{hasAuthorizedCookies:n.tracking});case"INIT_MODES":var P=t.walkingSpeeds,x=t.bikeSpeeds,S=t.bikeProfiles;return n.modes.pmr&&(n.modes.bss&&(n.modes.bss=!1),P=P.map((function(e){return u(u({},e),{},{value:!1})})),x=x.map((function(e){return u(u({},e),{},{value:!1})})),S=S.map((function(e){return u(u({},e),{},{value:!1})}))),u(u({},t),{},{walkingSpeeds:P,bikeSpeeds:x,bikeProfiles:S,modes:n.modes});case"HANDLE_MODES_CHANGED":var j=u(u({},t.modes),{},d({},n.mode.id,!!("pmr"===n.mode.id&&t.modes.length>1&&t.modes[n.mode.id])||!t.modes[n.mode.id])),O=t.walkingSpeeds,R=t.bikeSpeeds,w=t.bikeProfiles;if(void 0!==j.ebike&&void 0!==j.bike&&n.mode.id.includes("bike"))switch(n.mode.id){case"ebike":j.ebike&&(j.bike=!1,R.length>0&&(R=R.map((function(e){return u(u({},e),{},{value:"fast"===e.type})}))));break;case"bike":j.bike&&(j.ebike=!1)}return(0,o.UP)(m)&&n.mode.id.includes("bike")&&j.pmr&&(j.pmr=!1),"pmr"===n.mode.id&&(j.bss&&(j.bss=!1),(0,o.UP)(m)&&j.bike&&(j.bike=!1),O=O.map((function(e){return u(u({},e),{},{value:!1})})),R=R.map((function(e){return u(u({},e),{},{value:!1})})),w=w.map((function(e){return u(u({},e),{},{value:!1})}))),!O.length||O.find((function(e){return e.value}))||j.pmr||(j.pmr=!0),u(u({},t),{},{walkingSpeeds:O,bikeSpeeds:R,bikeProfiles:w,modes:j});case"INIT_WALKING_SPEEDS":return u(u({},t),{},{walkingSpeeds:n.walkingSpeeds});case"INIT_BIKE_SPEEDS":return u(u({},t),{},{bikeSpeeds:n.bikeSpeeds});case"INIT_BIKE_PROFILES":return u(u({},t),{},{bikeProfiles:n.bikeProfiles});case"INIT_TRAVEL_SOLUTIONS":return u(u({},t),{},{travelSolutions:n.travelSolutions});case"HANDLE_WALKING_SPEEDS_CHANGED":var L=u({},t.modes);return void 0!==L.pmr&&(L.pmr=!1),u(u({},t),{},{walkingSpeeds:t.walkingSpeeds.map((function(e){return e.type===n.walkingSpeedType?u(u({},e),{},{value:!0}):u(u({},e),{},{value:!1})})),modes:L});case"HANDLE_BIKE_SPEEDS_CHANGED":return u(u({},t),{},{bikeSpeeds:t.bikeSpeeds.map((function(e){return e.type===n.bikeSpeedType?u(u({},e),{},{value:!0}):u(u({},e),{},{value:!1})}))});case"HANDLE_TRAVEL_SOLUTIONS_CHANGED":return u(u({},t),{},{travelSolutions:t.travelSolutions.map((function(e){return e.type===n.travelSolutionType?u(u({},e),{},{value:!0}):u(u({},e),{},{value:!1})}))});case"HANDLE_BIKE_PROFILES_CHANGED":return u(u({},t),{},{bikeProfiles:t.bikeProfiles.map((function(e){return e.type===n.bikeProfilType?u(u({},e),{},{value:!0}):u(u({},e),{},{value:!1})}))});case"HANDLE_ALLOW_DISRUPTIONS_CHANGED":return u(u({},t),{},{allowDisruptions:n.allowDisruptions});case"INIT_DATEPICKER_MINMAX_DATE":return u(u({},t),{},{datePicker:{minDate:void 0!==n.minDate?new Date(n.minDate):void 0,maxDate:void 0!==n.maxDate?new Date(n.maxDate):void 0,defaultDateTime:void 0!==n.defaultDateTime?new Date(n.defaultDateTime):void 0}});case"INIT_DATE":return u(u({},t),{},{selectedDate:n.date,selectedTime:n.date});case"HANDLE_SELECTED_DATE_CHANGED":return u(u({},t),{},{selectedDate:n.date,calculateItineraryNow:n.now});case"HANDLE_SELECTED_TIME_CHANGED":return u(u({},t),{},{selectedTime:n.date,calculateItineraryNow:!1});case"HANDLE_REPRESENTS_CHANGED":var C=u(u({},t.modes),{},{represents:n.represent});return u(u({},t),{},{modes:C});case"SET_APP_HASH":return u(u({},t),{},{hash:n.hash});case"SET_APP_HEADER":return u(u({},t),{},{header:n.header});case"SET_CONFIG":return u(u({},t),{},{config:u(u({},t.config),n.config)});case"SET_PROJECTS_MENU_ID":return u(u({},t),{},{menuID:n.menuID});case"SET_CALENDAR_DATE":var N=new Date,k=new Date(n.date.getTime()),I=k.getFullYear()+""+k.getMonth()+k.getDate()==N.getFullYear()+""+N.getMonth()+N.getDate();return I?(k.setHours(N.getHours()),k.setMinutes(N.getMinutes()),k.setSeconds(N.getSeconds())):(k.setHours(t.calendar.date.getHours()),k.setMinutes(t.calendar.date.getMinutes()),k.setSeconds(t.calendar.date.getSeconds())),u(u({},t),{},{calendar:u(u({},t.calendar),{},{date:k}),calculateItineraryNow:I});case"SET_CALENDAR_DATETIME":var D=new Date;return D.setTime(t.calendar.date.getTime()),D.setHours(n.hour),D.setMinutes(n.minute),u(u({},t),{},{calendar:u(u({},t.calendar),{},{date:D}),calculateItineraryNow:!1});case"SET_CALENDAR_SHOW":return u(u({},t),{},{calendar:u(u({},t.calendar),{},{show:n.show})});case"SET_EXPANDED_MAP":if((0,o.UP)({REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"}.REACT_APP_EXPANDED_MAP)&&t.isMobile){var M;if(document.scrollingElement&&t.domElement&&document.querySelector(t.domElement)){var U,G,H=Math.abs(null===(U=document.scrollingElement.getClientRects()[0])||void 0===U?void 0:U.top),Y=null===(G=document.querySelector(t.domElement).getClientRects()[0])||void 0===G?void 0:G.top;isNaN(H+Y)||document.scrollingElement.scrollTo(0,H+Y)}null!==(M=t.map)&&void 0!==M&&null!==(M=M.mapReference)&&void 0!==M&&null!==(M=M.current)&&void 0!==M&&M.leafletElement&&setTimeout((function(){t.map.mapReference.current.leafletElement.invalidateSize()}))}return u(u({},t),{},{isExpandedMap:n.isExpandedMap});case"ADD_STOPS":return u(u({},t),{},{stops:[].concat(l(t.stops),l(n.stops.map((function(e,n){return u(u({},e),{},{index:t.stops.length+n})}))))});case"ADD_STOPAREA":return u(u({},t),{},{areas:[].concat(l(t.areas),[u(u({},n.area),{},{lines:[],index:t.areas.length+1})])});case"ADD_LINE":return u(u({},t),{},{lines:[].concat(l(t.lines),[u(u({},n.line),{},{index:t.lines.length})])});case"SET_PRINT":return u(u({},t),{},{print:u(u({},n.print),{},{isPrinting:!0})});case"SET_PlACES":return u(u({},t),{},{places:n.places});case"ADD_PLACE":return u(u({},t),{},{places:[].concat(l(t.places),[n.place])});case"ADD_STATION":return u(u({},t),{},{stations:[].concat(l(t.stations),[n.station])});case"SET_RADIUS":return u(u({},t),{},{currentRadius:+n.radius});case"SET_STREETVIEW_POSITION":return u(u({},t),{},{streetviewPosition:n.coords});case"SET_DONT_SHOW":return u(u({},t),{},{dontShow:n.list.split(",")});case"SET_WINDOW_PRINTING":return console.log("windowPrinting",n.printing),u(u({},t),{},{windowPrinting:n.printing});case"SET_PERIODS":return u(u({},t),{},{periods:n.periods});case"SET_PERIOD_MODE":return u(u({},t),{},{periodMode:n.mode});case"SET_LINES":return u(u({},t),{},{lines:n.lines});case"SET_ORIENTATION_CHANGE":return u(u({},t),{},{orientation:n.orientation});default:return t}},board:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{inputValue:"",inputStartValue:"",inputEndValue:"",inputStartObj:{empty:!0,swap:!1,name:""},inputEndObj:{empty:!0,swap:!1,name:""},inputItems:[],inputStartItems:[],inputEndItems:[],goToValid:!1,currentStationDepartureIndex:0,currentStationArrivalIndex:0,datesPanel:!1,modesPanel:!1,radiusPanel:!0,walkingSpeedsPanel:!1,bikePanel:!1,travelSolutionsPanel:!1,linesRegionsPanels:[],ddlsPanels:[],displayError:[],linesSchedules:[],isPlaceAvailibilityLoading:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ON_INPUT_VALUE_CHANGE":return g(g({},e),{},{inputValue:t.value});case"ON_INPUTS_SWAP":return g(g({},e),{},{inputStartObj:g({swap:!0},t.to),inputEndObj:g({swap:!0},t.from),inputStartValue:t.to.label?t.to.label:t.to.name,inputEndValue:t.from.label?t.from.label:t.from.name});case"ON_START_INPUT_VALUE_CHANGE":var n=g({empty:t.value.name.length<=0,swap:!1},t.value);return g(g({},e),{},{inputStartObj:n,inputStartValue:t.value.label?t.value.label:t.value.name});case"ON_END_INPUT_VALUE_CHANGE":var r=g({empty:t.value.name.length<=0,swap:!1},t.value);return g(g({},e),{},{inputEndObj:r,inputEndValue:t.value.label?t.value.label:t.value.name});case"ON_INPUT_ITEMS_CHANGE":return g(g({},e),{},{inputItems:t.items});case"ON_START_INPUT_ITEMS_CHANGE":return g(g({},e),{},{inputStartItems:t.items});case"ON_END_INPUT_ITEMS_CHANGE":return g(g({},e),{},{inputEndItems:t.items});case"SET_PLACE_CLICKED":return g(g({},e),{},{placeClicked:t.place});case"SET_PLACE_AVAILIBILITY_LOADING":return g(g({},e),{},{isPlaceAvailibilityLoading:t.isLoading});case"SET_THEMATIC_PLACES":return g(g({},e),{},{thematicPlaces:t.thematicPlaces});case"SET_THEMATIC_LIB_MARKERS":return g(g({},e),{},{libraryThematicMarkers:t.libraryThematicMarkers});case"SET_THEMATIC_LIB_DISPLAY":return g(g({},e),{},{libraryThematicDisplay:t.libraryThematicDisplay});case"SET_THEMATIC_LIB_PREDICT":return g(g({},e),{},{libraryThematicPredict:t.libraryThematicPredict});case"SET_OPENED_COLLAPSE":return g(g({},e),{},{openedCollapse:t.collapse!==e.openedCollapse&&t.collapse});case"SET_DISRUPTIONS":return g(g({},e),{},{disruptions:t.disruptions});case"SET_DISRUPTION_IN_LINE":return g(g({},e),{},{disruptionsInLine:t.disruptionsInLine});case"SET_GEOLOCATION_ERROR":if(!t.error)return g(g({},e),{},{geolocationError:null});var i={code:t.error.code};switch(t.error.code){case t.error.PERMISSION_DENIED:i.message="La géolocalisation est désactivée sur votre appareil et/ou votre navigateur.";break;case t.error.POSITION_UNAVAILABLE:i.message="Impossible de récupérer votre position actuellement.";break;case t.error.TIMEOUT:i.message="La demande de géolocalisation a expiré.";break;case t.error.UNKNOWN_ERROR:default:i.message="Une erreur inconnue est survenue."}return g(g({},e),{},{geolocationError:i});case"SET_LINE_INFORMATION":return g(g({},e),{},{lineInformation:t.info});case"SET_GO_TO_ROUTE_CALC":return g(g({},e),{},{goToValid:t.valid});case"RESET_STATION_INDEX":return g(g({},e),{},{currentStationDepartureIndex:0,currentStationArrivalIndex:0});case"DECREMENT_STATION_INDEX":switch(t.direction){case"departure":return g(g({},e),{},{currentStationDepartureIndex:e.currentStationDepartureIndex>0?e.currentStationDepartureIndex-1:0});case"arrival":return g(g({},e),{},{currentStationArrivalIndex:e.currentStationArrivalIndex>0?e.currentStationArrivalIndex-1:0});default:return e}case"INCREMENT_STATION_INDEX":switch(t.direction){case"departure":return g(g({},e),{},{currentStationDepartureIndex:e.currentStationDepartureIndex<6?e.currentStationDepartureIndex+1:6});case"arrival":return g(g({},e),{},{currentStationArrivalIndex:e.currentStationArrivalIndex<6?e.currentStationArrivalIndex+1:6});default:return e}case"SET_ROUTE_CALC_DATES_PANEL":return g(g({},e),{},{datesPanel:!t.datesPanel});case"SET_ROUTE_CALC_MODES_PANEL":return g(g({},e),{},{modesPanel:!t.modesPanel});case"SET_ROUTE_CALC_TRAVEL_SOLUTIONS_PANEL":return g(g({},e),{},{travelSolutionsPanel:!t.travelSolutionsPanel});case"SET_AROUND_RADIUS_PANEL":return g(g({},e),{},{radiusPanel:!t.radiusPanel});case"SET_ROUTE_CALC_WALKINGSPEEDS_PANEL":return g(g({},e),{},{walkingSpeedsPanel:!t.walkingSpeedsPanel});case"SET_ROUTE_CALC_BIKE_PANEL":return g(g({},e),{},{bikePanel:!t.bikePanel});case"SET_MOBILITY_OBJECT":return g(g({},e),{},{mobilityObject:t.mobilityObject});case"SET_LINESREGIONS_PANEL":return g(g({},e),{},{linesRegionsPanels:[].concat(v(e.linesRegionsPanels.filter((function(e){return e.code!==t.code})).map((function(e){return{code:e.code,open:!1}}))),[{code:t.code,open:t.open}])});case"SET_DDLS_PANEL":return g(g({},e),{},{ddlsPanels:[].concat(v(e.ddlsPanels.filter((function(e){return e.code!==t.code})).map((function(e){return{code:e.code,open:!1}}))),[{code:t.code,open:t.open}])});case"CLEAN_LINESREGIONS":return g(g({},e),{},{linesRegionsPanels:[],ddlsPanels:[]});case"SET_FAVORITE_LINE":return g(g({},e),{},{favoriteLine:t.line});case"SET_FAVORITE_STOP":return g(g({},e),{},{favoriteStop:t.stop});case"SET_DISPLAY_ERROR":var o=e.displayError;return o.find((function(e){return e.id===t.id}))||o.push({id:t.id,type:t.typeError,message:t.message}),g(g({},e),{},{displayError:o});case"SET_HIDE_DISPLAY_ERROR":return g(g({},e),{},{displayError:v(e.displayError.filter((function(e){return e.id!==t.id})))});case"SET_DISPLAY_TIMETABLE_DATA":return g(g({},e),{},{timetableData:t.data.timetableData,timetableHours:t.data.timetableHours});case"SET_LINES_SCHEDULES":return g(g({},e),{},{linesSchedules:t.schedules});default:return e}},map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{reduxMarkers:[],isLegendOpen:!1,customLines:[],customMarkers:[],zoom:null,center:null,allLinesColorType:"segmentation",allLinesIntersecGeojson:{},markerMode:"default",territories:[],clusters:[],hideHeavyLines:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AREAS":return R(R({},e),{},{reactAreas:t.areas});case"SET_STOPS":return R(R({},e),{},{reactStops:t.stops});case"BUILD_TERRITORY_OUTLINE":return R(R({},e),{},{territoryOutline:t.geojson});case"BUILD_ENTRANCE_MAP":return R(R({},e),{},{entranceMap:t.geojson});case"SET_REDUX_MARKERS":return R(R({},e),{},{reduxMarkers:t.markers});case"SET_HEAVY_LINES":return R(R({},e),{},{heavyLines:t.lines});case"HIDE_HEAVY_LINES":return R(R({},e),{},{hideHeavyLines:t.hide});case"SET_COMPLEMENTARY_LINE":return R(R({},e),{},{complementaryLine:t.line});case"SET_COMPLEMENTARY_LINES":return R(R({},e),{},{complementaryLines:t.lines});case"SET_CUSTOM_LINES":return R(R({},e),{},{customLines:t.lines});case"ON_MARKER_CLICK":return R(R({},e),{},{openedMarker:t.marker});case"SET_LINE_SELECTED":return R(R({},e),{},{lineSelected:t.line});case"SET_LINE_SELECTED_PATH":return R(R({},e),{},{selectedLine:t.path});case"SET_TRANSPORT_PLACES":return R(R({},e),{},{transportPlaces:t.places});case"SET_MAP_PLACES":return R(R({},e),{},{mapPlaces:t.places});case"SET_PUBLIC_PLACES":return R(R({},e),{},{places:t.places});case"SET_CLUSTER":return R(R({},e),{},{cluster:t.cluster,clusters:e.clusters.find((function(e){return e._leaflet_id===t.cluster._leaflet_id}))?e.clusters:[].concat(S(e.clusters),[t.cluster])});case"SET_ENTRANCE_MAP_MARKERS":return R(R({},e),{},{entranceMapMarkers:t.markers});case"HANDLE_LEGEND_STATE":return R(R({},e),{},{isLegendOpen:!t.isLegendOpen});case"SET_BIKE_PATHS":return R(R({},e),{},{bikePaths:t.paths});case"SET_MAP_BIKES":return R(R({},e),{},{bikes:t.bikes});case"SET_ENTRANCE_POPUP":return R(R({},e),{},{entrancePopup:t.popup});case"SET_TOURISM_PARTNERS_STOPS":return R(R({},e),{},{reactTourismPartnersStops:t.stops});case"SET_LINES_TO_DISPLAY":return R(R({},e),{},{reactLines:t.polylines});case"SET_CUSTOM_MARKERS":return R(R({},e),{},{customMarkers:t.markers});case"ADD_CUSTOM_MARKERS":return R(R({},e),{},{customMarkers:[].concat(S(e.customMarkers),S(t.markers))});case"SET_CUSTOM_MARKERS_EVENT":return R(R({},e),{},{customMarkers:e.customMarkers.map((function(e){return R(R({},e),{},{lastEvent:e.key==="customMarker-"+t.id?t.event:e.lastEvent})}))});case"SET_ZOOM":return R(R({},e),{},{zoom:t.zoom});case"SET_CENTER":return R(R({},e),{},{center:t.center});case"SET_AROUND_PIN":return R(R({},e),{},{aroundPin:t.aroundPin,aroundCircles:t.aroundCircles});case"SET_DISPLAY_MARKER_MODE":return R(R({},e),{},{markerMode:t.mode});case"SET_ALL_LINES_GEOJSON":return R(R({},e),{},{allLinesGeojson:t.geojson});case"SET_ALL_LINESINTERSEC_GEOJSON":return R(R({},e),{},{allLinesIntersecGeojson:t.geojson});case"SET_ALL_LINES_SELECTED":return R(R({},e),{},{allLinesSelected:t.selected});case"SET_ALL_LINES_COLOR_TYPE":return R(R({},e),{},{allLinesColorType:t.colorType});case"SET_TERRITORIES_GEOJSON":return R(R({},e),{},{territories:t.territories});default:return e}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_MODAL":return N(N({},e),{},{input:t.input});case"TOGGLE_MODAL":return N(N({},e),{},{show:!e.show});default:return e}},modalGeneric:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if("TOGGLE_MODAL_GENERIC"===t.type){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return e.modalFile&&e.modalFile===t.name?n.showModalGeneric=!e.showModalGeneric:(n.modalFile=t.name,n.showModalGeneric=!0),n}return e},network:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{networkMapRef:null,withSlider:!1,slider:!0,heavyLines:[],networkTownsLines:[],networkStop:!1,modeNetworkLinesAccordeon:!1,modesGroupPanel:{},sliderUrls:{left:"before",right:"after"}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NETWORK_SLIDER_MODE":return H(H({},e),{},{withSlider:t.slider});case"SET_NETWORK_MAP_REF":return H(H({},e),{},{networkMapRef:t.mapRef});case"SET_NETWORK_MAP_HEAVY_LINES":return H(H({},e),{},{heavyLines:t.lines});case"SET_NETWORK_TOWNS_LINES":return H(H({},e),{},{networkTownsLines:t.lines});case"SET_NETWORK_SELECTED_LINE":return H(H({},e),{},{line:t.line});case"SET_NETWORK_SELECTED_TOWN":return H(H({},e),{},{town:t.town});case"SET_NETWORK_SELECTED_STOP":return H(H({},e),{},{networkStop:t.stop});case"SET_NETWORK_DISPLAY_SLIDER":return H(H({},e),{},{slider:t.slider});case"SET_MODES_GROUP_PANEL":var n=e.modesGroupPanel;return e.modeNetworkLinesAccordeon&&t.open&&Object.keys(e.modesGroupPanel).map((function(e){return n[e]=!1})),n[t.mode]=t.open,H(H({},e),{},{modesGroupPanel:n});case"SET_MODE_LINES_ACCORDEON":return H(H({},e),{},{modeNetworkLinesAccordeon:t.mode});case"SET_SLIDER_URL_LEFT":return H(H({},e),{},{sliderUrls:H(H({},e.sliderUrls),{},{left:t.url})});case"SET_SLIDER_URL_RIGHT":return H(H({},e),{},{sliderUrls:H(H({},e.sliderUrls),{},{right:t.url})});default:return e}},tourismPartners:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOURISM_PARTNER_SELECTED_TYPE":return V(V({},e),{},{typePartner:t.typePartner});case"SET_TOURISM_PARTNER_SELECTED_PARTNER":return V(V({},e),{},{partner:t.partner});default:return e}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{token:null,data:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SET_TOKEN":return T(T({},e),{},{token:t.token});case"LOGIN_SET_DATA":return T(T({},e),{},{data:t.data});default:return e}}}),ce=(0,r.y$)((Z=le,function e(t,n){return"BATCH"===n.type?n.actions.reduce(e,t):Z(t,n)}),(0,r.Tw)((function(e){var t=e.dispatch,n=e.getState;return function(e){return function(r){switch(r.type){case"BUILD_AUTOCOMPLETE":return(0,oe.Dq)(n(),r.inputProps,r.isModal);case"ON_INPUT_VALUE_CHANGE":0===r.value.length&&t((0,ae.ev)(!1));break;case"BUILD_PLACES_BY_CAT_IN_LIST":return setTimeout((function(){return(0,o.XR)(n().app.isMobile)})),(0,oe.Ht)(n(),r.places);case"BUILD_AROUND_PREFERENCES":return(0,oe.Uv)(n());case"BUILD_ROUTE_CALC_PREFERENCES":return(0,oe.V)(n());case"BUILD_TABS_PANEL":return(0,oe.Jj)(n())}return e(r)}}}),(function(e){var t=e.dispatch,n=e.getState;return function(e){return function(r){var i=n().app.component,a=W.A.location.pathname,l=(0,o._V)(W.A.location);switch(r.type){case"BUILD_MARKER":return(0,K.hQ)(n(),r.data,r.options);case"BUILD_CUSTOM_MARKER":return(0,K.GL)(r.data,r.options);case"OVER_MARKER":(0,K.vI)(n(),r.data),re&&JSON.parse(re).includes(r.data.cat_id)&&r.target&&!r.target.classList.contains("opened")&&(r.target.src=r.target.src.replace("_selected","").replace(".svg","_selected.svg"),r.target.classList.add("moseover"));break;case"OUT_MARKER":(0,K.HK)(n(),r.data),re&&JSON.parse(re).includes(r.data.cat_id)&&r.target&&r.target.classList.contains("moseover")&&(r.target.src=r.target.src.replace("_selected.svg",".svg"),r.target.classList.remove("moseover"));break;case"OPEN_MARKER":var c,s,u,d,p=n().app,f=p.isMobile,m=p.configApp,h=n().map,v=h.openedMarker,_=h.lineSelected,y=h.transportPlaces,g=null===(c=n().app.map)||void 0===c||null===(c=c.mapReference)||void 0===c||null===(c=c.current)||void 0===c?void 0:c.leafletElement;if(v&&!v.ref&&v.divIcon&&(v.ref=(0,o.cX)(v,y)),v&&v.ref&&v.ref.leafletElement.closePopup(),g&&g.eachLayer((function(e){return e.closePopup()})),r.data){var b,A;if(ie>0&&_&&r.data.lines&&("blocking"!==r.data.severity||null!=m&&m.schedules_in_popup))(0,q.XH)(i,r.data,_);else if(null!=i&&null!==(A=i.state)&&void 0!==A&&A.stopsList){var E,T=i.state.stopsList,P=J(T);try{for(P.s();!(E=P.n()).done;){var x=E.value;x.opened=!1,r.data.id.includes("stop_area")?x.opened=x.stop_area===r.data.id:x.opened=x.id===r.data.id}}catch(e){P.e(e)}finally{P.f()}i.setState({stopsList:T})}var S=document.querySelector(".leaflet-popup"),j=document.querySelector(".lc-no-board"),O=window.innerWidth,R=f?[S&&!r.data.divIcon?-S.offsetWidth/2:-O/2.5,0]:[j?0:220,0];if(f&&(0,o.UP)(te)&&(R[0]=0),f&&ne){var w,L,C=JSON.parse(ne);null!=C&&null!==(w=C.urls)&&void 0!==w&&w.includes(a)&&null!=C&&null!==(L=C.offset)&&void 0!==L&&L.top&&(R[1]=C.offset.top)}if((null==i||null===(b=i.props)||void 0===b||null===(b=b.moduleData)||void 0===b||!b.blockZoomAtStop)&&g&&!(0,o.x$)("route-calculation")){var N=(i.props.moduleData||i.props).markerModeChanged,k=i.props.placesRef?i.props.placesRef.find((function(e){return"map-background"===e.name})):[],I=(0,q.KJ)(k),D=(0,q.X6)(k),M=void 0!==r.data.zoomTogglePlaces&&g.getZoom()<r.data.zoomTogglePlaces?r.data.zoomTogglePlaces:r.data.divIcon?Math.max(N,g.getZoom()):r.data.id.startsWith("stop_area")&&!I.includes(g.getZoom())?I[0]:r.data.id.startsWith("stop_point")&&!D.includes(g.getZoom())?D[0]:g.getZoom(),U=g.project([r.data.coord.lat,r.data.coord.lon],M).subtract(R),G=g.unproject(U,M);r.data.forceNotFitBounds||g.setView(G,M,{animate:!1})}if(re&&JSON.parse(re).includes(r.data.cat_id)){var H,Y=null===(H=r.data.ref)||void 0===H||null===(H=H.leafletElement)||void 0===H?void 0:H._icon;Y&&(Y.classList.remove("moseover"),Y.classList.add("opened"),Y.src=Y.src.replace("_selected","").replace(".svg","_selected.svg"))}t((0,X.hL)(r.data)),(0,K.Y_)(n(),r.data)}else t((0,X.hL)(null));if(null!==(s=r.data)&&void 0!==s&&null!==(s=s.id)&&void 0!==s&&s.startsWith("stop_point")&&(r.data.opened=!0),r.data&&r.data.id&&r.data.stop_area&&l.stop&&(null==l?void 0:l.stop)!==r.data.id&&(null==l?void 0:l.stop)!==r.data.stop_area&&!r.data.id.startsWith("poi")){var F=(0,o.vf)(l,{stop:r.data.id});W.A.push({pathname:a,search:F})}if(!(0,o.x$)("around")&&!(0,o.x$)("route-calculation")&&null!==(u=n().app)&&void 0!==u&&null!==(u=u.configApp)&&void 0!==u&&u.schedules_in_popup&&r.data&&r.data.id&&r.data.id.startsWith("stop_area")&&(null==l?void 0:l.stop_area)!==r.data.id){delete l.stop;var B={stop_area:r.data.id};"/"===a&&(B.from="entrance"),(0,o.x$)("thematic")&&(B.from=W.A.location.pathname.substring(1));var V=(0,o.vf)(l,B);W.A.push({pathname:(0,o.x$)("lines")?a:"/lines",search:V})}if(!(0,o.x$)("around")&&!(0,o.x$)("route-calculation")&&null!==(d=n().app)&&void 0!==d&&null!==(d=d.configApp)&&void 0!==d&&d.schedules_in_popup&&r.data&&r.data.id&&r.data.id.startsWith("stop_point")&&(null==l?void 0:l.stop)!==r.data.id){delete l.stop_area;var z={stop:r.data.id};(0,o.x$)("thematic")&&(z.from=W.A.location.pathname.substring(1));var Q=(0,o.vf)(l,z);W.A.push({pathname:(0,o.x$)("lines")?a:"/lines",search:Q})}break;case"ON_LINE_SELECTED":t((0,X.en)(r.line)),r.line?(0,K.wO)(r.line,n().app.hash,!0).then((function(e){var i;if(r.line.highlight&&e&&e.length>0)t((0,X.Dp)(e)),r.data&&r.data.name||(0,q.Fe)(n().app.map,e);else if(e&&e.props.data.features&&r.line.tad&&r.line.tad.zone){t((0,X.Dp)(e));var a=[];if(r.line.stops){var l,c=J(r.line.stops);try{for(c.s();!(l=c.n()).done;){var s=l.value;a.push([s.coord.lat,s.coord.lon])}}catch(e){c.e(e)}finally{c.f()}(0,q.Fe)(n().app.map,a)}}else if(e&&e.props.data.features)t((0,X.Dp)(e)),r.data&&r.data.name||(0,q.Fe)(n().app.map,[e]);else if(!(0,o.x$)("around")||!1!==(null===(i=r.line)||void 0===i||null===(i=i.tad)||void 0===i?void 0:i.trace)){var u=[];if(r.line.stops){var d,p=J(r.line.stops);try{for(p.s();!(d=p.n()).done;){var f=d.value;u.push([f.coord.lat,f.coord.lon])}}catch(e){p.e(e)}finally{p.f()}(0,q.Fe)(n().app.map,u)}}})):t((0,X.Dp)(null)),r.line&&(0,K.bC)(n(),r.line,r.data,r.openInfobox);break;case"BUILD_HEAVY_LINES":(0,K.Tl)(n(),r.zoom,r.zoomLvl);break;case"BUILD_COMPLEMENTARY_LINES":(0,K.mj)(n(),r.line);break;case"BUILD_CUSTOM_LINES":(0,K.T2)(n(),r.lines);break;case"BUILD_TRANSPORT_PLACES":r.isLib?t((0,X.lM)((0,K.vs)(n(),r.places))):t((0,X.AU)((0,K.vs)(n(),r.places)));break;case"BUILD_MAP_PLACES":t((0,X.Tv)((0,K.vs)(n(),r.places)));break;case"BUILD_PUBLIC_PLACES":t((0,X.UJ)((0,K.vs)(n(),r.places)));break;case"BUILD_BIKE_PATHS":(0,K.KR)(r.files,r.hidePaths);break;case"BUILD_MAP_BIKES":(0,K.pX)(n(),r.bikes);break;case"SET_ALL_LINES_SELECTED":(0,K.hi)(n().app.map,r.selected)}return e(r)}}})))},8089:function(e,t,n){n.d(t,{RZ:function(){return _},S6:function(){return g},X3:function(){return E},a9:function(){return A},h1:function(){return y},mb:function(){return b}});var r=n(1144),i=n(1003),o=n.n(i),a=n(9970),l=n(7380),c=n(9736),s=n(4457),u={REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"},d=u.REACT_APP_GTM,p=u.REACT_APP_PLAUSIBLE,f=u.REACT_APP_GTM_LIB,m=u.REACT_APP_GA,h=null,v=null,_=function(e){if(d||e.gtm_key){var t={gtmId:d||e.gtm_key};o().initialize(t)}},y=function(e){(m||e.ga_key)&&a.Ay.initialize(e.ga_key||m)},g=function(e){e.matomo_tracker_url&&e.matomo_site_id&&(v=new l.A({urlBase:e.matomo_tracker_url,siteId:e.matomo_site_id}))},b=function(){p&&(h=(0,r.A)({domain:p,apiHost:"https://analytics.lc.tools",hashMode:!0}))},A=function(){var e,t=s.j.getState().app.hasAuthorizedCookies;h&&h.trackPageview(),v&&v.trackPageView(),(m||null!==(e=s.j.getState().app.configApp)&&void 0!==e&&e.ga_key)&&t&&a.Ay.pageview(window.location.href)},E=function(e){var t,n=s.j.getState().app.hasAuthorizedCookies,r=s.j.getState().app.configApp;if((0,c.Yz)({message:"Update datalayer :",data:e},"info","DataLayer"),(d||r.gtm_key)&&n){var i={dataLayer:e};o().dataLayer(i)}else(0,c.UP)(f)&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push(e));(m||null!==(t=s.j.getState().app.configApp)&&void 0!==t&&t.ga_key)&&n&&a.Ay.event({category:"lc-map",action:e.event})}},107:function(e,t,n){var r=n(9386),i=n(8430),o=n(3481),a=n.n(o),l=(n(601),n(8635)),c=n.n(l),s=n(8413),u=n(9736),d=n(9742);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function m(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function v(e){var t=_();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function _(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_=function(){return!!e})()}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(o,e);var t,n,r,i=v(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"componentWillUnmount",value:function(){this.props.leaflet.map.removeLayer(this.leafletElement)}},{key:"createLeafletElement",value:function(e){var t,n,r,i,o,l,p,f=e.path,m=e.section,h=e.lineStyle,v=e.prefixNetwork,_=e.modes,y=e.repeatPolylineDecorator,g=void 0===y||y,b=e.leaflet,A=e.offset,E=m.display_informations?m.display_informations.code:m.mode,T=!0===g?c().length(f.map((function(e){return new(a().LatLng)(e[0],e[1])}))):0,P=(0,u._V)(d.A.location),x=!0===this.props.displayBikeInsteedOfBssOnMap,S=this.props.displayCustomPolylineIcon,j=this.props.forceLinesPictosOverMode,O=this.props.walkingSpeed,R=m.from&&_.bss&&m.from.poi&&m.from.poi.poi_type.id.includes("bicycle_rental")&&m.to.poi&&m.to.poi.poi_type.id.includes("bicycle_rental")&&"personal_bike"!==m.mode_display&&!x,w=[null===(t=m.display_informations)||void 0===t||null===(t=t.physical_mode)||void 0===t?void 0:t.toLowerCase(),null===(n=m.display_informations)||void 0===n||null===(n=n.commercial_mode)||void 0===n?void 0:n.toLowerCase()].includes("train")?"train":"TER"===(null===(r=m.display_informations)||void 0===r?void 0:r.commercial_mode)?"ter":[null===(i=m.display_informations)||void 0===i?void 0:i.physical_mode,null===(o=m.display_informations)||void 0===o?void 0:o.commercial_mode].includes("Coach")&&void 0!==S.coach?S.coach:[null===(l=m.display_informations)||void 0===l?void 0:l.physical_mode,null===(p=m.display_informations)||void 0===p?void 0:p.commercial_mode].includes("Autocar")&&void 0!==S.autocar?S.autocar:m.display_informations?"bus":"car"===m.mode&&void 0===S.car?"car":"car"===m.mode&&void 0!==S.car?S.car:"taxi"===m.mode?"taxi":"bike"===m.mode?R?"bss":"bike":_.pmr?"pmr":"ridesharing"===m.mode||m.isRidesharing?"ridesharing":O?"walking-speed-".concat(O):"walk",L=b.map.getZoom();return a().polylineDecorator(f,{interactive:!1,patterns:[{offset:void 0!==A?A:"50%",repeat:!0===g?100-T/400+"%":"string"==typeof g&&g,symbol:a().Symbol.marker({rotate:!1,markerOptions:{interactive:!1,icon:"color"===h&&m.display_informations?a().divIcon({className:"lc-polyline-decorator-color",html:'<div class="lc-decorator" style="background: #'+m.display_informations.color+"; color: #"+((0,s.N)(m.display_informations.color)>.5?"333":"fff")+'">'+E+"</div>"}):a().icon({className:"lc-polyline-decorator ".concat("ter"===w?"lc-decorator-ter":"bus"===w?"lc-decorator-bus":"bike"===m.mode||"car"===w?"lc-decorator-bike-or-car":"ridesharing"===m.mode?"lc-decorator-ridesharing":"lc-decorator-other "+w," ").concat("walk"===w&&m.duration<=500&&(P.journey||!P.journey&&L<16)&&"lc-hide-walk"," ").concat("walk"===w&&m.duration<=500&&(P.journey||!P.journey&&L>15)&&"lc-show-walk"),iconUrl:"bus"===w||"ter"===w||j[w]?(0,u.tx)("/assets/images/lines/".concat(!0===v&&m.display_informations.network?"".concat(m.display_informations.network,"-"):"").concat(E,".svg")):(0,u.tx)("/assets/images/modes/".concat(w,".svg"))})}})}]})}},{key:"updateLeafletElement",value:function(e,t){var n=t.path;this.leafletElement.setPaths(n)}}])&&f(t.prototype,n),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(r.A);t.A=(0,i.k0)(g)},4305:function(e,t,n){n.d(t,{t3:function(){return Gt},mC:function(){return dt},o$:function(){return pt},AX:function(){return ft},__:function(){return Ut},Fe:function(){return ht},Iu:function(){return vt},rY:function(){return mt},fV:function(){return _t},Tq:function(){return gt},KJ:function(){return Yt},X6:function(){return Ht},Nx:function(){return bt},aG:function(){return At},ni:function(){return Tt},wR:function(){return Pt},Pk:function(){return xt},Bd:function(){return Rt},xK:function(){return wt},nP:function(){return Lt},XH:function(){return Ct},bk:function(){return kt},pf:function(){return It},hz:function(){return Dt}});var r,i,o,a,l,c,s,u,d,p,f,m,h,v,_=n(3042),y=n(8413),g=n(6540),b=n(9742),A=n(8063),E=n.n(A),T=n(3847),P=n(9789),x=n(6857),S=n(402),j=n(2355),O=n(9131),R=n(3481),w=n.n(R),L=n(107),C=n(5471),N=n(4877),k=n(2951),I=n(4457),D=n(3052),M=n(1576),U=n(9736),G=n(1290),H=n(8089),Y=n(4589),F=(n(997),n(3349),n(6293)),B=n(2537),V=n(873),z=n(4903),X=n(2391),K=n(5885),q=n(1198),W=n(3727),J=n(7577),Q=n(1399),Z=n(1912),$=n(1225),ee=n(707),te=n(7293),ne=n(4848);function re(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||oe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||oe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){if(e){if("string"==typeof e)return ae(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function le(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ce=te.A.primarycolor,se=te.A.secondarycolor,ue=te.A.borderXS,de=Z.Ay.div(r||(r=le([""]))),pe=Z.Ay.div(i||(i=le(["\n  padding: 10px 5px;\n  &:not(:last-child) {\n    border-bottom: solid "," 1px;\n  }\n"])),(function(){return ue})),fe=Z.Ay.div(o||(o=le(["\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  margin: 0px 15px;\n"]))),me=Z.Ay.div(a||(a=le(["\n  flex-grow: 1;\n"]))),he=Z.Ay.img(l||(l=le(["\n  height: 20px;\n  transition: all ease-in 150ms;\n  width: 20px;\n  transform: rotate(-90deg);\n  ","\n"])),(function(e){return e.isOpen?"transform: rotate(0deg);":""})),ve=Z.Ay.img(c||(c=le(["\n  height: 15px;\n  width: 15px;\n  /* transform: rotate(-90deg); */\n"]))),_e=Z.Ay.div(s||(s=le(["\n  cursor: default;\n"]))),ye=Z.Ay.div(u||(u=le(["\n  display: flex;\n  gap: 15px;\n  margin: 15px;\n  &:not(:last-child) {\n    padding-bottom: 15px;\n    border-bottom: solid "," 1px;\n  }\n  &:last-child {\n    padding-bottom: 0px;\n    margin-bottom: 0px;\n  }\n\n  .lc-uiline {\n    width: 30px !important;\n    height: 30px !important;\n    margin-top: 7px;\n  }\n"])),(function(){return ue})),ge=Z.Ay.div(d||(d=le(["\n  flex-grow: 1;\n  font-size: 0.9em;\n"]))),be=Z.Ay.div(p||(p=le(["\n  cursor: pointer;\n  &:not(:first-child) {\n    margin-top: 5px;\n  }\n  display: flex;\n  align-items: center;\n  &:hover {\n    background-color: ",";\n  }\n  padding: 5px;\n  border-radius: 5px;\n"])),(function(){return se})),Ae=Z.Ay.div(f||(f=le(["\n  font-weight: 700;\n  div {\n    display: inline-block;\n    height: 12px !important;\n    width: 12px !important;\n  }\n"]))),Ee=Z.Ay.div(m||(m=le(["\n  flex-grow: 1;\n"]))),Te=Z.Ay.div(h||(h=le(["\n  display: flex;\n  flex-direction: column;\n  border-left: solid "," 2px;\n  padding-left: 10px;\n  font-weight: 500;\n\n  .lc-schedule {\n    img {\n      width: 10px;\n      margin-left: 7px;\n    }\n  }\n"])),(function(){return ce})),Pe=Z.Ay.div(v||(v=le(["\n  font-size: 0.85em;\n  padding: 10px 0px 10px 20px;\n  border-top: solid "," 1px;\n"])),(function(){return ue})),xe=function(e){var t=e.linesList,n=e.linesListStop,r=ie((0,g.useState)([]),2),i=r[0],o=r[1],a=ie((0,g.useState)(!0),2),l=a[0],c=a[1],s=(0,Q.r)(),u=(0,$.d4)((function(e){return e.app})),d=u.lines,p=u.stops,f=u.configApp,m=u.language,h=u.linesModes,v=ie((0,g.useState)(null!=f&&f.display_open_linesmodes?[]:""),2),y=v[0],b=v[1],A=(0,$.wA)(),T=ie((0,g.useState)(!1),2),P=T[0],x=T[1],S=ie((0,g.useState)(!1),2),j=S[0],O=S[1];(0,g.useEffect)((function(){return function(){P&&clearInterval(P)}}),[P]),(0,g.useEffect)((function(){if((null==h?void 0:h.length)>0)if(null!=f&&f.display_open_linesmodes)b(h.map((function(e){return e.name})));else{var e,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=oe(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}(h);try{var r=function(){var n=e.value;if(t.filter((function(e){return n.modes.includes(e.mode)})).length>0)return b(n.name),1};for(n.s();!(e=n.n()).done&&!r(););}catch(e){n.e(e)}finally{n.f()}}}),[h,n]),(0,g.useEffect)((function(){if(R(),null!=f&&f.interval_line_schedules){var e=setInterval((function(){R()}),null==f?void 0:f.interval_line_schedules);x(e)}}),[t]);var R=function(){_.A.get("/api/schedules?area=".concat(s.query.stop_area).concat("&extend=".concat(7),"&count=10")).then((function(e){var t;(null==e||null===(t=e.data)||void 0===t?void 0:t.length)>0&&(o(e.data),A((0,G.AK)(e.data)))})).catch((function(e){console.log("Error in get schedules : ",e)})).finally((function(){c(!1),O((0,k.Yq)(new Date,"full-with-time",m))}))},w=function(e,t,n){var r="";(0,U.x$)("around")?r="&from=around"+(s.query.line?"&fromline=".concat(s.query.line):""):(0,U.x$)("route-calculation")?r="&from=route-calculation":"/"===s.pathname?r="&from=entrance":(0,U.x$)("lines")&&s.query.stop_area&&!s.query.current&&(r="&from=".concat(s.query.stop_area)),s.push("/lines?current=".concat(e.id,"_").concat(t.direction_id,"&stop=").concat(n||s.query.stop_area).concat(r))},L=function(e){if(null!=f&&f.display_open_linesmodes){var t=y.indexOf(e.name);b(y.includes(e.name)?y.filter((function(e,n){return n!==t})):function(t){return[].concat(re(t),[e.name])})}else b(y===e.name?"":e.name)};return(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(de,{children:h.filter((function(e){return t.filter((function(t){return e.modes.includes(t.mode)})).length>0})).map((function(e){return(0,ne.jsxs)(pe,{children:[(0,ne.jsxs)(fe,{onClick:function(){return L(e)},onKeyUp:function(t){return(0,U.zQ)(t,(function(){L(e)}))},role:"button",tabIndex:"0","aria-label":(0,U.Tl)("aria-stop-area-lines-mode-going-through",!1,{key:"mode",value:(0,U.Tl)(e.name,!1)},{key:"stop",value:n}),children:[(0,ne.jsx)(me,{children:(0,U.Tl)(e.name)}),(0,ne.jsx)(he,{className:"lc-closed",src:(0,U.tx)("/assets/images/v.svg"),isOpen:null!=f&&f.display_open_linesmodes?y.includes(e.name):y===e.name})]}),l?(0,ne.jsx)("div",{className:"lc-loading","data-lc-loading":!0,children:(0,ne.jsx)("img",{src:(0,U.tx)("/assets/images/loading.gif"),alt:(0,U.Tl)("loading")})}):(0,ne.jsx)(E(),{isOpen:null!=f&&f.display_open_linesmodes?y.includes(e.name):y===e.name,children:(0,ne.jsx)(_e,{className:"lc-lines-going-through-stoparea",children:null==t?void 0:t.map((function(e){return d.find((function(t){return t.id===e.id}))})).filter((function(t){return t&&e.modes.includes(t.mode)})).map((function(e){var t,n;return(0,ne.jsxs)(ye,{className:"lc-lines-going-through-stoparea-line",children:[(0,ne.jsx)("div",{className:"",children:(0,ne.jsx)(X.A,{line:e,styleLine:"image",children:(0,ne.jsx)(ee.D,{line:e,image:null===(t="image")?void 0:t.includes("image")})})}),(0,ne.jsx)(ge,{children:null===(n=d.find((function(t){return t.id===e.id})))||void 0===n||null===(n=n.routes.filter((function(e){return p.find((function(t){return t.stop_area===s.query.stop_area&&t.lines.find((function(t){return t.route_id===e.route_id}))}))})))||void 0===n?void 0:n.map((function(t){var n,r=(0,U.Am)((null==i||null===(n=i.filter((function(e){return e.route_id===t.route_id})).flatMap((function(e){return e.date_times})))||void 0===n?void 0:n.map((function(e){return e.destination})))||[]);return null==r?void 0:r.map((function(n,r){var o,a,l;return(0,ne.jsxs)(be,{onClick:function(){var r;return w(e,t,null==i||null===(r=i.find((function(e){return e.route_id===t.route_id&&void 0!==e.date_times.find((function(e){return e.destination===n}))})))||void 0===r?void 0:r.stop_point)},onKeyUp:function(r){return(0,U.zQ)(r,(function(){var r;return w(e,t,null==i||null===(r=i.find((function(e){return e.route_id===t.route_id&&void 0!==e.date_times.find((function(e){return e.destination===n}))})))||void 0===r?void 0:r.stop_point)}))},tabIndex:"0",role:"button","aria-label":(0,U.Tl)("aria-lines-stop-area-open-line-direction",!1,{key:"line",value:e.code},{key:"direction",value:n}),children:[(0,ne.jsxs)(Ee,{children:[(0,ne.jsxs)(Ae,{children:[(0,U.Tl)("schedules-to")," ",n,(0,ne.jsx)(q.A,{noAria:!0,pmr:null===(o=p.find((function(e){return e.stop_area===s.query.stop_area&&e.lines.find((function(e){return e.route_id===t.route_id}))})))||void 0===o?void 0:o.pmr})]}),(0,ne.jsx)(Te,{children:"terminus"===(null===(a=i.find((function(e){return e.route_id===t.route_id})))||void 0===a?void 0:a.additional_informations)?(0,ne.jsx)("div",{children:(0,U.Tl)("stop-terminus")}):void 0!==i.find((function(e){return e.route_id===t.route_id&&void 0!==e.date_times.find((function(e){return e.destination===n}))}))?null===(l=i.find((function(e){return e.route_id===t.route_id&&void 0!==e.date_times.find((function(e){return e.destination===n}))})))||void 0===l?void 0:l.date_times.filter((function(e,t){return t<2})).map((function(e,t){return(0,ne.jsx)(K.A,{configApp:f,language:m,schedule:{time:e.date_time,realtime:"realtime"===e.data_freshness,equipments:e.equipments,extend:!0}},"schedule-".concat(t,"-").concat(r))})):(0,ne.jsx)("div",{children:(0,U.Tl)("no-schedules")})})]}),(0,ne.jsx)(ve,{className:"lc-closed",src:(0,U.tx)("/assets/images/arrow-calendar.svg"),isOpen:!1})]},t.route_id+"_"+r)}))}))})]},"line-by-area-".concat(e.id))}))})})]},"line-mode-".concat(e.id))}))}),j?(0,ne.jsx)(Pe,{className:"lc-stop-area-lines-lastest-refresh-schedules",children:(0,U.Tl)("lines-date-update-schedules",!1,{key:"date",value:j})}):null]})},Se=n(4432),je=n(4827);function Oe(e){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oe(e)}function Re(){Re=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,a=Object.create(o.prototype),l=new w(r||[]);return i(a,"_invoke",{value:S(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",f="suspendedYield",m="executing",h="completed",v={};function _(){}function y(){}function g(){}var b={};s(b,a,(function(){return this}));var A=Object.getPrototypeOf,E=A&&A(A(L([])));E&&E!==n&&r.call(E,a)&&(b=E);var T=g.prototype=_.prototype=Object.create(b);function P(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,o,a,l){var c=d(e[i],e,o);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==Oe(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(u).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,l)}))}l(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function S(t,n,r){var i=p;return function(o,a){if(i===m)throw Error("Generator is already running");if(i===h){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var l=r.delegate;if(l){var c=j(l,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var s=d(t,n,r);if("normal"===s.type){if(i=r.done?h:f,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(i=h,r.method="throw",r.arg=s.arg)}}}function j(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Oe(t)+" is not iterable")}return y.prototype=g,i(T,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:y,configurable:!0}),y.displayName=s(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,c,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},P(x.prototype),s(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new x(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},P(T),s(T,c,"Generator"),s(T,a,(function(){return this})),s(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return l.type="throw",l.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],l=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function we(e,t,n,r,i,o,a){try{var l=e[o](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,i)}function Le(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){we(o,r,i,a,l,"next",e)}function l(e){we(o,r,i,a,l,"throw",e)}a(void 0)}))}}function Ce(e){return function(e){if(Array.isArray(e))return De(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ie(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ie(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||Ie(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){if(e){if("string"==typeof e)return De(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?De(e,t):void 0}}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){Ge(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ge(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Oe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Oe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var He={REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"},Ye=He.REACT_APP_LINES_MAIN_TYPE,Fe=He.REACT_APP_LINES_TYPE_EXCEPTIONS,Be=He.REACT_APP_MODES_LINES_STYLE,Ve=He.REACT_APP_TIMETABLES,ze=He.REACT_APP_TIMETABLES_TYPE,Xe=He.REACT_APP_TIMETABLES_DISABLE_ON,Ke=He.REACT_APP_NEXT_SCHEDULES_RESULTS,qe=He.REACT_APP_NIGHT_LINES,We=He.REACT_APP_SHOW_PMR,Je=He.REACT_APP_SHOW_ADDITIONAL_STOP_TOOL,Qe=He.REACT_APP_DISRUPTION,Ze=He.REACT_APP_SCHEDULES_EXTENDS,$e=He.REACT_APP_API_PROXY_URL,et=He.REACT_APP_FAVORITES,tt=He.REACT_APP_ALL_POPUP_ON_TOP,nt=He.REACT_APP_SORT_LINES_BY_CODE,rt=He.REACT_APP_EXPANDED_MAP,it=te.A.primarycolor,ot=te.A.secondaryjourney,at=te.A.recommendedRoadsColor,lt=te.A.normalRoadsColor,ct=te.A.discouragedRoadsColor,st=Ke||2,ut=function(e){for(var t=(0,$.d4)((function(e){return e.app})).configApp,n="morning",r=(new Date).getHours(),i=e.line,o=e.timetableStop,a=e.print,l=e.data,c=e.isMobile,s=qe?JSON.parse(qe):{departure:"00",lines:[]},u=s.lines.includes(i.id),d=+s.departure,p={large:46.25,small:31.25,mobile:(window.innerWidth-60)/8},f=I.j.getState().app.size,m=c?p.mobile:p[f]?p[f]:p.large,h=e.hours?e.hours:{morning:Array.from(new Array(8),(function(e,t){return t+(u?d:4)})).map((function(e){return e>=24?e-24:e})),afternoon:Array.from(new Array(8),(function(e,t){return t+(u?d+8:12)})).map((function(e){return e>=24?e-24:e})),evening:Array.from(new Array(8),(function(e,t){return t+(u?d+16:20)})).map((function(e){return e>=24?e-24:e}))},v=0,_=Object.keys(h);v<_.length;v++){var y=_[v];h[y].includes(r)&&(n=y)}var b=function(e){var t=e.className,n=e.style,r=e.onClick,i=e.arrow,o=e.hours,a="next"===i,l=!1===a,c="";if("morning"===x&&a&&(c="".concat(o.afternoon[0],"h - ").concat(o.afternoon[o.afternoon.length-1],"h")),"afternoon"===x){var s=a?"evening":"morning";o[s].length>0&&(c="".concat(o[s][0],"h - ").concat(o[s][o[s].length-1],"h"))}return"evening"===x&&l&&(c="".concat(o.afternoon[0],"h - ").concat(o.afternoon[o.afternoon.length-1],"h")),(0,ne.jsx)("div",{className:t,style:Ue({},n),onClick:r,onKeyUp:function(e){return(0,U.zQ)(e,r)},role:"button",tabIndex:"0","aria-label":(0,U.Tl)("aria-lines-timetable-see-hours",!1,{key:"hours",value:c}),children:(0,ne.jsx)("span",{children:c})})},A=ke((0,g.useState)([]),2),E=A[0],T=A[1],P=ke((0,g.useState)(String(n)),2),x=P[0],S=P[1],j=[],O={adaptiveHeight:!0,accessibility:!0,className:"lc-timetable",dots:!0,infinite:!1,initialSlide:Object.keys(h).filter((function(e){return h[e].length>0})).indexOf(n),speed:200,beforeChange:function(e,t){return setTimeout((function(){return S(0===t?"morning":1===t?"afternoon":"evening")}))},nextArrow:(0,ne.jsx)(b,{arrow:"next",hours:h}),prevArrow:(0,ne.jsx)(b,{arrow:"previous",hours:h})},R=function(e){var t=e.data,n=e.otherDirections,r=e.step;return j=[],(0,ne.jsxs)("div",{children:[(0,ne.jsx)("div",{style:{marginRight:(8-h[r].length)*m+"px"},children:(0,ne.jsxs)("table",{children:[(0,ne.jsx)("caption",{children:(0,U.Tl)("aria-lines-timetable-title",!1,{key:"line",value:i.code},{key:"stop",value:o})}),(0,ne.jsx)("thead",{children:(0,ne.jsx)("tr",{children:h[r].map((function(e){return(0,ne.jsxs)("th",{tabIndex:"0",children:[e,"h"]},e)}))})}),(0,ne.jsx)("tbody",{children:w(r,t,n,[])})]},r)}),n.length>0&&(0,ne.jsxs)("div",{className:"lc-otherDirections","data-lc-other-directions":!0,children:[(0,ne.jsxs)("div",{className:"lc-otherdirectionsContent",children:[(0,U.Tl)("timetable-others-destinations")," :"]}),n.map((function(e,t){return(0,ne.jsxs)("div",{className:"lc-otherdirectionsContent",children:[(0,ne.jsx)("span",{className:"lc-otherdirectionsContentLetter",children:String.fromCharCode(t+97)})," : ",e]},e)}))]}),!a&&(0,U.Tl)("notes-timetable")&&(0,ne.jsxs)("div",{className:"lc-notes-timetable","data-lc-notes-timetable":!0,children:[(0,ne.jsx)("img",{src:(0,U.tx)("/assets/images/disruptions/notice.svg"),alt:(0,U.Tl)("notice")}),(0,ne.jsx)("div",{dangerouslySetInnerHTML:{__html:(0,U.Tl)("notes-timetable")}})]})]})},w=function e(t,n,r,i){var o,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],l=Ne(h[t]);try{var c=function(){var e=o.value,t=n.find((function(t){return+t.date_time.split("T")[1].substring(0,2)===e&&i.indexOf(t)<0}));i.push(t),a.push(t)};for(l.s();!(o=l.n()).done;)c()}catch(e){l.e(e)}finally{l.f()}for(j.push((0,ne.jsx)("tr",{children:a.map((function(e,t){var n=[];if(e){var i,o=Ne(e.directions);try{for(o.s();!(i=o.n()).done;){var a=i.value;n.indexOf(a)<0&&n.push(a)}}catch(e){o.e(e)}finally{o.f()}}return(0,ne.jsx)("td",{children:(0,ne.jsxs)("p",{children:[e&&e.date_time.split("T")[1].substring(2,4)," ",n.map((function(e){var t=r.indexOf(e);return t>=0?(0,ne.jsx)("span",{children:String.fromCharCode(t+97)},t):null}))]})},t)}))},t+"-"+j.length));i.filter((function(e){return e})).length<n.length;)e(t,n,r,i);return j};return(0,g.useEffect)((function(){for(var e=u?function(e){for(var t=[],n=0,r=Object.keys(e);n<r.length;n++){var i,o=r[n];t=(i=t).concat.apply(i,Ce(e[o]))}return{morning:t.filter((function(e){return h.morning.includes(+e.date_time.split("T")[1].substring(0,2))})),afternoon:t.filter((function(e){return h.afternoon.includes(+e.date_time.split("T")[1].substring(0,2))})),evening:t.filter((function(e){return h.evening.includes(+e.date_time.split("T")[1].substring(0,2))}))}}(l):l,t=[],n=!0,r=0,i=Object.keys(e);r<i.length;r++){var o=i[r];if(e[o].length>0){n=!1;var a,c=Ne(e[o]);try{for(c.s();!(a=c.n()).done;){var s=a.value;if(s){var d,p=Ne(s.directions);try{for(p.s();!(d=p.n()).done;){var f=d.value;t.indexOf(f)<0&&!t.includes(f)&&t.push(f)}}catch(e){p.e(e)}finally{p.f()}}}}catch(e){c.e(e)}finally{c.f()}}}T(n?[]:Object.keys(e).filter((function(e){return h[e].length>0})).map((function(n){return(0,ne.jsx)(R,{data:e[n],otherDirections:t,step:n},n)})))}),[l]),(0,g.useLayoutEffect)((function(){var e=document.querySelector(".lc-timetable");(null==e?void 0:e.querySelector(".slick-arrow"))&&e.classList.add("lc-timetable-with-margin")}),[E]),E.length>0?(0,ne.jsxs)(ne.Fragment,{children:[!a&&(0,ne.jsx)(Y.A,Ue(Ue({},O),{},{children:E})),a&&(0,ne.jsx)("div",{className:"lc-timetable print",children:E}),a&&void 0!==(0,U.Tl)("notes-timetable",!1)&&!t.new_print_design&&(0,ne.jsxs)("div",{className:"lc-notes-timetable","data-lc-notes-timetable":!0,children:[(0,ne.jsx)("img",{src:(0,U.tx)("/assets/images/disruptions/notice.svg"),alt:(0,U.Tl)("notice")}),(0,ne.jsx)("div",{dangerouslySetInnerHTML:{__html:(0,U.Tl)("notes-timetable")}})]})]}):(0,ne.jsx)("div",{className:"lc-no-schedules",children:(0,U.Tl)("stop-timetable-no-schedules")+" "+o})},dt=function(){var e=Le(Re().mark((function e(t,n,r){var i,o,a,l,c,s,u,d,p,f,m,h,v,y,g,A,E,x,S,j,O,R,L,C,k,Y,F,B,V,z,X,K,q,W,J,Q,Z,$,ee,te,re,ie,oe=arguments;return Re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=oe.length>3&&void 0!==oe[3]?oe[3]:null,o=t.props,a=o.map,l=o.openedMarker,c=o.touchscreenSelected,s=o.linesModes,u=o.currentRadius,d=o.searchIn,p=o.openedCollapse,f=b.A.location.pathname,m=(0,U._V)(b.A.location),e.prev=4,I.j.dispatch((0,M.Rr)({})),v={lat:n[0],lon:n[1],radius:u,area:i},d&&(v.type=d),e.next=10,(0,_.A)({url:"/api/around",params:v});case 10:if(y=e.sent,g=m.from.startsWith("stop_")||m.from.startsWith("poi:"),A={iconUrl:(0,U.tx)("/assets/images/pin.svg"),iconSize:g?[0,0]:[50,50],iconAnchor:g?[0,0]:[25,25]},(E=c?Ce(n).reverse().join(";"):null)&&c.coords===E&&(A={iconUrl:(0,U.tx)("/assets/images/you_are_here.svg"),iconSize:[70,70],iconAnchor:[35,70]}),x=(0,ne.jsx)(T.A,{draggable:!0,onDragstart:t.removePinCircle,onDragend:function(e){b.A.push({pathname:f,search:"?from="+(0,N.cC)(e.target.getLatLng())})},options:{zIndex:999},icon:w().icon(A),ref:function(e){return(0,N.eQ)(e)},position:n}),S={iconUrl:(0,U.tx)("/assets/images/around/walk-radius-"+u+".svg"),iconSize:[70,20],iconAnchor:[35,10]},j=[(0,ne.jsx)(P.A,{center:n,ref:function(e){return h=e},radius:u,fillColor:"rgba(0, 0, 0)",fillOpacity:"0.10",color:"transparent"},"circle-around-radius"),(0,ne.jsx)(T.A,{options:{zIndex:999},icon:w().icon(S),position:[Gt(u,n[0]),n[1]],ref:function(e){return(0,N.eQ)(e)}},"around-pin-walk-top"),(0,ne.jsx)(T.A,{options:{zIndex:999},icon:w().icon(S),position:[Gt(-u,n[0]),n[1]],ref:function(e){return(0,N.eQ)(e)}},"around-pin-walk-bottom")],O=y.data.shift(),R=O.pop(),L=(0,N.DL)((0,N.Am)(O,"id"),s,"mode"),C=y.data.shift(),k=Object.keys(C).reduce((function(e,t){return e[t]=C[t],e}),{}),1===Object.keys(m).length&&(Y=m.from.includes("stop_area:")?"Arrêt":m.from.includes("poi:company")?"Entreprise":m.from.includes("poi:")?"Lieu":"Adresse",t.state.latestMapSearchEvent!==t.props.inputValue&&((0,H.X3)({event:"map-searchMap",searchType:Y,searchTerm:t.props.inputValue}),t.setState({latestMapSearchEvent:t.props.inputValue}))),F=(0,U.Dg)(L,s),B=null,V=0,!m.from.startsWith("poi:")){e.next=60;break}if(!Object.keys(k).length){e.next=40;break}z=0,X=Object.keys(k);case 30:if(!(z<X.length)){e.next=40;break}if(K=X[z],!(q=k[K].find((function(e){return e.id===m.from})))){e.next=37;break}return B=q,V=1,e.abrupt("break",40);case 37:z++,e.next=30;break;case 40:if(B||!Object.keys(R).length){e.next=57;break}W=0,J=Object.keys(R);case 42:if(!(W<J.length)){e.next=57;break}Q=J[W],Z=0,$=Object.keys(R[Q]);case 45:if(!(Z<$.length)){e.next=54;break}if(ee=$[Z],!(te=R[Q][ee].find((function(e){return e.id===m.from})))){e.next=51;break}return B=te,e.abrupt("break",54);case 51:Z++,e.next=45;break;case 54:W++,e.next=42;break;case 57:B||(re=I.j.getState().app.places.find((function(e){return e.id===m.from})))&&(null!=(ie=t.props.placesRef.find((function(e){return e.places.find((function(e){return e===re.cat_id}))})))&&ie.name&&(t.props.aroundTabs.places.includes(ie.name)?(V=1,k[re.cat_id]||(k[re.cat_id]=[]),k[re.cat_id].push(re)):R[ie.name]?R[ie.name][re.cat_id].push(re):(R[ie.name]={},R[ie.name][re.cat_id]=[re])),B=re),e.next=61;break;case 60:m.from.startsWith("stop_")&&(m.from.startsWith("stop_area:")?B=t.props.areas.find((function(e){return e.id===m.from})):m.from.startsWith("stop_point:")&&(B=t.props.stops.find((function(e){return e.id===m.from}))));case 61:t.setState({groups:L,pois:R,places:k,tab:V},(function(){p!==F&&I.j.dispatch((0,G.f4)(F)),B&&setTimeout((function(){I.j.dispatch((0,D.xY)(B))}));var e=a.state.markers,t={pin:(0,U.x$)("around")?x:null,circle:j,markers:Ce(e),selectedInfobox:null,infoboxs:[]};a.setState(Ue({},t),Le(Re().mark((function e(){return Re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!h||l&&m.line||m.stop||r||ht(a,null,-1,h.leafletElement.getBounds()),(0,U.XR)(a.props.isMobile),a.props.isMobile&&setTimeout((function(){var e=document.querySelector("[data-lc-board]");e&&(e.parentNode.scrollTop=e.offsetTop-e.parentNode.offsetTop)}),250);case 3:case"end":return e.stop()}}),e)}))))})),e.next=68;break;case 64:e.prev=64,e.t0=e.catch(4),console.warn("Error : ",e.t0.response&&e.t0.response.data&&e.t0.response.data.id,e.t0),t.setState({error:e.t0.response&&"no-places"===e.t0.response.data.id?(0,U.Tl)("around-error-no-places"):(0,U.Tl)("around-error-unknow")});case 68:case"end":return e.stop()}}),e,null,[[4,64]])})));return function(t,n,r){return e.apply(this,arguments)}}(),pt=function(e,t,n,r,i,o,a,l){var c=t.links.find((function(e){return"line"===e.type})),s=Ye||"color",u=!1;if(Fe){var d,p=JSON.parse(Fe);c&&(d=p.find((function(e){var t,n;return(null===(t=e.lines)||void 0===t?void 0:t.includes(c.id))||(null===(n=e.networks)||void 0===n?void 0:n.includes(c.network))}))),t.display_informations&&(d=p.find((function(e){var n;return null===(n=e.networks)||void 0===n?void 0:n.includes(t.display_informations.network)}))),d&&(s=d.type,u=!0===d.prefixNetwork)}return(0,ne.jsx)(L.A,{modes:n,section:t,path:e.props.positions,lineStyle:s,prefixNetwork:u,displayBikeInsteedOfBssOnMap:i,repeatPolylineDecorator:r,displayCustomPolylineIcon:o,forceLinesPictosOverMode:a,walkingSpeed:l},t.id+Math.random()+"_decorator")},ft=function(){var e=Le(Re().mark((function e(t,n){var r,i,o,a,l,c,s,u,d,p,f,m,h,v,y,g,A,E,T,P,S,j,O,R,w,L,C,N,k,I,D,M,G,H,Y,F,B=arguments;return Re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=b.A.location,i=r.pathname,o=r.search,a=(0,U._V)(b.A.location),l=B.length,c=new Array(l>2?l-2:0),s=2;s<l;s++)c[s-2]=B[s];if(u=c[0],d=c[1],p=c[2],f=c[3],m=c[4],h=(null==f?void 0:f.props)||{},v=h.moduleData,y=u?t.display_informations:null,!u||"waiting"!==t.type){e.next=8;break}return e.abrupt("return");case 8:if(e.prev=8,u){e.next=12;break}return e.next=12,_.A.get("/api/file?folder=routes&ext=geojson&name=".concat(t.code,"_").concat(t.network,"_").concat(t.direction_id)).then((function(e){t.geojson=e.data})).catch((function(e){var n=e.response&&e.response.data?e.response.data.id:e;console.warn(n),t.geojson=null}));case 12:if(g=i.includes("lines")?n.state.polylines.filter((function(e){return t.code!==e.key.split("_").shift()})):[],A=[],E={color:"#"+(y?y.color.length?y.color:"000":t.color),opacity:1,weight:6,zIndex:7,main:d},t.geovelo&&t.path)d&&A.push((0,ne.jsx)(x.A,{positions:vt(t.geojson).pop(),color:"white",weight:11,zIndex:0},"clone_"+t.id)),t.path.forEach((function(e,r){var l=vt(t.geojson).pop();l=r===t.path.length-1?l.slice(e.geometryIndex):l.slice(e.geometryIndex,t.path[r+1].geometryIndex+1),d?E.color="recommendedRoads"===e.facilityType?at:"normalRoads"===e.facilityType?lt:ct:(E.color=ot,E.opacity=.6,E.zIndex=5,E.weight=4),T=(0,ne.jsx)(x.A,Ue(Ue({ref:function(e){return!d&&e&&e.leafletElement.bringToBack()},positions:l},E),{},{onMouseOver:function(){f.state.interactiveMap&&!a.journey&&f.state.indexDisplayLinePath!==p&&f.displayJourneys(null!=m&&m.tab&&f.state.tabs[m.tab]?f.state.tabs[m.tab]:f.state.journeys,n,p,!0)},onClick:function(){!o.includes("journey")&&f.state.interactiveMap&&b.A.push({pathname:i,search:o+"&journey="+p})}}),t.id+(y?"_"+y.code:"")+Math.random()),A.push(T)}));else{if(!u||"street_network"!==t.type&&"transfer"!==t.type&&"crow_fly"!==t.type||(E.color="#333",E.opacity=1,E.weight=4,E.dashArray="5 12"),"ridesharing"===t.mode&&(E.dashArray="0 0"),null!=v&&v.overrideLineOptionsMode)for(P=v.overrideLineOptionsMode,S=0,j=Object.keys(P);S<j.length;S++)if(O=j[S],R=t.mode,"bike"===t.mode&&(t.from.poi&&t.from.poi.poi_type.id.includes("bicycle_rental")||t.to.poi&&t.to.poi.poi_type.id.includes("bicycle_rental"))&&"personal_bike"!==t.mode_display&&(R="bss"),"personal_bike"===t.mode_display&&(R="bike"),u&&R===O)for(w=P[O],L=0,C=Object.keys(w);L<C.length;L++)N=C[L],E[N]=w[N];if(u&&!d&&(E.color=ot,E.opacity=.6,E.zIndex=5,E.weight=4),t.geojson)if(u)vt(t.geojson).forEach((function(e){k=(0,ne.jsx)(x.A,Ue(Ue({ref:function(e){return!d&&e&&e.leafletElement.bringToBack()},positions:e},E),{},{onMouseOver:function(){f.state.interactiveMap&&!a.journey&&f.state.indexDisplayLinePath!==p&&f.displayJourneys(null!=m&&m.tab&&f.state.tabs[m.tab]?f.state.tabs[m.tab]:f.state.journeys,n,p,!0)},onClick:function(){!o.includes("journey")&&f.state.interactiveMap&&b.A.push({pathname:i,search:o+"&journey="+p})}}),t.id+(y?"_"+y.code:"")+Math.random()),A.push(k)}));else{I=0,D=Ne(t.geojson.features);try{for(D.s();!(M=D.n()).done;)G=M.value,H=G.properties.zoom,Y=G.geometry.coordinates.length,F=1===Y?vt(G).pop():vt(G),k=(0,ne.jsx)(x.A,Ue({positions:F,zoom:H},E),(u?t.id+"_aaa":t.code)+(y?"_"+y.code:"")+"_"+I),A.push(k),I++}catch(e){D.e(e)}finally{D.f()}}}if(!u){e.next=18;break}return e.abrupt("return",A);case 18:return g=g.concat(A),e.abrupt("return",g);case 22:throw e.prev=22,e.t0=e.catch(8),console.log(e.t0),e.t0;case 26:case"end":return e.stop()}}),e,null,[[8,22]])})));return function(t,n){return e.apply(this,arguments)}}(),mt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w().latLngBounds();if(e){var n,r=Ne(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(void 0!==i)if(i.props)if(i.props.data)if(i.props.data.features.length>1){var o,a=Ne(i.props.data.features);try{for(a.s();!(o=a.n()).done;){var l=o.value;if("LineString"===l.geometry.type)l.geometry.coordinates.map((function(e){return t.extend([e[1],e[0]])}));else if("MultiLineString"===l.geometry.type){var c,s=Ne(l.geometry.coordinates);try{for(s.s();!(c=s.n()).done;){var u=c.value;t.extend(u.map((function(e){return[e[1],e[0]]})))}}catch(e){s.e(e)}finally{s.f()}}else if("GeometryCollection"===l.geometry.type){var d,p=Ne(l.geometry.geometries);try{for(p.s();!(d=p.n()).done;){var f=d.value;"LineString"===f.type&&f.coordinates.map((function(e){return t.extend([e[1],e[0]])}))}}catch(e){p.e(e)}finally{p.f()}}}}catch(e){a.e(e)}finally{a.f()}}else{var m=i.props.data.features[0].geometry;if("LineString"===m.type)m.coordinates.map((function(e){return t.extend([e[1],e[0]])}));else if("MultiLineString"===m.type){var h,v=Ne(m.coordinates);try{for(v.s();!(h=v.n()).done;){var _=h.value;t.extend(_.map((function(e){return[e[1],e[0]]})))}}catch(e){v.e(e)}finally{v.f()}}}else i.props.positions?t.extend(i.props.positions):i.props.position?t.extend(i.props.position):i.props.center?t.extend(i.props.center):console.warn("You shall not pass");else if(i.coord)t.extend(i.coord);else if(i.geometry){if("LineString"===i.geometry.type)i.geometry.coordinates.map((function(e){return t.extend([e[1],e[0]])}));else if("MultiLineString"===i.geometry.type){var y,g=Ne(i.geometry.coordinates);try{for(g.s();!(y=g.n()).done;){var b=y.value;t.extend(b.map((function(e){return[e[1],e[0]]})))}}catch(e){g.e(e)}finally{g.f()}}else if("MultiPolygon"===i.geometry.type){var A,E=Ne(i.geometry.coordinates);try{for(E.s();!(A=E.n()).done;){var T,P=Ne(A.value);try{for(P.s();!(T=P.n()).done;){var x=T.value;t.extend(x.map((function(e){return[e[1],e[0]]})))}}catch(e){P.e(e)}finally{P.f()}}}catch(e){E.e(e)}finally{E.f()}}}else t.extend(i)}}catch(e){r.e(e)}finally{r.f()}}return t},ht=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w().latLngBounds();if(t){var i,o=Ne(t);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(void 0!==a)if(a.props)if(a.props.data)if(a.props.data.features.length>1){var l,c=Ne(a.props.data.features);try{for(c.s();!(l=c.n()).done;){var s=l.value;if("LineString"===s.geometry.type)s.geometry.coordinates.map((function(e){return r.extend([e[1],e[0]])}));else if("MultiLineString"===s.geometry.type){var u,d=Ne(s.geometry.coordinates);try{for(d.s();!(u=d.n()).done;){var p=u.value;r.extend(p.map((function(e){return[e[1],e[0]]})))}}catch(e){d.e(e)}finally{d.f()}}else if("GeometryCollection"===s.geometry.type){var f,m=Ne(s.geometry.geometries);try{for(m.s();!(f=m.n()).done;){var h=f.value;if("LineString"===h.type)h.coordinates.map((function(e){return r.extend([e[1],e[0]])}));else if("MultiLineString"===h.type){var v,_=Ne(h.coordinates);try{for(_.s();!(v=_.n()).done;){var y=v.value;r.extend(y.map((function(e){return[e[1],e[0]]})))}}catch(e){_.e(e)}finally{_.f()}}}}catch(e){m.e(e)}finally{m.f()}}else if("Polygon"===s.geometry.type){var g,b=Ne(s.geometry.coordinates);try{for(b.s();!(g=b.n()).done;){var A=g.value;r.extend(A.map((function(e){return[e[1],e[0]]})))}}catch(e){b.e(e)}finally{b.f()}}}}catch(e){c.e(e)}finally{c.f()}}else{var E=a.props.data.features[0].geometry;if("LineString"===E.type)E.coordinates.map((function(e){return r.extend([e[1],e[0]])}));else if("MultiLineString"===E.type){var T,P=Ne(E.coordinates);try{for(P.s();!(T=P.n()).done;){var x=T.value;r.extend(x.map((function(e){return[e[1],e[0]]})))}}catch(e){P.e(e)}finally{P.f()}}else if("GeometryCollection"===E.type){var S,j=Ne(E.geometries);try{for(j.s();!(S=j.n()).done;){var O=S.value;if("LineString"===O.type)O.coordinates.map((function(e){return r.extend([e[1],e[0]])}));else if("MultiLineString"===O.type){var R,L=Ne(O.coordinates);try{for(L.s();!(R=L.n()).done;){var C=R.value;r.extend(C.map((function(e){return[e[1],e[0]]})))}}catch(e){L.e(e)}finally{L.f()}}}}catch(e){j.e(e)}finally{j.f()}}else if("Polygon"===E.type){var N,k=Ne(E.coordinates);try{for(k.s();!(N=k.n()).done;){var I=N.value;r.extend(I.map((function(e){return[e[1],e[0]]})))}}catch(e){k.e(e)}finally{k.f()}}}else a.props.positions?r.extend(a.props.positions):a.props.position?r.extend(a.props.position):a.props.center?r.extend(a.props.center):console.warn("You shall not pass");else a.coord?r.extend(a.coord):r.extend(a)}}catch(e){o.e(e)}finally{o.f()}}setTimeout((function(){var t=document.querySelector(".lc-no-board"),i=w().point(t?0:460,n<0?0:50),o=w().point(0,n<0?0:50);if(!e.props.isMobile||(0,U.UP)(tt)||(0,U.UP)(rt))if(e.props.isMobile&&(0,U.UP)(rt)){var a=document.querySelector(".lc-board"),l=document.querySelector("#lcmap");null!=l&&l.clientHeight&&null!=a&&a.offsetTop&&(i=w().point(10,-1*Math.abs(l.clientHeight-a.offsetTop)))}else e.props.isMobile&&(0,U.UP)(tt)&&(i=w().point(0,0),o=w().point(0,0));else{var c=document.querySelector(".leaflet-popup");i=w().point(c?-c.offsetWidth:0,c?-c.offsetHeight/2:0)}n>0&&r.extend(r.pad(n)),r.isValid()&&e.setState({bounds:r,boundsOptions:{paddingTopLeft:i,paddingBottomRight:o,animate:!1}})}))},vt=function(e){var t=[],n=e.type;switch(n&&!n.includes("Feature")||(n=(e=e.geometry).type),n){case"LineString":var r,i=[],o=Ne(e.coordinates);try{for(o.s();!(r=o.n()).done;){var a=r.value;i.push([a[1],a[0]])}}catch(e){o.e(e)}finally{o.f()}t.push(i);break;case"MultiLineString":var l,c=Ne(e.coordinates);try{for(c.s();!(l=c.n()).done;){var s,u=l.value,d=[],p=Ne(u);try{for(p.s();!(s=p.n()).done;){var f=s.value;d.push([f[1],f[0]])}}catch(e){p.e(e)}finally{p.f()}t.push(d)}}catch(e){c.e(e)}finally{c.f()}break;default:console.warn("Geometry type not found")}return t},_t=function(e,t){return Ue(Ue({},e.props.lines.find((function(e){return e.id===t.id}))),t)},yt=function(e,t){var n=e.props.map;b.A.push("/route-calculation?to=".concat(t)),n.setState({markers:[],markersPlaces:[],infoboxs:[]})},gt=function(e,t,n){var r=e.props.stops,i=t.id;return t.id.includes("stop_area")&&(i=r.find((function(e){return e.stop_area===t.id.replace("-pole-exchange","")&&e.lines.find((function(e){return e.id===n.id&&e.direction_id===n.direction_id}))})).id),Ue(Ue({},t),r.find((function(e){return e.id===i})))},bt=function(e){return e.geometry.coordinates[0].map((function(e){return[e[1],e[0]]}))},At=function(e){e&&e.setState({events:{}})},Et=function(e,t,n){if(t.id&&(!t.id||t.id.startsWith("stop_"))){var r=t.id.includes("stop_area")?t:gt(e,{id:t.id}),i=((null==e?void 0:e.props)||{}).map,o=(null==i?void 0:i.props)||{},a=o.isMobile,l=o.configApp;if(r.lines)return r.lines=null==r?void 0:r.lines.filter((function(e,t,n){return t===n.findIndex((function(t){return t.id.replace("_R","")===e.id.replace("_R","")}))})),n&&(t.ref&&(t.ref.clicked=!0),e.setState({selectedMarker:t})),(0,ne.jsxs)("div",{className:"lc-infobox",children:[(0,ne.jsxs)("div",{className:"lc-infobox-title",children:[(0,ne.jsx)("div",{style:{display:"flex",alignItems:"center"},children:t.name}),(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(q.A,{pmr:t.pmr}),Je&&JSON.parse(Je).map((function(e){return!!t[e]&&(0,ne.jsx)("div",{className:"lc-is-".concat(e)},"".concat(t.id,"_").concat(e))})),(0,ne.jsxs)("div",{className:"lc-infobox-title-tools",children:[!a&&(null==l?void 0:l.streetview)&&(0,ne.jsx)(C.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,U.Tl)("title-streetview-link"),children:(0,ne.jsx)("div",{className:"lc-tool-streetview-link lc-toolSmall",onClick:function(){var e,t=document.querySelector(".leaflet-popup"),n=t.offsetHeight,r=document.querySelector(".stop-infobox-streetview");document.querySelector(".stop-infobox-streetview iframe").setAttribute("src",document.querySelector(".stop-infobox-streetview iframe").getAttribute("data-src")),document.querySelector(".stop-infobox-streetview").style.display="block"===(null==r||null===(e=r.style)||void 0===e?void 0:e.display)?"none":"block",document.querySelectorAll(".lc-infobox-lines").forEach((function(e){var t;"block"===(null==r||null===(t=r.style)||void 0===t?void 0:t.display)?e.classList.add("lc-active-streetview"):e.classList.remove("lc-active-streetview")}));var i=t.offsetHeight-n,o=t.style.transform.split(","),a=Number(o[1].replace(/px$/,""));t.style.transform="".concat(o[0],", ").concat(a+i,"px, ").concat(o[2])},onKeyUp:function(e){return(0,U.zQ)(e,(function(){var e,t=document.querySelector(".leaflet-popup"),n=t.offsetHeight,r=document.querySelector(".stop-infobox-streetview");document.querySelector(".stop-infobox-streetview iframe").setAttribute("src",document.querySelector(".stop-infobox-streetview iframe").getAttribute("data-src")),document.querySelector(".stop-infobox-streetview").style.display="block"===(null==r||null===(e=r.style)||void 0===e?void 0:e.display)?"none":"block",document.querySelectorAll(".lc-infobox-lines").forEach((function(e){var t;"block"===(null==r||null===(t=r.style)||void 0===t?void 0:t.display)?e.classList.add("lc-active-streetview"):e.classList.remove("lc-active-streetview")}));var i=t.offsetHeight-n,o=t.style.transform.split(","),a=Number(o[1].replace(/px$/,""));t.style.transform="".concat(o[0],", ").concat(a+i,"px, ").concat(o[2])}))},tabIndex:"0",role:"button","aria-label":(0,U.Tl)("title-streetview-link")})}),n&&!t.id.includes("TAD")&&(0,ne.jsx)(C.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,U.Tl)("title-go-to-route-calculation"),children:(0,ne.jsx)("span",{className:"lc-is-tool-route-calculation lc-is-toolSmall",onClick:function(n){n.stopPropagation();var r=t.coord.lon+";"+t.coord.lat;t.id.includes("stop")?yt(e,t.id):yt(e,r)},onKeyUp:function(n){return(0,U.zQ)(n,(function(){var n=t.coord.lon+";"+t.coord.lat;t.id.includes("stop")?yt(e,t.id):yt(e,n)}))},role:"button",tabIndex:"0","aria-label":(0,U.Tl)("title-go-to-route-calculation",!1),children:(0,ne.jsx)("img",{src:(0,U.tx)("/assets/images/menu/route-calculation.svg"),alt:(0,U.Tl)("route-calculation-board-title"),"aria-hidden":"true"})})})]})]})]}),!a&&(null==l?void 0:l.streetview)&&(0,ne.jsx)("div",{className:"lc-streetview stop-infobox-streetview",children:(0,ne.jsx)("iframe",{title:"streetview",style:{border:0},loading:"lazy",height:"350px",width:"500px","data-src":"https://www.google.com/maps/embed/v1/streetview?key=".concat(null==l?void 0:l.streetview,"&location=").concat(t.coord.lat,",").concat(t.coord.lon)})}),r&&(0,ne.jsx)("div",{className:"lc-infobox-content",children:t.stand?(0,ne.jsxs)("div",{className:"lc-place",children:[(0,ne.jsx)("div",{children:t.address.label}),t.data&&t.data.stand&&(0,ne.jsxs)("div",{className:"lc-bss",children:[(0,ne.jsxs)("span",{className:"lc-bikes",children:[t.stand.available_bikes,(0,ne.jsx)("img",{src:(0,U.tx)("/assets/images/modes/bss.svg"),alt:(0,U.Tl)("bss-bikes-available")})]}),(0,ne.jsxs)("span",{className:"lc-seats",children:[t.stand.available_places,(0,ne.jsx)("img",{src:(0,U.tx)("/assets/images/bss-seat.svg"),alt:(0,U.Tl)("available-places")})]})]})]}):t.poi_type?(0,ne.jsx)("div",{className:"lc-place",children:(0,ne.jsx)("div",{children:t.address.label})}):St(e,r.lines,"infobox",t)})]})}},Tt=function(e,t){var n,r,i,o,a,l,c,s,u,d,p,f,m,h,v,g,A,T,P=arguments.length>2&&void 0!==arguments[2]&&arguments[2],x=arguments.length>3?arguments[3]:void 0;!t&&(t=e.state.currentLine);var S,j,O=b.A.location,R=O.pathname,w=O.search,L=(0,U._V)(b.A.location),M=e.state,Y=M.stopsList,W=M.timetable,J=M.loadingTimetable,Q=e.props,Z=Q.options,$=Q.terminusStyle,te=Q.token,re=Q.clientId,ie=Q.favoriteLine,oe=Q.favoriteStop,ae=Q.dontShow,le=Q.displayError,ce=Q.disruptionsInLine,se=Q.map,ue=Q.language,de=Q.touchscreenSelected,pe=Q.linesModes,fe=Q.openedCollapse,me=Q.reduxMarkers,he=Q.configApp,ve=pe.find((function(e){return e.modes.includes(t.mode)})),_e=!0===(null==ve?void 0:ve.noThermo)||t.tad&&!t.tad.thermo||!1,ye=se.props.isMobile,ge=!1!==(null==Z||null===(n=Z.features)||void 0===n?void 0:n.schedules),be=!1!==(null==Z||null===(r=Z.features)||void 0===r?void 0:r["timetable-button"]),Ae=e.props.moduleData?e.props.moduleData.dontShowTimetable:e.props.dontShowTimetable,Ee=e.props.moduleData?e.props.moduleData.displayScheduleDestination:e.props.displayScheduleDestination,Te=e.props.moduleData?e.props.moduleData.notScheduleDestinationIfOneDirection:e.props.notScheduleDestinationIfOneDirection,Pe=!0===(null==he?void 0:he.no_schedule_today_label),xe=e.props.moduleData?e.props.moduleData.timetableRescrictDate:e.props.timetableRescrictDate,Oe=!0===(null==he?void 0:he.timetable_button_nexto_stopname),we=!0===(null==he?void 0:he.timetable_print_button_nextto_date),ke=!1,Ie=!1;(null!==(i=e.props.moduleData)&&void 0!==i&&i.maxDate||e.props.maxDate)&&(ke=new Date((null===(S=e.props.moduleData)||void 0===S?void 0:S.maxDate)||e.props.maxDate));(null!==(o=e.props.moduleData)&&void 0!==o&&o.minDate||e.props.minDate)&&(Ie=new Date((null===(j=e.props.moduleData)||void 0===j?void 0:j.minDate)||e.props.minDate));xe&&xe>0&&(ke=new Date).setDate(ke.getDate()+xe),t.isTad=(0,U.$6)(pe,t),(_e||"TAD-markers-only"===t.cat)&&(0,N.Ul)(Y,"name");var De={calendar:{top:se&&!se.props.isMobile?"30px":"",bottom:se&&se.props.isMobile?"28%":"",left:se&&se.props.isMobile?"0":"",right:se&&se.props.isMobile?"0":"",boxShadow:"2px 2px 10px rgba(0, 0, 0, 0.15)"},colon:{padding:"0 5px 0 0 !important"},control:{boxShadow:"none",cursor:"pointer"},first:"#005e86",menu:{marginLeft:-5,position:"fixed",bottom:se&&se.props.isMobile?"25%":"",top:""},weekDays:{padding:"5px 0"},monthSelected:{fontWeight:600},calendarButtonStyle:{fontSize:".875em"},inputsHours:{fontSize:"1em"},today:{background:"#f4f4f4",color:"#333",fontWeight:"500"}};De.first=it,De.calendarButtonStyle=Ue(Ue({},De.calendarButtonStyle),{},{margin:10,border:"2px solid rgba(0, 0, 0, 0.08)",borderRadius:5,marginRight:10,padding:8}),De.calendar=Ue(Ue({},De.calendar),{},{padding:15,background:"#f1f5f5"}),De.week=Ue(Ue({},De.week),{},{background:"#fff"}),document.querySelectorAll(".lc-tooltip-leaflet-terminus").forEach((function(e){e.style.borderColor="#"+t.color,$?["imageAndCityName"].includes($)&&(e.style.padding="2px 8px 2px 2px"):(e.style.backgroundColor="#"+t.color,e.style.color=(0,y.N)(t.color)>.5?"#333":"#fff",e.style.padding="2px 8px")}));var Me=Ye||"color",He=!1;if(Fe){var Be=JSON.parse(Fe).find((function(e){var n,r;return(null===(n=e.lines)||void 0===n?void 0:n.includes(t.id))||(null===(r=e.networks)||void 0===r?void 0:r.includes(t.network))}));Be&&(Me=Be.type,He=!0===Be.prefixNetwork)}var ze=[],Ke=t.routes.find((function(e){return e.direction_id===t.direction_id})),qe=[];if(ce){var Ze,tt=Ne(ce);try{for(tt.s();!(Ze=tt.n()).done;){var nt,rt=Ze.value,ot=Ne(rt.impacted_objects);try{var at=function(){var e=nt.value;-1===ze.indexOf(rt)&&(e.routes&&e.routes.find((function(e){return e.id===Ke.route_id}))?(ze.push(rt),qe.push.apply(qe,Ce(rt.impacted_objects.filter((function(e){return e.line===t.id}))))):e.id?Y.find((function(t){return t["stop_area"===e.type?"stop_area":"id"]===e.id}))&&(ze.push(rt),qe.push(e)):"line"===e.type&&e.line===t.id&&ze.push(rt))};for(ot.s();!(nt=ot.n()).done;)at()}catch(e){ot.e(e)}finally{ot.f()}}}catch(e){tt.e(e)}finally{tt.f()}}var lt=ze?(0,N.Ul)((0,N.Ul)(ze,"begin"),"severity").map((function(e){var t;return(0,ne.jsxs)("div",{className:"lc-"+e.severity,children:[!1!==JSON.parse(Qe).severityTitle&&(0,ne.jsxs)("div",{className:"lc-disruption-severity",children:[(0,ne.jsx)("div",{className:"lc-icon"}),!0===JSON.parse(Qe).titleInsteadOfSeverity&&e.title?e.title:"blocking"===e.severity?"Perturbation majeure":"delays"===e.severity?"Perturbation":"Information"]}),(0,ne.jsxs)("div",{className:"lc-disruption","aria-label":(0,U.uQ)(e.begin,e.end,ue)+" : "+(null===(t=e.message)||void 0===t?void 0:t.replace(/<[^>]+>/g," ")),children:[e.title&&!JSON.parse(Qe).titleInsteadOfSeverity&&(0,ne.jsx)("div",{className:"lc-disruption-title",children:e.title}),e.message?(0,ne.jsx)("div",{className:"lc-disruption-content",dangerouslySetInnerHTML:{__html:e.message}}):(0,ne.jsx)("div",{className:"lc-disruption-content empty",children:"Aucun motif renseigné"}),!1!==JSON.parse(Qe).date&&(0,ne.jsxs)("div",{className:"lc-disruption-dates",children:[(0,U.uQ)(e.begin,e.end,ue),e.periods.length>1&&(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)("div",{className:"lc-disruption-dates-more",onClick:function(){var t=Array.from(ce),n=t.find((function(t){return t.id===e.id}));n.opened=!n.opened,I.j.dispatch((0,G.x6)(t))},onKeyUp:function(t){return(0,U.zQ)(t,(function(){var t=Array.from(ce),n=t.find((function(t){return t.id===e.id}));n.opened=!n.opened,I.j.dispatch((0,G.x6)(t))}))},role:"button",tabIndex:"0",children:(0,U.Tl)("display-disruptions-more-dates")}),(0,ne.jsx)(E(),{isOpen:!!e.opened,children:(0,ne.jsx)("div",{className:"lc-collapsed",children:Array.from(e.periods).splice(1).map((function(e){return(0,ne.jsx)("div",{children:(0,U.uQ)(e.begin,e.end,ue)},e.begin)}))})})]})]})]})]},e.id)})):[],ct=function(t){var n=e.props,r=n.areas,i=n.stops,o=e.props.openedMarker;if(t.direction_id="f"===t.direction_id?"b":"f",o&&r){var a=r.find((function(e){return e.id===o.stop_area}));if(!a.lines.find((function(e){return e.id===t.id&&(e.stop_id!==o.id||t.direction_id===e.direction_id)})))return I.j.dispatch((0,G.XW)("".concat((0,U.Tl)("stop-timetable-direction-not-deserved")," (<strong>").concat(o.name,"</strong>)"))),void I.j.dispatch((0,D.H7)(t));var l=t.routes.find((function(e){return e.direction_id===t.direction_id})),c=i.find((function(e){return e.stop_area===a.id&&e.lines.map((function(e){return e.route_id})).includes(l.route_id)}));c||(c=i.find((function(e){return e.name===o.name&&e.lines.map((function(e){return e.route_id})).includes(l.route_id)}))),c?I.j.dispatch((0,D.H7)(t,c)):I.j.dispatch((0,D.H7)(t))}else I.j.dispatch((0,D.H7)(t));(0,F.i)({clicked:"line-direction-swap",line:t.id,line_direction:t.direction_id})},dt=function(t){(0,H.X3)({event:"map-downloadTimetable",line:e.state.currentLine.code}),"local"===Ve?window.open("/"+t.file):"api"===Ve&&window.open(t.file)},pt=function(){var t=Le(Re().mark((function t(){var n,r,i;return Re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(0,U.vf)(L,{lang:ue,type:"timetable",size:"large"}),e.setState({printing:!0}),t.next=4,_.A.get("/api/print".concat(n));case 4:(r=t.sent)&&r.data&&"done"===r.data.status&&((i=document.createElement("a")).setAttribute("href","".concat($e?"/"===$e.slice(-1)?$e:$e+"/":"".concat(window.location.origin,"/"),"api/file?name=").concat(r.data.filename,"&folder=").concat(r.data.dir,"&ext=pdf")),i.click(),i.onclick=function(){return i.remove()}),e.setState({printing:!1});case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ft=function(n,r){var i,o,a,l,c,s,u,d,p,f,m,h,v,_,g,A,T,P,x,S=(null===(i=t.tad)||void 0===i?void 0:i.terminusLinesThrough)&&n.terminus,j=0;S&&(j=(0,N.Am)(null===(x=e.props.areas.find((function(e){return e.id===n.stop_area})).lines)||void 0===x?void 0:x.filter((function(e){return e.id!==t.id})),"id").length);var O=Qe&&me&&me.find((function(e){return e.key===t.code+"_"+n.index+"_disrupted"}))?n.severity:Qe&&(null===(o=(0,U.xA)(ce,n,t))||void 0===o||null===(o=o.filter((function(e){return"blocking"===e.severity})))||void 0===o?void 0:o.length)>0?"blocking":!!(Qe&&(null===(a=(0,U.xA)(ce,n,t))||void 0===a||null===(a=a.filter((function(e){return"delays"===e.severity})))||void 0===a?void 0:a.length)>0)&&"delays";return(0,ne.jsxs)("li",{"data-stop-index":n.index,className:"lc-stop"+(n.opened&&de?" selected":""),children:["TAD-markers-only"!==t.cat&&(0,ne.jsxs)(ne.Fragment,{children:[(!t.tad||t.tad&&t.tad.thermo)&&!_e&&(0,ne.jsx)("div",{className:"lc-border"+(0===r?" lc-first-border":""),style:{borderLeftColor:"#"+t.color}}),O?(0,ne.jsx)("div",{style:{border:"2px solid #"+t.color,background:"blocking"===O?"red":"orange"},className:"lc-point"+(n.terminus?" lc-stop-terminus":""),children:(0,ne.jsx)("div",{className:"blocking"===O&&Qe?"lc-"+JSON.parse(Qe).map.blocking:"delays"===O&&Qe?"lc-"+JSON.parse(Qe).map.delays:"",style:{borderColor:"#"+t.color}})}):null!==(l=t)&&void 0!==l&&null!==(l=l.tad)&&void 0!==l&&l.terminusShape&&n.terminus?(0,ne.jsx)(je.A,{line:t}):(0,ne.jsx)("div",{style:{border:"2px solid #"+t.color},className:"lc-point"+(n.terminus?" lc-stop-terminus":"")+(!_e||null!==(c=t.tad)&&void 0!==c&&c.separateStopAndTerminus?"":" lc-point-no-thermo")})]}),(0,ne.jsxs)("div",{className:"lc-stop-name"+(n.opened?" lc-selected":"")+(_e?" lc-tad-no-thermo":""),children:[(0,ne.jsxs)("div",{className:"lc-stop-name-content".concat(n.opened?" lc-selectedStop":""," ").concat(n.terminus?" lc-terminus-bold":""),role:"button",tabIndex:"0","aria-expanded":n.opened?"true":"false","aria-controls":"lc-schedules","aria-label":(0,U.Tl)("aria-lines-stop",!1,{key:"stop",value:n.name},{key:"pmr",value:We&&n.pmr&&["pmr","both"].includes(We)?"("+(0,U.Tl)("aria-lines-stop-pmr")+")":""}),onClick:function(){if(n.opened)b.A.push({pathname:R,search:w.split("&stop=")[0]});else{var e=(0,U.vf)(L,{stop:n.id});(0,F.i)({clicked:"stop",id:n.id}),b.A.push({pathname:R,search:e}),setTimeout((function(){document.querySelector(".lc-selectedStop")&&document.querySelector(".lc-selectedStop").focus()}),100)}},onKeyUp:function(e){return(0,U.zQ)(e,(function(){if(n.opened)b.A.push({pathname:R,search:w.split("&stop=")[0]});else{var e=(0,U.vf)(L,{stop:n.id});(0,F.i)({clicked:"stop",id:n.id}),b.A.push({pathname:R,search:e}),setTimeout((function(){document.querySelector(".lc-selectedStop").focus()}),100)}}))},onMouseEnter:function(){I.j.dispatch((0,D.b2)(n))},onMouseLeave:function(){setTimeout((function(){return I.j.dispatch((0,D.bu)(n))}))},children:[(0,ne.jsxs)("div",{className:"lc-stop-and-tools".concat(Oe&&(n.opened||n.id===L.stop)?" lc-stop-opened":"").concat(j>3?" lc-big-terminus-lines-through":""),style:Oe&&(n.opened||n.id===L.stop)?{backgroundColor:"#".concat(t.color),color:(0,y.N)(t.color)>.5?"#333":"#fff"}:{},children:[(0,ne.jsx)("div",{className:"".concat(he.split_stops_name_and_town_by?"lc-stop-and-town-name":"lc-stop-name-only").concat(Oe||!n.opened&&n.id!==L.stop?"":" lc-stop-opened"),style:Oe||!n.opened&&n.id!==L.stop?{}:{backgroundColor:"#".concat(t.color),color:(0,y.N)(t.color)>.5?"#333":"#fff"},children:he.split_stops_name_and_town_by?(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)("span",{className:"lc-stop-town-town",children:n.name.split(he.split_stops_name_and_town_by)[0]}),n.name.split(he.split_stops_name_and_town_by)[1]&&(0,ne.jsxs)("span",{className:"lc-stop-town-name",children:[n.name.split(he.split_stops_name_and_town_by)[1],(0,ne.jsx)(q.A,{pmr:n.pmr,noAria:!0,whitePicto:!(!n.opened&&n.id!==L.stop||!((0,y.N)(t.color)<=.5))})]})]}):(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)("span",{children:n.name}),(0,ne.jsx)(q.A,{pmr:n.pmr,noAria:!0,whitePicto:!(!n.opened&&n.id!==L.stop||!((0,y.N)(t.color)<=.5))})]})}),Je&&JSON.parse(Je).map((function(e){return!(!n[e]||!(!0===n[e]||n[e].length&&n[e].includes("".concat(t.code,"_").concat(t.network))))&&(0,ne.jsx)("div",{className:"lc-is-".concat(e)},"".concat(n.id,"_").concat(e))})),S?(0,ne.jsx)("div",{className:"lc-stop-lines-through",children:(0,N.Am)(null===(s=e.props.areas.find((function(e){return e.id===n.stop_area})).lines)||void 0===s?void 0:s.filter((function(e){return e.id!==t.id})),"id").map((function(e,t){var n;return(0,ne.jsx)(ee.D,{line:e,image:null===(n="image")?void 0:n.includes("image")},t)}))}):null]}),Oe&&(n.opened||n.id===L.stop)&&!(n.terminus&&n.id===(null===(u=Y[Y.length-1])||void 0===u?void 0:u.id))&&be&&!0!==Ae&&(0,ne.jsxs)("div",{className:"lc-seeTimetable".concat(Ee?" lc-with-schedule-destinations":""),onClick:function(t){var n;t.stopPropagation();var r=(0,k.Yq)(new Date,"ymd");if(null!==(n=e.props)&&void 0!==n&&null!==(n=n.moduleData)&&void 0!==n&&n.defaultDateTime||e.props.defaultDateTime){var i,o=(null===(i=e.props)||void 0===i?void 0:i.moduleData)||e.props,a=o.minDate,l=o.defaultDateTime;if(l&&a){var c=new Date(a);new Date<c&&(r=(0,k.Yq)(new Date(l),"ymd"))}}b.A.push({pathname:R,search:w+"&date="+r})},onKeyUp:function(t){t.stopPropagation(),(0,U.zQ)(t,(function(){var t,n=(0,k.Yq)(new Date,"ymd");if(null!==(t=e.props)&&void 0!==t&&null!==(t=t.moduleData)&&void 0!==t&&t.defaultDateTime||e.props.defaultDateTime){var r,i=(null===(r=e.props)||void 0===r?void 0:r.moduleData)||e.props,o=i.minDate,a=i.defaultDateTime;if(a&&o){var l=new Date(o);new Date<l&&(n=(0,k.Yq)(new Date(a),"ymd"))}}b.A.push({pathname:R,search:w+"&date="+n})}))},role:"button",tabIndex:"0","aria-label":(0,U.Tl)("aria-lines-see-timetable",!1,{key:"stop",value:n.name}),children:[(0,ne.jsx)("img",{src:(0,U.tx)("/assets/images/timetable.svg"),alt:(0,U.Tl)("timetable-button")}),(0,ne.jsx)("div",{dangerouslySetInnerHTML:{__html:(0,U.Tl)("timetable-button")}})]}),(0,U.Lj)("stops",te)&&n.opened&&(0,ne.jsx)(C.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,U.Tl)("title-favorite"),children:(0,ne.jsx)("span",{className:"lc-tool-favorite stop"+(oe&&(null==n?void 0:n.stop_area)===(null==oe?void 0:oe.id)&&(null===(d=t)||void 0===d||null===(d=d.routes)||void 0===d||null===(d=d.find((function(e){return e.direction_id===t.direction_id})))||void 0===d?void 0:d.route_id)===(null==oe?void 0:oe.route)?" active":""),"data-tip":!0,"data-for":"lc-login-stops",onClick:function(e){e.stopPropagation(),te&&(n.route_id=t.routes.find((function(e){return e.direction_id===t.direction_id})).route_id,(0,z.O)(n,te,re))},onKeyUp:function(e){return(0,U.zQ)(e,(function(){e.stopPropagation(),te&&(n.route_id=t.routes.find((function(e){return e.direction_id===t.direction_id})).route_id,(0,z.O)(n,te,re))}))},role:"button",tabIndex:"0","aria-label":(0,U.Tl)("aria-favorite",!1),children:(0,ne.jsxs)(V.A,{id:"lc-login-stops",disable:void 0!==te,isCapture:!0,place:ye?"left":"right",offset:ye?{top:0,left:-10}:{},type:"light",effect:"solid",event:"click",globalEventOff:"click",clickable:!0,children:[(0,U.Tl)("favorite-not-connected"),(0,ne.jsx)("br",{}),et&&(null===(p=JSON.parse(et))||void 0===p?void 0:p.login)&&(0,ne.jsx)("a",{className:"lc-button lc-login",href:(null===(f=JSON.parse(et))||void 0===f?void 0:f.login)||"",target:"_parent",children:(0,U.Tl)("favorite-login")})]})})})]}),st>0&&(!t.tad||t.tad&&t.tad.schedules)&&(0,ne.jsxs)(E(),{isOpen:!!n.opened,id:"lc-schedules",children:[le.filter((function(e){return"stop"===(null==e?void 0:e.type)&&e.id.includes(n.id)})).length>0&&(0,ne.jsx)("div",{className:"lc-display-error lc-stop-error",children:le.filter((function(e){return"stop"===(null==e?void 0:e.type)&&e.id.includes(n.id)})).map((function(e){return(0,ne.jsx)("span",{children:e.message},e.id)}))}),"blocking"===O?(0,ne.jsx)(ne.Fragment,{children:Qe&&!0===(null===(m=JSON.parse(Qe))||void 0===m?void 0:m.onStop)?(0,ne.jsx)(ne.Fragment,{children:(0,U.Mn)(t,n,ce,ue)}):(0,ne.jsxs)("div",{className:"lc-severity lc-schedules lc-blocking",children:[(0,ne.jsxs)("div",{className:"lc-disruption-severity",children:[(0,ne.jsx)("div",{className:"lc-icon"}),"Perturbation majeure"]}),(0,U.Tl)("severity-blocking-stop")," ",t.code]})}):n.opened?n.rer?(0,ne.jsx)("div",{style:{paddingLeft:10},children:"Pour afficher les horaires, se référer au calcul d'itinéraire"}):(0,ne.jsxs)(ne.Fragment,{children:[Qe&&!0===(null===(h=JSON.parse(Qe))||void 0===h?void 0:h.onStop)?(0,U.Mn)(t,n,ce,ue):null,(null==he||null===(v=he.display_address_for)||void 0===v?void 0:v.includes(t.mode))&&n.address&&(0,ne.jsx)("div",{className:"lc-stop-address",children:n.address}),Pe&&0===(null==n||null===(_=n.schedules)||void 0===_||null===(_=_.filter((function(e){return e&&e.time&&new Date((0,k._k)(e.time)).getDate()===(new Date).getDate()})))||void 0===_?void 0:_.length)?(0,ne.jsxs)("p",{className:"lc-no-schedule-today",children:[(0,ne.jsx)("img",{src:(0,U.tx)("/assets/images/informations.svg"),alt:"information","aria-hidden":"true"}),(0,U.Tl)("no-schedule-today")]}):null,(0,ne.jsxs)("div",{className:"lc-selectedContent"+(ge?"":" lc-no-schedules"),children:[ge&&(n.schedules?(0,ne.jsxs)("div",{className:"lc-schedules",role:"heading","aria-level":"3","aria-label":(0,U.Tl)("aria-lines-next-schedules",!1,{key:"code",value:t.code},{key:"stop",value:n.name},{key:"direction",value:t.routes.find((function(e){return e.direction_id===t.direction_id})).name},{key:"schedules",value:n.schedules.map((function(e){return(0,k.Yq)(new Date((0,k._k)(e.time)),"full-with-time",ue)})).join(", ")}),children:[Ee&&(0,ne.jsxs)("div",{className:"lc-schedule lc-schedule-destinations ".concat(Te&&1===n.schedules.map((function(e){return e.destination})).filter((function(e,t,n){return n.indexOf(e)===t})).length?"lc-one-direction":""),children:[0!==n.schedules.length||!0===(null==he?void 0:he.display_stop_is_terminus)&&!0===n.terminus?null:(0,ne.jsxs)("div",{className:"lc-schedule-destination",style:Te||"borderLeftLineColor"!==(null==he?void 0:he.schedules_destinations_style)?{}:"borderLeftLineColor"===(null==he?void 0:he.schedules_destinations_style)?{borderLeft:"solid ".concat("#"+t.color," 2px"),paddingLeft:"5px"}:{},children:[(0,ne.jsxs)("div",{className:"lc-destination-name",style:"destinationLineColor"===(null==he?void 0:he.schedules_destinations_style)?{color:"#"+t.color}:{},children:[(0,U.Tl)("schedules-to")," ",t.routes.find((function(e){return e.direction_id===t.direction_id})).name]}),(0,ne.jsx)("div",{className:"lc-destination-schedules",children:(0,ne.jsx)("div",{className:"lc-no-schedules",children:(0,U.Tl)("no-schedules")})})]}),n.schedules.map((function(e){return e.destination})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(r,i){return(0,ne.jsxs)("div",{className:"lc-schedule-destination",style:Te&&1===n.schedules.map((function(e){return e.destination})).filter((function(e,t,n){return n.indexOf(e)===t})).length||"borderLeftLineColor"!==(null==he?void 0:he.schedules_destinations_style)?{}:"borderLeftLineColor"===(null==he?void 0:he.schedules_destinations_style)?{borderLeft:"solid ".concat("#"+t.color," 2px"),paddingLeft:"5px"}:{},children:[(0,ne.jsxs)("div",{className:"lc-destination-name",style:"destinationLineColor"===(null==he?void 0:he.schedules_destinations_style)?{color:"#"+t.color}:{},children:[(0,U.Tl)("schedules-to")," ",r]}),(0,ne.jsxs)("div",{className:"lc-destination-schedules",children:[n.schedules.filter((function(e){return e.destination===r})).filter((function(e,t){return t<st})).map((function(e,t){return(0,ne.jsx)(K.A,{configApp:he,schedule:e,language:ue},"schedule-".concat(t))})),n.schedules.filter((function(e){return e.destination===r})).length>st?(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(E(),{isOpen:e.state.seeMoreSchedule&&!0===e.state.seeMoreSchedule["".concat(n.id,"-").concat(r)],children:n.schedules.filter((function(e){return e.destination===r})).filter((function(e,t){return t>=st&&t<2*st})).map((function(e,t){return(0,ne.jsx)(K.A,{configApp:he,schedule:e,language:ue},"schedule-".concat(t))}))}),(0,ne.jsxs)("div",{className:"lc-destination-schedules-see-more",tabIndex:"0",role:"button",onClick:function(){e.state.seeMoreSchedule?e.setState({seeMoreSchedule:Ue(Ue({},e.state.seeMoreSchedule),{},Ge({},"".concat(n.id,"-").concat(r),!e.state.seeMoreSchedule["".concat(n.id,"-").concat(r)]))}):e.setState({seeMoreSchedule:Ge({},"".concat(n.id,"-").concat(r),!0)})},onKeyUp:function(t){return(0,U.zQ)(t,(function(){e.state.seeMoreSchedule?e.setState({seeMoreSchedule:Ue(Ue({},e.state.seeMoreSchedule),{},Ge({},"".concat(n.id,"-").concat(r),!e.state.seeMoreSchedule["".concat(n.id,"-").concat(r)]))}):e.setState({seeMoreSchedule:Ge({},"".concat(n.id,"-").concat(r),!0)})}))},children:[e.state.seeMoreSchedule&&e.state.seeMoreSchedule["".concat(n.id,"-").concat(r)]?(0,U.Tl)("see-less"):(0,ne.jsx)("div",{className:"lc-see-more-container",children:(0,U.Tl)("see-more")})," ",(0,ne.jsx)(Se.W,{className:"lc-destination-schedules-see-more-arrow ".concat(e.state.seeMoreSchedule&&e.state.seeMoreSchedule["".concat(n.id,"-").concat(r)]?"lc-is-open":""),isOpen:e.state.seeMoreSchedule&&e.state.seeMoreSchedule["".concat(n.id,"-").concat(r)]})]})]}):null]})]},"schedule-destination-".concat(i))}))]}),!Ee&&n.schedules.length>0?n.schedules.map((function(e,t){return(0,ne.jsx)(K.A,{configApp:he,schedule:e,language:ue},"schedule-".concat(t))})):null,null!=he&&he.display_stop_is_terminus&&n.terminus&&0===(null===(g=n.schedules)||void 0===g?void 0:g.length)&&(0,U.Tl)("stop-terminus",!1)?(0,ne.jsx)("div",{className:"lc-no-schedules lc-stop-is-terminus",children:(0,U.Tl)("stop-terminus")}):Ee||0!==n.schedules.length?null:(0,ne.jsx)("div",{className:"lc-no-schedules",children:(0,U.Tl)("no-schedules")})]},n.index+"_schedules"):n.terminus&&n.id===(null===(A=Y[Y.length-1])||void 0===A?void 0:A.id)?null:(0,ne.jsx)("img",{className:"lc-loader-gif",src:(0,U.tx)("/assets/images/loading.gif"),width:30,alt:(0,U.Tl)("loading")})),!Oe&&(n.opened||n.id===L.stop)&&!(n.terminus&&n.id===(null===(T=Y[Y.length-1])||void 0===T?void 0:T.id))&&!(null!=he&&he.display_stop_is_terminus&&n.terminus&&0===(null===(P=n.schedules)||void 0===P?void 0:P.length))&&be&&!0!==Ae&&(0,ne.jsxs)("div",{className:"lc-seeTimetable ".concat(Ee?"lc-with-schedule-destinations":""),onClick:function(t){var n;t.stopPropagation();var r=(0,k.Yq)(new Date,"ymd");if(null!==(n=e.props)&&void 0!==n&&null!==(n=n.moduleData)&&void 0!==n&&n.defaultDateTime||e.props.defaultDateTime){var i,o=(null===(i=e.props)||void 0===i?void 0:i.moduleData)||e.props,a=o.minDate,l=o.defaultDateTime;if(l&&a){var c=new Date(a);new Date<c&&(r=(0,k.Yq)(new Date(l),"ymd"))}}b.A.push({pathname:R,search:w+"&date="+r})},onKeyUp:function(t){t.stopPropagation(),(0,U.zQ)(t,(function(){var t,n=(0,k.Yq)(new Date,"ymd");if(null!==(t=e.props)&&void 0!==t&&null!==(t=t.moduleData)&&void 0!==t&&t.defaultDateTime||e.props.defaultDateTime){var r,i=(null===(r=e.props)||void 0===r?void 0:r.moduleData)||e.props,o=i.minDate,a=i.defaultDateTime;if(a&&o){var l=new Date(o);new Date<l&&(n=(0,k.Yq)(new Date(a),"ymd"))}}b.A.push({pathname:R,search:w+"&date="+n})}))},role:"button",tabIndex:"0","aria-label":(0,U.Tl)("aria-lines-see-timetable",!1,{key:"stop",value:n.name}),children:[(0,ne.jsx)("img",{src:(0,U.tx)("/assets/images/timetable.svg"),alt:(0,U.Tl)("timetable-button")}),(0,ne.jsx)("div",{dangerouslySetInnerHTML:{__html:(0,U.Tl)("timetable-button")}})]})]})]}):(0,ne.jsx)("div",{})]})]})]},n.index)};return(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)("div",{className:"lc-elevation",children:(0,ne.jsxs)("div",{className:"lc-active-line",children:[(0,ne.jsxs)("div",{className:"lc-line-header".concat(Qe&&JSON.parse(Qe).collapse&&lt.length>0?" lc-with-disruptions":""),"data-lc-line-header":!0,children:[function(){var e,n,r,i,o,a,l,c,s,u;switch(Me){case"modeWithDirection":return(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)("div",{className:"lc-line lc-mode lc-with-direction",style:{background:"#"+t.color,color:(0,y.N)(t.color)>.5?"#333":"#fff"},"aria-hidden":"true",tabIndex:"-1",children:ve.name}),(0,ne.jsx)("span",{className:"lc-direction ".concat("hide"===(null===(e=t)||void 0===e||null===(e=e.tad)||void 0===e?void 0:e.thermo)||!0===(null===(n=t)||void 0===n||null===(n=n.tad)||void 0===n?void 0:n.noLineDirection)?"lc-tad-hide-direction":""),"aria-label":(0,U.Tl)("aria-line-header",!1,{key:"line",value:(0,U.Tl)("aria-line",!1,{key:"code",value:t.code})},{key:"direction",value:t.name}),children:t.name})]});case"codeWithDirection":return(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)("div",{className:"lc-line lc-code lc-with-direction",style:{background:"#"+t.color,color:(0,y.N)(t.color)>.5?"#333":"#fff"},"aria-hidden":"true",tabIndex:"-1",children:t.code}),(0,ne.jsx)("span",{className:"lc-direction ".concat("hide"===(null===(r=t)||void 0===r||null===(r=r.tad)||void 0===r?void 0:r.thermo)||!0===(null===(i=t)||void 0===i||null===(i=i.tad)||void 0===i?void 0:i.noLineDirection)?"lc-tad-hide-direction":""),"aria-label":(0,U.Tl)("aria-line-header",!1,{key:"line",value:(0,U.Tl)("aria-line",!1,{key:"code",value:t.code})},{key:"direction",value:t.name}),children:t.name})]});case"imageWithRouteDirection":case"image":return(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)("div",{className:"lc-line".concat(he.split_stops_name_and_town_by?" lc-with-split-town":""),style:{padding:"10px"},"aria-hidden":"true",tabIndex:"-1",children:null!=he&&he.line_website_url_information?(0,ne.jsx)(C.Ay,{theme:"latitude",touch:["hold",500],placement:"top",boundary:"window",content:(0,U.Tl)("line-website-information",!1),children:(0,ne.jsx)("a",{className:"lc-line-website-information",href:(null==he||null===(o=he.line_website_url_information)||void 0===o||null===(o=o.replace("#code#",t.code))||void 0===o?void 0:o.replace("#id#",t.id))||"#",target:"_blank",rel:"noopener noreferrer",children:(0,ne.jsx)(X.A,{line:t,styleLine:"image",children:(0,ne.jsx)("img",{src:(0,U.tx)("/assets/images/lines/"+(He?t.network+"-":"")+t.code+".svg"),alt:t.code})})})}):(0,ne.jsx)(X.A,{line:t,styleLine:"image",children:(0,ne.jsx)("img",{src:(0,U.tx)("/assets/images/lines/"+(He?t.network+"-":"")+t.code+".svg"),alt:t.code})})}),(0,ne.jsxs)("div",{className:"lc-direction ".concat("hide"===(null===(a=t)||void 0===a||null===(a=a.tad)||void 0===a?void 0:a.thermo)||!0===(null===(l=t)||void 0===l||null===(l=l.tad)||void 0===l?void 0:l.noLineDirection)?"lc-tad-hide-direction":""),role:"heading","aria-level":"2","aria-label":(0,U.Tl)("aria-line-header",!1,{key:"line",value:(0,U.Tl)("aria-line",!1,{key:"code",value:t.code})},{key:"direction",value:t.routes.find((function(e){return e.direction_id===t.direction_id})).name}),children:[(0,U.Tl)("line-direction")," :",(0,ne.jsx)("br",{}),he.split_stops_name_and_town_by?(0,ne.jsxs)("div",{className:"lc-stop-and-town-name",children:[(0,ne.jsx)("span",{className:"lc-stop-town-town",children:t.routes.find((function(e){return e.direction_id===t.direction_id})).name.split(he.split_stops_name_and_town_by)[0]}),t.routes.find((function(e){return e.direction_id===t.direction_id})).name.split(he.split_stops_name_and_town_by)[1]&&(0,ne.jsx)("span",{className:"lc-stop-town-name",children:t.routes.find((function(e){return e.direction_id===t.direction_id})).name.split(he.split_stops_name_and_town_by)[1]})]}):(0,ne.jsx)("strong",{children:t.routes.find((function(e){return e.direction_id===t.direction_id})).name})]})]});case"color":return(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)("div",{className:"lc-line".concat(he.split_stops_name_and_town_by?" lc-with-split-town":""),"aria-hidden":"true",tabIndex:"-1",children:(0,ne.jsx)(X.A,{line:t,styleLine:"image",children:(0,ne.jsx)("span",{className:"lc-line-code",style:{background:"#".concat(t.color),color:"#".concat(t.text)},children:t.code})})}),(0,ne.jsxs)("span",{className:"lc-direction".concat("hide"===(null===(c=t)||void 0===c||null===(c=c.tad)||void 0===c?void 0:c.thermo)||!0===(null===(s=t)||void 0===s||null===(s=s.tad)||void 0===s?void 0:s.noLineDirection)?" lc-tad-hide-direction":""),role:"heading","aria-level":"2","aria-label":(0,U.Tl)("aria-line-header",!1,{key:"line",value:(0,U.Tl)("aria-line",!1,{key:"code",value:t.code})},{key:"direction",value:t.routes.find((function(e){return e.direction_id===t.direction_id})).name}),children:[(0,U.Tl)("line-direction")," :",(0,ne.jsx)("br",{}),he.split_stops_name_and_town_by?(0,ne.jsxs)("div",{className:"lc-stop-and-town-name",children:[(0,ne.jsx)("span",{className:"lc-stop-town-town",children:t.routes.find((function(e){return e.direction_id===t.direction_id})).name.split(he.split_stops_name_and_town_by)[0]}),t.routes.find((function(e){return e.direction_id===t.direction_id})).name.split(he.split_stops_name_and_town_by)[1]&&(0,ne.jsx)("span",{className:"lc-stop-town-name",children:null===(u=t.routes.find((function(e){return e.direction_id===t.direction_id})).name.split(he.split_stops_name_and_town_by)[1].split("("))||void 0===u?void 0:u[0]})]}):(0,ne.jsx)("strong",{children:t.routes.find((function(e){return e.direction_id===t.direction_id})).name})]})]});default:return""}}(),!P&&(0,ne.jsx)("div",{className:"lc-tools",children:(0,ne.jsxs)(ne.Fragment,{children:[t.routes.length>1&&(0,ne.jsx)(C.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,U.Tl)("title-swap"),children:(0,ne.jsx)("span",{className:"lc-tool-swap",onClick:function(){return ct(t)},onKeyUp:function(e){return(0,U.zQ)(e,(function(){return ct(t)}))},role:"button",tabIndex:"0","aria-label":(0,U.Tl)("aria-line-swap-direction")})}),!e.state.timetable&&!de&&(Ve||(null==he?void 0:he.timetables))&&(!Xe||Xe&&!(null!==(a=JSON.parse(Xe))&&void 0!==a&&a.includes(t.mode)))&&(0,ne.jsx)(C.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:null!==(l=t)&&void 0!==l&&null!==(l=l.tad)&&void 0!==l&&l.overrideTransTimetable?(0,U.Tl)(t.tad.overrideTransTimetable):(0,U.Tl)("title-download-timetable"),children:(0,ne.jsx)("span",{className:"lc-tool-timetable",onClick:function(){if(null!=Ve&&Ve.startsWith("{")||null!=he&&he.timetables){var n=Ve?JSON.parse(Ve):he.timetables;if("urlWithLineCode"===n.type)window.open(n.url.replace(/<LCCODELIGNE>/,t.code))}else null!=Ve&&Ve.startsWith("https://")?window.open(Ve):Mt(e)},onKeyUp:function(n){return(0,U.zQ)(n,(function(){if(null!=Ve&&Ve.startsWith("{")||null!=he&&he.timetables){var n=Ve?JSON.parse(Ve):he.timetables;if("urlWithLineCode"===n.type)window.open(n.url.replace(/<LCCODELIGNE>/,t.code))}else null!=Ve&&Ve.startsWith("https://")?window.open(Ve):Mt(e)}))},role:"button",tabIndex:"0","aria-label":null!==(c=t)&&void 0!==c&&null!==(c=c.tad)&&void 0!==c&&c.overrideTransTimetable?(0,U.Tl)(t.tad.overrideTransTimetable):(0,U.Tl)("title-download-timetable")})}),(0,U.Lj)("lines",te)&&(0,ne.jsx)(C.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,U.Tl)("title-favorite"),children:(0,ne.jsx)("span",{className:"lc-tool-favorite"+((null==ie?void 0:ie.id)===(null===(s=t)||void 0===s?void 0:s.id)?" active":""),"data-tip":!0,"data-for":"lc-login",onClick:function(){te&&(0,z.O)(t,te,re)},onKeyUp:function(e){return(0,U.zQ)(e,(function(){te&&(0,z.O)(t,te,re)}))},role:"button",tabIndex:"0","aria-label":(0,U.Tl)("aria-favorite",!1),children:(0,ne.jsxs)(V.A,{id:"lc-login",disable:void 0!==te,isCapture:!0,place:ye?"left":"right",type:"light",effect:"solid",event:"click",globalEventOff:"click",clickable:!0,children:[(0,U.Tl)("favorite-not-connected"),(0,ne.jsx)("br",{}),et&&(null===(u=JSON.parse(et))||void 0===u?void 0:u.login)&&(0,ne.jsx)("a",{className:"lc-button lc-login",href:(null===(d=JSON.parse(et))||void 0===d?void 0:d.login)||"",target:"_parent",children:(0,U.Tl)("favorite-login")})]})})})]})}),(0,ne.jsx)("div",{className:"lc-timetableOptions","data-lc-timetable-options":!0,children:(0,ne.jsx)(E(),{isOpen:!!e.state.timetableOptions,children:e.state.timetableLineData?e.state.timetableLineData.length>0?(0,ne.jsx)(ne.Fragment,{children:e.state.timetableLineData.map((function(e){return(0,ne.jsx)("div",{className:"lc-timetableOptionsItem",target:"_blank",onClick:function(){return dt(e)},onKeyUp:function(t){return(0,U.zQ)(t,(function(){return dt(e)}))},role:"button",tabIndex:"0",children:e.name},e.id)}))}):(0,ne.jsx)("div",{className:"lc-timetableOptionsItem",children:(0,U.Tl)("no-timetable")}):!e.state.directDownload&&(0,ne.jsx)("div",{className:"lc-loading","data-lc-loading":!0,children:(0,ne.jsx)("img",{src:(0,U.tx)("/assets/images/loading.gif"),width:15,alt:(0,U.Tl)("loading")})})})})]},t.id),Je&&!W&&(0,ne.jsx)("div",{className:"lc-line-stop-informations",children:JSON.parse(Je).map((function(e){if(Y.find((function(n){return n[e]&&(n[e].length?n[e].includes("".concat(t.code,"_").concat(t.network)):!0===n[e])}))){var n=(0,U.Tl)("stop-info-".concat(e));return n=(n=n.replace(/(?:(?:\+|00)33[\s.-]{0,3}(?:\(0\)[\s.-]{0,3})?|0[\s.-]|0)[1-9](?:(?:[\s.-]?\d{2}){4}|\d{2}(?:[\s.-]?\d{3}){2})/gm,'<a href="tel:$&">$&</a>')).replace(/(https?:\/\/)?[\w\-~]+(\.[\w\-~]+)+(\/[\w\-~@:%]*)*(#[\w-]*)?(\?[^\s]*)?/gim,'<a href="$&" target="_blank">$&</a>'),(0,ne.jsxs)("div",{className:"lc-line-stop-information",children:[(0,ne.jsx)("div",{className:"lc-is-".concat(e)}),(0,ne.jsx)("div",{dangerouslySetInnerHTML:{__html:n}})]},"".concat(e))}return null}))}),t.tad&&t.tad.booking&&(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)("div",{className:"lc-line-tad-header",children:(0,U.Tl)("tad-booking")}),(0,ne.jsxs)("div",{className:"lc-line-tad-informations".concat("hide"===(null===(p=t)||void 0===p||null===(p=p.tad)||void 0===p?void 0:p.thermo)||!0===(null===(f=t)||void 0===f||null===(f=f.tad)||void 0===f?void 0:f.noLineDirection)?" lc-tad-hide-thermo":""),children:[t.tad.booking.info&&"string"==typeof t.tad.booking.info&&(0,ne.jsxs)("div",{className:"lc-line-tad-info",children:[(0,ne.jsx)("img",{src:(0,U.tx)("/assets/images/disruptions/informations.svg"),alt:(0,U.Tl)("tad-info")}),"html"===t.tad.booking.info_type?(0,ne.jsx)("span",{dangerouslySetInnerHTML:{__html:t.tad.booking.info}}):(0,ne.jsx)("span",{children:t.tad.booking.info})]}),t.tad.booking.phone&&(0,ne.jsxs)("a",{className:"lc-line-tad-phone",href:"tel:"+t.tad.booking.phone,children:[(0,ne.jsx)("img",{src:(0,U.tx)("/assets/images/phone.svg"),alt:(0,U.Tl)("tad-phone-booking")}),t.tad.booking.phone]}),t.tad.booking.website&&(0,ne.jsxs)("a",{className:"lc-line-tad-website",href:t.tad.booking.website.url,target:"_blank",rel:"noopener noreferrer",children:[(0,ne.jsx)("img",{src:(0,U.tx)("/assets/images/website.svg"),alt:(0,U.Tl)("tad-web-booking")}),t.tad.booking.website.name]}),t.tad.booking.reservation&&(0,ne.jsx)("a",{className:"lc-line-tad-reservation",href:t.tad.booking.reservation,target:"_blank",rel:"noopener noreferrer",children:(0,U.Tl)("tad-booking-reservation-button")})]})]}),t.errorPath&&(0,ne.jsxs)("div",{className:"lc-error",role:"alert",children:[(0,ne.jsx)("img",{src:(0,U.tx)("/assets/images/error.svg"),alt:(0,U.Tl)("severity-error")}),(0,U.Tl)("error-cant-open-line-geojson")," ",t.code]}),le.filter((function(e){return"line"===(null==e?void 0:e.type)})).length>0&&(0,ne.jsx)("div",{className:"lc-display-error ".concat(Qe&&JSON.parse(Qe).collapse&&lt.length>0?"lc-space-below-error":""),children:le.filter((function(e){return"line"===(null==e?void 0:e.type)})).map((function(e){return(0,ne.jsx)("span",{children:e.message},e.id)}))}),(null==e||null===(m=e.props)||void 0===m?void 0:m.moduleData)&&(null==e||null===(h=e.props)||void 0===h?void 0:h.moduleData["thermo-label-information"])&&(0,ne.jsx)("div",{className:"lc-thermo-label-information",children:(0,U.Tl)("lines-thermo-label-information")}),W?(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsxs)("div",{className:"lc-timetable-stop",role:"heading","aria-level":"3","aria-label":"".concat((0,U.Tl)("stop",!1)," ").concat(e.state.timetableStop," ").concat(null!==(v=Y.find((function(e){return e.id===L.stop})))&&void 0!==v&&v.pmr?"(".concat((0,U.Tl)("aria-lines-stop-pmr",!1),")"):""),children:[(0,ne.jsxs)("div",{className:"".concat(he.split_stops_name_and_town_by?"lc-timetable-stop-prefix":""),children:[(0,U.Tl)("stop")," :"]}),(0,ne.jsx)("div",{className:"lc-timetable-stop-name".concat(he.split_stops_name_and_town_by?" lc-split-stop":""),children:he.split_stops_name_and_town_by?(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)("span",{className:"lc-stop-town-town",children:e.state.timetableStop.split(he.split_stops_name_and_town_by)[0]}),e.state.timetableStop.split(he.split_stops_name_and_town_by)[1]&&(0,ne.jsxs)("span",{className:"lc-stop-town-name",children:[e.state.timetableStop.split(he.split_stops_name_and_town_by)[1],(0,ne.jsx)(q.A,{pmr:null===(g=Y.find((function(e){return e.id===L.stop})))||void 0===g?void 0:g.pmr,noAria:!0})]})]}):(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)("span",{children:e.state.timetableStop}),(0,ne.jsx)(q.A,{pmr:null===(A=Y.find((function(e){return e.id===L.stop})))||void 0===A?void 0:A.pmr,noAria:!0})]})}),we?null:(0,ne.jsxs)(ne.Fragment,{children:[!ae.includes("print")&&!(0,N.x2)(e.state.timetableData)&&!de&&!P&&!e.state.printing&&(0,ne.jsx)(C.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,U.Tl)("title-print"),children:(0,ne.jsx)("div",{className:"lc-print",onClick:function(){return pt()},onKeyUp:function(e){return(0,U.zQ)(e,(function(){return pt()}))},role:"button",tabIndex:"0",title:(0,U.Tl)("title-print"),"aria-label":(0,U.Tl)("aria-lines-print-timetable",!1,{key:"stop",value:e.state.timetableStop})})}),e.state.printing&&(0,ne.jsx)("img",{src:(0,U.tx)("/assets/images/loading.gif"),width:30,alt:(0,U.Tl)("loading")})]})]}),(0,ne.jsxs)("div",{className:"lc-scroll","data-lc-scroll":"scroll",onScroll:function(e){for(var t=0,n=Array.from(document.querySelectorAll(".lc-timetable th"));t<n.length;t++){n[t].style.top=e.target.scrollTop-95+"px"}},children:[(0,ne.jsxs)("div",{className:"lc-stop-timetable-and-print",children:[!P&&(0,ne.jsx)("div",{children:(0,ne.jsx)(B.A,{buttonClassName:"lc-stop-timetable-date",button:!0,dateLabel:null==he?void 0:he.timetable_calendar_date_label,buttonBorder:!0,margin:10,onChangeDate:function(e){var t=(0,k.Yq)(e,"ymd"),n=(0,U._V)(b.A.location);n.date&&n.date===t||b.A.push({pathname:R,search:w.split("&date=")[0]+"&date="+t})},maxDate:ke||void 0,minDate:Ie||void 0})}),we?(0,ne.jsxs)(ne.Fragment,{children:[!ae.includes("print")&&!(0,N.x2)(e.state.timetableData)&&!de&&!P&&!e.state.printing&&(0,ne.jsx)(C.Ay,{theme:"latitude",touch:["hold",500],placement:"right",boundary:"window",content:(0,U.Tl)("title-print"),children:(0,ne.jsx)("div",{className:"lc-print",onClick:function(){return pt()},onKeyUp:function(e){return(0,U.zQ)(e,(function(){return pt()}))},role:"button",tabIndex:"0",title:(0,U.Tl)("title-print"),"aria-label":(0,U.Tl)("aria-lines-print-timetable",!1,{key:"stop",value:e.state.timetableStop})})}),e.state.printing&&(0,ne.jsx)("img",{src:(0,U.tx)("/assets/images/loading.gif"),width:30,alt:(0,U.Tl)("loading")})]}):null]}),J&&!P?(0,ne.jsx)("img",{src:(0,U.tx)("/assets/images/loading.gif"),width:30,alt:(0,U.Tl)("loading")}):(0,ne.jsx)(ut,{data:P?x.timetableData:e.state.timetableData,hours:P?x.timetableHours:e.state.timetableHours,line:e.state.currentLine,timetableStop:e.state.timetableStop,print:P,isMobile:ye})]})]}):(0,ne.jsxs)("div",{className:"lc-stops lc-scroll".concat(_e?" lc-tad-no-thermo":"").concat("hide"===(null===(T=t)||void 0===T||null===(T=T.tad)||void 0===T?void 0:T.thermo)?" lc-tad-hide-thermo":""),"data-lc-stops":!0,"data-lc-scroll":"scroll",children:[e.props.lineInformation&&(0,ne.jsx)("div",{className:"lc-delays",children:(0,ne.jsx)("div",{className:"lc-disruption",dangerouslySetInnerHTML:{__html:e.props.lineInformation}})}),Qe&&JSON.parse(Qe).collapse&&lt.length>0?(0,ne.jsxs)("div",{className:"lc-disruptions","data-lc-disruptions":!0,children:[(0,ne.jsxs)("div",{className:"lc-disruptions-head"+(ze.every((function(e){return"informations"===e.severity}))?" with-only-infos":ze.every((function(e){return["delays","informations"].includes(e.severity)}))?" with-only-delays":""),onClick:function(){I.j.dispatch((0,G.f4)("disruptions-line"))},onKeyUp:function(e){return(0,U.zQ)(e,(function(){I.j.dispatch((0,G.f4)("disruptions-line"))}))},role:"button",tabIndex:"0","aria-expanded":"disruptions-line"===fe?"true":"false","aria-controls":"lc-disruptions-line","aria-label":(0,U.Tl)(ze.every((function(e){return"informations"===e.severity}))?"display-informations":"display-disruptions"),children:[(0,ne.jsx)("div",{className:"lc-icon"}),(0,ne.jsx)("span",{children:(0,U.Tl)(ze.every((function(e){return"informations"===e.severity}))?"display-informations":"display-disruptions")}),(0,ne.jsx)("div",{className:"lc-caret".concat("disruptions-line"!==fe?" lc-closed":"")})]}),(0,ne.jsx)(E(),{isOpen:"disruptions-line"===fe,id:"lc-disruptions-line",children:lt})]}):lt.length>0&&lt,t.tad&&t.tad.separateStopAndTerminus?(0,ne.jsxs)("div",{className:"lc-stops-tad-separate-stop-terminus",children:[(0,ne.jsx)("div",{className:"lc-title lc-title-terminus-stops",children:Y.filter((function(e){return e.terminus})).length>1?(0,U.Tl)("line-tad-stops-terminus"):(0,U.Tl)("line-tad-stop-terminus")}),(0,ne.jsx)("ol",{className:"lc-ul-stops lc-ul-stops-tad-terminus",children:Y.filter((function(e){return e.terminus})).map((function(e,t){return ft(e,t)}))}),(0,ne.jsx)("div",{className:"lc-title lc-title-departure-stops",children:Y.filter((function(e){return!e.terminus})).length>1?(0,U.Tl)("line-tad-departure-stops"):(0,U.Tl)("line-tad-departure-stop")}),(0,ne.jsx)("ol",{className:"lc-ul-stops",children:Y.filter((function(e){return!e.terminus})).map((function(e,t){return ft(e,t)}))})]}):(0,ne.jsx)("ol",{className:"lc-ul-stops",children:Y.map((function(e,t){return ft(e,t)}))})]})]})}),e.state.schedulesIntervalId?(0,ne.jsx)("div",{className:"lc-lines-lasted-updated-schedules",children:(0,U.Tl)("lines-date-update-schedules",!1,{key:"date",value:(0,k.Yq)(e.state.schedulesLastestUpdate?e.state.schedulesLastestUpdate:new Date,"full-with-time",e.props.language)})}):null]})},Pt=function(e){var t=e.state,n=t.linesList,r=t.linesListStop,i=e.props.configApp;return(0,ne.jsxs)("div",{className:"lc-elevation lc-lines-by-area",children:[(0,ne.jsxs)("div",{className:"lc-group ".concat(!0===(null==i?void 0:i.schedules_in_popup)?"for-lines":""),children:[(0,ne.jsx)("div",{className:"lc-group-name",children:!0===(null==i?void 0:i.schedules_in_popup)?(0,ne.jsxs)("div",{className:"lc-group-mode",role:"heading","aria-level":"2",children:[(0,ne.jsxs)("div",{children:[n.length>0?(0,U.Tl)("lines-by-stoparea"):(0,U.Tl)("no-line-by-stoparea")," ",(0,U.Tl)("lines-going-through-stoparea")," "]}),(0,ne.jsx)("div",{className:"lc-stop-name-in-bold",children:r})]}):(0,ne.jsxs)("div",{className:"lc-group-mode",role:"heading","aria-level":"2",children:[n.length>0?(0,U.Tl)("lines-by-stoparea"):(0,U.Tl)("no-line-by-stoparea")," ",(0,U.Tl)("lines-going-through-stoparea")," ",r]})}),!0!==(null==i?void 0:i.schedules_in_popup)&&n.length>0&&(0,ne.jsxs)("div",{className:"lc-group-offset-bottom",children:[St(e,n,"line")," "]})]}),!0===(null==i?void 0:i.schedules_in_popup)&&n.length>0&&(0,ne.jsx)(xe,{linesList:n,linesListStop:r})]})},xt=function(e){var t=e.props,n=t.openedCollapse,r=t.linesModes,i=e.state,o=i.groups,a=i.pois,l=(0,U._V)(b.A.location);if(r.find((function(e){return!0===e.drawOnOpen}))&&((0,U.x$)("lines")||(0,U.x$)("multimobilities"))){var c=r.find((function(e){return e.name===n}));if(n||I.j.dispatch((0,M.lO)(!1)),!0===(null==c?void 0:c.drawOnOpen)&&!l.current&&l.stop_area)I.j.dispatch((0,M.lO)(!1)),I.j.dispatch((0,M.l2)([]));else if(!0!==(null==c?void 0:c.drawOnOpen)||l.current)I.j.dispatch((0,M.l2)([]));else{var s,u;!0===(null==c?void 0:c.hideHeavyLines)&&I.j.dispatch((0,M.lO)(!0));var d=null===(s=e.props)||void 0===s||null===(s=s.map)||void 0===s||null===(s=s.props)||void 0===s||null===(s=s.reactLines)||void 0===s?void 0:s.map((function(e){var t,n,r;return null!=e&&null!==(t=e.key)&&void 0!==t&&t.startsWith("terminus")?null==e||null===(n=e.props)||void 0===n?void 0:n.lines:null==e||null===(r=e.props)||void 0===r||null===(r=r.line)||void 0===r?void 0:r.id})).flat().filter((function(e,t,n){return n.indexOf(e)===t}));if(null===(u=o[n])||void 0===u||!u.every((function(e){return null==d?void 0:d.includes(e.id)}))){var p,f=o[n];if(null!=c&&c.specificLines&&(f=o[n].filter((function(e){return c.specificLines.includes(e.id)}))),(null===(p=f)||void 0===p?void 0:p.length)>0){var m=(0,W.je)((0,N.Ul)(f,"position").reverse(),c);Promise.all(m).then((function(t){var n=(0,U._V)(b.A.location);(c.name===I.j.getState().board.openedCollapse&&(0,U.x$)("lines")||(0,U.x$)("multimobilities"))&&!n.current?(I.j.dispatch((0,M.l2)(t.flat())),c.fitBoundsOnOpen&&ht(e.props.map,t.flat())):I.j.dispatch((0,M.l2)([]))})).catch((function(e){console.log("Error in get lines : ",e)}))}}}}if(!(o&&0!==Object.keys(o).length||a&&0!==Object.keys(a).length))return(0,ne.jsx)("div",{className:"lc-empty",children:(0,U.Tl)("no-lines-around")});var h=Object.keys(o).map((function(t,i){return(0,ne.jsxs)("div",{className:"lc-group lc-".concat(t),id:"lc-group-"+i,children:[(0,ne.jsxs)("div",{className:"lc-group-name",onClick:function(){return I.j.dispatch((0,G.f4)(t))},onKeyUp:function(e){return(0,U.zQ)(e,(function(){return I.j.dispatch((0,G.f4)(t))}))},role:"button",tabIndex:"0","aria-expanded":t===n?"true":"false","aria-controls":"lc-group-section-"+i,"aria-label":(0,U.Tl)(t),children:[{modesTitles:(0,ne.jsx)("div",{className:"lc-group-mode",role:"heading","aria-level":"2",dangerouslySetInnerHTML:{__html:(0,U.Tl)(t)}}),modesTitlesIconsAndText:(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)("img",{className:"lc-group-mode-logo lc-"+t,src:(0,U.tx)("/assets/images/".concat(t,".svg")),alt:t}),(0,ne.jsxs)("div",{className:"lc-mode",children:[(0,ne.jsx)("div",{className:"lc-"+t,style:(0,N.Z0)(r,t),children:(0,U.Tl)(t)}),(0,ne.jsx)("div",{className:"lc-text",children:(0,U.Tl)("mode-"+t+"-text")})]})]})}[Be||"modesTitles"],(0,ne.jsx)("div",{className:"lc-arrow-group",children:(0,ne.jsx)("img",{className:t!==e.props.openedCollapse?"lc-closed":"",src:(0,U.tx)("/assets/images/v.svg"),alt:(0,U.Tl)("collapse-arrow")})})]}),(0,ne.jsx)("div",{id:"lc-group-section"+i,className:t===n?"lc-open":"",children:(0,ne.jsx)(E(),{isOpen:t===n,children:St(e,o[t],t)})})]},t)}));return a&&Object.keys(a).length>0?[h,Ot(e)]:h},St=function(e,t,n,r){var i,o,a=e.props,l=a.linesModes,c=a.size,s=a.moduleData,u=e.onLineSelected,d=(null==s?void 0:s.info_type)||e.props.info_type,p=(null==s?void 0:s.info)||e.props.info,f=void 0!==(null==s?void 0:s.addCatPictoBeforeLines)?s.addCatPictoBeforeLines:void 0!==e.props.addCatPictoBeforeLines?e.props.addCatPictoBeforeLines:[];if(f=(null===(i=f)||void 0===i?void 0:i.length)>0&&(0,N.Am)(t,"cat").every((function(e){return f.includes(e.cat)})),t){var m=Math.ceil(t.length/2),h=null===(o=t[0])||void 0===o||null===(o=o.mode)||void 0===o||null===(o=o.replace("commercial_mode:",""))||void 0===o?void 0:o.toLowerCase();nt?(0,N.uZ)(t,"code"):t=(0,N.Ul)(t,"position");var v=function(t){return(0,ne.jsx)("div",{className:("infobox"===n?"lc-infobox-":"lc-")+"lines lc-"+c+" lc-"+h+(null!=Ye&&Ye.includes("WithDirection")?" lc-line-with-direction":"")+("infobox"===n&&null!=Ye&&Ye.includes("WithRouteDirection")?" lc-line-with-route-direction":"")+(f?" lc-cat-picto":""),style:null!=Ye&&Ye.includes("WithRouteDirection")&&"infobox"===n?{gridTemplateRows:"repeat(".concat(m,", 1fr)")}:{},role:"list",children:t.map((function(t,n,i){var o,a,c,s;t=_t(e,t);var d,p,m=Ye||"color",h=!1;if(Fe){var v=JSON.parse(Fe).find((function(e){var n,r;return(null===(n=e.lines)||void 0===n?void 0:n.includes(t.id))||(null===(r=e.networks)||void 0===r?void 0:r.includes(t.network))}));v&&(m=v.type,h=!0===v.prefixNetwork)}f&&t.cat!==(null===(o=i[n-1])||void 0===o?void 0:o.cat)&&(p=(0,ne.jsx)("img",{className:"lc-line-cat-picto",src:(0,U.tx)("/assets/images/route-calculation/modes/".concat(t.cat,".svg")),alt:t.cat,role:"listitem"},"line-cat-".concat(t.cat)));var _="listitem button";switch(m){case"modeWithDirection":var g,A=l.find((function(e){return e.modes.includes(t.mode)}));d=(0,ne.jsxs)("div",{className:"lc-attribute-line"+(0===(null===(g=t)||void 0===g||null===(g=g.routes)||void 0===g?void 0:g.length)?" lc-without-routes":""),onClick:function(e){e.stopPropagation(),(0,U.VS)("localStorage")&&(0,U.c)(t),!b.A.location.pathname.includes("route-calculation")&&u(t,r)},onKeyUp:function(e){return(0,U.zQ)(e,(function(){(0,U.VS)("localStorage")&&(0,U.c)(t),!b.A.location.pathname.includes("route-calculation")&&u(t,r)}))},role:_,tabIndex:"0","aria-label":(0,U.Tl)("aria-line",!1,{key:"code",value:t.code}),children:[(0,ne.jsx)(X.A,{line:t,styleLine:m,children:(0,ne.jsx)("div",{className:"lc-line lc-mode",style:{background:"#"+t.color,color:(0,y.N)("#"+t.color)>.5?"#333":"#fff"},children:A.name})}),(0,ne.jsx)("div",{className:"lc-name",children:t.name})]},t.id);break;case"codeWithDirection":d=(0,ne.jsxs)("div",{className:"lc-attribute-line "+(0===(null===(a=t)||void 0===a||null===(a=a.routes)||void 0===a?void 0:a.length)?" lc-without-routes":""),onClick:function(e){e.stopPropagation(),(0,U.VS)("localStorage")&&(0,U.c)(t),!b.A.location.pathname.includes("route-calculation")&&u(t,r)},onKeyUp:function(e){return(0,U.zQ)(e,(function(){(0,U.VS)("localStorage")&&(0,U.c)(t),!b.A.location.pathname.includes("route-calculation")&&u(t,r)}))},role:_,tabIndex:"0","aria-label":(0,U.Tl)("aria-line",!1,{key:"code",value:t.code}),children:[(0,ne.jsx)(X.A,{line:t,styleLine:m,children:(0,ne.jsx)("div",{className:"lc-line lc-code",style:{background:"#"+t.color,color:(0,y.N)("#"+t.color)>.5?"#333":"#fff"},children:t.code})}),jt(t),(0,ne.jsx)("div",{className:"lc-name",children:t.name})]},t.id);break;case"imageWithRouteDirection":case"image":d=(0,ne.jsxs)("div",{className:"lc-line"+(0===(null===(c=t)||void 0===c||null===(c=c.routes)||void 0===c?void 0:c.length)?" lc-without-routes":"")+((0,U.x$)("route-calculation")?" lc-in-route-calculation":""),onClick:function(e){e.stopPropagation(),(0,U.VS)("localStorage")&&(0,U.c)(t),(0,U.x$)("route-calculation")||(u(t,r),(0,F.i)({clicked:"line",id:t.id}))},onKeyUp:function(e){return(0,U.zQ)(e,(function(){(0,U.VS)("localStorage")&&(0,U.c)(t),(0,U.x$)("route-calculation")||(u(t,r),(0,F.i)({clicked:"line",id:t.id}))}))},role:_,tabIndex:"0","aria-label":(0,U.Tl)("aria-line",!1,{key:"code",value:t.code}),children:[(0,ne.jsx)(X.A,{line:t,styleLine:m,children:(0,ne.jsx)("img",{src:(0,U.tx)("/assets/images/lines/"+(h?t.network+"-":"")+t.code+".svg"),alt:t.code})}),"imageWithRouteDirection"===m&&t.direction&&(0,ne.jsx)("div",{className:"lc-name",children:t.direction}),jt(t)]},t.id);break;case"color":d=(0,ne.jsxs)("div",{className:"lc-line"+(0===(null===(s=t)||void 0===s||null===(s=s.routes)||void 0===s?void 0:s.length)?" lc-without-routes":"")+(t.code.length>6?" lc-line-long-code":"")+((0,U.x$)("route-calculation")?" lc-in-route-calculation":""),onClick:function(e){e.stopPropagation(),(0,U.VS)("localStorage")&&(0,U.c)(t),b.A.location.pathname.includes("route-calculation")||(u(t,r),(0,F.i)({clicked:"line",id:t.id}))},onKeyUp:function(e){return(0,U.zQ)(e,(function(){(0,U.VS)("localStorage")&&(0,U.c)(t),b.A.location.pathname.includes("route-calculation")||(u(t,r),(0,F.i)({clicked:"line",id:t.id}))}))},role:_,tabIndex:"0","aria-label":(0,U.Tl)("aria-line",!1,{key:"code",value:t.code}),children:[(0,ne.jsx)(X.A,{line:t,styleLine:m,children:(0,ne.jsx)("div",{className:"lc-line-code",style:{background:"#"+t.color,color:"#".concat(t.text)},children:t.code})}),jt(t)]},t.id);break;default:d=null}return[p,d]}))},n)};if(t)return p?(0,ne.jsxs)(ne.Fragment,{children:["html"===d?(0,ne.jsx)("div",{dangerouslySetInnerHTML:{__html:p}}):(0,ne.jsx)("div",{children:p}),v(t)]}):v(t)}},jt=function(e){var t;return 0===(null==e||null===(t=e.routes)||void 0===t?void 0:t.length)?(0,ne.jsx)("div",{className:"lc-striked-line"}):null},Ot=function(e){var t=e.props,n=t.openedCollapse,r=t.searchIn,i=t.aroundTabs,o=e.state.pois;if(o)return 0===Object.keys(o).filter((function(e){return e!==r})).length?(0,ne.jsx)("div",{className:"lc-empty",children:(0,U.Tl)("no-places-around")}):Object.keys(o).filter((function(e){return e!==r})).sort((function(e,t){var n,r,o,a,l,c,s,u;return null!=i&&null!==(n=i.places)&&void 0!==n&&n.includes(e)||null!=i&&null!==(r=i.places)&&void 0!==r&&r.includes(t)?(null==i||null===(l=i.places)||void 0===l?void 0:l.indexOf(e))-(null==i||null===(c=i.places)||void 0===c?void 0:c.indexOf(t)):null!=i&&null!==(o=i.transports)&&void 0!==o&&o.includes(e)||null!=i&&null!==(a=i.transports)&&void 0!==a&&a.includes(t)?(null==i||null===(s=i.transports)||void 0===s?void 0:s.indexOf(e))-(null==i||null===(u=i.transports)||void 0===u?void 0:u.indexOf(t)):e.localeCompare(t)})).map((function(e){return(0,ne.jsxs)("div",{className:"lc-group lc-group-cat-"+e,onClick:function(){e===n&&"poi_type:stations"===e&&I.j.dispatch((0,G.jj)(null)),I.j.dispatch((0,G.f4)(e))},onKeyUp:function(t){return(0,U.zQ)(t,(function(){e===n&&"poi_type:stations"===e&&I.j.dispatch((0,G.jj)(null)),I.j.dispatch((0,G.f4)(e))}))},role:"button",tabIndex:"0","aria-label":(0,U.Tl)(e,!1),children:[(0,ne.jsxs)("div",{className:"lc-group-name",children:[(0,ne.jsx)("div",{className:"lc-group-mode",dangerouslySetInnerHTML:{__html:(0,U.Tl)(e)},role:"heading","aria-level":"2"}),(0,ne.jsx)("div",{className:"lc-arrow-group",children:(0,ne.jsx)("img",{className:e!==n?"lc-closed":"",src:(0,U.tx)("/assets/images/v.svg"),alt:(0,U.Tl)("collapse-arrow")})})]}),(0,ne.jsx)(E(),{isOpen:e===n,children:Array.isArray(o[e])?I.j.dispatch((0,D.$q)(Ge({},e,o[e]))):I.j.dispatch((0,D.$q)(o[e]))})]},e)}))},Rt=function(e,t,n){return(0,ne.jsxs)(T.A,Ue(Ue({ref:function(e){t.ref=e,(0,N.eQ)(e)},name:t.name,position:[+t.coord.lat,+t.coord.lon],icon:w().icon({iconUrl:(0,U.tx)("/assets/images/pin.svg"),iconSize:[50,50],iconAnchor:[25,25]}),onClick:function(e){return(0,U.tK)(e.target)}},n),{},{children:[t.terminus&&(0,ne.jsx)(S.A,{direction:"right",className:"lc-tooltip-leaflet-terminus",opacity:1,permanent:!0,children:t.name},"terminus_"+t.id),(0,ne.jsx)(j.A,{className:"lc-popup-leaflet",closeButton:!1,autoClose:!1,autoPan:!1,children:Et(e,t,null)})]}),t.id)},wt=function(e,t,n){var r=t.props,i=r.map,o=r.language,a=r.moduleData.localizeMarkers;return(0,ne.jsx)(T.A,{draggable:!t.state.loading&&t.state.interactiveMap,onDragStart:t.onBackToParams,onDragEnd:function(t){var n=b.A.location.pathname,r=(0,U._V)(b.A.location),o=t.target.getLatLng();"inputStart-pin"===e?i.state.inputStartPin&&!i.state.inputEndPin?b.A.push({pathname:n,search:"?from="+(0,N.cC)(o)}):i.state.inputStartPin&&i.state.inputEndPin&&b.A.push({pathname:n,search:"?from="+(0,N.cC)(o)+"&to="+r.to}):!i.state.inputStartPin&&i.state.inputEndPin?b.A.push({pathname:n,search:"?to="+(0,N.cC)(o)}):i.state.inputStartPin&&i.state.inputEndPin&&b.A.push({pathname:n,search:"?from="+r.from+"&to="+(0,N.cC)(o)})},zIndexOffset:999999,icon:w().icon({iconUrl:(0,U.tx)("/assets/images/route-calculation/".concat("inputStart-pin"===e?"flag-start":"flag-end").concat(a?"-"+o:"",".svg")),className:"lc-route-calculation-markers ".concat("inputStart-pin"===e?"start-pin":"end-pin")}),ref:function(e){return(0,N.eQ)(e)},position:n},e)},Lt=function(e,t,n,r){return(0,g.createElement)(O.A,Ue(Ue({},t),{},{key:n,positions:e},r))},Ct=function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=e.state.stopsList,a=I.j.getState().app.configApp;if(o){var l,c=t.terminus&&t.id===(null===(r=o[o.length-1])||void 0===r?void 0:r.id),s=Ne(o);try{for(s.s();!(l=s.n()).done;){var u=l.value;u.schedules=null,u.opened=!1}}catch(e){s.e(e)}finally{s.f()}if(I.j.dispatch((0,G.XW)(null)),!e.state.timetable&&"tad"!==n.cat&&"rer"!==n.cat){var d,p=!1,f=Ne(t.lines);try{for(f.s();!(d=f.n()).done;){if(d.value.id===n.id){p=!0;break}}}catch(e){f.e(e)}finally{f.f()}if(p){var m,h=Ne(o);try{for(h.s();!(m=h.n()).done;){var v=m.value;v.schedules=null,v.opened=!1,t.id.includes("stop_area")?v.opened=v.stop_area===t.id&&!c:v.opened=v.id===t.id&&!c}}catch(e){h.e(e)}finally{h.f()}e.setState({stopsList:o},Le(Re().mark((function r(){var l,s,u,d,p,f,m,h,v,y,g,b,A,E,T,P,x,S,j,O,R,w;return Re().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(l=t.id.includes("stop_area")?o.filter((function(e){return e.stop_area===t.id})):o.filter((function(e){return e.stop_area===t.stop_area&&e.id===t.id})),!(l.length>0)){r.next=32;break}if(setTimeout((function(){return Nt(e,l[0])}),150),c||!(!n.tad||n.tad&&n.tad.schedules)){r.next=32;break}return u=[],d=n.routes.find((function(e){return e.direction_id===n.direction_id})).route_id,p=e.props.moduleData?e.props.moduleData.displayScheduleDestination:e.props.displayScheduleDestination,f={stop:l[0].id,route:d,date:i,count:st,withScheduleDestination:!0===p,area:!0===p?l[0].stop_area:void 0,line:n.id},Ze&&(f.extend=+Ze),(null!==(s=e.props)&&void 0!==s&&null!==(s=s.moduleData)&&void 0!==s&&s.defaultDateTime||e.props.defaultDateTime)&&(v=(null===(m=e.props)||void 0===m?void 0:m.moduleData)||e.props,y=v.minDate,g=v.maxDate,b=v.defaultDateTime,f.date=(null===(h=e.props)||void 0===h||null===(h=h.moduleData)||void 0===h?void 0:h.defaultDateTime)||e.props.defaultDateTime,b&&y&&g&&(A=new Date(y),E=new Date(g),(T=new Date)>A&&T<E&&(f.date=(0,k.Yq)(T,"ymdThm")+"00"))),r.prev=10,P=function(e,t){var n,r=Ne(!0===p?e.data:e.data.slice(0,st));try{for(r.s();!(n=r.n()).done;){var i=n.value;t.push({time:i.date_time,realtime:"realtime"===i.data_freshness,extend:!!(Ze||a.display_date_on_other_day_schedules&&(0,k.wQ)((0,k._k)(i.date_time))),equipments:i.equipments?i.equipments:[],destination:!!i.destination&&i.destination,route:i.route?i.route:void 0,stop_point:i.stop_point?i.stop_point:void 0})}}catch(e){r.e(e)}finally{r.f()}I.j.dispatch((0,G.AK)(t));var o,c=Ne(l);try{var s=function(){var e=o.value;e.schedules=t.filter((function(t){return!(t.route&&t.route!==e.route_id||t.stop_point&&t.stop_point!==e.id)}))};for(c.s();!(o=c.n()).done;)s()}catch(e){c.e(e)}finally{c.f()}},r.next=14,(0,_.A)({url:"/api/schedules",params:f});case 14:if(x=r.sent,P(x,u),0!==u.length||!n.duplicate){r.next=23;break}return S=n.duplicate.routes.find((function(e){return e.direction_id===n.direction_id})).route_id,f.route=S,r.next=21,(0,_.A)({url:"/api/schedules",params:f});case 21:j=r.sent,P(j,u);case 23:r.next=31;break;case 25:r.prev=25,r.t0=r.catch(10),O=Ne(l);try{for(O.s();!(R=O.n()).done;)R.value.schedules=[]}catch(e){O.e(e)}finally{O.f()}w=r.t0.response&&r.t0.response.data?r.t0.response.data.id:r.t0,console.warn(w);case 31:e.setState({stopsList:o});case 32:case"end":return r.stop()}}),r,null,[[10,25]])}))))}}}},Nt=function(e,t){var n,r=0,i=Ne(e.state.stopsList);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.id===t.id){r=o.index;break}}}catch(e){i.e(e)}finally{i.f()}var a=document.querySelector('.lc-ul-stops > li.lc-stop[data-stop-index="'.concat(r,'"]')),l=document.querySelector("[data-lc-disruptions]"),c=!!document.querySelector(".lc-line-tad-informations")&&document.querySelector(".lc-line-tad-informations").getBoundingClientRect().height+document.querySelector(".lc-line-tad-header").getBoundingClientRect().height;setTimeout((function(){var e;a&&(null===(e=document)||void 0===e?void 0:e.querySelector(".lc-stops"))&&(document.querySelector(".lc-stops").scrollTop=a.offsetTop-(a.parentNode.offsetTop+(l?10:5)-(c||0)))}),250)},kt=function(e,t){var n,r,i,o=e.props.stops,a=null===(n=I.j.getState().app.config)||void 0===n?void 0:n.displayLinesAt;t.direction_id||(t.direction_id="f"),(null===(r=t.routes)||void 0===r?void 0:r.length)>0&&void 0===t.routes.find((function(e){return e.direction_id===t.direction_id}))&&(t.direction_id=t.routes[0].direction_id);var l=null===(i=t.routes)||void 0===i?void 0:i.find((function(e){return e.id[e.id.length-1]===t.direction_id}));if(null!=l&&l.stops&&void 0===a){var c,s=Ne(l.stops);try{for(s.s();!(c=s.n()).done;){c.value.opened=!1}}catch(e){s.e(e)}finally{s.f()}return t.stops=l.stops,{currentLine:t,stopsList:l.stops}}var u="stops";if(a){var d=I.j.getState().app.datasets,p=new Date(a),f=d.find((function(e){if(e.start_validation_date&&e.end_validation_date){var t=new Date((0,k._k)(e.start_validation_date)),n=new Date((0,k._k)(e.end_validation_date));if(t<=p&&n>=p)return!0}return!1}));f&&(u="datasets/".concat(f.id.replace(":","_"),"/stops"))}return _.A.get("/api/file?folder=".concat(u,"&name=").concat(encodeURIComponent(t.code),"_").concat(t.network,"_").concat(t.direction_id,"~").concat(e.props.hash)).then(function(){var e=Le(Re().mark((function e(n){var r,i,a;return Re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Ne(n.data),e.prev=1,a=Re().mark((function e(){var n,r;return Re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.value,r=o.find((function(e){return e.id===n.id})),n.lines=r.lines,n.pmr&&(t.pmr=!0);case 4:case"end":return e.stop()}}),e)})),r.s();case 4:if((i=r.n()).done){e.next=8;break}return e.delegateYield(a(),"t0",6);case 6:e.next=4;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),r.e(e.t1);case 13:return e.prev=13,r.f(),e.finish(13);case 16:return t.stops=n.data,l.stops=n.data,e.abrupt("return",{currentLine:t,stopsList:n.data});case 19:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.warn("Unable to find stops/"+t.code+"_"+t.network+"_"+t.direction_id+".json",e)}))},It=function(e,t,n){e&&e.setState((function(e){return{events:Ue(Ue({},e.events),{},Ge({},t,n))}}))},Dt=function(e){var t,n=e.props.territoryOutline,r=[],i=[];if(n&&(null==n||null===(t=n.features)||void 0===t?void 0:t.length)>0){var o,a=Ne(n.features);try{for(a.s();!(o=a.n()).done;){var l=o.value,c=l.geometry.coordinates;["Polygon","MultiLineString"].includes(l.geometry.type)&&(c=c[0]);var s,u=Ne(c);try{for(u.s();!(s=u.n()).done;){var d=s.value;i.push([d[1],d[0]]),r.push.apply(r,Ce(d))}}catch(e){u.e(e)}finally{u.f()}}}catch(e){a.e(e)}finally{a.f()}setTimeout((function(){ht(e,i)}))}},Mt=function(e){try{e.setState({timetableData:null,timetableOptions:!e.state.timetableOptions},Le(Re().mark((function t(){var n,r,i,o,a,l,c,s;return Re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state.timetableOptions&&(n=document.querySelector("[data-lc-timetable-options]"))&&(n.style.top=document.querySelector("[data-lc-line-header]").offsetHeight+"px"),r=[],"local"!==Ve){t.next=10;break}return t.next=5,(0,_.A)("/api/file?name=timetables");case 5:i=t.sent,(o=i.data.find((function(t){return t.ligne===e.state.currentLine.code})))&&o.fiche_horaire&&o.fiche_horaire.split("~").map((function(e,t){return r.push({id:t,name:e,file:"assets/timetables/"+e+".pdf",starting_validity_date:"",ending_validity_date:""})})),t.next=28;break;case 10:if("api"!==Ve){t.next=28;break}if(!ze){t.next=23;break}t.t0=ze,t.next="line_code"===t.t0?15:19;break;case 15:return t.next=17,(0,_.A)("/api/timetable?line="+e.state.currentLine.code);case 17:return a=t.sent,t.abrupt("break",21);case 19:return console.error("Unexpected REACT_APP_TIMETABLE_ID value"),t.abrupt("break",21);case 21:t.next=26;break;case 23:return t.next=25,(0,_.A)("/api/timetable?line_id="+e.state.currentLine.id);case 25:a=t.sent;case 26:l=Ne(a.data.data);try{for(l.s();!(c=l.n()).done;)s=c.value,r.push({id:s.id[0].value,name:s.name[0].value,file:s.file_timetable[0].url,starting_validity_date:s.starting_validity_date[0].value,ending_validity_date:s.ending_validity_date[0].value})}catch(e){l.e(e)}finally{l.f()}case 28:1===r.length&&"local"===Ve?((0,H.X3)({event:"map-downloadTimetable",line:e.state.currentLine.code}),e.setState({directDownload:!0},(function(){window.open("/"+r[0].file)}))):e.setState({timetableLineData:r});case 29:case"end":return t.stop()}}),t)}))))}catch(e){console.warn(e)}},Ut=function(e,t,n,r){var i=(0,k.Yq)(new Date,"ymd")===r,o=Math.floor((new Date).getHours()),a=i?o>=4&&o<=11?0:o>=12&&o<=19?1:2:0;t.id.includes("stop_area")&&(t.stop_id=t.lines.find((function(e){return e.id===n.id})).stop_id);try{e.setState({timetable:!0,loadingTimetable:!0,timetableStop:t.name},Le(Re().mark((function i(){var o,l,c,s,u,d,p,f,m,h,v,y,g,b,A,E,T,P,x,S,j,O;return Re().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return l=n.routes.find((function(e){return e.direction_id===n.direction_id})).route_id,c={stop:t.stop_id||t.id,route:l,timetable:!0},s=qe?JSON.parse(qe):{departure:"00",lines:[]},r&&(I.j.dispatch((0,J.Lc)(new Date(r.replace(/(\d{4})(\d{2})(\d{2})/g,"$1-$2-$3")))),s.lines.includes(e.state.currentLine.id)?(c.date="".concat(r,"T").concat(s.departure,"0000"),a=0):c.date=r+"T040000"),(null!==(o=e.props)&&void 0!==o&&null!==(o=o.moduleData)&&void 0!==o&&o.defaultDateTime||e.props.defaultDateTime)&&(d=(null===(u=e.props)||void 0===u?void 0:u.moduleData)||e.props,p=d.minDate,f=d.maxDate,d.defaultDateTime&&p&&f&&(m=new Date(p),h=new Date(f),(v=new Date((0,k._k)("".concat(r,"T040000"))))>m&&v<h?c.date=v:(c.date=(null===(y=e.props)||void 0===y||null===(y=y.moduleData)||void 0===y?void 0:y.defaultDateTime)||e.props.defaultDateTime,(0,U.EX)((null===(g=e.props)||void 0===g?void 0:g.moduleData)||e.props)))),i.prev=5,i.next=8,(0,_.A)({url:"/api/schedules",params:c});case 8:if(b=i.sent,A=(0,N.nm)(b.data,n),E=A.timetableData,T=A.timetableHours,!(0,N.x2)(E)||n.duplicate){i.next=14;break}a=0,i.next=24;break;case 14:if(!(0,N.x2)(E)||!n.duplicate){i.next=24;break}return P=n.duplicate.routes.find((function(e){return e.direction_id===n.direction_id})).route_id,c.route=P,i.next=19,(0,_.A)({url:"/api/schedules",params:c});case 19:x=i.sent,S=(0,N.nm)(x.data,n),E=S.timetableData,T=S.timetableHours,(0,N.x2)(E)&&(a=0);case 24:I.j.dispatch((0,G.KY)({timetableData:E,timetableHours:T})),e.setState({slideIndex:a,timetableData:E,timetableHours:T,loadingTimetable:!1,timetableError:!1},(function(){var t=Array.from(document.querySelectorAll("[data-lc-scroll='scroll']"));(0,U.XR)(e.props.map.props.isMobile,t[e.state.slideIndex])})),i.next=33;break;case 28:i.prev=28,i.t0=i.catch(5),O={morning:[],afternoon:[],evening:[]},console.warn("error",null!==(j=i.t0.response)&&void 0!==j&&j.data?i.t0.response.data:i.t0),e.setState({loadingTimetable:!1,timetableData:O,timetableError:i.t0.response});case 33:case"end":return i.stop()}}),i,null,[[5,28]])}))))}catch(e){console.log(e)}},Gt=function(e,t){var n=1/(2*Math.PI/360*6378.137)/1e3;return parseFloat(parseFloat(parseFloat(t)+parseInt(e)*n).toFixed(6))},Ht=function(e){var t,n;if((null==e?void 0:e.zoom)&&void 0!==(null==e||null===(t=e.zoom.stop_points)||void 0===t?void 0:t.min)&&void 0!==(null==e||null===(n=e.zoom.stop_points)||void 0===n?void 0:n.max)&&e.zoom.stop_points.min&&e.zoom.stop_points.max){for(var r=[],i=e.zoom.stop_points.min;i<=e.zoom.stop_points.max;i++)r.push(i);return r}return[17,18,19,20,21]},Yt=function(e){var t,n,r=(null==e?void 0:e.zoom)&&void 0!==(null==e||null===(t=e.zoom.stop_areas)||void 0===t?void 0:t.min)&&void 0!==(null==e||null===(n=e.zoom.stop_areas)||void 0===n?void 0:n.max);if(r&&e.zoom.stop_areas.min&&e.zoom.stop_areas.max){for(var i=[],o=e.zoom.stop_areas.min;o<=e.zoom.stop_areas.max;o++)i.push(o);return i}if(r)return[];for(var a=[],l=15;l<=17;l++)a.push(l);return a}},4877:function(e,t,n){n.d(t,{Am:function(){return C},C8:function(){return O},DL:function(){return x},FJ:function(){return I},RN:function(){return S},UY:function(){return N},Ul:function(){return j},Z0:function(){return P},ZY:function(){return E},cC:function(){return w},eQ:function(){return D},jS:function(){return T},nm:function(){return k},rr:function(){return A},uZ:function(){return R},x2:function(){return L}});var r=n(3042),i=n(3481),o=n.n(i),a=n(9736),l=n(2951),c=n(6297);n(4848);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=v(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function v(e,t){if(e){if("string"==typeof e)return _(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function y(){y=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),l=new C(r||[]);return i(a,"_invoke",{value:O(e,n,l)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var f="suspendedStart",m="suspendedYield",h="executing",v="completed",_={};function g(){}function b(){}function A(){}var E={};u(E,a,(function(){return this}));var T=Object.getPrototypeOf,P=T&&T(T(N([])));P&&P!==n&&r.call(P,a)&&(E=P);var x=A.prototype=g.prototype=Object.create(E);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function n(i,o,a,l){var c=p(e[i],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==s(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,l)}))}l(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function O(t,n,r){var i=f;return function(o,a){if(i===h)throw Error("Generator is already running");if(i===v){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var l=r.delegate;if(l){var c=R(l,r);if(c){if(c===_)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=h;var s=p(t,n,r);if("normal"===s.type){if(i=r.done?v:m,s.arg===_)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(i=v,r.method="throw",r.arg=s.arg)}}}function R(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,R(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),_;var o=p(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,_;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,_):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,_)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(s(t)+" is not iterable")}return b.prototype=A,i(x,"constructor",{value:A,configurable:!0}),i(A,"constructor",{value:b,configurable:!0}),b.displayName=u(A,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,A):(e.__proto__=A,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(j.prototype),u(j.prototype,l,(function(){return this})),t.AsyncIterator=j,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new j(d(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(x),u(x,c,"Generator"),u(x,a,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return l.type="throw",l.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],l=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,_):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;L(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),_}},t}function g(e,t,n,r,i,o,a){try{var l=e[o](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,i)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){g(o,r,i,a,l,"next",e)}function l(e){g(o,r,i,a,l,"throw",e)}a(void 0)}))}}var A=function(){var e=b(y().mark((function e(t,n){var i,o,a,l,c,s,u;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.props.linesModes,e.next=3,r.A.get("/api/data-in-town?insee="+n.insee).catch((function(e){var t=e.response&&e.response.data?e.response.data.id:e;console.warn(t)}));case 3:o=e.sent,a=o.data.shift(),l=a.pop(),c=x(C(a,"id"),i,"mode"),s=o.data.shift(),u=Object.keys(s).sort((function(e,t){return e.localeCompare(t)})).reduce((function(e,t){return e[t]=s[t],e}),{}),t.setState({town:n,groups:c,pois:l,places:u,inputAroundValue:n.name,inputAroundGoToRoute:!1});case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(e,t){var n,r=null,i=h(t);try{for(i.s();!(n=i.n()).done;){var a=n.value,l=new(o().LatLng)(a.coord.lat,a.coord.lon);a.distance=T(e,l),(!r||a.distance<r.distance)&&(r=a)}}catch(e){i.e(e)}finally{i.f()}return!!r&&r.id},T=function(e,t){var n=(e.lat-t.lat)*Math.PI/180,r=(e.lng-t.lng)*Math.PI/180,i=Math.pow(Math.sin(n/2),2)+Math.cos(t.lat*Math.PI/180)*Math.cos(e.lat*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2),o=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i));return Math.round(6371*o*1e3)},P=function(e,t){var n=e.find((function(e){return e.name===t})).color||null;return n?{color:n}:null},x=function(e,t){for(var n={},r=function(){var r=t[i],o=e.filter((function(e){return r.modes.includes(e.mode)})).sort((function(e,t){return e.position-t.position}));o.length>0&&(n[r.name]=o)},i=0;i<t.length;i++)r();return n},S=function(e){var t=e.split(";")[0],n=e.split(";")[1];return!(isNaN(t)||!M(t,-180,180)||isNaN(n)||!M(n,-90,90))},j=function(e,t){return e.sort((function(e,n){return+(e[t]>n[t])||+(e[t]===n[t])-1}))},O=function(e,t){return e.sort((function(e,n){var r=m(e.split("~~"),2),i=r[0],o=r[1],a=m(n.split("~~"),2),l=a[0],c=a[1],s=t.find((function(t){return i&&o?String(o).toLowerCase()===String(t.code).toLowerCase()&&t.cat===i:t.id===e})),u=t.find((function(e){return l&&c?String(c).toLowerCase()===String(e.code).toLowerCase()&&e.cat===l:e.id===n}));return(null==s?void 0:s.position)>(null==u?void 0:u.position)?-1:1}))},R=function(e,t){return e.sort((function(e,n){return e[t].localeCompare(n[t])}))},w=function(e){return e instanceof o().LatLng||(e=new(o().LatLng)(e.lat,e.lon)),Number(e.lng).toFixed(4)+";"+Number(e.lat).toFixed(4)},L=function(e){var t=!0;if(e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&e[n]&&e[n].length>0&&(t=!1);return t},C=function(e,t){return e.filter((function(n,r){return e.findIndex((function(e){return e[t]===n[t]}))===r}))},N=function(e){var t,n={},r=h(e.search.substr(1).split("&"));try{for(r.s();!(t=r.n()).done;){var i=t.value.split("=");n[i.shift()]=decodeURIComponent(i.shift())}}catch(e){r.e(e)}finally{r.f()}return n},k=function(e,t){var n,r,i={REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"}.REACT_APP_NIGHT_LINES?JSON.parse({REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"}.REACT_APP_NIGHT_LINES):{departure:"00",lines:[]},o=i.lines.includes(t.id),c=+i.departure;n={morning:[],afternoon:[],evening:[]},r={morning:Array.from(new Array(8),(function(e,t){return t+(o?c:4)})).map((function(e){return e>=24?e-24:e})),afternoon:Array.from(new Array(8),(function(e,t){return t+(o?c+8:12)})).map((function(e){return e>=24?e-24:e})),evening:Array.from(new Array(8),(function(e,t){return t+(o?c+16:20)})).map((function(e){return e>=24?e-24:e}))};var s=e.length>0&&e[0],u=e.length>0&&e[e.length-1];if((0,a.UP)({REACT_APP_API_PROXY_URL:"https://annecy-mobilites.latitude-cartagene.com",REACT_APP_AREAS_ZOOM_LEVEL:"15",REACT_APP_AUTOCOMPLETE_GEOLOCATION:"true",REACT_APP_BASE_MAX_BOUNDS:'{"desktop":[[47.361,2.010],[44.387,8.734]],"mobile":[[47.361,2.010],[44.387,8.734]]}',REACT_APP_ENV:"prod",REACT_APP_FONT:"Roboto",REACT_APP_PRIMARY_COLOR:"#30c8e1",REACT_APP_START_POINT:'{"desktop":{"lat":45.85,"lng":6.1},"mobile":{"lat":45.9,"lng":6.1}}',REACT_APP_TERRITORY_OUTLINE:'{"color":"#58585a","opacity":0.8,"fillColor":null,"fillOpacity":0.8,"weight":1.5,"interactive":false}',REACT_APP_TITLE:"Carte interactive Annecy Mobilités",REACT_APP_PROJECT:"annecy-mobilites",REACT_APP_ZOOM:'{"min":9,"max":18,"desktop":12,"mobile":10}',GENERATE_SOURCEMAP:"false",REACT_EDITOR:"vscode",REACT_APP_BASE_TILES_URL:"mbtiles",REACT_APP_ABOVE_TILES_URL:"mbtiles",REACT_APP_NEXT_SCHEDULE_CLASSIC_FORMAT:"true",REACT_APP_LINES_MAIN_TYPE:"image",REACT_APP_DEFAULT_LINES_WEIGHT:"5",REACT_APP_GEOLOCATION_CONTROLLER:"true",REACT_APP_HEAVY_LINES:'["line:S6", "line:S5", "line:S4", "line:F2", "line:F1","line:3","line:2","line:1"]',REACT_APP_CLICK_THROUGH_LINES:"true",REACT_APP_ROADMAP_SUMMARY:"true",REACT_APP_REFRESH_SCHEDULES:"true",REACT_APP_ADDITIONAL_ATTRIBUTIONS:'[{"url":"geovelo.fr","title": "Geovelo","copyright":true}]',REACT_APP_TERMINUS_ENTRYMAP_OVERRIDE:'[{"id":"stop_area1PPT","direction":"top-left"},{"id":"stop_area1GLAI","direction":"bottom-right"},{"id":"stop_area1SNE","direction":"left"},{"id":"stop_area1CAS","direction":"bottom-right"},{"id":"stop_area1CSA","direction":"left"},{"id":"stop_area1NOV","direction":"right"},{"id":"stop_area1SVY","direction":"left"},{"id":"stop_area1PRIN","direction":"top-left"},{"id":"stop_area1MHV","direction":"bottom-left"},{"id":"stop_area1PDGLA","direction":"right"},{"id":"stop_area1GROU","direction":"bottom-right"},{"id":"stop_area1CHSF","direction":"left"},{"id":"stop_area1LAU","direction":"top"},{"id":"stop_area1LPO","action":"create"}]',REACT_APP_SCHEDULES_EXTENDS:"7",REACT_APP_AUTOCOMPLETE_AUTOADD_ADMINREGION:"true",REACT_APP_TIMETABLES:"api",REACT_APP_LINES_TYPE_EXCEPTIONS:'[{"networks":["Conseil Régional Auvergne - Rhône-Alpes","JYBUS","Ondéa Grand Lac","REGION - cars Région Haute-Savoie"],"type":"color"}]',REACT_APP_PROXIMITY_LINES_AT_STOP:"true",REACT_APP_PLAUSIBLE:"annecy-mobilites.latitude-cartagene.com"}.REACT_APP_TIMETABLE_START_CURRENT_HOUR)&&s){var d=(0,l._k)(s.date_time),p=new Date;if(d.getFullYear()===p.getFullYear()&&d.getMonth()===p.getMonth()&&d.getDate()===p.getDate()){for(var m=(0,l._k)(u.date_time),v=m.getHours()<4?24+m.getHours():m.getHours(),_=r.morning.indexOf(p.getHours())?p.getHours():r.morning[0],y=u?v:o?c+16+8:28,g=[],b=_;b<=y;b++)b>23?g.push(b-24):g.push(b);g.length<9&&(r.morning=g.slice(0),r.afternoon=[],r.evening=[]),g.length>8&&g.length<17&&(r.morning=g.slice(0,8),r.afternoon=g.slice(8),r.evening=[]),g.length>16&&(r.morning=g.slice(0,8),r.afternoon=g.slice(8,15),r.evening=g.slice(15))}}for(var A=0,E=Object.keys(r);A<E.length;A++){var T,P=E[A],x=h(r[P]);try{var S=function(){var t,r=T.value;(t=n[P]).push.apply(t,f(e.filter((function(e){return parseInt(e.date_time.substring(9,11))===parseInt(r)}))))};for(x.s();!(T=x.n()).done;)S()}catch(e){x.e(e)}finally{x.f()}}return{timetableData:n,timetableHours:r}},I=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var r,i,o,a,l,s;if("FeatureCollection"===(null===(r=e)||void 0===r?void 0:r.type)&&(e=e.features[0]),"FeatureCollection"===(null===(i=t)||void 0===i?void 0:i.type)&&(t=t.features[0]),"Feature"===(null===(o=e)||void 0===o?void 0:o.type)&&"MultiLineString"===(null===(a=e)||void 0===a||null===(a=a.geometry)||void 0===a?void 0:a.type)&&"Feature"===(null===(l=t)||void 0===l?void 0:l.type)&&"MultiLineString"===(null===(s=t)||void 0===s||null===(s=s.geometry)||void 0===s?void 0:s.type)){for(var u,p=[],m=function(e){return{type:"Feature",geometry:{type:"LineString",coordinates:e}}},h=function(r){for(var i=m(e.geometry.coordinates[r]),o=function(e){if(!(n&&n.skip&&n.skip.length>0&&n.skip.includes("i".concat(r,"j").concat(e)))){var o=m(t.geometry.coordinates[e]);u=0;for(var a=[[]],l=0;l<o.geometry.coordinates.length;l++){var s=o.geometry.coordinates[l];(0,c.A)(s,i,{units:"meters"})<50?a[u].push(s):a[u].length>0&&(a[u+1]=[],u++)}p.push.apply(p,f(a.filter((function(e){return e.length>=2})).map((function(t){var i=m(t),o=n.offsetValue?n.offsetValue:6,a=n.smoothFactor?n.smoothFactor:1;return d(d({},i),{},{properties:{offset:!0,offsetValue:o,smoothFactor:a,index:"i".concat(r,"j").concat(e)}})}))))}},a=0;a<t.geometry.coordinates.length;a++)o(a)},v=0;v<e.geometry.coordinates.length;v++)h(v);return{type:"FeatureCollection",features:[].concat(p,[e])}}return{type:"FeatureCollection",features:[e]}}catch(e){console.log("Error in computeLineOffset : ",e)}},D=function(e){var t;null!=e&&e.leafletElement&&(null!==(t=e.leafletElement)&&void 0!==t&&t._icon&&e.leafletElement._icon.setAttribute("tabindex","-1"))},M=function(e,t,n){return e>=t&&e<=n}},2951:function(e,t,n){n.d(t,{DL:function(){return u},Je:function(){return h},Ju:function(){return E},Kz:function(){return x},MP:function(){return d},Oo:function(){return P},SQ:function(){return g},TG:function(){return T},Tc:function(){return y},Yq:function(){return m},ZH:function(){return f},_k:function(){return p},ck:function(){return s},il:function(){return b},nk:function(){return v},np:function(){return A},p6:function(){return S},wQ:function(){return _}});var r=n(9736),i=n(4457);function o(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function l(e,t){if(e){if("string"==typeof e)return c(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(n,r){if(!Object.prototype.hasOwnProperty.call(n,e)||!Object.prototype.hasOwnProperty.call(r,e))return 0;var i="string"==typeof n[e]?n[e].toLowerCase():n[e],o="string"==typeof r[e]?r[e].toLowerCase():r[e],a=0;return i>o?a=1:i<o&&(a=-1),"desc"===t?-1*a:a}}function u(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mode",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o={},l=a(t);try{var c=function(){var t=n.value,a=e.filter((function(e){return Array.isArray(t.modes)?t.modes.includes(e[r]):"string"==typeof e[r]?e[r].includes(t.modes):t.modes===e[r]}));i&&(a=a.filter((function(e){return"string"==typeof e[i.key]?e[i.key].includes(i.value):"number"==typeof e[i.key]?e[i.key]===i.value:e}))),a.length>0&&(o[t.name]=a)};for(l.s();!(n=l.n()).done;)c()}catch(e){l.e(e)}finally{l.f()}var s,u=a(t);try{for(u.s();!(s=u.n()).done;){var d=s.value;d.concat_with&&(o[d.concat_with]=o[d.concat_with].concat(o[d.name]),delete o[d.name],o[d.concat_with].sort((function(e,t){return e.id>t.id?1:-1})))}}catch(e){u.e(e)}finally{u.f()}return o}function d(){return document.querySelector("[data-lc-board]").getBoundingClientRect()}function p(e,t){if(e){var n=i.j.getState().app.timezone,r=new Date("".concat(e.split("T")[0].replace(/(\d{4})(\d{2})(\d{2})/g,"$1-$2-$3"),"T").concat(e.split("T")[1].replace(/(\d{2})(\d{2})(\d{2})?/g,(function(e,n,r,i){return"".concat(n,":").concat(r,":").concat(t?"00":i||"00")}))));if(n){var o=Math.floor((new Date).getTimezoneOffset()/60),a=-(new Date).getTimezoneOffset()%60;r.setHours(r.getHours()+o,r.getMinutes()+a)}return r}}var f=function(e){var t=o(e),n=t[0],r=t.slice(1),i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n.toUpperCase()+(i?r.join("").toLowerCase():r.join(""))};function m(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!isNaN(e)){var o=("0"+String(e.getMonth()+1)).slice(-2),a=("0"+String(e.getDate())).slice(-2),l=("0"+String(e.getHours())).slice(-2),c=("0"+String(e.getMinutes())).slice(-2),s=("0"+String(e.getSeconds())).slice(-2);switch(t){case"ymd":return e.getFullYear()+o+a;case"y-m-d":return[e.getFullYear(),o,a].join("-");case"y/m/d":return[e.getFullYear(),o,a].join("/");case"m/d/y":return[o,a,e.getFullYear()].join("/");case"ymdhm":case"ymdThm":return e.getFullYear()+o+a+("ymdThm"===t?"T":"")+l+c;case"ymdhms":case"ymdThms":return e.getFullYear()+o+a+("ymdThms"===t?"T":"")+l+c+s;case"d/m/y":default:return[a,o,e.getFullYear()].join("/");case"d/m/y h:m":return[a,o,e.getFullYear()].join("/")+" "+l+":"+c;case"h:m":return i&&!function(e){var t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}(e)?(0,r.Ck)(n)?"".concat(l,":").concat(c," ").concat(l<12?"am":"pm"," (").concat(e.toLocaleString(n,{month:"long"})," ").concat(a,")"):"".concat(l,":").concat(c," (").concat(f(e.toLocaleString(n,{weekday:"long"}))," ").concat(a," ").concat(e.toLocaleString(n,{month:"long"}),")"):l+":"+c;case"h:m a":return l%12+":"+c+(l<12?" am":" pm");case"full":return(0,r.Ck)(n)?e.toLocaleString(n,{month:"long"})+" "+a:a+" "+e.toLocaleString(n,{month:"long"});case"full-with-time":return(0,r.Ck)(n)?e.toLocaleString(n,{month:"long"})+" "+a+" "+m(e,"h:m a",n,i):a+" "+e.toLocaleString(n,{month:"long"})+" "+m(e,"h:m",n,i);case"full-with-year":return(0,r.Ck)(n)?e.toLocaleString(n,{month:"long"})+" "+a+", "+e.getFullYear():a+" "+e.toLocaleString(n,{month:"long"})+" "+e.getFullYear()}}}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=new Date;if(e){if("string"==typeof e&&e.includes("T")&&e.length>=13){var o=e.split("T")[0],a=e.split("T")[1],l=o.slice(0,4)+"-"+o.slice(4,6)+"-"+o.slice(6,8);(e=new Date(l)).setHours(a.substr(0,2)),e.setMinutes(a.substr(2,2))}}else e=new Date;return m(i,"ymd")===m(e,"ymd")?(0,r.Tl)("calendar-today-word"):n?m(e,n,t):(0,r.Ck)(t)?m(e,"y-m-d"):m(e,"d/m/y")}function v(e){var t=new Date,n=Math.abs(e-t),r=Math.floor(n/1e3),i=Math.floor(r/60),o=Math.floor(i/60),a=Math.floor(o/24);return{seconds:r=r-24*a*60*60-60*(o-=24*a)*60-60*(i=i-24*a*60-60*o),minutes:i,hours:o,days:a}}function _(e){var t=new Date;return e>t&&(e.getMonth()===t.getMonth()&&e.getDate()>t.getDate()||e.getMonth()>t.getMonth())}function y(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=v(e);if(0===n.days&&0===n.hours&&0===n.minutes){if(t){var i=(0,r.Tl)("schedule-soon",!1);return""!==i&&"schedule-soon"!==i?i:"< 1min"}return"1 min"}return 0===n.days&&0===n.hours&&n.minutes>0?n.minutes+" min":n.hours>0?n.hours>=2?"> 2h":0===n.minutes?"".concat(n.hours,"h"):n.minutes<10?"".concat(n.hours,"h0").concat(n.minutes):"".concat(n.hours,"h").concat(n.minutes):n.minutes+" min"}function g(){var e,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o={},l=a(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]);try{for(l.s();!(e=l.n()).done;){var c,s=e.value;if(null!==(c=r.find((function(e){return e.name===n})))&&void 0!==c&&null!==(c=c.noClusters)&&void 0!==c&&c.includes(s.cat_id)?s.clusterized=!1:s.clusterized=i,"listByCat"===t){var u=r.find((function(e){return e.name===n}));if(u&&u.places&&u.places.includes(s.cat_id)&&s.cat_id&&(o[s.cat_id]=o[s.cat_id]||[]).push(s),u&&u.parentCategories)for(var d=0,p=Object.keys(u.parentCategories);d<p.length;d++){var f=p[d];u.parentCategories[f].includes(s.cat_id)&&s.cat_id&&((o[s.cat_id]=o[s.cat_id]||[]).push(s),void 0===o[f]&&(o[f]=[]))}}else"searchOnly"===t&&(o[n]=o[n]||[]).push(s)}}catch(e){l.e(e)}finally{l.f()}return o=Object.keys(o).sort((function(e,t){return e.localeCompare(t)})).reduce((function(e,t){return e[t]=o[t],e}),{})}function b(e){var t;return null==e||null===(t=e.lines)||void 0===t||null===(t=t.map((function(e){return e.mode})))||void 0===t?void 0:t.filter((function(e,t,n){return n.indexOf(e)===t}))}function A(e,t){return"en"===t?e.charAt(0).toUpperCase()+e.slice(1):e}function E(e){return e.replace(/^\?/,"")}function T(e){return E(function(e){return e.replace("hasAuthorizedCookies=true","")}(e))}function P(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function x(e){return!1}function S(e){return[{type:"recommendedRoads",percent:Math.round(e.roadStats.recommendedRoads/(e.roadStats.normalRoads+e.roadStats.recommendedRoads+e.roadStats.discouragedRoads)*100)},{type:"normalRoads",percent:Math.round(e.roadStats.normalRoads/(e.roadStats.normalRoads+e.roadStats.recommendedRoads+e.roadStats.discouragedRoads)*100)},{type:"discouragedRoads",percent:Math.round(e.roadStats.discouragedRoads/(e.roadStats.normalRoads+e.roadStats.recommendedRoads+e.roadStats.discouragedRoads)*100)}].sort((function(e,t){return t.percent-e.percent}))}},7293:function(e,t){t.A={primarycolor:"#30c8e1",secondarycolor:"#fff",controlColor:"#fff",secondaryjourney:"#888",headerDirection:"column",headerHeight:"0px",headerHeightMobile:"0px",defaultBoardTop:"220px",boardMarginTop:"80px",placeDiviconSize:"0",errorcolor:"red",printBackgroundColor:"rgba(48,201,225,.1882352941)",warningcolor:"#ef662f",lineImageHeight:"20px",recommendedRoadsColor:"#6a0089",normalRoadsColor:"#8e3bee",discouragedRoadsColor:"#caaec9",textColor:"#58585a",borderXS:"rgba(0,0,0,.08)",hover:"#f9f9f9"}}},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return r[e].call(n.exports,n,n.exports,o),n.exports}o.m=r,o.amdO={},e=[],o.O=function(t,n,r,i){if(!n){var a=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],i=e[u][2];for(var l=!0,c=0;c<n.length;c++)(!1&i||a>=i)&&Object.keys(o.O).every((function(e){return o.O[e](n[c])}))?n.splice(c--,1):(l=!1,i<a&&(a=i));if(l){e.splice(u--,1);var s=r();void 0!==s&&(t=s)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,r,i]},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(t,n){return o.f[n](e,t),t}),[]))},o.u=function(e){return"assets/"+e+"."+{4:"b05e9c",17:"6cf20c",44:"e33534",47:"d4c01d",91:"00121c",94:"fa8f45",113:"462da9",154:"d28275",159:"45045b",201:"544212",248:"be11f1",271:"5c1e5e",273:"16ea9d",280:"f68637",321:"1fad29",356:"2a0855",377:"df4078",398:"131eba",421:"2c00c8",455:"4df38f",472:"a489b2",475:"c42e1c",576:"7fdf89",631:"f1e807",652:"b89eed",755:"302b7c",770:"2d3724",778:"fad3c5",801:"c036a5",802:"3ba32d",813:"c9cc39",824:"bd3179",848:"2a516b",943:"dcff7c",972:"ff1040",975:"b05972",981:"e53773",990:"90d007"}[e]+".chunk.js"},o.miniCssF=function(e){},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t={},n="shiva:",o.l=function(e,r,i,a){if(t[e])t[e].push(r);else{var l,c;if(void 0!==i)for(var s=document.getElementsByTagName("script"),u=0;u<s.length;u++){var d=s[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==n+i){l=d;break}}l||(c=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.setAttribute("data-webpack",n+i),l.src=e),t[e]=[r];var p=function(n,r){l.onerror=l.onload=null,clearTimeout(f);var i=t[e];if(delete t[e],l.parentNode&&l.parentNode.removeChild(l),i&&i.forEach((function(e){return e(r)})),n)return n(r)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=p.bind(null,l.onerror),l.onload=p.bind(null,l.onload),c&&document.head.appendChild(l)}},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e+"../"}(),function(){var e={792:0};o.f.j=function(t,n){var r=o.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise((function(n,i){r=e[t]=[n,i]}));n.push(r[2]=i);var a=o.p+o.u(t),l=new Error;o.l(a,(function(n){if(o.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;l.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",l.name="ChunkLoadError",l.type=i,l.request=a,r[1](l)}}),"chunk-"+t,t)}},o.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,i,a=n[0],l=n[1],c=n[2],s=0;if(a.some((function(t){return 0!==e[t]}))){for(r in l)o.o(l,r)&&(o.m[r]=l[r]);if(c)var u=c(o)}for(t&&t(n);s<a.length;s++)i=a[s],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(u)},n=self.webpackChunkshiva=self.webpackChunkshiva||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),o.nc=void 0;var a=o.O(void 0,[512,290],(function(){return o(7955)}));a=o.O(a)}();